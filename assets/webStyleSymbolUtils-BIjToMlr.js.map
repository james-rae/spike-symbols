{"version":3,"file":"webStyleSymbolUtils-BIjToMlr.js","sources":["../../node_modules/@arcgis/core/symbols/support/webStyleSymbolUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{isSymbol3D as t}from\"../../symbols.js\";import{isDevEnvironment as e,adjustStaticAGOUrl as r}from\"../../core/devEnvironmentUtils.js\";import l from\"../../core/Error.js\";import{urlToObject as o,removeFile as n}from\"../../core/urlUtils.js\";import s from\"../../portal/Portal.js\";import{f as i}from\"../../chunks/persistableUrlUtils.js\";import{fromJSON as m}from\"./jsonUtils.js\";import a from\"./StyleOrigin.js\";import{fetchStyle as u,requestJSON as p,makeCIMSymbolRef as f,Style2DUrlTemplate as y,symbolUrlFromStyleItem as c}from\"./styleUtils.js\";import{Thumbnail as b}from\"./Thumbnail.js\";function g(t,e,r,o){const n=t.name;return null==n?Promise.reject(new l(\"symbolstyleutils:style-symbol-reference-name-missing\",\"Missing name in style symbol reference\")):\"Esri2DPointSymbolsStyle\"===t.styleName?d(n,e,o):u(t,e,o).then((t=>h(t,n,e,r,c,o)))}function j(t,e){return e.items.find((e=>e.name===t))}function h(u,y,c,g,h,d){const U=null!=c?.portal?c.portal:s.getDefault(),N={portal:U,url:o(u.baseUrl),origin:\"portal-item\"},w=j(y,u.data);if(!w){const t=`The symbol name '${y}' could not be found`;return Promise.reject(new l(\"symbolstyleutils:symbol-name-not-found\",t,{symbolName:y}))}let S=i(h(w,g),N),D=w.thumbnail?.href??null;const O=w.thumbnail?.imageData;e()&&(S=r(S)??\"\",D=r(D));const P={portal:U,url:o(n(S)),origin:\"portal-item\"};return p(S,d).then((e=>{const r=\"cimRef\"===g?f(e.data):e.data,l=m(r,P);if(l&&t(l)){if(D){const t=i(D,N);l.thumbnail=new b({url:t})}else O&&(l.thumbnail=new b({url:`data:image/png;base64,${O}`}));u.styleUrl?l.styleOrigin=new a({portal:c.portal,styleUrl:u.styleUrl,name:y}):u.styleName&&(l.styleOrigin=new a({portal:c.portal,styleName:u.styleName,name:y}))}return l}))}function d(t,e,r){const l=y.replaceAll(/\\{SymbolName\\}/gi,t),i=null!=e.portal?e.portal:s.getDefault();return p(l,r).then((t=>{const e=f(t.data);return m(e,{portal:i,url:o(n(l)),origin:\"portal-item\"})}))}export{h as fetchSymbolFromStyle,j as getStyleItemFromStyle,g as resolveWebStyleSymbol};\n"],"names":["g","r","o","l","d","u","t","h","c","j","e","y","U","s","N","w","S","i","D","_a","O","_b","P","n","p","f","m","b","a"],"mappings":"iVAI8kB,SAASA,EAAE,EAAE,EAAEC,EAAEC,EAAE,CAAC,MAAM,EAAE,EAAE,KAAK,OAAa,GAAN,KAAQ,QAAQ,OAAO,IAAIC,EAAE,uDAAuD,wCAAwC,CAAC,EAA8B,EAAE,YAA9B,0BAAwCC,EAAE,EAAE,EAAEF,CAAC,EAAEG,EAAE,EAAE,EAAEH,CAAC,EAAE,KAAMI,GAAGC,EAAED,EAAE,EAAE,EAAEL,EAAEO,EAAEN,CAAC,CAAC,CAAE,CAAC,SAASO,EAAE,EAAE,EAAE,CAAC,OAAO,EAAE,MAAM,KAAMC,GAAGA,EAAE,OAAO,CAAC,CAAE,CAAC,SAASH,EAAEF,EAAEM,EAAEH,EAAER,EAAEO,EAAEH,EAAE,SAAC,MAAMQ,GAAQJ,GAAAA,YAAAA,EAAG,SAAT,KAAgBA,EAAE,OAAOK,EAAE,WAAU,EAAGC,EAAE,CAAC,OAAOF,EAAE,IAAIV,EAAEG,EAAE,OAAO,EAAE,OAAO,aAAa,EAAEU,EAAEN,EAAEE,EAAEN,EAAE,IAAI,EAAE,GAAG,CAACU,EAAE,CAAC,MAAMT,EAAE,oBAAoBK,CAAC,uBAAuB,OAAO,QAAQ,OAAO,IAAIR,EAAE,yCAAyCG,EAAE,CAAC,WAAWK,CAAC,CAAC,CAAC,CAAC,CAAC,IAAIK,EAAEC,EAAEV,EAAEQ,EAAEf,CAAC,EAAEc,CAAC,EAAEI,IAAEC,EAAAJ,EAAE,YAAF,YAAAI,EAAa,OAAM,KAAK,MAAMC,GAAEC,EAAAN,EAAE,YAAF,YAAAM,EAAa,UAAUX,EAAC,IAAKM,EAAEf,EAAEe,CAAC,GAAG,GAAGE,EAAEjB,EAAEiB,CAAC,GAAG,MAAMI,EAAE,CAAC,OAAOV,EAAE,IAAIV,EAAEqB,EAAEP,CAAC,CAAC,EAAE,OAAO,aAAa,EAAE,OAAOQ,EAAER,EAAEZ,CAAC,EAAE,KAAMM,GAAG,CAAC,MAAMT,EAAaD,IAAX,SAAayB,EAAEf,EAAE,IAAI,EAAEA,EAAE,KAAKP,EAAEuB,EAAEzB,EAAEqB,CAAC,EAAE,GAAGnB,GAAGG,EAAEH,CAAC,EAAE,CAAC,GAAGe,EAAE,CAAC,MAAMZ,EAAEW,EAAEC,EAAEJ,CAAC,EAAEX,EAAE,UAAU,IAAIwB,EAAE,CAAC,IAAIrB,CAAC,CAAC,CAAC,MAAMc,IAAIjB,EAAE,UAAU,IAAIwB,EAAE,CAAC,IAAI,yBAAyBP,CAAC,EAAE,CAAC,GAAGf,EAAE,SAASF,EAAE,YAAY,IAAIyB,EAAE,CAAC,OAAOpB,EAAE,OAAO,SAASH,EAAE,SAAS,KAAKM,CAAC,CAAC,EAAEN,EAAE,YAAYF,EAAE,YAAY,IAAIyB,EAAE,CAAC,OAAOpB,EAAE,OAAO,UAAUH,EAAE,UAAU,KAAKM,CAAC,CAAC,EAAE,CAAC,OAAOR,CAAC,CAAG,CAAA,CAAC,SAASC,EAAE,EAAE,EAAEH,EAAE,CAAC,MAAME,EAAEQ,EAAE,WAAW,mBAAmB,CAAC,EAAEM,EAAQ,EAAE,QAAR,KAAe,EAAE,OAAOJ,EAAE,WAAY,EAAC,OAAOW,EAAErB,EAAEF,CAAC,EAAE,KAAMK,GAAG,CAAC,MAAMI,EAAEe,EAAEnB,EAAE,IAAI,EAAE,OAAOoB,EAAEhB,EAAE,CAAC,OAAOO,EAAE,IAAIf,EAAEqB,EAAEpB,CAAC,CAAC,EAAE,OAAO,aAAa,CAAC,CAAC,CAAG,CAAA","x_google_ignoreList":[0]}