{"version":3,"file":"popupUtils-BPDFECES.js","sources":["../../node_modules/@arcgis/core/support/popupUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../PopupTemplate.js\";import{isFieldEditable as t,isRasterPixelValueField as n,getDisplayFieldName as i,isFieldVisibleByDefault as o}from\"../layers/support/fieldUtils.js\";import s from\"../popup/content/AttachmentsContent.js\";import\"../popup/content/Content.js\";import\"../popup/content/CustomContent.js\";import\"../popup/content/ExpressionContent.js\";import r from\"../popup/content/FieldsContent.js\";import\"../popup/content/MediaContent.js\";import\"../popup/content/RelationshipContent.js\";import\"../popup/content/TextContent.js\";import\"../popup/content/UtilityNetworkAssociationsContent.js\";import l from\"../popup/FieldInfo.js\";import a from\"../popup/support/FieldInfoFormat.js\";function p({displayField:t,editFieldsInfo:n,fields:i,objectIdField:o,title:s},r){if(!i)return null;const l=F({editFieldsInfo:n,fields:i,objectIdField:o},r);if(!l.length)return null;const a=I({titleBase:s,fields:i,displayField:t}),p=j();return new e({title:a,content:p,fieldInfos:l})}function u(t){const{fields:n,featureReduction:i,title:o}=t,s=i.fields;if(!s)return null;const r=g(s,n??[]);if(!r.length)return null;const l=C();return new e({title:o,content:l,fieldInfos:r})}function c(e){const{title:t,graphic:n}=e??{},{attributes:i,sourceLayer:o}=n??{},s=o&&\"displayField\"in o?o.displayField:null,r=s?i?.[s]:null,l=n?.getObjectId()?.toString();return t||r||l||\"\"}const d=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):o(e,t);function f({fields:e,ignoreFieldTypes:t,sortDisabled:n}){const i=e;return t&&(e=e.filter((e=>!t.includes(e.type)))),e===i&&(e=e.slice()),!0!==n&&e.sort(m),e}function m(e,t){return\"oid\"===e.type?-1:\"oid\"===t.type?1:v(e)?-1:v(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function b(e,t){return new r({fieldInfos:F(e,t).filter((e=>e.visible))})}function F(e,n){const i=n?.visibleFieldNames;return f({fields:e.fields??[],ignoreFieldTypes:n?.ignoreFieldTypes||S,sortDisabled:n?.sortDisabled}).map((n=>new l({fieldName:n.name,isEditable:t(n,e),label:n.alias,format:y(n),visible:d(n,{...e,visibleFieldNames:i})})))}function g(e,t){return e.map((e=>new l({fieldName:e.name,isEditable:!1,label:e.alias,format:w(e,t),visible:!0})))}function w(e,t){const{onStatisticField:n,onStatisticExpression:i,statisticType:o}=e;if(n){const e=t.find((e=>n===e.name));if(e)return y(e)}return\"number\"===i?.returnType?new a({digitSeparator:!0,places:2}):\"count\"===o?new a({digitSeparator:!0,places:0}):void 0}function y(e){switch(e.type){case\"small-integer\":case\"integer\":case\"single\":return new a({digitSeparator:!0,places:0});case\"double\":return new a({digitSeparator:!0,places:2});case\"string\":return n(e.name)?new a({digitSeparator:!0,places:0}):void 0;default:return}}function j(){return[new r,new s]}function C(){return[new r]}function I(e){const t=i(e),{titleBase:n}=e;return t?`${n}: {${t.trim()}}`:n??\"\"}function v(e){if(\"name\"===(e.name&&e.name.toLowerCase()))return!0;const t=e.alias?.toLowerCase();return\"name\"===t}const S=[\"geometry\",\"blob\",\"raster\",\"guid\",\"xml\"];export{F as createFieldInfos,b as createFieldsContent,p as createPopupTemplate,u as createPopupTemplateForFeatureReduction,c as getFeaturePopupTitle};\n"],"names":["p","t","n","i","o","s","r","l","F","a","I","j","e","c","_a","d","f","m","v","S","y"],"mappings":"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","x_google_ignoreList":[0]}