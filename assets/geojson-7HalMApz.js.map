{"version":3,"file":"geojson-7HalMApz.js","sources":["../../node_modules/@arcgis/core/layers/graphics/sources/geojson/geojson.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{isISO8601Date as e}from\"../../../../core/date.js\";import t from\"../../../../core/Error.js\";import{isWGS84 as n}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{OptimizedFeature as o}from\"../../OptimizedFeature.js\";import r from\"../../OptimizedGeometry.js\";import{normalizeFieldName as i,isNumericField as s}from\"../../../support/fieldUtils.js\";const c={LineString:\"esriGeometryPolyline\",MultiLineString:\"esriGeometryPolyline\",MultiPoint:\"esriGeometryMultipoint\",Point:\"esriGeometryPoint\",Polygon:\"esriGeometryPolygon\",MultiPolygon:\"esriGeometryPolygon\"};function u(e){return c[e]}function*l(e){switch(e.type){case\"Feature\":yield e;break;case\"FeatureCollection\":for(const t of e.features)t&&(yield t)}}function*f(e){if(e)switch(e.type){case\"Point\":yield e.coordinates;break;case\"LineString\":case\"MultiPoint\":yield*e.coordinates;break;case\"MultiLineString\":case\"Polygon\":for(const t of e.coordinates)yield*t;break;case\"MultiPolygon\":for(const t of e.coordinates)for(const e of t)yield*e}}function*p(e,t={}){const{geometryType:n,objectIdField:i}=t;for(const s of e){const{geometry:e,properties:c,id:l}=s;if(e&&u(e.type)!==n)continue;const f=c||{};let p;i&&(p=f[i],null==l||p||(f[i]=p=l));const a=new o(e?h(new r,e,t):null,f,null,p??void 0);yield a}}function a(e){for(const t of e)if(t.length>2)return!0;return!1}function y(e){return!g(e)}function d(e){return g(e)}function g(e){let t=0;for(let n=0;n<e.length;n++){const o=e[n],r=e[(n+1)%e.length];t+=o[0]*r[1]-r[0]*o[1]}return t<=0}function m(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function h(e,t,n){switch(t.type){case\"LineString\":return w(e,t,n);case\"MultiLineString\":return P(e,t,n);case\"MultiPoint\":return j(e,t,n);case\"MultiPolygon\":return b(e,t,n);case\"Point\":return S(e,t,n);case\"Polygon\":return F(e,t,n)}}function w(e,t,n){return M(e,t.coordinates,n),e}function P(e,t,n){for(const o of t.coordinates)M(e,o,n);return e}function j(e,t,n){return M(e,t.coordinates,n),e}function b(e,t,n){for(const o of t.coordinates){G(e,o[0],n);for(let t=1;t<o.length;t++)k(e,o[t],n)}return e}function S(e,t,n){return O(e,t.coordinates,n),e}function F(e,t,n){const o=t.coordinates;G(e,o[0],n);for(let r=1;r<o.length;r++)k(e,o[r],n);return e}function G(e,t,n){const o=m(t);y(o)?T(e,o,n):M(e,o,n)}function k(e,t,n){const o=m(t);d(o)?T(e,o,n):M(e,o,n)}function M(e,t,n){for(const o of t)O(e,o,n);e.lengths.push(t.length)}function T(e,t,n){for(let o=t.length-1;o>=0;o--)O(e,t[o],n);e.lengths.push(t.length)}function O(e,t,n){const[o,r,i]=t;e.coords.push(o,r),n.hasZ&&e.coords.push(i||0)}function L(t){switch(typeof t){case\"string\":return e(t)?\"esriFieldTypeDate\":\"esriFieldTypeString\";case\"number\":return\"esriFieldTypeDouble\";default:return\"unknown\"}}function E(e,o=4326){if(!e)throw new t(\"geojson-layer:empty\",\"GeoJSON data is empty\");if(\"Feature\"!==e.type&&\"FeatureCollection\"!==e.type)throw new t(\"geojson-layer:unsupported-geojson-object\",\"missing or not supported GeoJSON object type\",{data:e});const{crs:r}=e;if(!r)return;const i=\"string\"==typeof r?r:\"name\"===r.type?r.properties.name:\"EPSG\"===r.type?r.properties.code:null,s=n({wkid:o})?new RegExp(\".*(CRS84H?|4326)$\",\"i\"):new RegExp(`.*(${o})$`,\"i\");if(!i||!s.test(i))throw new t(\"geojson:unsupported-crs\",\"unsupported GeoJSON 'crs' member\",{crs:r})}function I(e,t={}){const n=[],o=new Set,r=new Set;let c,p=!1,y=null,d=!1,{geometryType:g=null}=t;for(const s of l(e)){const{geometry:e,properties:t,id:l}=s;if(!e||(g||(g=u(e.type)),u(e.type)===g)){if(!p){p=a(f(e))}if(d||(d=null!=l,d&&(c=typeof l,t&&(y=Object.keys(t).filter((e=>t[e]===l))))),t&&y&&d&&null!=l&&(y.length>1?y=y.filter((e=>t[e]===l)):1===y.length&&(y=t[y[0]]===l?y:[])),t)for(const e in t){if(o.has(e))continue;const s=L(t[e]);if(\"unknown\"===s){r.add(e);continue}r.delete(e),o.add(e);const c=i(e);c&&n.push({name:c,alias:e,type:s})}}}const m=i(1===y?.length&&y[0]||null)??void 0;if(m)for(const i of n)if(i.name===m&&s(i)){i.type=\"esriFieldTypeOID\";break}return{fields:n,geometryType:g,hasZ:p,objectIdFieldName:m,objectIdFieldType:c,unknownFields:Array.from(r)}}function N(e,t){return Array.from(p(l(e),t))}export{N as createOptimizedFeatures,u as getGeometryType,I as inferLayerProperties,E as validateGeoJSON};\n"],"names":["c","u","e","l","t","f","p","n","i","s","o","h","r","a","y","g","d","m","w","P","j","b","S","F","M","G","k","O","T","L","E","I","N"],"mappings":"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","x_google_ignoreList":[0]}