{"version":3,"file":"diffUtils-ObaWOk_n.js","sources":["../../node_modules/@arcgis/core/core/accessorSupport/diffUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport t from\"../Accessor.js\";import e from\"../Collection.js\";import{getProperties as n}from\"./utils.js\";const o=new Set([\"esri.Color\",\"esri.portal.Portal\",\"esri.symbols.support.Symbol3DAnchorPosition2D\",\"esri.symbols.support.Symbol3DAnchorPosition3D\"]);function r(e){return e instanceof t}function f(t){return t instanceof e?Object.keys(t.items):r(t)?n(t).keys():t?Object.keys(t):[]}function i(t,n){return t instanceof e?t.items[n]:t[n]}function l(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function u(t){return t?t.declaredClass:null}function c(t,e){const n=t.diff;if(n&&\"function\"==typeof n)return n(t,e);const s=f(t),p=f(e);if(0===s.length&&0===p.length)return;if(!s.length||!p.length||l(t,e))return{type:\"complete\",oldValue:t,newValue:e};const a=p.filter((t=>!s.includes(t))),y=s.filter((t=>!p.includes(t))),d=s.filter((n=>p.includes(n)&&i(t,n)!==i(e,n))).concat(a,y).sort(),m=u(t);if(m&&o.has(m)&&d.length)return{type:\"complete\",oldValue:t,newValue:e};let h;const b=r(t)&&r(e);for(const o of d){const r=i(t,o),f=i(e,o);let l;if((b||\"function\"!=typeof r&&\"function\"!=typeof f)&&(r!==f&&(null!=r||null!=f))){if(n&&n[o]&&\"function\"==typeof n[o])l=n[o]?.(r,f);else if(r instanceof Date&&f instanceof Date){if(r.getTime()===f.getTime())continue;l={type:\"complete\",oldValue:r,newValue:f}}else l=\"object\"==typeof r&&\"object\"==typeof f&&u(r)===u(f)?c(r,f):{type:\"complete\",oldValue:r,newValue:f};null!=l&&(null!=h?h.diff[o]=l:h={type:\"partial\",diff:{[o]:l}})}}return h}function s(t,e){return p(t,e)}function p(t,e){if(null==t)return!1;const n=e.split(\".\");let o=t;for(const r of n){if(\"complete\"===o.type)return!0;if(\"partial\"!==o.type)return!1;{const t=o.diff[r];if(!t)return!1;o=t}}return!0}function a(t,e){for(const n of e)if(p(t,n))return!0;return!1}function y(t,e){if(!t)return!1;if(\"partial\"===t.type){const n=Object.keys(t.diff);return 1===n.length&&n[0]===e}return!1}function d(t,e){if(\"function\"!=typeof t&&\"function\"!=typeof e&&(null!=t||null!=e))return null==t||null==e||\"object\"==typeof t&&\"object\"==typeof e&&u(t)!==u(e)?{type:\"complete\",oldValue:t,newValue:e}:c(t,e)}function m(t){if(null==t)return!0;switch(t.type){case\"complete\":return!1;case\"collection\":{const e=t;for(const t of e.added)if(!m(t))return!1;for(const t of e.removed)if(!m(t))return!1;for(const t of e.changed)if(!m(t))return!1;return!0}case\"partial\":for(const e in t.diff){if(!m(t.diff[e]))return!1}return!0}}export{d as diff,p as hasDiff,a as hasDiffAny,s as hasRootDiff,y as hasRootDiffOnly,m as isEmpty};\n"],"names":["o","r","t","f","e","n","i","l","u","c","s","p","a","y","h","b","_a","d"],"mappings":"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","x_google_ignoreList":[0]}