const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./IdentityManager-C5QrPZyK.js","./substitute-DKD-8mSu.js","./pe-wasm-ihfvgCko.js","./_commonjsHelpers-DCkdB7M8.js","./ElevationLayer-d8LyzoJU.js","./MultiOriginJSONSupport-CF9SEMGl.js","./ArcGISCachedService-BrOKsDs1.js","./TileInfoTilemapCache-DSU4Qt2m.js","./TilemapCache-DVeW1Ktn.js","./ByteSizeUnit-BsxeN7wM.js","./LRUCache-LcfJ3jIy.js","./ArcGISService-B90ElZ2X.js","./OperationalLayer-DFF1tvhw.js","./commonProperties-Bg_7mhO_.js","./PortalLayer-CzvBu_jL.js","./portalItemUtils-CnTMziNf.js","./layersCreator-DzITB28n.js","./portalLayers-mBdXUtG5.js","./associatedFeatureServiceUtils-DRqWdrvn.js","./fetchService-82N6TycT.js","./styleUtils-5eICvDCs.js","./arcgisLayers-DEOHuHE_.js","./statsWorker-BxPlzQyV.js","./utils-BmCdcwSX.js","./quantizationUtils-EnfPALPv.js","./heatmapUtils-7-1kyJ5b.js","./vec42-CGd3qQJJ.js","./vec4f64-CMoMXWBi.js","./utils-SHizMRFZ.js","./utils-BIMTktEB.js","./ClassBreaksDefinition-BDriidlr.js","./geometryEngineWorker-BiqU-FdE.js","./geometryEngineJSON-BwrklJA_.js","./geometryEngineBase-yFIvKOkM.js","./json-Wa8cmqdu.js","./CSVSourceWorker-Bk3iR8qy.js","./date-DLgTylpo.js","./OptimizedFeature-D3320lj0.js","./FeatureStore-k6EEOmhU.js","./featureConversionUtils-BxDN9gkv.js","./OptimizedFeatureSet-Blu9Ckm7.js","./BoundsStore-C725ZusS.js","./PooledRBush-DZxXC49k.js","./timeSupport-C5fg3loK.js","./queryUtils-C-LTqSVD.js","./optimizedFeatureQueryEngineAdapter-BiRGmhIT.js","./QueryEngine-Be-GotER.js","./WhereClause-CdjqOpWH.js","./TimeOnly-CLsZxU64.js","./UnknownTimeZone-Cjcij_vG.js","./QueryEngineCapabilities-DjYb9CEb.js","./FieldsIndex-iG3PpdUf.js","./number-ColPpShx.js","./clientSideDefaults-CkAjXC4A.js","./capabilities-Y9lFlGVh.js","./defaultsJSON-GKolV7NZ.js","./EdgeProcessingWorker-Bo8B3OpA.js","./InterleavedLayout-Cgmkio6O.js","./BufferView-Bcke57oO.js","./types-D0PSWh4d.js","./Util-Bhx86tqm.js","./edgeProcessing-C4Y3RNlZ.js","./deduplicate-VBWGFxRw.js","./Indices-BX16Wwbs.js","./VertexAttribute-BdZWZuT1.js","./glUtil-CTdG4nqg.js","./VertexElementDescriptor-BOD-G50G.js","./ElevationSamplerWorker-B5kOkSEw.js","./MeshLocalVertexSpace-Bu4zF7me.js","./vertexSpaceConversion-CSGNOoGO.js","./mat3f64-q3fE-ZOt.js","./mat4f64-CSKppSlJ.js","./spatialReferenceEllipsoidUtils-CHH0_lWj.js","./computeTranslationToOriginAndRotation-BOZ_GIsK.js","./projectPointToVector--Cyjh7Yj.js","./meshVertexSpaceUtils-Bw0fuhv2.js","./vec3-Do4v7_LQ.js","./vec4-Dygmqec3.js","./FeatureServiceSnappingSourceWorker-FtUyxiTu.js","./pbfQueryUtils-B4wItXS2.js","./pbf-CCxG-t_w.js","./query-BbR5Y2Ua.js","./queryZScale-D-hT_tjP.js","./GeoJSONSourceWorker-BTBQmWAF.js","./geojson-7HalMApz.js","./sourceUtils-ooVYiBHP.js","./MemorySourceWorker-rSyVxR9G.js","./objectIdUtils-4dd1rf9p.js","./PBFDecoderWorker-DURL5EdV.js","./FeaturePipelineWorker-Bd8DC2ij.js","./diffUtils-ObaWOk_n.js","./AttributeStore-Cj_89wZQ.js","./LabelMetric-PHKs_pq8.js","./enums-CmIX1y88.js","./Program-Cxdj17lW.js","./BufferObject-CSPERlzr.js","./UpdateTracking2D-CrEvi5Z7.js","./BidiEngine-DNnuvc1i.js","./GeometryUtils-Cqj9IHCf.js","./utils-Bgq9-INc.js","./Rect-CUzevAry.js","./defaults-CBYGZvbD.js","./BindType-BmZEZMMh.js","./labelUtils-BzX0145M.js","./MeshWriterRegistry-UzhCvvzw.js","./PieChartMeshWriter-D30Xahn7.js","./TurboLine-4mk0qIaN.js","./earcut-Lltz9D9k.js","./constants-F8oTIn7N.js","./grouping-DiIDlUsI.js","./ogcFeatureUtils-DvAqyoLH.js","./CircularArray-CujHzHWW.js","./createConnection-D3I7lEnP.js","./PointCloudWorker-DL5W3l01.js","./quat-DYDZvbwA.js","./quatf64-aQ5IuZRd.js","./vec3f32-nZdmKIgz.js","./PointCloudUniqueValueRenderer-BzUB_YBy.js","./ColorStop-DbeLVLMk.js","./I3SBinaryReader-2jgw4U0b.js","./orientedBoundingBox-3rKw2mcv.js","./plane-DEB6D17h.js","./RasterWorker-D6ecAU5L.js","./dataUtils-BtLLDjBX.js","./RasterSymbolizer-LFMVpBi6.js","./colorUtils-CxpR8kgL.js","./PolynomialTransform-Wuee7Iu3.js","./rasterProjectionHelper-DzVI2BNP.js","./colorRamps-D2XGA5co.js","./SceneLayerSnappingSourceWorker-ClMiaWF8.js","./lineSegment-BdV1phai.js","./sphere-Ds6-k66c.js","./Octree-Br2SnreU.js","./SceneLayerWorker-B_sO5P6r.js","./I3SUtil-O17OjvWQ.js","./projectVectorToVector-Bx6ZFVZc.js","./floatRGBA-CfouSdH2.js","./NormalAttribute.glsl-DscT8gSF.js","./interfaces-DDtDqZYj.js","./WFSSourceWorker-DsdU_RWi.js","./wfsUtils-DD_X9j-S.js","./xmlUtils-CtUoQO7q.js","./WorkerTileHandler-Delf4Osj.js","./enums-BRzLM11V.js","./config-MDUrh2eL.js","./StyleDefinition-BTt_i6C1.js","./SourceLayerData-CQNlwaK1.js","./StyleRepository-Bm_y65cK.js","./HUDMaterial.glsl-B09z2H0q.js","./AttributeArray-CO21Kz1A.js","./requestImageUtils-B2SA1p26.js","./basicInterfaces-CZwQPxTp.js","./AlphaCutoff-UcccL64p.js","./boundedPlane-BXyJglgF.js","./renderState-CPSwhhVh.js","./doublePrecisionUtils-B0owpBza.js","./NestedMap-GuqgquCN.js","./IntersectorInterfaces-dI_rFEZm.js","./VertexArrayObject-DAMe4oiC.js","./triangle-BAtbGc8Z.js","./Popup-CGnzxbZB.js","./ReactiveSet-CfSzqm-e.js","./AttachmentInfo-Eqbh-ihC.js","./featureLayerUtils-Cwh8eKuP.js","./jsonUtils-B7oYZIeQ.js","./UniqueValueRenderer-DpnAQyVY.js","./sizeVariableUtils-Cmcuvw-4.js","./visualVariableUtils-ap8FYP_g.js","./jsonUtils-B6BNTLPc.js","./styleUtils-Cj5AxdUy.js","./OverrideHelper-BY3qVKDN.js","./utils-C-AEPX7f.js","./cimSymbolUtils-sW4dnx__.js","./executeQueryJSON-CkNjVEXG.js","./FeatureSet-C2IOSXSk.js","./shared-CvLoc2Fx.js","./FeatureLayer-CSLVU9vS.js","./FeatureLayerBase-D8a01MTD.js","./LayerFloorInfo-CKSnSMnn.js","./Relationship-DYSC4HOL.js","./serviceCapabilitiesUtils-ljk_p2-0.js","./editsZScale-BVzk2_66.js","./APIKeyMixin-CQcQ7xYE.js","./CustomParametersMixin-C6za5FFb.js","./EditBusLayer-Bv_F4e5M.js","./FeatureEffectLayer-D5B0ef_V.js","./FeatureEffect-CGoK9m7D.js","./FeatureReductionLayer-w2DTDWFa.js","./FeatureReductionSelection-ZSpOH3PJ.js","./labelingInfo-BHD6jdLj.js","./MD5-C9MwAd2G.js","./OrderedLayer-Bd_0ZRO3.js","./OrderByInfo-lVyN74vC.js","./RefreshableLayer-Bh-aUUkw.js","./TemporalLayer-f50zMkoH.js","./TimeInfo-Co3vZhp5.js","./FeatureTemplate-DwdLfW6V.js","./FeatureType-3wlBENoF.js","./fieldProperties-BV6LyrWQ.js","./versionUtils-BC3iB0PG.js","./popupUtils-BPDFECES.js","./interfaces-CL2NbQte.js","./layerViewUtils-BVBGw69c.js","./arcadeUtils-en8esx6j.js","./languageUtils-C4OZehN3.js","./ImmutableArray-BPVd6ESQ.js","./webStyleSymbolUtils-BIjToMlr.js","./devEnvironmentUtils-CnNDiFMM.js","./geometryServiceUtils-NKgKNJc-.js","./project-BJCL9etA.js","./webglDeps-BPFbcozq.js","./ProgramTemplate-DplDQ5RO.js","./mapViewDeps-DdTqYDFr.js","./FeatureCommandQueue-_nes6LKT.js","./WGLContainer-CImgX_CT.js","./Container-1jIGcClG.js","./SDFHelper-BMjbs0dG.js","./GridShader-CQSnc9Sq.js","./testSVGPremultipliedAlpha-CAT16COA.js","./RenderingContext-9ORI7TXx.js","./rasterizingUtils-DtZxVCVW.js","./utils-BdUHx2sf.js","./GraphicsView2D-CeCRWDOT.js","./normalizeUtilsSync-Dq-_EcbJ.js","./GraphicContainer-CxMvBzO8.js","./AGraphicContainer-DhZ_oX5G.js","./TechniqueInstance-C9q2IBzz.js","./TileContainer-D9ca65vC.js","./scaleUtils-YKMhrdEs.js","./geodesicUtils-BC7KYWd2.js","./TileLayerView2D-Ci7iLVgz.js","./imageUtils-BxnWw91F.js","./Bitmap-DnEglIPE.js","./LayerView-Dj9UmBBt.js","./HighlightGraphicContainer-CpZXSlCV.js","./RefreshableLayerView-CnIYAbdI.js","./MapServiceLayerViewHelper-Cv7BrKDc.js","./floorFilterUtils-DZ5C6FQv.js","./drapedUtils-8cz5tEVP.js","./sublayerUtils-CU9E7VJK.js","./popupUtils-Dx_dBhNf.js","./FeatureLayerView2D-Bx-K5G1p.js","./timeSupport-D7EE4ucc.js","./HighlightCounter-Czi-fdpx.js","./BaseDynamicLayerView2D-RPpsv_ql.js","./BitmapContainer-CDhpkKUe.js","./ExportStrategy-Jo4SeAXR.js","./CatalogLayerView2D-hKwL3Az7.js","./CatalogDynamicGroupLayerView2D-D4aYcSHP.js","./CatalogFootprintLayerView2D-DI2NGBl0.js","./GeoRSSLayerView2D-B50k_XTa.js","./GraphicsLayerView2D-iUuB49dk.js","./GroupLayerView2D-BoBoCUKm.js","./ImageryLayerView2D-CM790Qdi.js","./RasterVFDisplayObject-kqCcufD7.js","./ImageryTileLayerView2D-C1ypTTtK.js","./multidimensionalUtils-DXtgt8iN.js","./rasterUtils-DnH-5F-V.js","./RawBlockCache-ChJbXanw.js","./KMLLayerView2D-C4PIbTOQ.js","./kmlUtils-Dikj_ovB.js","./KnowledgeGraphLayerView2D-DVe54mPw.js","./MapImageLayerView2D-y1J1y9uD.js","./ExportImageParameters-Cm37Ug4c.js","./MapNotesLayerView2D-CloolDTR.js","./MediaLayerView2D-BKdg1yJB.js","./perspectiveUtils-D4vOI--6.js","./OverlayContainer-8qFlCQtp.js","./OGCFeatureLayerView2D-DJkZm3_4.js","./RouteLayerView2D-C3iTEHHj.js","./Stop-DlFo43HP.js","./StreamLayerView2D-DkF9U9jo.js","./SubtypeGroupLayerView2D-ChcSbNaR.js","./VectorTileLayerView2D-D_Bk8Qm2.js","./VideoLayerView2D-Da9xtjff.js","./TelemetryDisplay-Ce3aa753.js","./WMSLayerView2D-BRDqAa9B.js","./ExportWMSImageParameters-BH0dXeCS.js","./WMTSLayerView2D-BIcJIby3.js","./apng-DAS7ufoP.js","./calcite-button-C9LnpIc6.js","./form-B5yp-Ytt.js","./dom-ChkmTjy7.js","./interactive-D-z7nX7N.js","./label-DVmsv_ex.js","./component-6CIDVndn.js","./loadable-DzUbAZkB.js","./locale-BJLAJCir.js","./key-D63ExP77.js","./observers-C4fkpiCB.js","./t9n-CXOZIE4J.js","./icon-HSfkk8MY.js","./loader-CsGfPN-p.js","./guid-BxSjQh8J.js","./calcite-icon-Dal3otMh.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=r(s);fetch(s.href,n)}})();function u(e,t,r,i){var s,n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o}function zX(e,t){return function(r,i){t(r,i,e)}}function BX(e,t,r,i){function s(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function a(p){try{h(i.next(p))}catch(f){o(f)}}function l(p){try{h(i.throw(p))}catch(f){o(f)}}function h(p){p.done?n(p.value):s(p.value).then(a,l)}h((i=i.apply(e,[])).next())})}const OC="modulepreload",PC=function(e,t){return new URL(e,t).href},gw={},j=function(t,r,i){let s=Promise.resolve();if(r&&r.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(h=>{if(h=PC(h,i),h in gw)return;gw[h]=!0;const p=h.endsWith(".css"),f=p?'[rel="stylesheet"]':"";if(!!i)for(let v=o.length-1;v>=0;v--){const _=o[v];if(_.href===h&&(!p||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${f}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":OC,p||(y.as="script"),y.crossOrigin="",y.href=h,l&&y.setAttribute("nonce",l),document.head.appendChild(y),p)return new Promise((v,_)=>{y.addEventListener("load",v),y.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${h}`)))})}))}function n(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&n(a.reason);return t().catch(n)})};let mn;function I(e){return typeof mn[e]=="function"?mn[e]=mn[e](globalThis):mn[e]}var lT,cT,uT,hT;mn=(lT=globalThis.dojoConfig)!=null&&lT.has||(cT=globalThis.esriConfig)!=null&&cT.has?{...(uT=globalThis.dojoConfig)==null?void 0:uT.has,...(hT=globalThis.esriConfig)==null?void 0:hT.has}:{},I.add=(e,t,r,i)=>{(i||mn[e]===void 0)&&(mn[e]=t),r&&I(e)},I.cache=mn,I.add("big-integer-warning-enabled",!0),I.add("esri-deprecation-warnings",!0),I.add("esri-tests-disable-screenshots",!1),I.add("esri-tests-use-full-window",!1),I.add("esri-tests-post-to-influx",!0),I.add("esri-cim-animations-enable-status","enabled"),I.add("esri-cim-animations-spotlight",!1),I.add("esri-cim-animations-freeze-time",!1),I.add("enable-feature:multiple-highlights",!1),(()=>{var t;I.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(I.add("host-browser",e),I.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),I.add("dom",e),I("host-browser")){const r=navigator,i=r.userAgent,s=r.appVersion,n=parseFloat(s);if(I.add("wp",parseFloat(i.split("Windows Phone")[1])||void 0),I.add("msapp",parseFloat(i.split("MSAppHost/")[1])||void 0),I.add("khtml",s.includes("Konqueror")?n:void 0),I.add("edge",parseFloat(i.split("Edge/")[1])||void 0),I.add("opr",parseFloat(i.split("OPR/")[1])||void 0),I.add("webkit",!I("wp")&&!I("edge")&&parseFloat(i.split("WebKit/")[1])||void 0),I.add("chrome",!I("edge")&&!I("opr")&&parseFloat(i.split("Chrome/")[1])||void 0),I.add("android",!I("wp")&&parseFloat(i.split("Android ")[1])||void 0),I.add("safari",!s.includes("Safari")||I("wp")||I("chrome")||I("android")||I("edge")||I("opr")?void 0:parseFloat(s.split("Version/")[1])),I.add("mac",s.includes("Macintosh")),!I("wp")&&/(iPhone|iPod|iPad)/.test(i)){const o=RegExp.$1.replace(/P/,"p"),a=/OS ([\d_]+)/.test(i)?RegExp.$1:"1",l=parseFloat(a.replace(/_/,".").replaceAll("_",""));I.add(o,l),I.add("ios",l)}I("webkit")||(!i.includes("Gecko")||I("wp")||I("khtml")||I("edge")||I.add("mozilla",n),I("mozilla")&&I.add("ff",parseFloat(i.split("Firefox/")[1]||i.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),r=/iPhone/i.test(e);t&&I.add("esri-mobile",t),r&&I.add("esri-iPhone",r),I.add("esri-geolocation",!!navigator.geolocation)}I.add("esri-wasm","WebAssembly"in globalThis),I.add("esri-performance-mode-frames-between-render",20),I.add("esri-force-performance-mode",!1),I.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),I.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),I.add("esri-atomics","Atomics"in globalThis),I.add("esri-workers","Worker"in globalThis),I.add("web-feat:cache","caches"in globalThis),I.add("esri-workers-arraybuffer-transfer",!I("safari")||Number(I("safari"))>=12),I.add("workers-pool-size",8),I.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),I.add("featurelayer-simplify-payload-size-factors",[1,1,4]),I.add("featurelayer-fast-triangulation-enabled",!0),I.add("featurelayer-animation-enabled",!0),I.add("featurelayer-snapshot-enabled",!0),I.add("featurelayer-snapshot-point-min-threshold",8e4),I.add("featurelayer-snapshot-point-max-threshold",4e5),I.add("featurelayer-snapshot-point-coverage",.1),I.add("featurelayer-query-max-depth",4),I.add("featurelayer-query-pausing-enabled",!1),I.add("featurelayer-advanced-symbols",!1),I.add("featurelayer-pbf",!0),I.add("featurelayer-pbf-statistics",!1),I.add("feature-layers-workers",!0),I.add("feature-polyline-generalization-factor",1),I.add("mapview-transitions-duration",200),I.add("mapview-essential-goto-duration",200),I.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),I.add("mapserver-pbf-version-support",10.81),I.add("mapservice-popup-identify-max-tolerance",20),I("host-webworker")||I("host-browser")&&(I.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),I.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{I.add("esri-image-decode",!0,!0,!0)}).catch(()=>{I.add("esri-image-decode",!1,!0,!0)})}return!1}),I.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();let cd=class Jn{constructor(t=1){this._seed=t}set seed(t){this._seed=t??Math.random()*Jn._m}getInt(){return this._seed=(Jn._a*this._seed+Jn._c)%Jn._m,this._seed}getFloat(){return this.getInt()/(Jn._m-1)}getIntRange(t,r){return Math.round(this.getFloatRange(t,r))}getFloatRange(t,r){const i=r-t;return t+this.getInt()/Jn._m*i}};cd._m=2147483647,cd._a=48271,cd._c=0;const RC=1.5,HX=1/RC,WX=.5;function qX(e,t){return t?e.filter((r,i,s)=>s.findIndex(t.bind(null,r))===i):Array.from(new Set(e))}function _f(e,t,r){if(e==null&&t==null)return!0;if(e==null||t==null||e.length!==t.length)return!1;if(r){for(let i=0;i<e.length;i++)if(!r(e[i],t[i]))return!1}else for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function vw(e,t,r){let i,s;return r?(i=t.filter(n=>!e.some(o=>r(o,n))),s=e.filter(n=>!t.some(o=>r(o,n)))):(i=t.filter(n=>!e.includes(n)),s=e.filter(n=>!t.includes(n))),{added:i,removed:s}}function ZX(e){return e&&typeof e.length=="number"}let gT=class{constructor(){this.last=0}};const vT=new gT;function ky(e,t,r,i){i=i||vT;const s=Math.max(0,i.last-10);for(let o=s;o<r;++o)if(e[o]===t)return i.last=o,o;const n=Math.min(s,r);for(let o=0;o<n;++o)if(e[o]===t)return i.last=o,o;return-1}function CC(e,t,r,i){const s=e.length,n=ky(e,t,s,i);if(n!==-1)return e[n]=e[s-1],e.pop(),t}const zr=new Set;function kC(e,t,r=e.length,i=t.length,s,n){if(i===0||r===0)return r;zr.clear();for(let a=0;a<i;++a)zr.add(t[a]);s=s||vT;const o=Math.max(0,s.last-10);for(let a=o;a<r;++a)if(zr.has(e[a])&&(n==null||n.push(e[a]),zr.delete(e[a]),e[a]=e[r-1],--r,--a,zr.size===0||r===0))return zr.clear(),r;for(let a=0;a<o;++a)if(zr.has(e[a])&&(n==null||n.push(e[a]),zr.delete(e[a]),e[a]=e[r-1],--r,--a,zr.size===0||r===0))return zr.clear(),r;return zr.clear(),r}function JX(e,t){let r=0;for(let i=0;i<e.length;++i){const s=e[i];t(s,i)&&(e[r]=s,r++)}e.length=r}function NC(e){return e?(_w.seed=e,()=>_w.getFloat()):Math.random}function XX(e,t){const r=NC(t);for(let i=e.length-1;i>0;i--){const s=Math.floor(r()*(i+1)),n=e[i];e[i]=e[s],e[s]=n}return e}const _w=new cd;function _T(e,t){const r=e.indexOf(t);return r!==-1?(e.splice(r,1),t):null}function gu(e,t){return e!=null}function wT(e){return 32+e.length}function J1(){return 16}function KX(e){if(!e)return 0;let t=ST;for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];switch(typeof i){case"string":t+=wT(i);break;case"number":t+=J1();break;case"boolean":t+=4}}return t}function LC(e){if(!e)return 0;if(Array.isArray(e))return DC(e);let t=ST;for(const r in e)e.hasOwnProperty(r)&&(t+=bT(e[r]));return t}function DC(e){const t=e.length;if(t===0||typeof e[0]=="number")return 32+8*t;let r=$T;for(let i=0;i<t;i++)r+=bT(e[i]);return r}function bT(e){switch(typeof e){case"object":return LC(e);case"string":return wT(e);case"number":return J1();case"boolean":return 4;default:return 8}}function FC(e,t){return $T+e.length*t}const ST=32,$T=16;function QX(e){return e instanceof ArrayBuffer}function X1(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int8Array"}function TT(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8Array"}function ET(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8ClampedArray"}function K1(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int16Array"}function MT(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint16Array"}function Q1(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int32Array"}function xT(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint32Array"}function wf(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float32Array"}function bf(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float64Array"}function AT(e){return!("buffer"in e)}function eK(...e){return e.reduce((t,r)=>t+(r?AT(r)?FC(r,J1()):r.byteLength+UC:0),0)}const UC=145,IT=1024;function tK(e){return bf(e)||wf(e)||Q1(e)||K1(e)||X1(e)}function rK(e){return bf(e)||wf(e)}function iK(e){return bf(e)?179769e303:wf(e)?3402823e32:xT(e)?4294967295:MT(e)?65535:TT(e)||ET(e)?255:Q1(e)?2147483647:K1(e)?32767:X1(e)?127:256}function jC(e,t){let r;for(r in e)e.hasOwnProperty(r)&&e[r]===void 0&&delete e[r];return e}function N(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=RT(e);if(t!=null)return t;if(dp(e))return e.clone();if(OT(e))return e.map(N);if(PT(e))return e.clone();const r={};for(const i of Object.getOwnPropertyNames(e))r[i]=N(e[i]);return r}function Ny(e){if(!e||typeof e!="object"||typeof e=="function"||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=RT(e);if(t!=null)return t;if(OT(e)){let r=!0;const i=e.map(s=>{const n=Ny(s);return s!=null&&n==null&&(r=!1),n});return r?i:null}if(dp(e))return e.clone();if(e instanceof File||e instanceof Blob)return e;if(!PT(e)){const r=new(Object.getPrototypeOf(e)).constructor;for(const i of Object.getOwnPropertyNames(e)){const s=e[i],n=Ny(s);if(s!=null&&n==null)return null;r[i]=n}return r}return null}function dp(e){return typeof e.clone=="function"}function OT(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function PT(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function ww(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function RT(e){if(X1(e)||TT(e)||ET(e)||K1(e)||MT(e)||Q1(e)||xT(e)||wf(e)||bf(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[r,i]of e)t.set(r,N(i));return t}if(e instanceof Set){const t=new Set;for(const r of e)t.add(N(r));return t}return null}function ev(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e==null?void 0:e.getTime)=="function"&&typeof(t==null?void 0:t.getTime)=="function"&&e.getTime()===t.getTime()||!1}function CT(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&_f(e,t):e instanceof Set?t instanceof Set&&VC(e,t):e instanceof Map?t instanceof Map&&zC(e,t):!!ww(e)&&ww(t)&&GC(e,t))}function GC(e,t){if(e===null||t===null)return!1;const r=Object.keys(e);if(t===null||Object.keys(t).length!==r.length)return!1;for(const i of r)if(e[i]!==t[i]||!Object.prototype.hasOwnProperty.call(t,i))return!1;return!0}function VC(e,t){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function zC(e,t){if(e.size!==t.size)return!1;for(const[r,i]of e){const s=t.get(r);if(s!==i||s===void 0&&!t.has(r))return!1}return!0}function BC(e,t,r=!1){return NT(e,t,r)}function Sf(e,t){if(t!=null)return t[e]||kT(e.split("."),!1,t)}function Ko(e,t,r){const i=e.split("."),s=i.pop(),n=kT(i,!0,r);n&&s&&(n[s]=t)}function bw(e,t){if(e==null&&t==null)return!1;if(e==null||t==null)return!0;if(typeof e=="object"){if(Array.isArray(e)){const r=t;if(e.length!==r.length)return!0;for(let i=0;i<e.length;i++)if(bw(e[i],r[i]))return!0;return!1}if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const r in e)if(bw(e[r],t[r]))return!0;return!1}return e!==t}function kT(e,t,r){let i=r;for(const s of e){if(i==null)return;if(!(s in i)){if(!t)return;i[s]={}}i=i[s]}return i}function NT(e,t,r){return t?Object.keys(t).reduce((i,s)=>{let n=i[s],o=t[s];return n===o?i:n===void 0?(i[s]=N(o),i):(Array.isArray(o)||Array.isArray(i)?(n=n?Array.isArray(n)?i[s]=n.slice():i[s]=[n]:i[s]=[],o&&(Array.isArray(o)||(o=[o]),r?o.forEach(a=>{n.includes(a)||n.push(a)}):i[s]=o.slice())):o&&typeof o=="object"?i[s]=NT(n,o,r):i.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(i[s]=o),i)},e||{}):e}var dT;const Te={apiKey:void 0,applicationName:"",applicationUrl:(dT=globalThis.location)==null?void 0:dT.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(BC(Te,globalThis.esriConfig,!0),delete Te.has),!Te.assetsPath){{const e="4.31";Te.assetsPath=`https://js.arcgis.com/${e}/@arcgis/core/assets`}Te.defaultAssetsPath=Te.assetsPath}const HC=/\{([^}]+)\}/g;function Sw(e){return e??""}function LT(e,t){return t?e.replaceAll(HC,typeof t=="object"?(r,i)=>Sw(Sf(i,t)):(r,i)=>Sw(t(i))):e}function sK(e,t){return e.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,r=>t!=null&&t.includes(r)?r:`\\${r}`)}function DT(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}let $w;function nK(e){return $w??($w=new DOMParser),$w.parseFromString(e||"","text/html").body.innerText||""}function oK(e,t){return new RegExp(`{${t}}`,"ig").test(e)}const Tw={info:0,warn:1,error:2,none:3};let V=class nr{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,nr._loggers.set(this.module,this);const r=this.module.lastIndexOf(".");r!==-1&&(this._parent=nr.getLogger(this.module.slice(0,r)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){}static get test(){}static getLogger(t){return t=typeof t!="string"?t.declaredClass:t,nr._loggers.get(t)||new nr({module:t})}_log(t,r,...i){if(this._matchLevel(t)){if(r!=="always"&&!nr._throttlingDisabled){const s=qC(i),n=this._loggedMessages[t].get(s);if(r==="once"&&n!=null||r==="oncePerTick"&&n&&n>=nr._tickCounter)return;this._loggedMessages[t].set(s,nr._tickCounter),nr._scheduleTickCounterIncrement()}for(const s of Te.log.interceptors)if(s(t,this.module,...i))return;this._inheritedWriter()(t,this.module,...i)}}_parentWithMember(t,r){let i=this;for(;i!=null;){const s=i[t];if(s!=null)return s;i=i.parent}return r}_inheritedWriter(){return this._parentWithMember("writer",WC)}_matchLevel(t){const r=Te.log.level||"warn";return Tw[this._parentWithMember("level",r)]<=Tw[t]}static _scheduleTickCounterIncrement(){nr._tickCounterScheduled||(nr._tickCounterScheduled=!0,Promise.resolve().then(()=>{nr._tickCounter++,nr._tickCounterScheduled=!1}))}};function WC(e,t,...r){console[e](`[${t}]`,...r)}function qC(...e){return DT(JSON.stringify(e,(r,i)=>typeof i!="object"||Array.isArray(i)?i:"[Object]"))}V._loggers=new Map,V._tickCounter=0,V._tickCounterScheduled=!1,V._throttlingDisabled=!1;function ZC(e,t){return e.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(r,i)=>i===""?"$":(Sf(i,t)??"").toString())}let FT=class{constructor(t,r,i=void 0){this.name=t,this.details=i,this.message=(r&&ZC(r,i))??""}toString(){return"["+this.name+"]: "+this.message}},k=class UT extends FT{constructor(t,r,i){super(t,r,i)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,r)=>{if(r&&typeof r=="object"&&typeof r.toJSON=="function")return r;try{return N(r)}catch{return"[object]"}}))}}catch(t){throw V.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new UT(t.name,t.message,t.details)}};k.prototype.type="error";const Ew=new WeakMap;function YC(e,t,r=!1){const i=`🛑 DEPRECATED - ${t}`;if(!r)return void e.warn(i);let s=Ew.get(e);s||(s=new Set,Ew.set(e,s)),s.has(t)||(s.add(t),e.warn(i))}function jT(e,t,r={}){if(I("esri-deprecation-warnings")){const{moduleName:i}=r;vu(e,`Function: ${(i?i+"::":"")+t+"()"}`,r)}}function lK(e,t,r={}){if(I("esri-deprecation-warnings")){const{moduleName:i}=r;vu(e,`Property: ${(i?i+"::":"")+t}`,r)}}function JC(e,t,r={}){I("esri-deprecation-warnings")&&vu(e,`Multiple argument constructor: ${t}`,{warnOnce:!0,replacement:`new ${t}({ <your properties here> })`,...r})}function vu(e,t,r={}){if(I("esri-deprecation-warnings")){const{replacement:i,version:s,see:n,warnOnce:o}=r;let a=t;i&&(a+=`
	🛠️ Replacement: ${i}`),s&&(a+=`
	⚙️ Version: ${s}`),n&&(a+=`
	🔗 See ${n} for more details.`),YC(e,a,o)}}function cK(e){const t=[];return function*(){yield*t;for(const r of e)t.push(r),yield r}}function XC(e,t){for(const r of e)if(r!=null&&t(r))return r}function pp(e){return e!=null&&typeof e[Symbol.iterator]=="function"}let Ml=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach(r=>{t+=r.length}),t}add(t,r){if(pp(t)){const i=this._getOrCreateGroup(r);for(const s of t)xw(s)&&i.push(s)}else xw(t)&&this._getOrCreateGroup(r).push(t);return this}forEach(t,r){if(typeof t=="function")this._groups.forEach(i=>i.forEach(t));else{const i=this._getGroup(t);i&&r&&i.forEach(r)}}has(t){return this._groups.has(Sh(t))}remove(t){if(typeof t!="string"&&pp(t)){for(const r of t)this.remove(r);return this}return this.has(t)?(Mw(this._getGroup(t)),this._groups.delete(Sh(t)),this):this}removeAll(){return this._groups.forEach(Mw),this._groups.clear(),this}removeReference(t){return this._groups.delete(t),this}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const r=[];return this._groups.set(Sh(t),r),r}_getGroup(t){return this._groups.get(Sh(t))}};function Sh(e){return e||"_default_"}function Mw(e){for(const t of e)t instanceof Ml?t.removeAll():t.remove()}function xw(e){return e!=null&&(!!e.remove||e instanceof Ml)}function GT(e,t){if(e==null)throw new Error(t??"value is None")}function Ve(e){return e==null||e.destroy(),null}function hK(e){return e==null||e.dispose(),null}function Ue(e){return e==null||e.remove(),null}function _u(e){return e==null||e.abort(),null}function dK(e){return e==null||e.release(),null}function KC(e,t,r){return e!=null&&t!=null?r!=null?r(e,t):e.equals(t):e===t}function QC(e,t){let r;return e.some((i,s)=>(r=t(i,s),r!=null)),r??void 0}const VT=Symbol("Accessor-beforeDestroy"),ek={remove:()=>{}};function _e(e){return e?{remove(){e&&(e(),e=void 0)}}:ek}function tk(e){e.forEach(t=>t==null?void 0:t.remove())}function qu(e){return _e(()=>tk(e))}function pK(e){return _e(()=>e==null?void 0:e.abort())}function fK(e){return _e(e!=null?()=>e.destroy():void 0)}function $n(e){return e.__accessor__??null}function rk(e,t){var r;return((r=e==null?void 0:e.metadata)==null?void 0:r[t])!=null}function ud(e,t,r){return r?fp(e,t,{policy:r,path:""}):fp(e,t,null)}function fp(e,t,r){return t?Object.keys(t).reduce((i,s)=>{const n=s;let o=null,a="merge";if(r&&(o=r.path?`${r.path}.${s}`:s,a=r.policy(o)),a==="replace"||a==="replace-arrays"&&Array.isArray(i[n]))return i[n]=t[n],i;if(i[n]===void 0)return i[n]=N(t[n]),i;let l=i[n],h=t[n];if(l===h)return i;if(Array.isArray(h)||Array.isArray(i))l=l?Array.isArray(l)?i[n]=l.slice():i[n]=[l]:i[n]=[],h&&(Array.isArray(h)||(h=[h]),h.forEach(p=>{l.includes(p)||l.push(p)}));else if(h&&typeof h=="object")if(r){const p=r.path;r.path=o,i[n]=fp(l,h,r),r.path=p}else i[n]=fp(l,h,null);else i.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(i[n]=h);return i},e||{}):e}function zT(e){return Array.isArray(e)?e:e.split(".")}function Aw(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function ik(e){if(Array.isArray(e)){const t=[];for(const r of e)t.push(...Aw(r));return t}return Aw(e)}function BT(e,t,r,i){const s=ik(t);if(s.length!==1){const n=s.map(o=>i(e,o,r));return qu(n)}return i(e,s[0],r)}function HT(e,t){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(r,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.at(s)}const i=$n(t);return rk(i,r)?i.get(r):t[r]}function WT(e,t,r){if(e==null)return e;const i=HT(t[r],e);return!i&&r<t.length-1?void 0:r===t.length-1?i:WT(i,t,r+1)}function Zu(e,t,r=0){return typeof t!="string"||t.includes(".")?WT(e,zT(t),r):HT(t,e)}function Di(e,t){return Zu(e,t)}function Iw(e,t){return Zu(t,e)!==void 0}var Qt;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED",e[e.DESTROYED=3]="DESTROYED"})(Qt||(Qt={}));function Yu(e){let t=e.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!r){t=Object.create(t);for(const i in t)t[i]=N(t[i]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function $f(e,t){const r=Yu(e);let i=r[t];return i||(i=r[t]={}),i}function sk(e,t){return ud(e,t,ok)}const nk=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function ok(e){return nk.test(e)?"replace":"merge"}function ak(e){return(e==null?void 0:e.release)&&typeof e.release=="function"}function lk(e){return(e==null?void 0:e.acquire)&&typeof e.acquire=="function"}let Qo=class Ly{constructor(t,r,i,s=1,n=0){this._ctor=t,this._acquireFunction=r,this._releaseFunction=i,this.allocationSize=s,this._pool=new Array(n),this._initialSize=n;for(let o=0;o<n;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...t){let r;if(Ly.test.disabled)r=new this._ctor;else{if(this._pool.length===0){const i=this.allocationSize;for(let s=0;s<i;s++)this._pool[s]=new this._ctor}r=this._pool.pop()}return this._acquireFunction?this._acquireFunction(r,...t):lk(r)&&r.acquire(...t),r}release(t){t&&!Ly.test.disabled&&(this._releaseFunction?this._releaseFunction(t):ak(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let r=t;r<this._pool.length;++r){const i=this._pool[r];this._dispose(i)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}};Qo.test={disabled:!1};let ck=class{constructor(t,r){this._observers=t,this._observer=r}remove(){_T(this._observers,this._observer)}},qT=class{constructor(){this._observers=null,this.destroyed=!1}observe(t){if(this.destroyed||t.destroyed)return uk;this._observers==null&&(this._observers=[]);const r=this._observers;let i=!1,s=!1;const n=r.length;for(let o=0;o<n;++o){const a=r[o];if(a.destroyed)s=!0;else if(a===t){i=!0;break}}return i||(r.push(t),s&&this._removeDestroyedObservers()),new ck(r,t)}_removeDestroyedObservers(){const t=this._observers;if(!t||t.length===0)return;const r=t.length;let i=0;for(let s=0;s<r;++s){for(;s+i<r&&t[s+i].destroyed;)++i;if(i>0){if(!(s+i<r))break;t[s]=t[s+i]}}t.length=r-i}destroy(){if(this.destroyed)return;this.destroyed=!0;const t=this._observers;if(t!=null){for(const r of t)r.onCommitted();this._observers=null}}};const uk=_e();var me;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"})(me||(me={}));const gK=me.USER+1;function ZT(e){switch(e){case"defaults":return me.DEFAULTS;case"service":return me.SERVICE;case"portal-item":return me.PORTAL_ITEM;case"web-scene":return me.WEB_SCENE;case"web-map":return me.WEB_MAP;case"link-chart":return me.LINK_CHART;case"user":return me.USER;default:return null}}function Dy(e){switch(e){case me.DEFAULTS:return"defaults";case me.SERVICE:return"service";case me.PORTAL_ITEM:return"portal-item";case me.WEB_SCENE:return"web-scene";case me.WEB_MAP:return"web-map";case me.LINK_CHART:return"link-chart";case me.USER:return"user"}}function hk(e){return Dy(e)}var $e;(function(e){e[e.Dirty=1]="Dirty",e[e.Overridden=2]="Overridden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})($e||($e={}));let Tf=class{constructor(t){this.accessed=void 0,this._handles=void 0,this._observer=t}destroy(){var t;(t=this.accessed)==null||t.clear(),this.clear()}onAccessed(t){this._observer!=null&&t!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(t))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(t=>{this._handles.push(t.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let t=0;t<this._handles.length;++t)this._handles[t].remove();this._handles.length=0}}};const mp=new Tf,ac=[];let Xc=mp;function J(e){Xc.onAccessed(e)}let hd=!1,dd=!1;function As(e,t,r){if(hd)return tv(e,t,r);let i=null;return YT(e),i=t.call(r),JT(),i}function dk(e,t){return As(mp,e,t)}function tv(e,t,r){const i=hd;hd=!0,YT(e);let s=null;try{s=t.call(r)}catch(n){dd&&V.getLogger("esri.core.accessorSupport.tracking").error(n)}return JT(),hd=i,s}function YT(e){Xc=e,ac.push(e)}function JT(){const e=ac.length;if(e>1){const t=ac.pop();Xc=ac[e-2],t.onTrackingEnd()}else if(e===1){const t=ac.pop();Xc=mp,t.onTrackingEnd()}else Xc=mp}function XT(e,t){if(t.flags&$e.DepTrackingInitialized)return;t.flags|=$e.DepTrackingInitialized;const r=dd;dd=!1,t.flags&$e.AutoTracked?tv(t.trackingTarget,t.metadata.get,e):KT(e,t),dd=r}const pk=[];function KT(e,t){t.flags&$e.ExplicitlyTracking||(t.flags|=$e.ExplicitlyTracking,tv(t.trackingTarget,()=>{const r=t.metadata.dependsOn||pk;for(const i of r)if(typeof i!="string"||i.includes(".")){const s=zT(i);for(let n=0,o=e;n<s.length&&o!=null&&typeof o=="object";++n)o=Ow(o,s[n],n!==s.length-1)}else Ow(e,i,!1)}),t.flags&=~$e.ExplicitlyTracking)}function Ow(e,t,r){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const n=parseInt(i,10);if(!isNaN(n))return Array.isArray(e)?e[n]:e.at(n)}const s=$n(e);if(s){const n=s.propertiesByName.get(i);n&&(J(n),XT(e,n))}return r?e[i]:void 0}let Pw=class extends qT{constructor(t,r){super(),this.propertyName=t,this.metadata=r,this.trackingTarget=new Tf(this),this.flags=0,this.flags=$e.Dirty|(r.nonNullable?$e.NonNullable:0)|(r.hasOwnProperty("value")?$e.HasDefaultValue:0)|(r.get===void 0?$e.DepTrackingInitialized:0)|(r.dependsOn===void 0?$e.AutoTracked:0)}destroy(){this.flags&$e.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(t){t.mutable&&J(this);const r=t.store,i=this.propertyName,s=this.flags,n=r.get(i);if(s&$e.Computing||~s&$e.Dirty&&r.has(i))return n;this.flags|=$e.Computing;const o=t.host;let a;s&$e.AutoTracked?a=As(this.trackingTarget,this.metadata.get,o):(KT(o,this),a=this.metadata.get.call(o)),this.flags|=$e.DepTrackingInitialized,r.set(i,a,me.COMPUTED);const l=r.get(i);return l===n?this.flags&=~$e.Dirty:dk(this.commit,this),this.flags&=~$e.Computing,l}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~$e.Dirty,this.onCommitted()}onInvalidated(){~this.flags&$e.Overridden&&(this.flags|=$e.Dirty);const t=this._observers;if(t&&t.length>0)for(const r of t)r.onInvalidated()}onCommitted(){const t=this._observers;if(t&&t.length>0){const r=t.slice();for(const i of r)i.onCommitted()}}},fk=class QT{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new QT;return this._values.forEach((i,s)=>{t&&t.has(s)||r.set(s,N(i))}),r}get(t){return this._values.get(t)}originOf(){return me.USER}keys(){return[...this._values.keys()]}set(t,r){this._values.set(t,r)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}};function $h(e,t,r){return e!==void 0}function Rw(e,t,r,i){return e!==void 0&&(!(r==null&&e.flags&$e.NonNullable)||(i.lifecycle,Qt.INITIALIZING,!1))}let mk=class{constructor(t){this.host=t,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=Qt.INITIALIZING,this.store=new fk,this.mutable=!0,this._origin=me.USER;const r=this.host.constructor.__accessorMetadata__;for(const i in r){const s=new Pw(i,r[i]);this.propertiesByName.set(i,s)}this.metadata=r}initialize(){this.lifecycle=Qt.CONSTRUCTING}constructed(){this.lifecycle=Qt.CONSTRUCTED}destroy(){this.lifecycle=Qt.DESTROYED,this.propertiesByName.forEach(t=>t.destroy())}get initialized(){return this.lifecycle!==Qt.INITIALIZING}get(t){const r=this.propertiesByName.get(t);if(r.metadata.get)return r.getComputed(this);this.mutable&&J(r);const i=this.store;return i.has(t)?i.get(t):r.metadata.value}originOf(t){const r=this.store.originOf(t);if(r===void 0){const i=this.propertiesByName.get(t);if(i!==void 0&&i.flags&$e.HasDefaultValue)return"defaults"}return Dy(r)}has(t){return this.propertiesByName.has(t)&&this.store.has(t)}keys(){return[...this.propertiesByName.keys()]}internalGet(t){const r=this.propertiesByName.get(t);if($h(r))return this.store.has(t)?this.store.get(t):r.metadata.value}internalSet(t,r){const i=this.propertiesByName.get(t);$h(i)&&this._internalSet(i,r)}getDependsInfo(t,r,i){const s=this.propertiesByName.get(r);if(!$h(s))return"";const n=new Tf,o=As(n,()=>{var h;return(h=s.metadata.get)==null?void 0:h.call(t)});let a=`${i}${t.declaredClass.split(".").pop()}.${r}: ${o}
`;const l=n.accessed??new Set;if(l.size===0)return a;i+="  ";for(const h of l)h instanceof Pw&&(a+=`${i}${h.propertyName}: undefined
`);return a}setAtOrigin(t,r,i){const s=this.propertiesByName.get(t);if($h(s))return this._setAtOrigin(s,r,i)}isOverridden(t){const r=this.propertiesByName.get(t);return r!==void 0&&!!(r.flags&$e.Overridden)}clearOverride(t){const r=this.propertiesByName.get(t);r&&r.flags&$e.Overridden&&(r.flags&=~$e.Overridden,r.notifyChange())}override(t,r){const i=this.propertiesByName.get(t);if(!Rw(i,t,r,this))return;const s=i.metadata.cast;if(s){const n=this._cast(s,r),{valid:o,value:a}=n;if($m.release(n),!o)return;r=a}i.flags|=$e.Overridden,this._internalSet(i,r)}set(t,r){const i=this.propertiesByName.get(t);if(!Rw(i,t,r,this))return;const s=i.metadata.cast;if(s){const o=this._cast(s,r),{valid:a,value:l}=o;if($m.release(o),!a)return;r=l}const n=i.metadata.set;n?n.call(this.host,r):this._internalSet(i,r)}setDefaultOrigin(t){this._origin=ZT(t)}getDefaultOrigin(){return Dy(this._origin)}notifyChange(t){const r=this.propertiesByName.get(t);r!==void 0&&r.notifyChange()}invalidate(t){const r=this.propertiesByName.get(t);r!==void 0&&r.invalidate()}commit(t){const r=this.propertiesByName.get(t);r!==void 0&&r.commit()}_internalSet(t,r){const i=this.lifecycle!==Qt.INITIALIZING?this._origin:me.DEFAULTS;this._setAtOrigin(t,r,i)}_setAtOrigin(t,r,i){const s=this.store,n=t.propertyName;s.has(n,i)&&ev(r,s.get(n))&&~t.flags&$e.Overridden&&i===s.originOf(n)||(t.invalidate(),s.set(n,r,i),t.commit(),XT(this.host,t))}_cast(t,r){const i=$m.acquire();return i.valid=!0,i.value=r,t&&(i.value=t.call(this.host,r,i)),i}},yk=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const $m=new Qo(yk);function yp(e,t,r){if(e&&t)if(typeof t=="object")for(const i of Object.getOwnPropertyNames(t))yp(e,i,t[i]);else{if(t.includes(".")){const s=t.split("."),n=s.splice(-1,1)[0];return void yp(Di(e,s),n,r)}const i=e.__accessor__;i!=null&&gk(t,i),e[t]=r}}function gk(e,t){if(I("esri-unknown-property-errors")&&!vk(e,t))throw new k("set:unknown-property",_k(e,t))}function vk(e,t){return t.metadata[e]!=null}function _k(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}let wk;function bk(){return wk}var Cw;(function(e){e[e.Ignore=0]="Ignore",e[e.Destroy=1]="Destroy",e[e.ThrowError=2]="ThrowError"})(Cw||(Cw={}));function Sk(e){e.length=0}let Vt=class{constructor(t=50,r=50){this._pool=new Qo(Array,void 0,Sk,r,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return Tm.acquire()}static release(t){return Tm.release(t)}static prune(){Tm.prune()}};const Tm=new Vt(100);let eE=class extends Qo{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...t){const r=super.acquire(...t);return this._set.delete(r),r}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}};const Th=[];function gp(e){Th.push(e),Th.length===1&&queueMicrotask(()=>{const t=Th.slice();Th.length=0;for(const r of t)r()})}let Kc=class{constructor(t,r=30){this.name=t,this._counter=0,this._samples=new Array(r)}push(t){t!=null&&(this._samples[++this._counter%this._samples.length]=t)}set(t){t!=null&&(this._samples[this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort((t,r)=>t-r)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((t,r)=>t+r,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var Fy;(function(e){const t=(n,o,a,l)=>{let h=o,p=o;const f=a>>>1,m=n[h-1];for(;p<=f;){p=h<<1,p<a&&l(n[p-1],n[p])<0&&++p;const y=n[p-1];if(l(y,m)<=0)break;n[h-1]=y,h=p}n[h-1]=m},r=(n,o)=>n<o?-1:n>o?1:0;function i(n,o,a,l){o===void 0&&(o=0),a===void 0&&(a=n.length),l===void 0&&(l=r);for(let p=a>>>1;p>o;p--)t(n,p,a,l);const h=o+1;for(let p=a-1;p>o;p--){const f=n[o];n[o]=n[p],n[p]=f,t(n,h,p,l)}}function*s(n,o,a,l){o===void 0&&(o=0),a===void 0&&(a=n.length),l===void 0&&(l=r);for(let p=a>>>1;p>o;p--)t(n,p,a,l),yield;const h=o+1;for(let p=a-1;p>o;p--){const f=n[o];n[o]=n[p],n[p]=f,t(n,h,p,l),yield}}e.sort=i,e.iterableSort=s})(Fy||(Fy={}));const kw=Fy,$k=1.5,Tk=1.1;let Qc=class{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new gT,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>Nw(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const r=new Array;for(let i=0;i<this._length;i++){const s=this.data[i];t(s)&&r.push(s)}return r}at(t){if((t=Math.trunc(t)||0)<0&&(t+=this._length),!(t<0||t>=this._length))return this.data[t]}includes(t,r){const i=this.data.indexOf(t,r);return i!==-1&&i<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let r=t;r<this._length;++r)this.data[r]=this._deallocator(this.data[r]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,r=t.length){for(let i=0;i<r;i++)this.data[this._length++]=t[i]}fill(t,r){for(let i=0;i<r;i++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,Nw(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const r=ky(this.data,t,this.length,this._hint);if(r!==-1)return this.data.splice(r,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex(ky(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,r=t.length,i){this.length=kC(this.data,t,this.length,r,this._hint,i),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,r){if(t>=this.length||r>=this.length||t===r)return;const i=this.data[t];this.data[t]=this.data[r],this.data[r]=i}sort(t){kw.sort(this.data,0,this.length,t)}iterableSort(t){return kw.iterableSort(this.data,0,this.length,t)}some(t,r){for(let i=0;i<this.length;++i)if(t.call(r,this.data[i],i,this.data))return!0;return!1}find(t,r){const{data:i,length:s}=this;for(let n=0;n<s;++n)if(t.call(r,i[n]))return i[n]}filterInPlace(t,r){let i=0;for(let s=0;s<this._length;++s){const n=this.data[s];t.call(r,n,s,this.data)&&(this.data[s]=this.data[i],this.data[i]=n,i++)}if(this._deallocator)for(let s=i;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=i,this._shrink(),this}forAll(t,r){const{data:i,length:s}=this;for(let n=0;n<s;++n)t.call(r,i[n],n,i)}forEach(t,r){this.data.slice(0,this.length).forEach(t,r)}map(t,r){const i=new Array(this.length);for(let s=0;s<this.length;++s)i[s]=t.call(r,this.data[s],s,this.data);return i}reduce(t,r){let i=r;for(let s=0;s<this.length;++s)i=t(i,this.data[s],s,this.data);return i}has(t){const r=this.length,i=this.data;for(let s=0;s<r;++s)if(i[s]===t)return!0;return!1}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.data[t]}};function Nw(e){e.data.length>$k*e.length&&(e.data.length=Math.floor(e.length*Tk))}function Ek(e){return{setTimeout:(t,r)=>{const i=e.setTimeout(t,r);return _e(()=>e.clearTimeout(i))}}}const xl=Ek(globalThis);function Ef(e){return Mk(e)||tE(e)}function Mk(e){return e!=null&&typeof e=="object"&&"on"in e&&typeof e.on=="function"}function tE(e){return e!=null&&typeof e=="object"&&"addEventListener"in e&&typeof e.addEventListener=="function"}function Ju(e,t,r){if(!Ef(e))throw new TypeError("target is not a Evented or EventTarget object");return tE(e)?xk(e,t,r):e.on(t,r)}function xk(e,t,r,i){if(Array.isArray(t)){const s=t.slice();for(const n of s)e.addEventListener(n,r,i);return _e(()=>{for(const n of s)e.removeEventListener(n,r,i)})}return e.addEventListener(t,r,i),_e(()=>e.removeEventListener(t,r,i))}function rE(e,t,r){if(!Ef(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,r);const i=Ju(e,t,s=>{i.remove(),r.call(e,s)});return i}function je(e="Aborted"){return new k("AbortError",e)}function Qe(e,t="Aborted"){if(hi(e))throw je(t)}function Xu(e){return e instanceof AbortSignal?e:(e==null?void 0:e.signal)??void 0}function hi(e){const t=Xu(e);return t!=null&&t.aborted}function iE(e){if(vr(e))throw e}function Lw(e){if(!vr(e))throw e}function Fr(e,t){const r=Xu(e);if(r!=null){if(!r.aborted)return rE(r,"abort",()=>t());t()}}function rv(e,t){const r=Xu(e);if(r!=null)return Qe(r),rE(r,"abort",()=>t(je()))}function Ak(e,t){return Xu(t)==null?e:new Promise((r,i)=>{let s=Fr(t,()=>i(je()));const n=()=>{s=Ue(s)};e.then(n,n),e.then(r,i)})}function vr(e){return(e==null?void 0:e.name)==="AbortError"}async function Dw(e){try{return await e}catch(t){if(!vr(t))throw t;return}}async function iv(e){if(!e)return;if(typeof e.forEach!="function"){const r=Object.keys(e),i=r.map(o=>e[o]),s=await iv(i),n={};return r.map((o,a)=>n[o]=s[a]),n}const t=e;return Promise.allSettled(t).then(r=>Array.from(t,(i,s)=>{const n=r[s];return n.status==="fulfilled"?{promise:i,value:n.value}:{promise:i,error:n.reason}}))}async function Ik(e){return(await Promise.allSettled(e)).filter(t=>t.status==="fulfilled").map(t=>t.value)}async function MK(e){return(await Promise.allSettled(e)).filter(t=>t.status==="rejected").map(t=>t.reason)}function sE(e,t=void 0,r){const i=new AbortController;return Fr(r,()=>i.abort()),new Promise((s,n)=>{let o=setTimeout(()=>{o=0,s(t)},e);Fr(i,()=>{o&&(clearTimeout(o),n(je()))})})}function Ok(e,t){const r=new AbortController,i=setTimeout(()=>r.abort(),t);return Fr(e,()=>{r.abort(),clearTimeout(i)}),{...e,signal:r.signal}}function Zi(e){return e&&typeof e.then=="function"}function Uy(e){return Zi(e)?e:Promise.resolve(e)}function Pk(e,t=-1){let r,i,s,n,o=null;const a=(...l)=>{if(r){i=l,n&&n.reject(je()),n=jr();const m=n.promise;if(o){const y=o;o=null,y.abort()}return m}if(s=n||jr(),n=null,t>0){const m=new AbortController;r=Uy(e(...l,m.signal));const y=r;sE(t).then(()=>{r===y&&(n?m.abort():o=m)})}else r=1,r=Uy(e(...l));const h=()=>{const m=i;i=s=r=o=null,m!=null&&a(...m)},p=r,f=s;return p.then(h,h),p.then(f.resolve,f.reject),f.promise};return a}function jr(){let e,t;const r=new Promise((s,n)=>{e=s,t=n}),i=s=>{e(s)};return i.resolve=s=>e(s),i.reject=s=>t(s),i.timeout=(s,n)=>xl.setTimeout(()=>i.reject(n),s),i.promise=r,i}async function Fw(e){await Promise.resolve(),Qe(e)}function xK(e){return e}function Rk(e){return 1e3*e}function AK(e){return e}let Ck=class{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}},kk=class{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}},jy=0;const Fl={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},Gy=["prepare","preRender","render","postRender","update","finish"],Vy=[],Vo=new Qc;let Nk=class{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};function Lk(){No!=null&&(cancelAnimationFrame(No),No=requestAnimationFrame(sv))}const vp={frameTasks:Vo,willDispatch:!1,clearFrameTasks:Dk,dispatch:oE,executeFrameTasks:Fk,reschedule:Lk};function Ku(e){const t=new kk(e);return Vy.push(t),vp.willDispatch||(vp.willDispatch=!0,gp(oE)),t}function hl(e){const t=new Ck(e);return Vo.push(t),No==null&&(jy=performance.now(),No=requestAnimationFrame(sv)),new Nk(t)}let No=null;function Dk(e=!1){Vo.forAll(t=>{t.removed=!0}),e&&nE()}function sv(){const e=performance.now();No=null,No=Vo.length>0?requestAnimationFrame(sv):null,vp.executeFrameTasks(e)}function Fk(e){const t=e-jy;jy=e;const r=1e3/60,i=Math.max(0,t-r);Fl.time=e,Fl.frameDuration=r-i;for(let s=0;s<Gy.length;s++){const n=performance.now(),o=Gy[s];Vo.forAll(a=>{var l;a.paused||a.removed||(s===0&&a.ticks++,a.phases[o]&&(Fl.elapsedFrameTime=performance.now()-e,Fl.deltaTime=a.ticks===0?0:t,(l=a.phases[o])==null||l.call(a,Fl)))}),Vk[s].push(performance.now()-n)}nE(),zk.push(performance.now()-e)}const Eh=new Qc;function nE(){Vo.forAll(e=>{e.removed&&Eh.push(e)}),Vo.removeUnorderedMany(Eh.data,Eh.length),Eh.clear()}function oE(){for(;Vy.length;){const e=Vy.shift();e.isActive&&e.callback()}vp.willDispatch=!1}function Uk(e=1,t){const r=jr(),i=()=>{hi(t)?r.reject(je()):e===0?r():(--e,gp(()=>i()))};return i(),r.promise}function jk(e){return Uk(1,e)}async function Gk(e){await jk(e),await new Promise(t=>requestAnimationFrame(()=>{e!=null&&e.aborted||t()}))}const Vk=Gy.map(e=>new Kc(e)),zk=new Kc("total");function aE(e,t){for(const r of e.values())if(t(r))return!0;return!1}function Uw(e,t){if(!t)return e;for(const r of t)r!=null&&e.add(r);return e}function RK(e,t){return t!=null&&e.add(t),e}function lE(e,t){const r=new Set;return Uw(r,e),Uw(r,t),r}function Bk(e,t){const r=new Set;for(const i of t)e.has(i)&&r.add(i);return r}function CK(e,t){if(!e||!t)return!1;if(e===t)return!0;for(const r of e)if(!t.has(r))return!1;return!0}function kK(e,t){if(e==null&&t==null)return!0;if(e==null||t==null||e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function Hk(e,t){const r=new Set(e);for(const i of t)r.delete(i);return r}function Wk(e,t){return Hk(lE(e,t),Bk(e,t))}let qk=0;function pd(){return++qk}let Mf=class extends Tf{constructor(t){super(new Zk(t)),this._observer&&jw.register(this,new WeakRef(this._observer),this)}destroy(){var t,r;this._observer&&jw.unregister(this._observer),(t=this.accessed)==null||t.clear(),this.clear(),(r=this._observer)==null||r.destroy()}},Zk=class{constructor(t){this._notify=t,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}destroy(){this.destroyed=!0,this._notify=Yk}};const jw=new FinalizationRegistry(e=>{var t;(t=e.deref())==null||t.destroy()});function Yk(){}let Ya=!1;const _p=[];function cE(e,t){let r=new Mf(n),i=null,s=!1;function n(){if(!r||s)return;if(Ya)return void hE(n);const a=i;r.clear(),Ya=!0,s=!0,i=As(r,e),s=!1,Ya=!1,t(i,a),dE()}function o(){r&&(r.destroy(),r=null,i=null)}return s=!0,i=As(r,e),s=!1,_e(o)}function uE(e,t){let r=new Mf(s),i=null;function s(){t(i,o)}function n(){r&&(r.destroy(),r=null),i=null}function o(){return r?(r.clear(),i=As(r,e),i):null}return o(),_e(n)}function Jk(e,t){let r=!1,i=!1;const s=!!(t!=null&&t.sync);let n=new Mf(()=>{r||i||(i=!0,s?o():queueMicrotask(o))});function o(){i=!1,n&&!r&&(Ya?hE(o):(n.clear(),Ya=!0,r=!0,As(n,e),r=!1,Ya=!1,dE()))}function a(){n&&(n.destroy(),n=null)}return r=!0,As(n,e),r=!1,_e(a)}function hE(e){_p.includes(e)||_p.unshift(e)}function dE(){for(;_p.length;)_p.pop()()}var eu;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(eu||(eu={}));let wu=class{constructor(){this.uid=pd(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,r,i,s,n){return this.pool.acquire(eu.Untracked,t,r,i,s,n,ev)}static acquireTracked(t,r,i,s){return this.pool.acquire(eu.Tracked,t,r,i,null,null,s)}notify(t,r){this.type===eu.Untracked?this.callback.call(this.target,t,r,this.path,this.target):this.callback.call(null,t,r,void 0,void 0)}acquire(t,r,i,s,n,o,a){this.uid=pd(),this.removed=!1,this.type=t,this.oldValue=r,this.callback=i,this.getValue=s,this.target=n,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=pd(),this.removed=!0}};wu.pool=new eE(wu);const fd=new Vt,Es=new Set;let wp;function bp(e){Es.delete(e),Es.add(e),wp||(wp=Ku(Qk))}function Xk(e){if(e.removed)return;const t=e.oldValue,r=e.getValue();e.equals(t,r)||(e.oldValue=r,e.notify(r,t))}function Kk(e){for(const t of Es.values())t.target===e&&(t.removed=!0)}function Qk(){let e=10;for(;wp&&e--;){wp=null;const t=eN(),r=fd.acquire();for(const i of t){const s=i.uid;Xk(i),s===i.uid&&i.removed&&r.push(i)}for(const i of Es)i.removed&&(r.push(i),Es.delete(i));for(const i of r)wu.pool.release(i);fd.release(r),fd.release(t),zy.forEach(i=>i())}}function eN(){const e=fd.acquire();e.length=Es.size;let t=0;for(const r of Es)e[t]=r,++t;return Es.clear(),e}const zy=new Set;function tN(e){return zy.add(e),_e(()=>zy.delete(e))}function rN(e,t,r){let i=BT(e,t,r,(s,n,o)=>{let a,l,h=uE(()=>Zu(s,n),(p,f)=>{var m;((m=s.__accessor__)==null?void 0:m.lifecycle)===Qt.DESTROYED||a&&a.uid!==l?i.remove():(a||(a=wu.acquireUntracked(p,o,f,s,n),l=a.uid),bp(a))});return _e(()=>{h.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,bp(a)),a=null),i=h=null})});return i}function iN(e,t,r){const i=BT(e,t,r,(s,n,o)=>{let a=!1;return cE(()=>Zu(s,n),(l,h)=>{s.__accessor__.lifecycle!==Qt.DESTROYED?a||(a=!0,ev(h,l)||o.call(s,l,h,n,s),a=!1):i.remove()})});return i}function sN(e,t,r,i=!1){return e.__accessor__&&e.__accessor__.lifecycle!==Qt.DESTROYED?i?iN(e,t,r):rN(e,t,r):_e()}function nN(e,t,r){let i,s,n=uE(e,(o,a)=>{i&&i.uid!==s?n.remove():(i||(i=wu.acquireTracked(o,t,a,r),s=i.uid),bp(i))});return _e(()=>{n.remove(),i&&(i.uid!==s||i.removed||(i.removed=!0,bp(i)),i=null),n=null})}function oN(e,t,r){let i=!1;return cE(e,(s,n)=>{i||(i=!0,r(n,s)||t(s,n),i=!1)})}function aN(e,t,r=!1,i=CT){return r?oN(e,t,i):nN(e,t,i)}function Gw(e){return aE(Es,t=>t.oldValue===e)}function lN(e,t){for(const r of e.values())if(t(r))return!0;return!1}function nv(e,t,r){const i=e.get(t);if(i!==void 0)return i;const s=r();return e.set(t,s),s}function FK(e){const t=new Map;return r=>(t.has(r)||t.set(r,e(r)),t.get(r))}const Ja=()=>V.getLogger("esri.core.accessorSupport.ensureTypes");function cN(e){return e==null?e:new Date(e)}function uN(e){return e==null?e:!!e}function hN(e){return e==null?e:e.toString()}function pr(e,t=0){return e==null?e:(e=parseFloat(e),isNaN(e)?t:e)}function ov(e){return e==null?e:Math.round(parseFloat(e))}function dN(e){return null}function pN(e,t){return r=>{let i=e(r);return t.step!=null&&(i=Math.round(i/t.step)*t.step),t.min!=null&&(i=Math.max(t.min,i)),t.max!=null&&(i=Math.min(t.max,i)),i}}function pE(e){return(e==null?void 0:e.constructor)&&e.constructor.__accessorMetadata__!==void 0}function Sp(e,t){return t!=null&&e&&!(t instanceof e)}function fE(e){return e&&"isCollection"in e}function Vw(e){return e!=null&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function fN(e,t){if(!(t!=null&&t.constructor)||!fE(t.constructor))return By(e,t)?t:new e(t);const r=Vw(e.prototype.itemType),i=Vw(t.constructor.prototype.itemType);return r?i?r===i?t:r.prototype.isPrototypeOf(i.prototype)?new e(t):(By(e,t),t):new e(t):t}function By(e,t){return!!pE(t)&&(Ja().error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+Af(e)+"'"),!0)}function xf(e,t){return t==null?t:fE(e)?fN(e,t):Sp(e,t)?By(e,t)?t:new e(t):t}function Af(e){var t;return((t=e==null?void 0:e.prototype)==null?void 0:t.declaredClass)||"unknown"}const mN=new WeakMap;function yN(e){switch(e){case Number:return t=>pr(t);case ke:return ov;case Boolean:return uN;case String:return hN;case Date:return cN;case av:return dN;default:return nv(mN,e,()=>xf.bind(null,e))}}function Bt(e,t){const r=yN(e);return arguments.length===1?r:r(t)}function bu(e,t,r){return arguments.length===1?bu.bind(null,e):t&&(Array.isArray(t)?t.map(i=>e(i,r)):[e(t,r)])}function gN(e,t){return arguments.length===1?bu(r=>Bt(e,r)):bu(r=>Bt(e,r),t)}function mE(e,t,r){return t!==0&&Array.isArray(r)?r.map(i=>mE(e,t-1,i)):e(r)}function $p(e,t,r){if(arguments.length===2)return n=>$p(e,t,n);if(!r)return r;r=mE(e,t,r);let i=t,s=r;for(;i>0&&Array.isArray(s);)i--,s=s[0];if(s!==void 0)for(let n=0;n<i;n++)r=[r];return r}function vN(e,t,r){return arguments.length===2?$p(i=>Bt(e,i),t):$p(i=>Bt(e,i),t,r)}function yE(e){return!!Array.isArray(e)&&!e.some(t=>{const r=typeof t;return!(r==="string"||r==="number"||r==="function"&&e.length>1)})}function Hy(e,t){if(arguments.length===2)return Hy(e).call(null,t);const r=new Set,i=e.filter(a=>typeof a!="function"),s=e.filter(a=>typeof a=="function");for(const a of e)typeof a!="string"&&typeof a!="number"||r.add(a);let n=null,o=null;return(a,l)=>{if(a==null)return a;const h=typeof a,p=h==="string"||h==="number";return p&&(r.has(a)||s.some(f=>h==="string"&&f===String||h==="number"&&f===Number))||h==="object"&&s.some(f=>!Sp(a,f))?a:(p&&i.length?(n||(n=i.map(f=>typeof f=="string"?`'${f}'`:`${f}`).join(", ")),Ja().error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${n}`)):typeof a=="object"&&s.length?(o||(o=s.map(f=>Af(f)).join(", ")),Ja().error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):Ja().error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function Is(e,t){if(arguments.length===2)return Is(e).call(null,t);const r={},i=[],s=[];for(const l in e.typeMap){const h=e.typeMap[l];r[l]=Bt(h),i.push(Af(h)),s.push(l)}const n=()=>`'${i.join("', '")}'`,o=()=>`'${s.join("', '")}'`,a=typeof e.key=="string"?l=>l[e.key]:e.key;return l=>{if(e.base&&!Sp(e.base,l)||l==null)return l;const h=a(l)||e.defaultKeyValue,p=r[h];if(!p)return Ja().error("Accessor#set",`Invalid property value, value needs to be one of ${n()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!Sp(e.typeMap[h],l))return l;if(typeof e.key=="string"&&!pE(l)){const f={};for(const m in l)m!==e.key&&(f[m]=l[m]);return p(f)}return p(l)}}let ke=class{},av=class{};const GK={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function _N(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function gE(e){switch(e.type){case"native":return Bt(e.value);case"array":return bu(gE(e.value));case"one-of":return wN(e);default:return null}}function wN(e){let t=null;return(r,i)=>qy(r,e)?r:(t==null&&(t=Wy(e)),Ja().error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),i&&(i.valid=!1),null)}function Wy(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case ke:return"integer";case Date:return"date";case av:return"null";default:return Af(e.value)}case"array":return`array of ${Wy(e.value)}`;case"one-of":{const t=e.values.map(r=>Wy(r));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function qy(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case ke:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string";case av:return e===null}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(r=>!qy(r,t.value));case"one-of":return t.values.some(r=>qy(e,r))}}function d(e={}){return(t,r)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${r}. Accessor does not support static properties.`);const i=Object.getOwnPropertyDescriptor(t,r),s=$f(t,r);i&&(i.get||i.set?(s.get=i.get||s.get,s.set=i.set||s.set):"value"in i&&("value"in e&&V.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${r}" on "${t.constructor.name}" already defined in the metadata`,e),s.value=e.value=i.value)),e.readOnly!=null&&(s.readOnly=e.readOnly);const n=e.aliasOf;if(n){const l=typeof n=="string"?n:n.source,h=typeof n=="string"?null:n.overridable===!0;let p;s.dependsOn=[l],s.get=function(){let f=Di(this,l);if(typeof f=="function"){p||(p=l.split(".").slice(0,-1).join("."));const m=Di(this,p);m&&(f=f.bind(m))}return f},s.readOnly||(s.set=h?function(f){this._override(r,f)}:function(f){yp(this,l,f)})}const o=e.type,a=e.types;if(!s.cast){let l;o?l=bN(o):a&&(l=Array.isArray(a)?bu(Is(a[0])):Is(a)),e.cast=SN(e.cast,l)}sk(s,e),e.range&&(s.cast=pN(s.cast,e.range))}}function vE(e,t,r){const i=$f(e,r);i.json||(i.json={});let s=i.json;return t!==void 0&&(s.origins||(s.origins={}),s.origins[t]||(s.origins[t]={}),s=s.origins[t]),s}function bN(e){let t=0,r=e;if(_N(e))return gE(e);for(;Array.isArray(r)&&r.length===1&&typeof r[0]!="string"&&typeof r[0]!="number";)r=r[0],t++;const i=r;if(yE(i))return t===0?Hy(i):$p(Hy(i),t);if(t===1)return gN(i);if(t>1)return vN(i,t);const s=e;return s.from?s.from:Bt(s)}function SN(e,t){if(e||t)return e?t?(r,i)=>t(e(r,i),i):e:t}function $N(e){if(e.json&&e.json.origins){const t=e.json.origins,r={"web-document":["web-scene","web-map"]};for(const i in r)if(t[i]){const s=t[i];r[i].forEach(n=>{t[n]=s}),delete t[i]}}}let Os=class extends FT{constructor(t,r,i){super(t,r,i)}};Os.prototype.type="warning";function _E(e){var t;return!!e&&((t=e.prototype)==null?void 0:t.declaredClass)&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const Zy=()=>V.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function zw(e,t,r){var i,s;e&&(!r&&!t.read||(i=t.read)!=null&&i.reader||((s=t.read)==null?void 0:s.enabled)===!1||MN(e)&&Ko("read.reader",lv(e),t))}function lv(e){var r,i;const t=e.ndimArray??0;if(t>1)return EN(e);if(t===1)return Bw(e);if("type"in e&&bE(e.type)){const s=(i=(r=e.type.prototype)==null?void 0:r.itemType)==null?void 0:i.Type,n=Bw(typeof s=="function"?{type:s}:{types:s});return(o,a,l)=>{const h=n(o,a,l);return h&&new e.type(h)}}return cv(e)}function cv(e){return"type"in e?TN(e.type):xN(e.types)}function TN(e){return e.prototype.read?(t,r,i)=>{if(t==null)return t;const s=typeof t;if(s!=="object")return void Zy().error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${s}'`);const n=new e;return n.read(t,i),n}:e.fromJSON}function wE(e,t,r,i){return i!==0&&Array.isArray(t)?t.map(s=>wE(e,s,r,i-1)):e(t,void 0,r)}function EN(e){const t=cv(e),r=wE.bind(null,t),i=e.ndimArray??0;return(s,n,o)=>{if(s==null)return s;s=r(s,o,i);let a=i,l=s;for(;a>0&&Array.isArray(l);)a--,l=l[0];if(l!==void 0)for(let h=0;h<a;h++)s=[s];return s}}function Bw(e){const t=cv(e);return(r,i,s)=>{if(r==null)return r;if(Array.isArray(r)){const o=[];for(const a of r){const l=t(a,void 0,s);l!==void 0&&o.push(l)}return o}const n=t(r,void 0,s);return n!==void 0?[n]:void 0}}function bE(e){if(!_E(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?uv(t.Type):SE(t.Type))}function MN(e){return"types"in e?SE(e.types):uv(e.type)}function uv(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||bE(e))}function SE(e){for(const t in e.typeMap)if(!uv(e.typeMap[t]))return!1;return!0}function xN(e){let t=null;const r=e.errorContext??"type",i=e.validate;return(s,n,o)=>{if(s==null)return s;const a=typeof s;if(a!=="object")return void Zy().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);t||(t=AN(e));const l=e.key;if(typeof l!="string")return;const h=s[l],p=h?t[h]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!p){const m=`Type '${h||"unknown"}' is not supported`;return o!=null&&o.messages&&s&&o.messages.push(new Os(`${r}:unsupported`,m,{definition:s,context:o})),void Zy().error(m)}const f=new p;return f.read(s,o),i?i(f):f}}function AN(e){var r,i;const t={};for(const s in e.typeMap){const n=e.typeMap[s],o=Yu(n.prototype);if(typeof e.key=="function")continue;const a=o[e.key];if(!a)continue;if((r=a.json)!=null&&r.type&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]=="string"){t[a.json.type[0]]=n;continue}const l=(i=a.json)==null?void 0:i.write;if(!(l!=null&&l.writer)){t[s]=n;continue}const h=l.target,p=typeof h=="string"?h:e.key,f={};l.writer(s,f,p),f[p]&&(t[f[p]]=n)}return t}function IN(e){if(e.json||(e.json={}),Ww(e.json),qw(e.json),Hw(e.json),e.json.origins)for(const t in e.json.origins)Ww(e.json.origins[t]),qw(e.json.origins[t]),Hw(e.json.origins[t]);return!0}function Hw(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function Ww(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function qw(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function Zw(e,t){if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const r=(e==null?void 0:e.ndimArray)??0;e&&(r===1||"type"in e&&_E(e.type))?t.write.writer=RN:r>1?t.write.writer=CN(r):t.types?Array.isArray(t.types)?t.write.writer=PN(t.types[0]):t.write.writer=ON(t.types):t.write.writer=Su}function ON(e){return(t,r,i,s)=>t?$E(t,e,s)?Su(t,r,i,s):void 0:Su(t,r,i,s)}function $E(e,t,r){for(const i in t.typeMap)if(e instanceof t.typeMap[i])return!0;if(r!=null&&r.messages){const i=t.errorContext??"type",s=`Values of type '${(typeof t.key!="function"?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;r&&r.messages&&e&&r.messages.push(new k(`${i}:unsupported`,s,{definition:e,context:r})),V.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(s)}return!1}function PN(e){return(t,r,i,s)=>!t||!Array.isArray(t)?Su(t,r,i,s):Su(t.filter(n=>$E(n,e,s)),r,i,s)}function Su(e,t,r,i){Ko(r,Tp(e,i),t)}function Tp(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?Ep(e):e}function Ep(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function RN(e,t,r,i){let s;e===null?s=null:e&&typeof e.map=="function"?(s=e.map(n=>Tp(n,i)),typeof s.toArray=="function"&&(s=s.toArray())):s=[Tp(e,i)],Ko(r,s,t)}function TE(e,t,r){return r!==0&&Array.isArray(e)?e.map(i=>TE(i,t,r-1)):Tp(e,t)}function CN(e){return(t,r,i,s)=>{let n;if(t===null)n=null;else{n=TE(t,s,e);let o=e,a=n;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)n=[n]}Ko(i,n,r)}}function kN(e,t){return hv(e,"any",t==null?void 0:t.origin)}function Yy(e,t){return hv(e,"read",t==null?void 0:t.origin)}function EE(e,t){return hv(e,"write",t==null?void 0:t.origin)}function hv(e,t,r){let i=e==null?void 0:e.json;if(i!=null&&i.origins&&r){let s;s=r==="link-chart"?i.origins[r]&&(t==="any"||t in i.origins[r])?i.origins[r]:i.origins["web-map"]:i.origins[r],s&&(t==="any"||t in s)&&(i=s)}return i}function NN(e){var r;const t=LN(e);if(e.json.origins)for(const i in e.json.origins){const s=e.json.origins[i],n=s.types?DN(s):t;zw(n,s,!1),s.types&&!s.write&&((r=e.json.write)!=null&&r.enabled)&&(s.write={...e.json.write}),Zw(n,s)}zw(t,e.json,!0),Zw(t,e.json)}function LN(e){return e.json.types?Jy(e.json):e.type?ME(e):Jy(e)}function DN(e){return e.type?ME(e):Jy(e)}function ME(e){if(!e.type)return;let t=0,r=e.type;for(;Array.isArray(r)&&!yE(r);)r=r[0],t++;return{type:r,ndimArray:t}}function Jy(e){if(!e.types)return;let t=0,r=e.types;for(;Array.isArray(r);)r=r[0],t++;return{types:r,ndimArray:t}}function FN(e){IN(e)&&($N(e),NN(e))}const Em=new Set,Mm=new Set;function $(e){return t=>{e??(e="esri.core.Accessor"),t.prototype.declaredClass=e,jN(t);const r=[],i=[];let s=t.prototype;for(;s;)s.hasOwnProperty("initialize")&&!Em.has(s.initialize)&&(Em.add(s.initialize),r.push(s.initialize)),s.hasOwnProperty("destroy")&&!Mm.has(s.destroy)&&(Mm.add(s.destroy),i.push(s.destroy)),s=Object.getPrototypeOf(s);Em.clear(),Mm.clear();const n=class extends t{constructor(...a){if(super(...a),this.constructor===n&&typeof this.postscript=="function"){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=r.length-1;l>=0;l--)r[l].call(this)}}),i.length){let l=!1;const h=this[VT];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){l=!0,h.call(this);for(let p=0;p<i.length;p++)i[p].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};n.__accessorMetadata__=Yu(t.prototype),n.prototype.declaredClass=e;const o=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(n,"name",{value:o,configurable:!0}),n}}function UN(e,t){return t.get==null?function(){const r=this.__accessor__,i=r.propertiesByName.get(e);if(i===void 0)return;r.mutable&&J(i);const s=r.store;return s.has(e)?s.get(e):i.metadata.value}:function(){const r=this.__accessor__,i=r.propertiesByName.get(e);if(i!==void 0)return i.getComputed(r)}}function jN(e){const t=e.prototype,r=Yu(t),i={};for(const s of Object.getOwnPropertyNames(r)){const n=r[s];FN(n),i[s]={enumerable:!0,configurable:!0,get:UN(s,n),set(o){const a=this.__accessor__;if(a!==void 0){if(a.mutable)return a.initialized&&n.readOnly?Yw("read-only",s):a.lifecycle===Qt.CONSTRUCTED&&n.constructOnly?Yw("construct-only",s):void a.set(s,o)}else Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(e.prototype,i)}const Yw=(e,t)=>{V.getLogger("esri.core.Accessor").error(`cannot assign to ${e} property '${t}'`)};var xE,AE;function GN(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return(t=e.constructor)!=null&&t.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const vi=Symbol("Accessor-Handles"),Xy=Symbol("Accessor-Initialized");let Y=class md{static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:i,constructor:s}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const n=this;class o extends n{constructor(...l){super(...l),this.inherited=null,s&&s.apply(this,l)}}Yu(o.prototype);for(const a in t){const l=t[a];o.prototype[a]=typeof l=="function"?function(...h){const p=this.inherited;let f;this.inherited=function(...m){if(n.prototype[a])return n.prototype[a].apply(this,m)};try{f=l.apply(this,h)}catch(m){throw this.inherited=p,m}return this.inherited=p,f}:t[a]}for(const a in r){const l=GN(r[a]);d(l)(o.prototype,a)}return $(i)(o)}static freeze(t){return t instanceof md?t.__accessor__.mutable=!1:Object.freeze(t),t}static isFrozen(t){return t instanceof md?!t.__accessor__.mutable:Object.isFrozen(t)}constructor(...t){var i;if(this[xE]=null,this[AE]=!1,this.constructor===md)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const r=new mk(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:r}),t.length>0&&(r.ctorArgs=((i=this.normalizeCtorArgs)==null?void 0:i.apply(this,t))??t[0])}postscript(){const t=this.__accessor__,r=t.ctorArgs;t.initialize(),r&&(this.set(r),t.ctorArgs=null),t.constructed(),this.initialize(),this[Xy]=!0}initialize(){}[VT](){this[vi]=Ve(this[vi])}destroy(){var t;this.destroyed||(Kk(this),this.__accessor__.destroy(),(t=bk())==null||t.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[Xy]}get destroyed(){var t;return((t=this.__accessor__)==null?void 0:t.lifecycle)===Qt.DESTROYED||!1}commitProperty(t){Di(this,t)}get(t){return jT(V.getLogger(this),"`Accessor.get` is deprecated in favor of using optional chaining",{version:"4.28",see:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining"}),Di(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,r){return yp(this,t,r),this}watch(t,r,i){return sN(this,t,r,i)}addHandles(t,r){if(this.destroyed){const i=Array.isArray(t)?t:[t];for(const s of i)s.remove();return}(this[vi]??(this[vi]=new Ml)).add(t,r)}removeHandles(t){var r;(r=this[vi])==null||r.remove(t)}removeAllHandles(){var t;(t=this[vi])==null||t.removeAll()}removeHandlesReference(t){var r;(r=this[vi])==null||r.removeReference(t)}hasHandles(t){var r;return((r=this[vi])==null?void 0:r.has(t))===!0}_override(t,r){r===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,r){r==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,r){return this.__accessor__.internalSet(t,r),this}};xE=vi,AE=Xy;let VN=class IE{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new IE;return this._values.forEach((i,s)=>{t&&t.has(s)||r.set(s,N(i.value),i.origin)}),r}get(t,r){r=this._normalizeOrigin(r);const i=this._values.get(t);return r==null||(i==null?void 0:i.origin)===r?i==null?void 0:i.value:void 0}originOf(t){var r;return((r=this._values.get(t))==null?void 0:r.origin)??me.USER}keys(t){t=this._normalizeOrigin(t);const r=[...this._values.keys()];return t==null?r:r.filter(i=>{var s;return((s=this._values.get(i))==null?void 0:s.origin)===t})}set(t,r,i){if((i=this._normalizeOrigin(i))===me.DEFAULTS){const s=this._values.get(t);if((s==null?void 0:s.origin)!=null&&s.origin>i)return}this._values.set(t,new zN(r,i))}delete(t,r){var i;(r=this._normalizeOrigin(r))!=null&&((i=this._values.get(t))==null?void 0:i.origin)!==r||this._values.delete(t)}has(t,r){var i;return(r=this._normalizeOrigin(r))!=null?((i=this._values.get(t))==null?void 0:i.origin)===r:this._values.has(t)}forEach(t){this._values.forEach(({value:r},i)=>t(r,i))}_normalizeOrigin(t){if(t!=null)return t===me.DEFAULTS?t:me.USER}},zN=class{constructor(t,r){this.value=t,this.origin=r}};function BN(e,t,r){t.keys().forEach(s=>{r.set(s,t.get(s),me.DEFAULTS)});const i=e.metadata;Object.keys(i).forEach(s=>{e.internalGet(s)&&r.set(s,e.internalGet(s),me.DEFAULTS)})}function HN(e,t,r){if(!(e!=null&&e.read)||e.read.enabled===!1||!e.read.source)return!1;const i=e.read.source;if(typeof i=="string"){if(i===t||i.includes(".")&&i.indexOf(t)===0&&Iw(i,r))return!0}else for(const s of i)if(s===t||s.includes(".")&&s.indexOf(t)===0&&Iw(s,r))return!0;return!1}function WN(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function qN(e,t,r,i,s){let n=Yy(t[r],s);WN(n)&&(e[r]=!0);for(const o of Object.getOwnPropertyNames(t))n=Yy(t[o],s),HN(n,r,i)&&(e[o]=!0)}function ZN(e,t,r,i){const s=r.metadata,n=kN(s[t],i),o=n==null?void 0:n.default;if(o===void 0)return;const a=typeof o=="function"?o.call(e,t,i):o;a!==void 0&&r.set(t,a)}const OE={origin:"service"};function YN(e,t,r=OE){if(!t||typeof t!="object")return;const i=$n(e),s=i.metadata,n={};for(const o of Object.getOwnPropertyNames(t))qN(n,s,o,t,r);i.setDefaultOrigin(r.origin);for(const o of Object.getOwnPropertyNames(n)){const a=Yy(s[o],r).read,l=a==null?void 0:a.source;let h;h=l&&typeof l=="string"?Zu(t,l):t[o],a!=null&&a.reader&&(h=a.reader.call(e,h,t,r)),h!==void 0&&i.set(o,h)}if(!r||!r.ignoreDefaults){i.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(s))n[o]||ZN(e,o,i,r)}i.setDefaultOrigin("user")}function BK(e,t,r,i=OE){var n;const s={...i,messages:[]};r(s),(n=s.messages)==null||n.forEach(o=>{o.type!=="warning"||e.loaded?i!=null&&i.messages&&i.messages.push(o):e.loadWarnings.push(o)})}function JN(e,t,r,i,s){var o,a;const n={};return(a=(o=t.write)==null?void 0:o.writer)==null||a.call(e,i,n,r,s),n}function PE(e,t,r,i,s,n){if(!(i!=null&&i.write))return!1;const o=Di(e,r);if(!s&&i.write.overridePolicy){const a=i.write.overridePolicy.call(e,o,r,n??void 0);a!==void 0&&(s=a)}if(s||(s=i.write),!s||s.enabled===!1||s.layerContainerTypes&&(n!=null&&n.layerContainerType)&&!s.layerContainerTypes.includes(n.layerContainerType))return!1;if((o===null&&!s.allowNull&&!s.writerEnsuresNonNull||o===void 0)&&s.isRequired){const a=new k("web-document-write:property-required",`Missing value for required property '${r}' on '${e.declaredClass}'`,{propertyName:r,target:e});return a&&(n!=null&&n.messages)?n.messages.push(a):a&&!n&&V.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!s.allowNull&&!s.writerEnsuresNonNull||!s.alwaysWriteDefaults&&(!t.store.multipleOriginsSupported||t.store.originOf(r)===me.DEFAULTS)&&XN(e,r,n,i,o)||!s.ignoreOrigin&&(n!=null&&n.origin)&&t.store.multipleOriginsSupported&&t.store.originOf(r)<ZT(n.origin))}function XN(e,t,r,i,s){const n=i.default;if(n===void 0)return!1;if(i.defaultEquals!=null)return i.defaultEquals(s);if(typeof n=="function"){if(Array.isArray(s)){const o=n.call(e,t,r??void 0);return _f(o,s)}return!1}return n===s}function HK(e,t,r,i){const s=$n(e),n=s.metadata,o=EE(n[t],i);return!!o&&PE(e,s,t,o,r,i)}function KN(e,t,r){var n,o;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return ud(t,e.toJSON(r));const i=$n(e),s=i.metadata;for(const a in s){const l=EE(s[a],r);if(!PE(e,i,a,l,void 0,r))continue;const h=Di(e,a),p=JN(e,l,l.write&&typeof l.write.target=="string"?l.write.target:a,h,r);Object.keys(p).length>0&&(t=ud(t,p),(o=(n=r==null?void 0:r.resources)==null?void 0:n.pendingOperations)!=null&&o.length&&r.resources.pendingOperations.push(Promise.all(r.resources.pendingOperations).then(()=>ud(t,p,()=>"replace-arrays"))),r!=null&&r.writtenProperties&&r.writtenProperties.push({target:e,propName:a,oldOrigin:hk(i.store.originOf(a)),newOrigin:r.origin}))}return t}const Qu=e=>{let t=class extends e{constructor(...r){super(...r);const i=$n(this),s=i.store,n=new VN;i.store=n,BN(i,s,n)}read(r,i){YN(this,r,i)}write(r,i){return KN(this,r??{},i)}toJSON(r){return this.write({},r)}static fromJSON(r,i){return QN.call(this,r,i)}};return t=u([$("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function QN(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const r=new this;return r.read(e,t),r}function Ky(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}let W=class extends Qu(Y){};W=u([$("esri.core.JSONSupport")],W);const eL=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,tL={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function Jw(e){const t=e==null?void 0:e.match(eL);if(!t)return null;const[,r,i,s]=t;if(!r)return null;let n=null,o=null,a=null;const{devext:l,qaext:h,www:p}=tL;if(i)if(n=r,s)switch(s.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qa":({customBaseUrl:o,portalHostname:a}=h);break;default:return null}else({customBaseUrl:o,portalHostname:a}=p);else switch(r.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qaext":({customBaseUrl:o,portalHostname:a}=h);break;case"www":({customBaseUrl:o,portalHostname:a}=p);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:n}}function rL(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function RE(e){const t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,r=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,i=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,"https://www.arcgis.com"):r.test(e)?e=e.replace(r,"https://devext.arcgis.com"):i.test(e)&&(e=e.replace(i,"https://qaext.arcgis.com")),e}function CE(e){const t=atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r.buffer}function iL(e){const t=new Uint8Array(e);let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return btoa(r)}const sL=()=>V.getLogger("esri.core.urlUtils"),Al=Te.request,Xw="esri/config: esriConfig.request.proxyUrl is not set.",kE=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,NE=/^\s*http:/i,nL=/^\s*https:/i,oL=/^\s*file:/i,aL=/:\d+$/,lL=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,cL=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),uL=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let Xa=class{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let r=this.uri.match(cL);this.scheme=r[2]||(r[1]?"":null),this.authority=r[4]||(r[3]?"":null),this.path=r[5],this.query=r[7]||(r[6]?"":null),this.fragment=r[9]||(r[8]?"":null),this.authority!=null&&(r=this.authority.match(uL),this.user=r[3]||null,this.password=r[4]||null,this.host=r[6]||r[7],this.port=r[9]||null)}toString(){return this.uri}};const Mh={},hL=new Xa(Te.applicationUrl);let Pt=hL;const dL=pL();let dv=dL;const pv=()=>Pt,ZK=()=>dv;function pL(){const e=Pt.path,t=e.slice(0,e.lastIndexOf("/")+1);return`${`${Pt.scheme}://${Pt.host}${Pt.port!=null?`:${Pt.port}`:""}`}${t}`}function Ht(e){if(!e)return null;const t={path:null,query:null},r=new Xa(e),i=e.indexOf("?");return r.query===null?t.path=e:(t.path=e.slice(0,i),t.query=fv(r.query)),r.fragment&&(t.hash=r.fragment,r.query===null&&(t.path=t.path.slice(0,t.path.length-(r.fragment.length+1)))),t}function fv(e){const t=e.split("&"),r={};for(const i of t){if(!i)continue;const s=i.indexOf("=");let n,o;s<0?(n=decodeURIComponent(i),o=""):(n=decodeURIComponent(i.slice(0,s)),o=decodeURIComponent(i.slice(s+1)));let a=r[n];typeof a=="string"&&(a=r[n]=[a]),Array.isArray(a)?a.push(o):r[n]=o}return r}function $u(e,t){return e?Object.keys(e).map(r=>{const i=e[r];if(i==null)return"";const s=encodeURIComponent(r)+"=",n=t==null?void 0:t[r];return n?s+encodeURIComponent(n(i)):Array.isArray(i)?i.map(o=>Ky(o)?s+encodeURIComponent(JSON.stringify(o)):s+encodeURIComponent(o)).join("&"):Ky(i)?s+encodeURIComponent(JSON.stringify(i)):s+encodeURIComponent(i)}).filter(r=>r).join("&"):""}function LE(e=!1){let t,r=Al.proxyUrl;if(typeof e=="string"){t=_L(e);const i=If(e);i&&(r=i.proxyUrl)}else t=!!e;if(!r)throw sL().warn(Xw),new k("urlUtils:proxy-not-set",Xw);return t&&e0()&&(r=wv(r)),Ht(r)}function YK(e,t=!1){const r=If(e);let i,s;if(r){const n=mv(r.proxyUrl);i=n.path,s=n.query?fv(n.query):null}else if(t){const n=LE(e);i=n.path,s=n.query}if(i){const n=Ht(e);e=i+"?"+n.path;const o=$u({...s,...n.query});o&&(e=`${e}?${o}`)}return e}const Ul={path:"",query:""};function mv(e){const t=e.indexOf("?");return t!==-1?(Ul.path=e.slice(0,t),Ul.query=e.slice(t+1)):(Ul.path=e,Ul.query=null),Ul}function DE(e){return e=(e=xp(e=TL(e=mv(e).path),!0)).toLowerCase()}function fL(e){const t={proxyUrl:e.proxyUrl,urlPrefix:DE(e.urlPrefix)},r=Al.proxyRules,i=t.urlPrefix;let s=r.length;for(let n=0;n<r.length;n++){const o=r[n].urlPrefix;if(i.indexOf(o)===0){if(i.length===o.length)return-1;s=n;break}o.indexOf(i)===0&&(s=n+1)}return r.splice(s,0,t),s}function If(e){const t=Al.proxyRules,r=DE(e);for(let i=0;i<t.length;i++)if(r.indexOf(t[i].urlPrefix)===0)return t[i]}function JK(e,t){if(!e||!t)return!1;e=Mp(e),t=Mp(t);const r=Jw(e),i=Jw(t);return r!=null&&i!=null?r.portalHostname===i.portalHostname:r==null&&i==null&&dl(e,t,!0)}function mL(e,t){return e=Mp(e),t=Mp(t),xp(e)===xp(t)}function Mp(e){const t=(e=_n(e)).indexOf("/sharing");return t>0?e.slice(0,t):e.replace(/\/+$/,"")}function Qy(e,t=Al.interceptors){const r=i=>i==null||i instanceof RegExp&&i.test(e)||typeof i=="string"&&e.startsWith(i);if(t){for(const i of t)if(Array.isArray(i.urls)){if(i.urls.some(r))return i}else if(r(i.urls))return i}return null}function dl(e,t,r=!1){if(!e||!t)return!1;const i=r0(e),s=r0(t);return!(!r&&i.scheme!==s.scheme)&&i.host!=null&&s.host!=null&&i.host.toLowerCase()===s.host.toLowerCase()&&i.port===s.port}function yv(e){if(typeof e=="string"){if(!yr(e))return!0;e=r0(e)}if(dl(e,Pt))return!0;const t=Al.trustedServers||[];for(let r=0;r<t.length;r++){const i=yL(t[r]);for(let s=0;s<i.length;s++)if(dl(e,i[s]))return!0}return!1}function yL(e){return Mh[e]||(_v(e)||Gi(e)?Mh[e]=[new Xa(Cr(e))]:Mh[e]=[new Xa(`http://${e}`),new Xa(`https://${e}`)]),Mh[e]}function Cr(e,t=dv,r){return Gi(e)?r!=null&&r.preserveProtocolRelative?e:Pt.scheme==="http"&&Pt.authority===Ur(e).slice(2)?`http:${e}`:`https:${e}`:_v(e)?e:Of(e[0]==="/"?$L(t):t,e)}function gv(e,t=dv,r){if(e==null||!yr(e))return e;const i=_n(e),s=i.toLowerCase(),n=_n(t).toLowerCase().replace(/\/+$/,""),o=r?_n(r).toLowerCase().replace(/\/+$/,""):null;if(o&&n.indexOf(o)!==0)return e;const a=(f,m,y)=>(y=f.indexOf(m,y))===-1?f.length:y;let l=a(s,"/",s.indexOf("//")+2),h=-1;for(;s.slice(0,l+1)===n.slice(0,l)+"/"&&(h=l+1,l!==s.length);)l=a(s,"/",l+1);if(h===-1||o&&h<o.length)return e;e=i.slice(h);const p=n.slice(h-1).replaceAll(/[^/]+/g,"").length;if(p>0)for(let f=0;f<p;f++)e=`../${e}`;else e=`./${e}`;return e}function _n(e){return e=xL(e=ML(e=EL(e=Cr(e=e.trim()))))}function Of(...e){const t=e.filter(gu);if(!(t!=null&&t.length))return;const r=[];if(yr(t[0])){const s=t[0],n=s.indexOf("//");n!==-1&&(r.push(s.slice(0,n+1)),bL(t[0])&&(r[0]+="/"),t[0]=s.slice(n+2))}else t[0][0]==="/"&&r.push("");const i=t.reduce((s,n)=>n?s.concat(n.split("/")):s,[]);for(let s=0;s<i.length;s++){const n=i[s];n===".."&&r.length>0&&r[r.length-1]!==".."?r.pop():(!n&&s===i.length-1||n&&(n!=="."||r.length===0))&&r.push(n)}return r.join("/")}function Ur(e,t=!1){if(e==null||vv(e)||ea(e))return null;let r=e.indexOf("://");if(r===-1&&Gi(e))r=2;else{if(r===-1)return null;r+=3}const i=e.indexOf("/",r);return i!==-1&&(e=e.slice(0,i)),t&&(e=xp(e,!0)),e}function yr(e){return Gi(e)||_v(e)}function vv(e){return e!=null&&e.slice(0,5)==="blob:"}function ea(e){return e!=null&&e.slice(0,5)==="data:"}function gL(e){const t=pl(e);return t!=null&&t.isBase64?CE(t.data):null}function XK(e){return iL(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const vL=/^data:(.*?)(;base64)?,(.*)$/;function pl(e){const t=e.match(vL);if(!t)return null;const[,r,i,s]=t;return{mediaType:r,isBase64:!!i,data:s}}function FE(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function KK(e){return(await fetch(e)).blob()}function QK(e){const t=gL(e);if(!t)return null;const r=pl(e);return new Blob([t],{type:r.mediaType})}function Gi(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function _v(e){return e!=null&&kE.test(e)}function _L(e){return e!=null&&nL.test(e)||Pt.scheme==="https"&&Gi(e)}function wL(e){return e!=null&&NE.test(e)||Pt.scheme==="http"&&Gi(e)}function bL(e){return e!=null&&oL.test(e)}function wv(e){return Gi(e)?`https:${e}`:e.replace(NE,"https:")}function SL(){return Pt.scheme==="http"}function e0(){return Pt.scheme==="https"}function xp(e,t=!1){return Gi(e)?e.slice(2):(e=e.replace(kE,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function $L(e){const t=e.indexOf("//"),r=e.indexOf("/",t+2);return r===-1?e:e.slice(0,r)}function eQ(e){let t=0;if(yr(e)){const i=e.indexOf("//");i!==-1&&(t=i+2)}const r=e.lastIndexOf("/");return r<t?e:e.slice(0,r+1)}function tQ(e,t){if(!e)return"";const r=Ht(e).path.replace(/\/+$/,""),i=r.slice(r.lastIndexOf("/")+1);if(!(t!=null&&t.length))return i;const s=new RegExp(`\\.(${t.join("|")})$`,"i");return i.replace(s,"")}function TL(e){return e.endsWith("/")?e:`${e}/`}function UE(e){return e.replace(/\/+$/,"")}function EL(e){if(/^https?:\/\//i.test(e)){const t=mv(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function ML(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function xL(e){const t=Al.httpsDomains;if(!wL(e))return e;const r=e.indexOf("/",7);let i;if(i=r===-1?e:e.slice(0,r),i=i.toLowerCase().slice(7),aL.test(i)){if(!i.endsWith(":80"))return e;i=i.slice(0,-3),e=e.replace(":80","")}return SL()&&i===Pt.authority&&!lL.test(e)||(e0()&&i===Pt.authority||t&&t.some(s=>i===s||i.endsWith(`.${s}`))||e0()&&!If(e))&&(e=wv(e)),e}function t0(e,t,r){if(!(t&&r&&e&&yr(e)))return e;const i=e.indexOf("//"),s=e.indexOf("/",i+2),n=e.indexOf(":",i+2),o=Math.min(s<0?e.length:s,n<0?e.length:n);return e.slice(i+2,o).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,i+2)}${r}${e.slice(o)}`}function r0(e){return typeof e=="string"?new Xa(Cr(e)):(e.scheme||(e.scheme=Pt.scheme),e)}function rQ(e){return IL.test(e)}function jE(e,t){const r=Ht(e),i=Object.keys(r.query||{});return i.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${i.join(", ")}.`),r.path}function AL(e,t,r){const i=Ht(e),s=i.query||{};return s[t]=String(r),`${i.path}?${$u(s)}`}function xm(e,t){if(!t)return e;const r=Ht(e),i=r.query||{};for(const[n,o]of Object.entries(t))o!=null&&(i[n]=o);const s=$u(i);return s?`${r.path}?${s}`:r.path}function iQ(e){if(e==null)return null;const t=e.match(GE);return t?t[2]:null}function Kw(e){if(e==null)return null;const t=e.match(GE);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function sQ(e){return typeof e=="string"?pl(e)??{data:e}:new Promise((t,r)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>t(pl(i.result)),i.onerror=s=>r(s)})}const GE=/([^.]*)\.([^/]*)$/,IL=/(^data:image\/svg|\.svg$)/i,VE="20241122",zE="f6f7099a0e79cf518abdcf87c5aa8b6f24ecdcd8";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const OL="4.31";let Ae,bv=OL;bv="4.31.6";function nQ(e){Ae=e}function oQ(e){const t=Ae==null?void 0:Ae.findCredential(e);return t!=null&&t.token?AL(e,"token",t.token):e}I("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),I("host-webworker");const PL=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function RL(e){const t=Ur(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!PL.has(t)&&!e.endsWith("/sharing/rest/generateToken")}function BE(e,t){return!(!Te.apiKey||!RL(e))}function CL(e,t,r=!1,i){return new Promise((s,n)=>{if(hi(i))return void n(Qw());let o=()=>{h(),n(new Error(`Unable to load ${t}`))},a=()=>{const p=e;h(),s(p)},l=()=>{if(!e)return;const p=e;h(),p.src="",n(Qw())};const h=()=>{I("esri-image-decode")||(e.removeEventListener("error",o),e.removeEventListener("load",a)),o=null,a=null,e=null,i!=null&&i.removeEventListener("abort",l),l=null,r&&URL.revokeObjectURL(t)};i!=null&&i.addEventListener("abort",l),I("esri-image-decode")?e.decode().then(a,o):(e.addEventListener("error",o),e.addEventListener("load",a))})}function Qw(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const HE="Timeout exceeded";function kL(){return new Error(HE)}function aQ(e){return typeof e=="object"&&!!e&&"message"in e&&e.message===HE}function NL(e){Te.request.crossOriginNoCorsDomains||(Te.request.crossOriginNoCorsDomains={});const t=Te.request.crossOriginNoCorsDomains;for(let r of e)r=r.toLowerCase(),/^https?:\/\//.test(r)?t[Ur(r)??""]=0:(t[Ur("http://"+r)??""]=0,t[Ur("https://"+r)??""]=0)}function LL(e){const t=Te.request.crossOriginNoCorsDomains;if(t){let r=Ur(e);if(r)return r=r.toLowerCase(),!dl(r,pv())&&t[r]<Date.now()-36e5}return!1}async function DL(e){var s;const t=Ht(e);e=t.path,((s=t.query)==null?void 0:s.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}const r=Te.request.crossOriginNoCorsDomains,i=Ur(e);r&&i&&(r[i.toLowerCase()]=Date.now())}async function st(e,t){var m;e instanceof URL&&(e=e.toString()),(t==null?void 0:t.query)instanceof URLSearchParams&&(t.query=fv(t.query.toString().replaceAll("+"," ")));const r=ea(e),i=vv(e);i||r||(e=_n(e));const s={url:e,requestOptions:{...t}},n=y=>({data:y,getAllHeaders:fl,getHeader:fl,httpStatus:200,requestOptions:s.requestOptions,url:s.url}),o=Qy(e,Rr.internalInterceptors);if(o){const y=await tb(o,s);if(y!=null)return n(y)}let a=Qy(e);if(a){const y=await tb(a,s);if(y!=null)return n(y);a.after||a.error||(a=null)}if(e=s.url,(t=s.requestOptions).responseType==="image"&&(I("host-webworker")||I("host-node")))throw Fi("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),s);if(t.method==="head"){if(t.body)throw Fi("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),s);if(r||i)throw Fi("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),s)}if(await VL(),Ap)return Ap.execute(e,t);const l=new AbortController,h=Fr(t,()=>l.abort()),p={controller:l,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:a,params:s,redoRequest:!1,useIdentity:Rr.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},f=await WL(p).finally(()=>h==null?void 0:h.remove());return(m=a==null?void 0:a.after)==null||m.call(a,f),f}let Ap;const Rr=Te.request,WE="FormData"in globalThis,FL=new Set([499,498,403,401]),UL=new Set(["COM_0056","COM_0057","SB_0008"]),jL=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],fl=()=>null,Ip=Symbol();function GL(e){const t=Ur(e);t&&!st._corsServers.includes(t)&&st._corsServers.push(t)}function eb(e){const t=Ur(e);return!t||t.endsWith(".arcgis.com")||st._corsServers.includes(t)||yv(t)}function Fi(e,t,r,i){let s="Error";const n={url:r.url,requestOptions:r.requestOptions,getAllHeaders:fl,getHeader:fl,ssl:!1};if(t instanceof k)return t.details?(t.details=N(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=n,t;if(t){const o=i&&(()=>Array.from(i.headers)),a=i&&(p=>i.headers.get(p)),l=i==null?void 0:i.status,h=t.message;h&&(s=h),o&&a&&(n.getAllHeaders=o,n.getHeader=a),n.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||l||0,n.subCode=t.subcode,n.messageCode=t.messageCode,typeof t.details=="string"?n.messages=[t.details]:n.messages=t.details,n.raw=Ip in t?t[Ip]:t}return vr(t)?je():new k(e,s,n)}async function VL(){I("host-webworker")&&!Ap&&(Ap=await j(()=>import("./request-ChrNBaap.js"),[],import.meta.url))}async function i0(){Ae||await j(()=>import("./IdentityManager-C5QrPZyK.js"),__vite__mapDeps([0,1]),import.meta.url)}async function zL(e){var a;const t=e.params.url,r=e.params.requestOptions,i=e.controller.signal,s=r.body;let n=null,o=null;if(WE&&"HTMLFormElement"in globalThis&&(s instanceof FormData?n=s:s instanceof HTMLFormElement&&(n=new FormData(s))),typeof s=="string"&&(o=s),e.fetchOptions={cache:r.cacheBust?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:r.method==="head"?"HEAD":"GET",mode:"cors",priority:Rr.priority,redirect:"follow",signal:i},(n||o)&&(e.fetchOptions.body=n||o),r.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||(a=r.query)!=null&&a.token||n!=null&&n.get("token")),!e.hasToken&&BE(t)&&(r.query||(r.query={}),r.query.token=Te.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!qE(t)&&!hi(i)){let l;r.authMode==="immediate"?(await i0(),l=await Ae.getCredential(t,{signal:i}),e.credential=l):r.authMode==="no-prompt"?(await i0(),l=await Ae.getCredential(t,{prompt:!1,signal:i}).catch(()=>{}),e.credential=l):Ae&&(l=Ae.findCredential(t)),l&&(e.credentialToken=l.token,e.useSSL=!!l.ssl)}}function qE(e){return jL.some(t=>t.test(e))}async function BL(e){let t=e.params.url;const r=e.params.requestOptions,i=e.fetchOptions??{},s=vv(t)||ea(t),n=r.responseType||"json",o=s?0:r.timeout!=null?r.timeout:Rr.timeout;let a=!1;if(!s){e.useSSL&&(t=wv(t));let m={...r.query};e.credentialToken&&(m.token=e.credentialToken);let y=$u(m);I("esri-url-encodes-apostrophe")&&(y=y.replaceAll("'","%27"));const v=t.length+1+y.length;let _;a=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||v>Rr.maxUrlLength;const w=r.useProxy||!!If(t);if(w){const S=LE(t);_=S.path,!a&&_.length+1+v>Rr.maxUrlLength&&(a=!0),S.query&&(m={...S.query,...m})}if(i.method==="HEAD"&&(a||w)){if(a)throw v>Rr.maxUrlLength?Fi("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):Fi("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(w)throw Fi("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(a?(i.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?t=xm(t,m):(i.body=$u(m),i.headers||(i.headers={}),i.headers["Content-Type"]="application/x-www-form-urlencoded")):t=xm(t,m),w&&(e.useProxy=!0,t=`${_}?${t}`),m.token&&WE&&i.body instanceof FormData&&!rL(t)&&i.body.set("token",m.token),r.hasOwnProperty("withCredentials"))e.withCredentials=r.withCredentials;else if(!dl(t,pv())){if(yv(t))e.withCredentials=!0;else if(Ae){const S=Ae.findServerInfo(t);S!=null&&S.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(i.credentials="include",LL(t)&&await DL(a?xm(t,m):t))}let l,h,p=0,f=!1;o>0&&(p=setTimeout(()=>{f=!0,e.controller.abort()},o));try{if(r.responseType==="native-request-init")h=i,h.url=t,r.signal?h.signal=r.signal:delete h.signal;else if(r.responseType!=="image"||i.cache!=="default"||i.method!=="GET"||a||HL(r.headers)||!s&&!e.useProxy&&Rr.proxyUrl&&!eb(t)){if(st._beforeFetch&&await st._beforeFetch(t,i),l=await fetch(t,i),st._afterFetch&&await st._afterFetch(l),e.useProxy||GL(t),r.responseType==="native")h=l;else if(i.method!=="HEAD")if(l.ok){switch(n){case"array-buffer":h=await l.arrayBuffer();break;case"blob":case"image":h=await l.blob();break;default:h=await l.text()}if(p&&(clearTimeout(p),p=0),n==="json"||n==="xml"||n==="document")if(h)switch(n){case"json":h=JSON.parse(h);break;case"xml":h=rb(h,"application/xml");break;case"document":h=rb(h,"text/html")}else h=null;if(h){if(n==="array-buffer"||n==="blob"){const m=l.headers.get("Content-Type");if(m&&/application\/json|text\/plain/i.test(m)&&h[n==="blob"?"size":"byteLength"]<=750)try{const y=await new Response(h).json();y.error&&(h=y)}catch{}}n==="image"&&h instanceof Blob&&(h=await ib(URL.createObjectURL(h),e,!0))}}else{h=await l.text();try{h=JSON.parse(h)}catch{}}}else h=await ib(t,e)}catch(m){if(m.name==="AbortError")throw f?kL():je("Request canceled");if(!(!l&&m instanceof TypeError&&Rr.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||e.useProxy||eb(t))throw m;e.redoRequest=!0,fL({proxyUrl:Rr.proxyUrl,urlPrefix:Ur(t)??""})}finally{p&&clearTimeout(p)}return[l,h]}async function tb(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let r,i;try{i=await e.before(t)}catch(s){r=Fi("request:interceptor",s,t)}if((i instanceof Error||i instanceof k)&&(r=Fi("request:interceptor",i,t)),r)throw e.error&&e.error(r),r;return i}}function HL(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function rb(e,t){let r;try{r=new DOMParser().parseFromString(e,t)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}async function WL(e){var n,o;let t,r;await zL(e);try{do[t,r]=await BL(e);while(!await qL(e,t,r))}catch(a){const l=Fi("request:server",a,e.params,t);throw l.details.ssl=e.useSSL,(n=e.interceptor)!=null&&n.error&&e.interceptor.error(l),l}const i=e.params.url;if(r&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(i)){if(!e.hasToken&&!e.credentialToken&&((o=r.user)!=null&&o.username)&&!yv(i)){const a=Ur(i,!0);a&&Rr.trustedServers.push(a)}Array.isArray(r.authorizedCrossOriginNoCorsDomains)&&NL(r.authorizedCrossOriginNoCorsDomains)}const s=e.credential;if(s&&Ae){const a=Ae.findServerInfo(s.server);let l=a==null?void 0:a.owningSystemUrl;if(l){l=l.replace(/\/?$/,"/sharing");const h=Ae.findCredential(l,s.userId);h&&Ae._getIdenticalSvcIdx(l,h)===-1&&h.resources.unshift(l)}}return{data:r,getAllHeaders:t?()=>Array.from(t.headers):fl,getHeader:t?a=>t.headers.get(a):fl,httpStatus:(t==null?void 0:t.status)??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function qL(e,t,r){var h;if(e.redoRequest)return e.redoRequest=!1,!1;const i=e.params.requestOptions;if(!t||i.responseType==="native"||i.responseType==="native-request-init")return!0;let s,n;if(r&&(r.error&&typeof r.error=="object"?s=r.error:r.status==="error"&&Array.isArray(r.messages)&&(s={...r},s[Ip]=r,s.details=r.messages)),!s&&!t.ok)throw s=new Error(`Unable to load ${t.url} status: ${t.status}`),s[Ip]=r,s;let o,a=null;s&&(n=Number(s.code),a=s.hasOwnProperty("subcode")?Number(s.subcode):null,o=s.messageCode,o=o==null?void 0:o.toUpperCase());const l=i.authMode;if(n===403&&(a===4||(h=s.message)!=null&&h.toLowerCase().includes("ssl")&&!s.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(l!=="no-prompt"||n===498)&&n!==void 0&&FL.has(n)&&!qE(e.params.url)&&(n!==403||(!o||!UL.has(o))&&(a==null||a===2&&e.credentialToken))){await i0();try{const p=await Ae.getCredential(e.params.url,{error:Fi("request:server",s,e.params),prompt:l!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=p,e.credentialToken=p.token,e.useSSL=e.useSSL||p.ssl,!1}catch(p){if(l==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;s=p}}if(s)throw s;return!0}function ib(e,t,r=!1){const i=t.controller.signal,s=new Image;return t.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.fetchPriority=Rr.priority,s.src=e,CL(s,e,r,i)}st._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],st._beforeFetch=void 0,st._afterFetch=void 0;let yd=class ZE{constructor(){this._emitter=new ZE.EventEmitter(this)}emit(t,r){return this._emitter.emit(t,r)}on(t,r){return this._emitter.on(t,r)}once(t,r){return this._emitter.once(t,r)}hasEventListener(t){return this._emitter.hasEventListener(t)}};(function(e){class t{constructor(s=null){this._target=s,this._listenersMap=null}clear(){var s;(s=this._listenersMap)==null||s.clear(),this._listenersMap=null}destroy(){this.clear()}emit(s,n){var h;let o=(h=this._listenersMap)==null?void 0:h.get(s);if(!o)return!1;const a=this._target||this;let l=!1;for(const p of o.slice()){const f="deref"in p?p.deref():p;f?f==null||f.call(a,n):l=!0}return l&&(o=o.filter(p=>!("deref"in p)||p.deref()!=null),this._listenersMap.set(s,o)),o.length>0}on(s,n){if(Array.isArray(s)){const a=s.map(l=>this.on(l,n));return qu(a)}if(s.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const o=this._listenersMap.get(s)||[];return o.push(n),this._listenersMap.set(s,o),_e(()=>{var h;const a=(h=this._listenersMap)==null?void 0:h.get(s),l=(a==null?void 0:a.indexOf(n))??-1;l>=0&&a.splice(l,1)})}once(s,n){const o=this.on(s,a=>{o.remove();const l="deref"in n?n.deref():n;l==null||l.call(null,a)});return o}hasEventListener(s){var o;const n=(o=this._listenersMap)==null?void 0:o.get(s);return n!=null&&n.length>0}}e.EventEmitter=t,e.EventedMixin=i=>{let s=class extends i{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(n,o){return this._emitter.emit(n,o)}on(n,o){return this._emitter.on(n,o)}once(n,o){return this._emitter.once(n,o)}hasEventListener(n){return this._emitter.hasEventListener(n)}};return s=u([$("esri.core.Evented")],s),s};let r=class extends Y{constructor(){super(...arguments),this._emitter=new yd.EventEmitter(this)}destroy(){this._emitter.clear()}emit(i,s){return this._emitter.emit(i,s)}on(i,s){return this._emitter.on(i,s)}once(i,s){return this._emitter.once(i,s)}hasEventListener(i){return this._emitter.hasEventListener(i)}};r=u([$("esri.core.Evented.EventedAccessor")],r),e.EventedAccessor=r})(yd||(yd={}));const Ln=yd;var we;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(we||(we={}));function YE(e){return(t,r)=>{t[r]=e}}let eh=class extends qT{notify(){const t=this._observers;if(t&&t.length>0){const r=t.slice();for(const i of r)i.onInvalidated(),i.onCommitted()}}};var Ss;let ZL=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}},YL=class{constructor(t,r,i,s,n){this.target=t,this.added=r,this.removed=i,this.start=s,this.deleteCount=n}};const br=new Qo(ZL,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1});function sb(e){e&&typeof e=="object"&&"destroy"in e&&typeof e.destroy=="function"&&e.destroy()}function Am(e){return e?e instanceof _s?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function Im(e){if(e!=null&&e.length)return e[0]}function JL(e,t,r,i){const s=Math.min(e.length-r,t.length-i);let n=0;for(;n<s&&e[r+n]===t[i+n];)n++;return n}function JE(e,t,r,i){t&&t.forEach((s,n,o)=>{e.push(s),JE(e,r.call(i,s,n,o),r,i)})}const ks=new Set,Ns=new Set,Ls=new Set,Om=new Map;let XL=0,_s=Ss=class extends Ln.EventedAccessor{static isCollection(e){return e!=null&&e instanceof Ss}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new eh,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:XL++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof Ss?{items:e}:e:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return J(this._observable),this._items}set items(e){this._emitBeforeChanges(we.ADD)||(this._splice(0,this.length,Am(e)),this._emitAfterChanges(we.ADD))}hasEventListener(e){return!this.destroyed&&(e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e))}on(e,t){if(this.destroyed)return _e();if(e==="change"){const r=this._chgListeners,i={removed:!1,callback:t};return r.push(i),this._notifications&&this._notifications.push({listeners:r.slice(),items:this._items.slice(),changes:[]}),_e(()=>{i.removed=!0,r.splice(r.indexOf(i),1)})}return this._emitter.on(e,t)}once(e,t){const r="deref"in t?()=>t.deref():()=>t,i=this.on(e,s=>{var n;(n=r())==null||n.call(null,s),i.remove()});return i}add(e,t){if(J(this._observable),this._emitBeforeChanges(we.ADD))return this;const r=this.getNextIndex(t??null);return this._splice(r,0,[e]),this._emitAfterChanges(we.ADD),this}addMany(e,t=this._items.length){if(J(this._observable),!(e!=null&&e.length))return this;if(this._emitBeforeChanges(we.ADD))return this;const r=this.getNextIndex(t);return this._splice(r,0,Am(e)),this._emitAfterChanges(we.ADD),this}at(e){if(J(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(J(this._observable),!this.length||this._emitBeforeChanges(we.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(we.REMOVE),e}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return J(this._observable),this._createNewInstance({items:this._items.map(N)})}concat(...e){J(this._observable);const t=e.map(Am);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(J(this._observable),!this.length||this._emitBeforeChanges(we.REMOVE))return;const r=this._splice(0,this.length),i=r.length;for(let s=0;s<i;s++)e.call(t,r[s],s,r);this._emitAfterChanges(we.REMOVE)}destroyAll(){this.drain(sb)}destroyMany(e){const t=this.removeMany(e);return t.forEach(sb),t}every(e,t){return J(this._observable),this._items.every(e,t)}filter(e,t){let r;return J(this._observable),r=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:r})}find(e,t){return J(this._observable),this._items.find(e,t)}findIndex(e,t){return J(this._observable),this._items.findIndex(e,t)}flatten(e,t){J(this._observable);const r=[];return JE(r,this,e,t),new Ss(r)}forEach(e,t){return J(this._observable),this._items.forEach(e,t)}getItemAt(e){return J(this._observable),this._items[e]}getNextIndex(e){J(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return J(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return J(this._observable),this._items.indexOf(e,t)}join(e=","){return J(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return J(this._observable),this._items.lastIndexOf(e,t)}map(e,t){J(this._observable);const r=this._items.map(e,t);return new Ss({items:r})}reorder(e,t=this.length-1){J(this._observable);const r=this.indexOf(e);if(r!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),r!==t){if(this._emitBeforeChanges(we.MOVE))return e;this._splice(r,1),this._splice(t,0,[e]),this._emitAfterChanges(we.MOVE)}return e}}pop(){if(J(this._observable),!this.length||this._emitBeforeChanges(we.REMOVE))return;const e=Im(this._splice(this.length-1,1));return this._emitAfterChanges(we.REMOVE),e}push(...e){return J(this._observable),this._emitBeforeChanges(we.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(we.ADD)),this.length}reduce(e,t){J(this._observable);const r=this._items;return arguments.length===2?r.reduce(e,t):r.reduce(e)}reduceRight(e,t){J(this._observable);const r=this._items;return arguments.length===2?r.reduceRight(e,t):r.reduceRight(e)}remove(e){return J(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(J(this._observable),e<0||e>=this.length||this._emitBeforeChanges(we.REMOVE))return;const t=Im(this._splice(e,1));return this._emitAfterChanges(we.REMOVE),t}removeMany(e){if(J(this._observable),!(e!=null&&e.length)||this._emitBeforeChanges(we.REMOVE))return[];const t=e instanceof Ss?e.toArray():e,r=this._items,i=[],s=t.length;for(let n=0;n<s;n++){const o=t[n],a=r.indexOf(o);if(a>-1){const l=1+JL(t,r,n+1,a+1),h=this._splice(a,l);h&&h.length>0&&i.push.apply(i,h),n+=l-1}}return this._emitAfterChanges(we.REMOVE),i}reverse(){if(J(this._observable),this._emitBeforeChanges(we.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(we.MOVE),this}shift(){if(J(this._observable),!this.length||this._emitBeforeChanges(we.REMOVE))return;const e=Im(this._splice(0,1));return this._emitAfterChanges(we.REMOVE),e}slice(e=0,t=this.length){return J(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return J(this._observable),this._items.some(e,t)}sort(e){if(J(this._observable),!this.length||this._emitBeforeChanges(we.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(we.MOVE),this}splice(e,t,...r){J(this._observable);const i=(t?we.REMOVE:0)|(r.length?we.ADD:0);if(this._emitBeforeChanges(i))return[];const s=this._splice(e,t,r)||[];return this._emitAfterChanges(i),s}toArray(){return J(this._observable),this._items.slice()}toJSON(){return J(this._observable),this.toArray()}toLocaleString(){return J(this._observable),this._items.toLocaleString()}toString(){return J(this._observable),this._items.toString()}unshift(...e){return J(this._observable),!e.length||this._emitBeforeChanges(we.ADD)||(this._splice(0,0,e),this._emitAfterChanges(we.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,r){const i=this._items,s=this.itemType;let n,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=Ku(()=>this._dispatchChange())),e<0&&(e+=this.length),t){if(o=i.splice(e,t),this.hasEventListener("before-remove")){const a=br.acquire();a.target=this,a.cancellable=!0;for(let l=0,h=o.length;l<h;l++)n=o[l],a.reset(n),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(l,1),i.splice(e,0,n),e+=1,l-=1,h-=1);br.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=br.acquire();a.target=this,a.cancellable=!1;const l=o.length;for(let h=0;h<l;h++)a.reset(o[h]),this.emit("after-remove",a);br.release(a)}}if(r!=null&&r.length){if(s){const p=[];for(const f of r){const m=s.ensureType(f);m==null&&f!=null||p.push(m)}r=p}const a=this.hasEventListener("before-add"),l=this.hasEventListener("after-add"),h=e===this.length;if(a||l){const p=br.acquire();p.target=this,p.cancellable=!0;const f=br.acquire();f.target=this,f.cancellable=!1;for(const m of r)a?(p.reset(m),this.emit("before-add",p),p.defaultPrevented||(h?i.push(m):i.splice(e++,0,m),this._set("length",i.length),l&&(f.reset(m),this.emit("after-add",f)))):(h?i.push(m):i.splice(e++,0,m),this._set("length",i.length),f.reset(m),this.emit("after-add",f));br.release(f),br.release(p)}else{if(h)for(const p of r)i.push(p);else i.splice(e,0,...r);this._set("length",i.length)}}if((r!=null&&r.length||o!=null&&o.length)&&this._notifyChangeEvent(r,o),this.hasEventListener("after-splice")){const a=new YL(this,r,o,e,t);this.emit("after-splice",a)}return o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const r=br.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),t=r.defaultPrevented,br.release(r)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=br.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),br.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const r=t.changes;ks.clear(),Ns.clear(),Ls.clear();for(const{added:l,removed:h}of r){if(l)if(Ls.size===0&&Ns.size===0)for(const p of l)ks.add(p);else for(const p of l)Ns.has(p)?(Ls.add(p),Ns.delete(p)):Ls.has(p)||ks.add(p);if(h)if(Ls.size===0&&ks.size===0)for(const p of h)Ns.add(p);else for(const p of h)ks.has(p)?ks.delete(p):(Ls.delete(p),Ns.add(p))}const i=Vt.acquire();ks.forEach(l=>{i.push(l)});const s=Vt.acquire();Ns.forEach(l=>{s.push(l)});const n=this._items,o=t.items,a=Vt.acquire();if(Ls.forEach(l=>{o.indexOf(l)!==n.indexOf(l)&&a.push(l)}),t.listeners&&(i.length||s.length||a.length)){const l={target:this,added:i,removed:s,moved:a},h=t.listeners.length;for(let p=0;p<h;p++){const f=t.listeners[p];f.removed||f.callback.call(this,l)}}Vt.release(i),Vt.release(s),Vt.release(a)}ks.clear(),Ns.clear(),Ls.clear()}};_s.ofType=e=>{if(!e)return Ss;if(Om.has(e))return Om.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const i in e.typeMap){const s=e.typeMap[i].prototype.declaredClass;t?t+=` | ${s}`:t=s}let r=class extends Ss{};return u([YE({Type:e,ensureType:typeof e=="function"?Bt(e):Is(e)})],r.prototype,"itemType",void 0),r=u([$(`esri.core.Collection<${t}>`)],r),Om.set(e,r),r},u([d()],_s.prototype,"_updating",void 0),u([d()],_s.prototype,"length",void 0),u([d()],_s.prototype,"items",null),u([d({readOnly:!0})],_s.prototype,"updating",null),_s=Ss=u([$("esri.core.Collection")],_s);const K=_s;function Tn(e,t,r=K){return t||(t=new r),t===e||(t.removeAll(),KL(e)?t.addMany(e):e&&t.add(e)),t}function XE(e){return e}function KL(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}var on;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(on||(on={}));let QL=class{constructor(){this._resolver=jr(),this._status=on.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=on.RESOLVED,this._cleanUp()},()=>{this._status=on.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===on.RESOLVED}isRejected(){return this._status===on.REJECTED}isFulfilled(){return this._status!==on.PENDING}abort(){this._resolver.reject(je())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const t=jr(),r=[...this._resolvingPromises,t.promise],i=this._allPromise=Promise.all(r);i.then(()=>{this.isFulfilled()||this._allPromise!==i||this._resolver.resolve()},s=>{this.isFulfilled()||this._allPromise!==i||vr(s)||this._resolver.reject(s)}),t.resolve()}};const Sv=e=>{let t=class extends e{constructor(...r){super(...r),this._promiseProps=new QL,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,i){return this._promiseProps.promise.then(()=>this).then(r,i)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}};return t=u([$("esri.core.Promise")],t),t};let Op=class extends Sv(Y){};Op=u([$("esri.core.Promise")],Op);const e5="not-loaded",t5="loading",r5="failed",nb="loaded",KE=e=>{let t=class extends e{constructor(...r){super(...r),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(i=>{const s=this.load.bind(this);this.load=n=>{const o=new Promise((a,l)=>{const h=rv(n,l);this.destroyed&&l(new k("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(a,l).finally(()=>{h&&h.remove()})});if(this.loadStatus===e5){this._set("loadStatus",t5);const a=this._loadController=new AbortController;s({signal:a.signal})}return i(),o}})),this.when(()=>{this._set("loadStatus",nb),this._loadController=null},i=>{this._set("loadStatus",r5),this._set("loadError",i),this._loadController=null})}destroy(){this._loadController&&(this._loadController=_u(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===nb}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var r;return this.isFulfilled()||(this._set("loadError",new k("load:cancelled","Cancelled")),(r=this._loadController)==null||r.abort(),this._promiseProps.abort()),this}};return u([d({readOnly:!0})],t.prototype,"loaded",null),u([d({readOnly:!0})],t.prototype,"loadError",void 0),u([d({clonable:!1})],t.prototype,"loadStatus",void 0),u([d({type:[Os],readOnly:!0})],t.prototype,"loadWarnings",null),t=u([$("esri.core.Loadable")],t),t};let lc=class extends KE(Op){};lc=u([$("esri.core.Loadable")],lc),function(e){function t(r){return!(!r||!r.load)}e.LoadableMixin=KE,e.isLoadable=t}(lc||(lc={}));const En=lc;function fQ(e,t,r){return iv(e.map((i,s)=>t.apply(r,[i,s])))}async function i5(e,t,r){return(await iv(e.map((i,s)=>t.apply(r,[i,s])))).map(i=>i.value)}function $v(e){return{ok:!0,value:e}}function Tv(e){return{ok:!1,error:e}}function s5(e){return e!=null&&e.ok===!0?e.value:null}function n5(e){return e!=null&&e.ok===!1?e.error:null}async function QE(e){if(e==null)return{ok:!1,error:new Error("no promise provided")};try{return $v(await e)}catch(t){return Tv(t)}}async function mQ(e){try{return $v(await e)}catch(t){return iE(t),Tv(t)}}function Ev(e,t){return new zs(e,t)}let zs=class extends Y{get value(){return s5(this._result)}get error(){return n5(this._result)}get finished(){return this._result!=null}constructor(t,r){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=_u(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:i}=this._abortController;this.promise=t(i),this.promise.then(s=>{this._result=$v(s),this._cleanup()},s=>{this._result=Tv(s),this._cleanup()}),this._abortHandle=Fr(r,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=Ue(this._abortHandle),this._abortController=null}};u([d()],zs.prototype,"value",null),u([d()],zs.prototype,"error",null),u([d()],zs.prototype,"finished",null),u([d()],zs.prototype,"promise",void 0),u([d()],zs.prototype,"_result",void 0),zs=u([$("esri.core.asyncUtils.ReactiveTask")],zs);async function e3(e,t){return await e.load(),o5(e,t)}async function o5(e,t){const r=[],i=(...n)=>{for(const o of n)o!=null&&(Array.isArray(o)?i(...o):K.isCollection(o)?o.forEach(a=>i(a)):En.isLoadable(o)&&r.push(o))};t(i);let s=null;if(await i5(r,async n=>{const o=await QE(a5(n)?n.loadAll():n.load());o.ok!==!1||s||(s=o)}),s)throw s.error;return e}function a5(e){return"loadAll"in e&&typeof e.loadAll=="function"}function pe(e,t,r){let i,s;return t===void 0?(s=e,i=[void 0]):typeof t!="string"?(s=e,i=[void 0],r=t):(s=t,i=Array.isArray(e)?e:[e]),(n,o)=>{const a=n.constructor.prototype;for(const l of i){const h=vE(n,l,s);h.write&&typeof h.write=="object"||(h.write={}),r&&(h.write.target=r),h.write.writer=a[o]}}}let ut=class{constructor(t,r={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=r,this.apiValues=[],this.jsonValues=[],this._apiToJSON=l5(t),this.apiValues=ob(this._apiToJSON),this.jsonValues=ob(this._jsonToAPI),this.read=i=>this.fromJSON(i),this.write=(i,s,n)=>{const o=this.toJSON(i);o!==void 0&&Ko(n,o,s)},this.write.isJSONMapWriter=!0}toJSON(t){if(t==null)return null;if(this._apiToJSON.hasOwnProperty(t)){const r=this._apiToJSON[t];return this._options.useNumericKeys?+r:r}return this._options.ignoreUnknown?void 0:t}fromJSON(t){return t!=null&&this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}};function l5(e){const t={};for(const r in e)t[e[r]]=r;return t}function ob(e){const t=[];for(const r in e)t.push(r);return t.sort(),t}function Wt(){return function(e,t){return new ut(e,{ignoreUnknown:!0,...t})}}let Mv=class{constructor(t,r,i,s,n,o){this.semiMajorAxis=t,this.flattening=r,this.outerAtmosphereRimWidth=i,this.atmosphereHeight=s,this.scaleHeight=n;const a=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*a,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=o||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const We=new Mv(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),Ui=new Mv(3396190,1/169.8944472236118,23e4,6e4,.111),Mn=new Mv(1737400,0,0,0,0);function be(e){if(!Te.assetsPath)throw V.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new k("assets:path-not-set","config.assetsPath is not set");return Of(Te.assetsPath,e)}let Pm,T=null;function xv(){return!!T}function c5(){return!!I("esri-wasm")}function t3(){return Pm||(Pm=j(()=>import("./pe-wasm-ihfvgCko.js"),__vite__mapDeps([2,3]),import.meta.url).then(e=>e.p).then(({default:e})=>e({locateFile:t=>be(`esri/geometry/support/${t}`)})).then(e=>{s3(e)}),Pm)}var s0,Fe;(function(e){function t(n,o,a){T.ensureCache.prepare();const l=xo(a),h=a===l,p=T.ensureFloat64(l),f=T._pe_geog_to_proj(T.getPointer(n),o,p);return f&&pn(a,o,p,h),f}function r(n,o,a,l){switch(l){case Fe.PE_TRANSFORM_P_TO_G:return i(n,o,a);case Fe.PE_TRANSFORM_G_TO_P:return t(n,o,a)}return 0}function i(n,o,a){return s(n,o,a,0)}function s(n,o,a,l){T.ensureCache.prepare();const h=xo(a),p=a===h,f=T.ensureFloat64(h),m=T._pe_proj_to_geog_center(T.getPointer(n),o,f,l);return m&&pn(a,o,f,p),m}e.geogToProj=t,e.projGeog=r,e.projToGeog=i,e.projToGeogCenter=s})(s0||(s0={})),function(e){function t(){e.PE_BUFFER_MAX=T.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=T.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=T.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=T.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=T.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=T.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=T.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=T.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=T.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=T.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=T.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=T.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=T.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=T.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=T.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=T.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=T.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=T.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=T.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=T.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_STR_FMT_WKT=T.PeDefs.prototype.PE_STR_FMT_WKT,e.PE_STR_FMT_WKT2=T.PeDefs.prototype.PE_STR_FMT_WKT2,e.PE_PARM_X0=T.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=T.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=T.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=T.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=T.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=T.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=T.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=T.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=T.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=T.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(Fe||(Fe={}));let r3=null;var n0;(function(e){const t={},r={},i=y=>{const v=y.getType();switch(v){case Fe.PE_TYPE_GEOGCS:y=T.castObject(y,T.PeGeogcs);break;case Fe.PE_TYPE_PROJCS:y=T.castObject(y,T.PeProjcs);break;case Fe.PE_TYPE_GEOGTRAN:y=T.castObject(y,T.PeGeogtran);break;default:v&Fe.PE_TYPE_UNIT&&(y=T.castObject(y,T.PeUnit))}return y};function s(){T.PeFactory.prototype.initialize(null)}function n(y){return o(Fe.PE_TYPE_COORDSYS,y)}function o(y,v){let _=null,w=t[y];if(w||(w={},t[y]=w),w.hasOwnProperty(String(v))&&(_=w[v],T.compare(_,T.NULL)&&(_=null)),!_){const S=T.PeFactory.prototype.factoryByType(y,v);T.compare(S,T.NULL)||(_=i(S),w[v]=_)}return _}function a(y,v){let _=null,w=r[y];if(w||(w={},r[y]=w),w.hasOwnProperty(v)&&(_=w[v],T.compare(_,T.NULL)&&(_=null)),!_){const S=T.PeFactory.prototype.fromString(y,v);T.compare(S,T.NULL)||(_=i(S),w[v]=_)}return _}function l(y){return o(Fe.PE_TYPE_GEOGCS,y)}function h(y){return o(Fe.PE_TYPE_GEOGTRAN,y)}function p(y){return T.PeFactory.prototype.getCode(y)}function f(y){return o(Fe.PE_TYPE_PROJCS,y)}function m(y){return o(Fe.PE_TYPE_UNIT,y)}e.initialize=s,e.coordsys=n,e.factoryByType=o,e.fromString=a,e.geogcs=l,e.geogtran=h,e.getCode=p,e.projcs=f,e.unit=m})(n0||(n0={}));let i3=null;var Pp,o0,a0,l0,c0,u0,Rp,h0,Cp,kp,d0;function s3(e){function t(n,o,a){n[o]=a(n[o])}T=e,Fe.init(),Pp.init(),Rp.init(),Cp.init(),kp.init(),r3=class extends T.PeDouble{constructor(n=NaN){super(n)}destroy(){T.destroy(this)}[Symbol.dispose](){this.destroy()}},i3=class extends T.PeGCSExtent{destroy(){T.destroy(this)}[Symbol.dispose](){this.destroy()}};const r=[T.PeAngunit,T.PeDatum,T.PeGeogcs,T.PeGeogtran,T.PeObject,T.PeParameter,T.PePrimem,T.PeProjcs,T.PeSpheroid,T.PeUnit];for(const n of r)t(n.prototype,"getName",o=>function(){return o.call(this,new Array(Fe.PE_NAME_MAX))});for(const n of[T.PeGeogtran,T.PeProjcs])t(n.prototype,"getParameters",o=>function(){const a=new Array(Fe.PE_PARM_MAX);let l=o.call(this);for(let h=0;h<a.length;h++){const p=T.getValue(l,"*");a[h]=p?T.wrapPointer(p,T.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a});t(T.PeHorizon.prototype,"getCoord",n=>function(o=!1){const a=this.getSize();if(!a)return null;const l=[];return pn(l,a,n.call(this),o),l}),t(T.PeGTlistExtendedEntry.prototype,"getEntries",n=>{const o=T._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=n.call(this);if(!T.compare(l,T.NULL)){a=[l];const h=this.getSteps();if(h>1){const p=T.getPointer(l);for(let f=1;f<h;f++)a.push(T.wrapPointer(p+o*f,T.PeGTlistExtendedGTs))}}return a}});const i=T._pe_getPeHorizonSize(),s=n=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(n))return o.get(n);let a=null;const l=n.call(this);if(!T.compare(l,T.NULL)){a=[l];const h=l.getNump();if(h>1){const p=T.getPointer(l);for(let f=1;f<h;f++)a.push(T.wrapPointer(p+i*f,T.PeHorizon))}}return o.set(n,a),a};t(T.PeProjcs.prototype,"horizonGcsGenerate",s),t(T.PeProjcs.prototype,"horizonPcsGenerate",s),T.PeObject.prototype.toString=function(n=Fe.PE_STR_OPTS_NONE){T.ensureCache.prepare();const o=T.getPointer(this),a=T.ensureInt8(new Array(Fe.PE_BUFFER_MAX));return T.UTF8ToString(T._pe_object_to_string_ext(o,n,a))},T.PeGeogcs.prototype.destroy=function(){this.Delete(),ii(this),this.ptr=0},T.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},T.PeProjcs.prototype.destroy=function(){this.Delete(),ii(this),this.ptr=0},T.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function ii(e){if(!e)return;const t=T.getClass(e);if(!t)return;const r=T.getCache(t);if(!r)return;const i=T.getPointer(e);i&&delete r[i]}function xh(e,t){const r=[],i=new Array(t);for(let s=0;s<e;s++)r.push(T.ensureInt8(i));return r}function xo(e){return ArrayBuffer.isView(e)?e:Array.isArray(e[0])?e.flat():e}function pn(e,t,r,i=!1){if(i)for(let s=0;s<2*t;s++)e[s]=T.getValue(r+s*Float64Array.BYTES_PER_ELEMENT,"double");else{const s=e.length===0;for(let n=0;n<t;n++)s&&(e[n]=new Array(2)),e[n][0]=T.getValue(r,"double"),e[n][1]=T.getValue(r+Float64Array.BYTES_PER_ELEMENT,"double"),r+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function r(){e.PE_GTLIST_OPTS_COMMON=T.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=T._pe_getPeGTlistExtendedEntrySize()}function i(s,n,o,a,l,h){let p=null;const f=new T.PeInteger(h);try{const m=T.PeGTlistExtended.prototype.getGTlist(s,n,o,a,l,f);if((h=f.val)&&(p=[m],h>1)){const y=T.getPointer(m);for(let v=1;v<h;v++)p.push(T.wrapPointer(y+t*v,T.PeGTlistExtendedEntry))}}finally{T.destroy(f)}return p}e.init=r,e.getGTlist=i})(Pp||(Pp={})),function(e){function t(r){if(r!=null&&r.length){for(const i of r)ii(i),i.getEntries().forEach(s=>{ii(s);const n=s.getGeogtran();ii(n),n.getParameters().forEach(ii),[n.getGeogcs1(),n.getGeogcs2()].forEach(o=>{ii(o);const a=o.getDatum();ii(a),ii(a.getSpheroid()),ii(o.getPrimem()),ii(o.getUnit())})});T.PeGTlistExtendedEntry.prototype.Delete(r[0])}}e.destroy=t}(o0||(o0={})),function(e){function t(r,i,s,n,o){T.ensureCache.prepare();const a=xo(s),l=s===a,h=T.ensureFloat64(a);let p=0;n&&(p=T.ensureFloat64(n));const f=T._pe_geog_to_geog(T.getPointer(r),i,h,p,o);return f&&pn(s,i,h,l),f}e.geogToGeog=t}(a0||(a0={})),function(e){function t(n,o,a,l,h,p,f,m){T.PeLineType.prototype.geodesic_coordinate(n,o,a,l,h,p,f,m)}function r(n,o,a,l,h,p,f,m,y){T.PeLineType.prototype.geodetic_coordinate(n,o,a,l,h,p,f,m,y)}function i(n,o,a,l,h,p,f,m,y,v){T.PeLineType.prototype.geodetic_distance(n,o,a,l,h,p,f,m,y,v)}function s(n,o,a,l,h,p,f,m,y){T.PeLineType.prototype.great_elliptic_distance(n,o,a,l,h,p,f,m,y)}e.geodesicCoordinate=t,e.geodeticCoordinate=r,e.geodeticDistance=i,e.greatEllipticDistance=s}(l0||(l0={})),function(e){function t(o,a){return T.PeMath.prototype.phi_to_eta(o,a)}function r(o,a){return T.PeMath.prototype.eta_to_phi(o,a)}function i(o,a){return T.PeMath.prototype.phi_to_phig(o,a)}function s(o,a,l){return T.PeMath.prototype.q(o,a,l)}function n(o,a){return T.PeMath.prototype.q90(o,a)}e.phiToEta=t,e.etaToPhi=r,e.phiToPhig=i,e.q=s,e.q90=n}(c0||(c0={})),function(e){const t=(h,p,f,m,y,v)=>{let _,w;switch(T.ensureCache.prepare(),h){case"dd":_=T._pe_geog_to_dd,w=Fe.PE_DD_MAX;break;case"ddm":_=T._pe_geog_to_ddm,w=Fe.PE_DDM_MAX;break;case"dms":_=T._pe_geog_to_dms,w=Fe.PE_DMS_MAX}let S=0;p&&(S=T.getPointer(p));const E=xo(m),x=T.ensureFloat64(E),A=xh(f,w),P=_(S,f,x,y,T.ensureInt32(A));if(P)for(let C=0;C<f;C++)v[C]=T.UTF8ToString(A[C]);return P},r=(h,p,f,m,y)=>{let v;switch(T.ensureCache.prepare(),h){case"dd":v=T._pe_dd_to_geog;break;case"ddm":v=T._pe_ddm_to_geog;break;case"dms":v=T._pe_dms_to_geog}let _=0;p&&(_=T.getPointer(p));const w=m.map(A=>T.ensureString(A)),S=T.ensureInt32(w),E=T.ensureFloat64(new Array(2*f)),x=v(_,f,S,E);return x&&pn(y,f,E),x};function i(h,p,f,m,y){return t("dms",h,p,f,m,y)}function s(h,p,f,m){return r("dms",h,p,f,m)}function n(h,p,f,m,y){return t("ddm",h,p,f,m,y)}function o(h,p,f,m){return r("ddm",h,p,f,m)}function a(h,p,f,m,y){return t("dd",h,p,f,m,y)}function l(h,p,f,m){return r("dd",h,p,f,m)}e.geogToDms=i,e.dmsToGeog=s,e.geogToDdm=n,e.ddmToGeog=o,e.geogToDd=a,e.ddToGeog=l}(u0||(u0={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=T.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=T.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=T.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=T.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=T.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function r(s,n,o,a,l,h,p){T.ensureCache.prepare();let f=0;s&&(f=T.getPointer(s));const m=xo(o),y=T.ensureFloat64(m),v=xh(n,Fe.PE_MGRS_MAX),_=T.ensureInt32(v),w=T._pe_geog_to_mgrs_extended(f,n,y,a,l,h,_);if(w)for(let S=0;S<n;S++)p[S]=T.UTF8ToString(v[S]);return w}function i(s,n,o,a,l){T.ensureCache.prepare();let h=0;s&&(h=T.getPointer(s));const p=o.map(v=>T.ensureString(v)),f=T.ensureInt32(p),m=T.ensureFloat64(new Array(2*n)),y=T._pe_mgrs_to_geog_extended(h,n,f,a,m);return y&&pn(l,n,m),y}e.init=t,e.geogToMgrsExtended=r,e.mgrsToGeogExtended=i}(Rp||(Rp={})),function(e){function t(i,s,n,o,a,l,h){T.ensureCache.prepare();let p=0;i&&(p=T.getPointer(i));const f=xo(n),m=T.ensureFloat64(f),y=xh(s,Fe.PE_MGRS_MAX),v=T.ensureInt32(y),_=T._pe_geog_to_usng(p,s,m,o,a,l,v);if(_)for(let w=0;w<s;w++)h[w]=T.UTF8ToString(y[w]);return _}function r(i,s,n,o){T.ensureCache.prepare();let a=0;i&&(a=T.getPointer(i));const l=n.map(m=>T.ensureString(m)),h=T.ensureInt32(l),p=T.ensureFloat64(new Array(2*s)),f=T._pe_usng_to_geog(a,s,h,p);return f&&pn(o,s,p),f}e.geogToUsng=t,e.usngToGeog=r}(h0||(h0={})),function(e){function t(){e.PE_UTM_OPTS_NONE=T.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=T.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=T.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function r(s,n,o,a,l){T.ensureCache.prepare();let h=0;s&&(h=T.getPointer(s));const p=xo(o),f=T.ensureFloat64(p),m=xh(n,Fe.PE_UTM_MAX),y=T.ensureInt32(m),v=T._pe_geog_to_utm(h,n,f,a,y);if(v)for(let _=0;_<n;_++)l[_]=T.UTF8ToString(m[_]);return v}function i(s,n,o,a,l){T.ensureCache.prepare();let h=0;s&&(h=T.getPointer(s));const p=o.map(v=>T.ensureString(v)),f=T.ensureInt32(p),m=T.ensureFloat64(new Array(2*n)),y=T._pe_utm_to_geog(h,n,f,a,m);return y&&pn(l,n,m),y}e.init=t,e.geogToUtm=r,e.utmToGeog=i}(Cp||(Cp={})),function(e){const t=new Map;function r(){e.PE_PCSINFO_OPTION_NONE=T.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=T.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=T.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=T.PePCSInfo.prototype.PE_POLE_POINT}function i(s,n=e.PE_PCSINFO_OPTION_DOMAIN){let o=null,a=null;return t.has(s)&&(a=t.get(s),a[n]&&(o=a[n])),o||(o=T.PePCSInfo.prototype.generate(s,n),a||(a=[],t.set(s,a)),a[n]=o),o}e.init=r,e.generate=i}(kp||(kp={})),function(e){function t(){return T.PeVersion.prototype.version_string()}e.versionString=t}(d0||(d0={}));const u5=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return s0},get PeDefs(){return Fe},get PeDouble(){return r3},get PeFactory(){return n0},get PeGCSExtent(){return i3},get PeGTTransformations(){return a0},get PeGTlistExtended(){return Pp},get PeGTlistExtendedEntry(){return o0},get PeLineType(){return l0},get PeMath(){return c0},get PeNotationDms(){return u0},get PeNotationMgrs(){return Rp},get PeNotationUsng(){return h0},get PeNotationUtm(){return Cp},get PePCSInfo(){return kp},get PeVersion(){return d0},_init:s3,get _pe(){return T},isLoaded:xv,isSupported:c5,load:t3},Symbol.toStringTag,{value:"Module"}));var zo;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(zo||(zo={}));let c;const g={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1};for(c=2e3;c<=2045;c++)g[c]=0;for(c=2056;c<=2065;c++)g[c]=0;for(c=2067;c<=2135;c++)g[c]=0;for(c=2137;c<=2154;c++)g[c]=0;for(c=2161;c<=2170;c++)g[c]=0;for(c=2172;c<=2193;c++)g[c]=0;for(c=2195;c<=2198;c++)g[c]=0;for(c=2200;c<=2203;c++)g[c]=0;for(c=2205;c<=2217;c++)g[c]=0;for(c=2222;c<=2224;c++)g[c]=1;for(c=2225;c<=2250;c++)g[c]=2;for(c=2251;c<=2253;c++)g[c]=1;for(c=2257;c<=2264;c++)g[c]=2;for(c=2274;c<=2279;c++)g[c]=2;for(c=2280;c<=2282;c++)g[c]=1;for(c=2283;c<=2289;c++)g[c]=2;for(c=2290;c<=2292;c++)g[c]=0;for(c=2308;c<=2313;c++)g[c]=0;for(c=2315;c<=2491;c++)g[c]=0;for(c=2494;c<=2866;c++)g[c]=0;for(c=2867;c<=2869;c++)g[c]=1;for(c=2870;c<=2888;c++)g[c]=2;for(c=2891;c<=2895;c++)g[c]=2;for(c=2896;c<=2898;c++)g[c]=1;for(c=2902;c<=2908;c++)g[c]=2;for(c=2915;c<=2920;c++)g[c]=2;for(c=2921;c<=2923;c++)g[c]=1;for(c=2924;c<=2930;c++)g[c]=2;for(c=2931;c<=2962;c++)g[c]=0;for(c=2964;c<=2968;c++)g[c]=2;for(c=2969;c<=2973;c++)g[c]=0;for(c=2975;c<=2991;c++)g[c]=0;for(c=2995;c<=3051;c++)g[c]=0;for(c=3054;c<=3079;c++)g[c]=0;for(c=3081;c<=3088;c++)g[c]=0;for(c=3092;c<=3101;c++)g[c]=0;for(c=3106;c<=3138;c++)g[c]=0;for(c=3146;c<=3151;c++)g[c]=0;for(c=3153;c<=3166;c++)g[c]=0;for(c=3168;c<=3172;c++)g[c]=0;for(c=3174;c<=3203;c++)g[c]=0;for(c=3294;c<=3358;c++)g[c]=0;for(c=3367;c<=3403;c++)g[c]=0;for(c=3408;c<=3416;c++)g[c]=0;for(c=3417;c<=3438;c++)g[c]=2;for(c=3441;c<=3446;c++)g[c]=2;for(c=3447;c<=3450;c++)g[c]=0;for(c=3451;c<=3459;c++)g[c]=2;for(c=3460;c<=3478;c++)g[c]=0;for(c=3554;c<=3559;c++)g[c]=0;for(c=3560;c<=3570;c++)g[c]=2;for(c=3571;c<=3581;c++)g[c]=0;for(c=3594;c<=3597;c++)g[c]=0;for(c=3601;c<=3604;c++)g[c]=0;for(c=3637;c<=3639;c++)g[c]=0;for(c=3665;c<=3667;c++)g[c]=0;for(c=3693;c<=3695;c++)g[c]=0;for(c=3701;c<=3727;c++)g[c]=0;for(c=3728;c<=3739;c++)g[c]=2;for(c=3740;c<=3751;c++)g[c]=0;for(c=3753;c<=3760;c++)g[c]=2;for(c=3761;c<=3773;c++)g[c]=0;for(c=3775;c<=3777;c++)g[c]=0;for(c=3779;c<=3781;c++)g[c]=0;for(c=3783;c<=3785;c++)g[c]=0;for(c=3788;c<=3791;c++)g[c]=0;for(c=3797;c<=3802;c++)g[c]=0;for(c=3814;c<=3816;c++)g[c]=0;for(c=3825;c<=3829;c++)g[c]=0;for(c=3832;c<=3841;c++)g[c]=0;for(c=3844;c<=3852;c++)g[c]=0;for(c=3873;c<=3885;c++)g[c]=0;for(c=3890;c<=3893;c++)g[c]=0;for(c=3907;c<=3912;c++)g[c]=0;for(c=3942;c<=3950;c++)g[c]=0;for(c=3968;c<=3970;c++)g[c]=0;for(c=3973;c<=3976;c++)g[c]=0;for(c=3986;c<=3989;c++)g[c]=0;for(c=3994;c<=3997;c++)g[c]=0;for(c=4048;c<=4051;c++)g[c]=0;for(c=4056;c<=4063;c++)g[c]=0;for(c=4093;c<=4096;c++)g[c]=0;for(c=4390;c<=4398;c++)g[c]=0;for(c=4399;c<=4413;c++)g[c]=2;for(c=4418;c<=4433;c++)g[c]=2;for(c=4455;c<=4457;c++)g[c]=2;for(c=4484;c<=4489;c++)g[c]=0;for(c=4491;c<=4554;c++)g[c]=0;for(c=4568;c<=4589;c++)g[c]=0;for(c=4652;c<=4656;c++)g[c]=0;for(c=4766;c<=4800;c++)g[c]=0;for(c=5014;c<=5016;c++)g[c]=0;for(c=5069;c<=5072;c++)g[c]=0;for(c=5105;c<=5130;c++)g[c]=0;for(c=5167;c<=5188;c++)g[c]=0;for(c=5253;c<=5259;c++)g[c]=0;for(c=5269;c<=5275;c++)g[c]=0;for(c=5292;c<=5311;c++)g[c]=0;for(c=5329;c<=5331;c++)g[c]=0;for(c=5343;c<=5349;c++)g[c]=0;for(c=5355;c<=5357;c++)g[c]=0;for(c=5387;c<=5389;c++)g[c]=0;for(c=5459;c<=5463;c++)g[c]=0;for(c=5479;c<=5482;c++)g[c]=0;for(c=5518;c<=5520;c++)g[c]=0;for(c=5530;c<=5539;c++)g[c]=0;for(c=5550;c<=5552;c++)g[c]=0;for(c=5562;c<=5583;c++)g[c]=0;for(c=5623;c<=5625;c++)g[c]=2;for(c=5631;c<=5639;c++)g[c]=0;for(c=5649;c<=5653;c++)g[c]=0;for(c=5663;c<=5680;c++)g[c]=0;for(c=5682;c<=5685;c++)g[c]=0;for(c=5875;c<=5877;c++)g[c]=0;for(c=5896;c<=5899;c++)g[c]=0;for(c=5921;c<=5940;c++)g[c]=0;for(c=6050;c<=6125;c++)g[c]=0;for(c=6244;c<=6275;c++)g[c]=0;for(c=6328;c<=6348;c++)g[c]=0;for(c=6350;c<=6356;c++)g[c]=0;for(c=6366;c<=6372;c++)g[c]=0;for(c=6381;c<=6387;c++)g[c]=0;for(c=6393;c<=6404;c++)g[c]=0;for(c=6480;c<=6483;c++)g[c]=0;for(c=6511;c<=6514;c++)g[c]=0;for(c=6579;c<=6581;c++)g[c]=0;for(c=6619;c<=6624;c++)g[c]=0;for(c=6625;c<=6627;c++)g[c]=2;for(c=6628;c<=6632;c++)g[c]=0;for(c=6634;c<=6637;c++)g[c]=0;for(c=6669;c<=6692;c++)g[c]=0;for(c=6707;c<=6709;c++)g[c]=0;for(c=6720;c<=6723;c++)g[c]=0;for(c=6732;c<=6738;c++)g[c]=0;for(c=6931;c<=6933;c++)g[c]=0;for(c=6956;c<=6959;c++)g[c]=0;for(c=7005;c<=7007;c++)g[c]=0;for(c=7057;c<=7070;c++)g[c]=2;for(c=7074;c<=7082;c++)g[c]=0;for(c=7109;c<=7118;c++)g[c]=0;for(c=7119;c<=7127;c++)g[c]=1;for(c=7374;c<=7376;c++)g[c]=0;for(c=7528;c<=7586;c++)g[c]=0;for(c=7587;c<=7645;c++)g[c]=2;for(c=7692;c<=7696;c++)g[c]=0;for(c=7755;c<=7787;c++)g[c]=0;for(c=7791;c<=7795;c++)g[c]=0;for(c=7799;c<=7801;c++)g[c]=0;for(c=7803;c<=7805;c++)g[c]=0;for(c=7825;c<=7831;c++)g[c]=0;for(c=7845;c<=7859;c++)g[c]=0;for(c=8013;c<=8032;c++)g[c]=0;for(c=8065;c<=8068;c++)g[c]=1;for(c=8518;c<=8529;c++)g[c]=2;for(c=8533;c<=8536;c++)g[c]=2;for(c=8538;c<=8540;c++)g[c]=2;for(c=8677;c<=8679;c++)g[c]=0;for(c=8836;c<=8840;c++)g[c]=0;for(c=8857;c<=8859;c++)g[c]=0;for(c=8908;c<=8910;c++)g[c]=0;for(c=9154;c<=9159;c++)g[c]=0;for(c=9205;c<=9218;c++)g[c]=0;for(c=9271;c<=9273;c++)g[c]=0;for(c=9295;c<=9297;c++)g[c]=0;for(c=9356;c<=9360;c++)g[c]=0;for(c=9404;c<=9407;c++)g[c]=0;for(c=9476;c<=9482;c++)g[c]=0;for(c=9487;c<=9494;c++)g[c]=0;for(c=9697;c<=9699;c++)g[c]=0;for(c=9821;c<=9865;c++)g[c]=0;for(c=10285;c<=10291;c++)g[c]=0;for(c=10314;c<=10317;c++)g[c]=0;for(c=10448;c<=10465;c++)g[c]=0;for(c=10731;c<=10733;c++)g[c]=0;for(c=11114;c<=11118;c++)g[c]=0;for(c=20004;c<=20032;c++)g[c]=0;for(c=20047;c<=20049;c++)g[c]=0;for(c=20062;c<=20092;c++)g[c]=0;for(c=20135;c<=20138;c++)g[c]=0;for(c=20248;c<=20258;c++)g[c]=0;for(c=20348;c<=20358;c++)g[c]=0;for(c=20436;c<=20440;c++)g[c]=0;for(c=20822;c<=20824;c++)g[c]=0;for(c=20904;c<=20932;c++)g[c]=0;for(c=20934;c<=20936;c++)g[c]=0;for(c=21004;c<=21032;c++)g[c]=0;for(c=21035;c<=21037;c++)g[c]=0;for(c=21095;c<=21097;c++)g[c]=0;for(c=21148;c<=21150;c++)g[c]=0;for(c=21207;c<=21264;c++)g[c]=0;for(c=21307;c<=21364;c++)g[c]=0;for(c=21413;c<=21423;c++)g[c]=0;for(c=21453;c<=21463;c++)g[c]=0;for(c=21473;c<=21483;c++)g[c]=0;for(c=21780;c<=21782;c++)g[c]=0;for(c=21891;c<=21894;c++)g[c]=0;for(c=21896;c<=21899;c++)g[c]=0;for(c=22171;c<=22177;c++)g[c]=0;for(c=22181;c<=22187;c++)g[c]=0;for(c=22191;c<=22197;c++)g[c]=0;for(c=22207;c<=22222;c++)g[c]=0;for(c=22229;c<=22232;c++)g[c]=0;for(c=22234;c<=22236;c++)g[c]=0;for(c=22243;c<=22250;c++)g[c]=0;for(c=22262;c<=22265;c++)g[c]=0;for(c=22307;c<=22322;c++)g[c]=0;for(c=22348;c<=22357;c++)g[c]=0;for(c=22407;c<=22422;c++)g[c]=0;for(c=22462;c<=22465;c++)g[c]=0;for(c=22521;c<=22525;c++)g[c]=0;for(c=22607;c<=22622;c++)g[c]=0;for(c=22641;c<=22646;c++)g[c]=0;for(c=22648;c<=22657;c++)g[c]=0;for(c=22707;c<=22722;c++)g[c]=0;for(c=22762;c<=22765;c++)g[c]=0;for(c=22807;c<=22822;c++)g[c]=0;for(c=22991;c<=22994;c++)g[c]=0;for(c=23028;c<=23038;c++)g[c]=0;for(c=23301;c<=23333;c++)g[c]=2;for(c=23830;c<=23853;c++)g[c]=0;for(c=23866;c<=23872;c++)g[c]=0;for(c=23877;c<=23884;c++)g[c]=0;for(c=23886;c<=23894;c++)g[c]=0;for(c=23946;c<=23948;c++)g[c]=0;for(c=24311;c<=24313;c++)g[c]=0;for(c=24342;c<=24347;c++)g[c]=0;for(c=24370;c<=24374;c++)g[c]=10;for(c=24375;c<=24381;c++)g[c]=0;for(c=24718;c<=24721;c++)g[c]=0;for(c=24817;c<=24821;c++)g[c]=0;for(c=24877;c<=24882;c++)g[c]=0;for(c=24891;c<=24893;c++)g[c]=0;for(c=25391;c<=25395;c++)g[c]=0;for(c=25828;c<=25838;c++)g[c]=0;for(c=26191;c<=26195;c++)g[c]=0;for(c=26391;c<=26393;c++)g[c]=0;for(c=26701;c<=26722;c++)g[c]=0;for(c=26729;c<=26799;c++)g[c]=2;for(c=26801;c<=26803;c++)g[c]=2;for(c=26811;c<=26813;c++)g[c]=2;for(c=26847;c<=26870;c++)g[c]=2;for(c=26891;c<=26899;c++)g[c]=0;for(c=26901;c<=26923;c++)g[c]=0;for(c=26929;c<=26946;c++)g[c]=0;for(c=26948;c<=26998;c++)g[c]=0;for(c=27037;c<=27040;c++)g[c]=0;for(c=27205;c<=27232;c++)g[c]=0;for(c=27258;c<=27260;c++)g[c]=0;for(c=27391;c<=27398;c++)g[c]=0;for(c=27561;c<=27564;c++)g[c]=0;for(c=27571;c<=27574;c++)g[c]=0;for(c=27581;c<=27584;c++)g[c]=0;for(c=27591;c<=27594;c++)g[c]=0;for(c=27700;c<=27707;c++)g[c]=0;for(c=28191;c<=28193;c++)g[c]=0;for(c=28348;c<=28358;c++)g[c]=0;for(c=28402;c<=28432;c++)g[c]=0;for(c=28462;c<=28492;c++)g[c]=0;for(c=29118;c<=29122;c++)g[c]=0;for(c=29168;c<=29172;c++)g[c]=0;for(c=29177;c<=29185;c++)g[c]=0;for(c=29187;c<=29195;c++)g[c]=0;for(c=29900;c<=29903;c++)g[c]=0;for(c=30161;c<=30179;c++)g[c]=0;for(c=30491;c<=30494;c++)g[c]=0;for(c=30729;c<=30732;c++)g[c]=0;for(c=31251;c<=31259;c++)g[c]=0;for(c=31265;c<=31268;c++)g[c]=0;for(c=31275;c<=31279;c++)g[c]=0;for(c=31281;c<=31297;c++)g[c]=0;for(c=31461;c<=31469;c++)g[c]=0;for(c=31491;c<=31495;c++)g[c]=0;for(c=31917;c<=31922;c++)g[c]=0;for(c=31965;c<=32e3;c++)g[c]=0;for(c=32001;c<=32003;c++)g[c]=2;for(c=32005;c<=32031;c++)g[c]=2;for(c=32033;c<=32060;c++)g[c]=2;for(c=32064;c<=32067;c++)g[c]=2;for(c=32074;c<=32077;c++)g[c]=2;for(c=32081;c<=32086;c++)g[c]=0;for(c=32107;c<=32130;c++)g[c]=0;for(c=32133;c<=32159;c++)g[c]=0;for(c=32164;c<=32167;c++)g[c]=2;for(c=32180;c<=32199;c++)g[c]=0;for(c=32201;c<=32260;c++)g[c]=0;for(c=32301;c<=32360;c++)g[c]=0;for(c=32401;c<=32460;c++)g[c]=0;for(c=32501;c<=32560;c++)g[c]=0;for(c=32601;c<=32662;c++)g[c]=0;for(c=32664;c<=32667;c++)g[c]=2;for(c=32701;c<=32761;c++)g[c]=0;for(c=53001;c<=53004;c++)g[c]=0;for(c=53008;c<=53019;c++)g[c]=0;for(c=53021;c<=53032;c++)g[c]=0;for(c=53034;c<=53037;c++)g[c]=0;for(c=53042;c<=53046;c++)g[c]=0;for(c=53074;c<=53080;c++)g[c]=0;for(c=54001;c<=54004;c++)g[c]=0;for(c=54008;c<=54019;c++)g[c]=0;for(c=54021;c<=54032;c++)g[c]=0;for(c=54034;c<=54037;c++)g[c]=0;for(c=54042;c<=54046;c++)g[c]=0;for(c=54048;c<=54053;c++)g[c]=0;for(c=54074;c<=54080;c++)g[c]=0;for(c=54098;c<=54101;c++)g[c]=0;for(c=102001;c<=102040;c++)g[c]=0;for(c=102042;c<=102063;c++)g[c]=0;for(c=102065;c<=102067;c++)g[c]=0;for(c=102070;c<=102117;c++)g[c]=0;for(c=102122;c<=102216;c++)g[c]=0;for(c=102221;c<=102377;c++)g[c]=0;for(c=102382;c<=102388;c++)g[c]=0;for(c=102389;c<=102398;c++)g[c]=2;for(c=102399;c<=102444;c++)g[c]=0;for(c=102445;c<=102447;c++)g[c]=2;for(c=102448;c<=102458;c++)g[c]=0;for(c=102459;c<=102468;c++)g[c]=2;for(c=102469;c<=102499;c++)g[c]=0;for(c=102500;c<=102519;c++)g[c]=1;for(c=102520;c<=102524;c++)g[c]=0;for(c=102525;c<=102529;c++)g[c]=2;for(c=102530;c<=102588;c++)g[c]=0;for(c=102590;c<=102598;c++)g[c]=0;for(c=102601;c<=102603;c++)g[c]=0;for(c=102605;c<=102628;c++)g[c]=0;for(c=102629;c<=102646;c++)g[c]=2;for(c=102648;c<=102700;c++)g[c]=2;for(c=102701;c<=102703;c++)g[c]=0;for(c=102707;c<=102730;c++)g[c]=2;for(c=102733;c<=102758;c++)g[c]=2;for(c=102767;c<=102900;c++)g[c]=0;for(c=102901;c<=102933;c++)g[c]=2;for(c=102934;c<=102950;c++)g[c]=13;for(c=102951;c<=102963;c++)g[c]=0;for(c=102965;c<=102969;c++)g[c]=0;for(c=102971;c<=102973;c++)g[c]=0;for(c=102975;c<=102989;c++)g[c]=0;for(c=102990;c<=102992;c++)g[c]=1;for(c=102997;c<=103002;c++)g[c]=0;for(c=103003;c<=103008;c++)g[c]=2;for(c=103009;c<=103011;c++)g[c]=0;for(c=103012;c<=103014;c++)g[c]=2;for(c=103019;c<=103021;c++)g[c]=0;for(c=103022;c<=103024;c++)g[c]=2;for(c=103029;c<=103031;c++)g[c]=0;for(c=103032;c<=103034;c++)g[c]=2;for(c=103065;c<=103068;c++)g[c]=0;for(c=103074;c<=103076;c++)g[c]=0;for(c=103077;c<=103079;c++)g[c]=1;for(c=103080;c<=103082;c++)g[c]=0;for(c=103083;c<=103085;c++)g[c]=2;for(c=103090;c<=103093;c++)g[c]=0;for(c=103097;c<=103099;c++)g[c]=0;for(c=103100;c<=103102;c++)g[c]=2;for(c=103107;c<=103109;c++)g[c]=0;for(c=103110;c<=103112;c++)g[c]=2;for(c=103113;c<=103116;c++)g[c]=0;for(c=103117;c<=103120;c++)g[c]=2;for(c=103153;c<=103157;c++)g[c]=0;for(c=103158;c<=103162;c++)g[c]=2;for(c=103163;c<=103165;c++)g[c]=0;for(c=103166;c<=103168;c++)g[c]=1;for(c=103169;c<=103171;c++)g[c]=2;for(c=103186;c<=103188;c++)g[c]=0;for(c=103189;c<=103191;c++)g[c]=2;for(c=103192;c<=103195;c++)g[c]=0;for(c=103196;c<=103199;c++)g[c]=2;for(c=103200;c<=103224;c++)g[c]=0;for(c=103225;c<=103227;c++)g[c]=1;for(c=103232;c<=103237;c++)g[c]=0;for(c=103238;c<=103243;c++)g[c]=2;for(c=103244;c<=103246;c++)g[c]=0;for(c=103247;c<=103249;c++)g[c]=2;for(c=103254;c<=103256;c++)g[c]=0;for(c=103257;c<=103259;c++)g[c]=2;for(c=103264;c<=103266;c++)g[c]=0;for(c=103267;c<=103269;c++)g[c]=2;for(c=103300;c<=103375;c++)g[c]=0;for(c=103381;c<=103383;c++)g[c]=0;for(c=103384;c<=103386;c++)g[c]=1;for(c=103387;c<=103389;c++)g[c]=0;for(c=103390;c<=103392;c++)g[c]=2;for(c=103397;c<=103399;c++)g[c]=0;for(c=103400;c<=103471;c++)g[c]=2;for(c=103476;c<=103478;c++)g[c]=0;for(c=103479;c<=103481;c++)g[c]=2;for(c=103486;c<=103488;c++)g[c]=0;for(c=103489;c<=103491;c++)g[c]=2;for(c=103492;c<=103495;c++)g[c]=0;for(c=103496;c<=103499;c++)g[c]=2;for(c=103528;c<=103543;c++)g[c]=0;for(c=103544;c<=103548;c++)g[c]=2;for(c=103549;c<=103551;c++)g[c]=0;for(c=103552;c<=103554;c++)g[c]=1;for(c=103555;c<=103557;c++)g[c]=2;for(c=103558;c<=103560;c++)g[c]=0;for(c=103571;c<=103573;c++)g[c]=0;for(c=103574;c<=103576;c++)g[c]=2;for(c=103577;c<=103580;c++)g[c]=0;for(c=103581;c<=103583;c++)g[c]=2;for(c=103595;c<=103694;c++)g[c]=0;for(c=103696;c<=103699;c++)g[c]=0;for(c=103700;c<=103793;c++)g[c]=2;for(c=103794;c<=103890;c++)g[c]=0;for(c=103891;c<=103896;c++)g[c]=2;for(c=103900;c<=103971;c++)g[c]=2;for(c=103972;c<=103977;c++)g[c]=0;for(c=112e3;c<=112101;c++)g[c]=0;const n3=[102100,102113,3857,3785,900913],h5=[104905,104971],d5=[4326,...n3,...h5],Tu=[-20037508342788905e-9,20037508342788905e-9],p0=[-20037508342787e-6,20037508342787e-6],Rm={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:Tu,origin:p0,dx:1e-5},o3={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Tu,origin:p0,dx:1e-5},102100:Rm,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Tu,origin:p0,dx:1e-5},3857:Rm,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:Rm};function _t(e,t){if(e===t)return!0;if(e==null||t==null)return!1;const r=e.wkid,i=t.wkid;if(r!=null||i!=null){if(r===i||Vi(e)&&Vi(t))return!0;const o=e.latestWkid;if(o!=null&&i===o)return!0;const a=t.latestWkid;return a!=null&&r===a}let s,n;return e.wkt2&&t.wkt2?(s=e.wkt2,n=t.wkt2):e.wkt&&t.wkt&&(s=e.wkt,n=t.wkt),!(!s||!n)&&s.toUpperCase()===n.toUpperCase()}function zt(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&o3[t]||null}function a3(e){if(!e)return;const{wkid:t,vcsWkid:r}=e;if(t)return r?JSON.stringify({wkid:t,vcsWkid:r}):String(t);const i=e.wkt||e.wkt2;return JSON.stringify(i?r?{wkt:i,vcsWkid:r}:{wkt:i}:{})}function Pf(e){if(!fr(e))return!1;const{wkid:t}=e;if(t)return g[t]==null;const r=e.wkt2||e.wkt;return!!r&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(r)}function p5(e){return!(l3(e)||c3(e))}function Bo(e){return(e==null?void 0:e.wkid)===4326}function _Q(e){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(e)}function ab(e){return(e==null?void 0:e.wkid)===zo.CGCS2000}function Vi(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&n3.includes(t)}function f5(e){return(e==null?void 0:e.wkid)===32662}function Rf(e){return e===zo.GCSMARS2000||e===zo.GCSMARS2000_SPHERE}function l3(e){return Rf(e==null?void 0:e.wkid)}function Cf(e){return e===zo.GCSMOON2000}function c3(e){return Cf(e==null?void 0:e.wkid)}function m5(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&d5.includes(t)}function fr(e){if(e==null)return!1;const t=e.wkid;return t!=null&&t>=2e3||e.wkt2!=null||e.wkt!=null}const u3={wkid:4326,wkt:LT(o3[4326].wkTemplate,{Central_Meridian:"0.0"})},h3={wkid:102100,latestWkid:3857},y5={wkid:32662};function Av(e){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const g5=Av(We),Iv=Av(Ui),Ov=Av(Mn),v5={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${We.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},_5=Iv.wkt.toUpperCase(),w5=Ov.wkt.toUpperCase();function b5(e){if(e!=null&&fr(e)){const t=e.wkid,r=e.wkt2??e.wkt;if(Rf(t))return Ui;const i=r==null?void 0:r.toUpperCase();if(r&&i===_5)return Ui;if(Cf(t)||i&&i===w5)return Mn}return We}function wQ(e){return Rf(e)?Ui:Cf(e)?Mn:We}function Np(e){return _t(e,g5)}function xn(e){return Np(e)||_t(e,Iv)||_t(e,Ov)}const bQ=39.37,S5=We.radius*Math.PI/200,d3=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,Lo=g,p3=/UNIT\[([^\]]+)]/i,$5=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),T5=Wt()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain:"chains",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),yi=e=>e*e,Ds=e=>e*e*e,Eu={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937},"clarke-feet":{inBaseUnits:.3047972654},"clarke-yards":{inBaseUnits:.9143917962},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"gold-coast-feet":{inBaseUnits:.3047997101815088},chains:{inBaseUnits:20.1168},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:yi(.001)},"square-centimeters":{inBaseUnits:yi(.01)},"square-decimeters":{inBaseUnits:yi(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:yi(1e3)},"square-inches":{inBaseUnits:yi(.0254)},"square-feet":{inBaseUnits:yi(.3048)},"square-yards":{inBaseUnits:yi(.9144)},"square-miles":{inBaseUnits:yi(1609.344)},"square-us-feet":{inBaseUnits:yi(1200/3937)},acres:{inBaseUnits:.0015625*yi(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Ds(.001)},"cubic-centimeters":{inBaseUnits:1e3*Ds(.01)},"cubic-decimeters":{inBaseUnits:1e3*Ds(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Ds(1e3)},"cubic-inches":{inBaseUnits:1e3*Ds(.0254)},"cubic-feet":{inBaseUnits:1e3*Ds(.3048)},"cubic-yards":{inBaseUnits:1e3*Ds(.9144)},"cubic-miles":{inBaseUnits:1e3*Ds(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},E5=(()=>{const e={};for(const t in Eu)for(const r in Eu[t].units)e[r]=t;return e})();function M5(e,t,r){return e*Eu[r].units[t].inBaseUnits}function x5(e,t,r){return e/Eu[r].units[t].inBaseUnits}const f3=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],A5=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function f0(e){const t=E5[e];if(!t)throw new Error("unknown type");return t}function lb(e,t=null){return t=t||f0(e),Eu[t].baseUnit===e}function mt(e,t,r){if(t===r)return e;const i=f0(t);if(i!==f0(r))throw new Error("incompatible units");const s=lb(t,i)?e:M5(e,t,i);return lb(r,i)?s:x5(s,r,i)}function I5(e){switch(e){case"metric":return"meters";case"imperial":return"feet";default:return e}}function SQ(e){return I5(e)}function $Q(e){switch(e){case"metric":return"square-meters";case"imperial":return"square-feet";default:return e}}function TQ(e,t){const r=mt(e,t,"meters");return Math.abs(r)<3e3?"meters":"kilometers"}function EQ(e,t){const r=mt(e,t,"meters");return Math.abs(r)<1e5?"meters":"kilometers"}function MQ(e,t){const r=mt(e,t,"feet");return Math.abs(r)<1e3?"feet":"miles"}function xQ(e,t){const r=mt(e,t,"feet");return Math.abs(r)<1e5?"feet":"miles"}function AQ(e,t){const r=mt(e,t,"square-meters");return Math.abs(r)<3e6?"square-meters":"square-kilometers"}function IQ(e,t){const r=mt(e,t,"square-feet");return Math.abs(r)<1e6?"square-feet":"square-miles"}function O5(e,t,r){return mt(e,t,"meters")/(r*Math.PI/180)}function m3(e){return T5.fromJSON(e.toLowerCase())||null}function cb(e){if(e!=null&&!p5(e))return 1;const t=Dn(e);return t>1e5?1:t}function y3(e){return Dn(e)>=b5(e).metersPerDegree?"meters":th(e)}function Dn(e,t=We.metersPerDegree){return P5(e,!0)??t}function P5(e,t=!1){const r=(e==null?void 0:e.wkid)??null,i=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let s=null;if(r){if(Rf(r))return Ui.metersPerDegree;if(Cf(r))return Mn.metersPerDegree;s=Lo.values[Lo[r]],!s&&t&&$5.has(r)&&(s=S5)}else i&&(_3(i)?s=ub(d3.exec(i),s):v3(i)&&(s=ub(p3.exec(i),s)));return s}function OQ(e){return Pf(e)?1:Dn(e)}function ub(e,t){return e!=null&&e[1]?g3(e[1]):t}function g3(e){return parseFloat(e.split(",")[1])}function th(e){const t=(e==null?void 0:e.wkid)??null,r=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let i=null;if(t)i=Lo.units[Lo[t]];else if(r){const s=_3(r)?d3:v3(r)?p3:null;if(s){const n=s.exec(r);n!=null&&n[1]&&(i=C5(n[1]))}}return i!=null?m3(i):null}function PQ(e){const t=th(e);return t!=null&&f3.includes(t)?t:null}function RQ(e){const t=y3(e);return t!=null&&f3.includes(t)?t:null}function CQ(e){const t=th(e);return t==null?null:A5.get(t)}function v3(e){return/^GEOCCS/i.test(e)}function _3(e){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(e)}const R5=1e-7;function C5(e){const t=/[\\"']{1}([^\\"']+)/.exec(e);let r=t==null?void 0:t[1];if(!r||!Lo.units.includes(r)){const i=g3(e);r=null;const s=Lo.values;for(let n=0;n<s.length;++n)if(Math.abs(i-s[n])<R5){r=Lo.units[n];break}}return r}function kQ(e){const t=th(e);if(t==null)return null;switch(t){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"chains":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric"}return null}const k5={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},N5={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},L5={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},NQ=Wt()(k5),LQ=Wt()(N5),DQ=Wt()(L5);var _i;let Me=_i=class extends W{static fromJSON(e){if(!e)return null;if((e==null?void 0:e.wkid)===102100)return _i.WebMercator;if((e==null?void 0:e.wkid)===4326)return _i.WGS84;const t=new _i;return t.read(e),t}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return Bo(this)}get isWebMercator(){return Vi(this)}get isGeographic(){return Pf(this)}get isWrappable(){return m5(this)}get metersPerUnit(){return Dn(this)}get unit(){return th(this)||(this.isGeographic?"degrees":null)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===_i.WGS84)return new _i(u3);if(this===_i.WebMercator)return new _i(h3);const e=new _i;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=N(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:i}=e.imageCoordinateSystem,s=this.imageCoordinateSystem;return t==null||i?JSON.stringify(s)===JSON.stringify(e.imageCoordinateSystem):r?s.id===t&&s.referenceServiceName===r:s.id===t}return _t(this,e)}toJSON(e){return this.write(void 0,e)}};Me.GCS_NAD_1927=null,Me.WGS84=null,Me.WebMercator=null,Me.PlateCarree=null,u([d({readOnly:!0})],Me.prototype,"isWGS84",null),u([d({readOnly:!0})],Me.prototype,"isWebMercator",null),u([d({readOnly:!0})],Me.prototype,"isGeographic",null),u([d({readOnly:!0})],Me.prototype,"isWrappable",null),u([d({type:ke,json:{write:!0}})],Me.prototype,"latestWkid",void 0),u([d({readOnly:!0})],Me.prototype,"metersPerUnit",null),u([d({readOnly:!0})],Me.prototype,"unit",null),u([d({type:ke,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],Me.prototype,"wkid",void 0),u([d({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],Me.prototype,"wkt",void 0),u([pe("wkt"),pe("web-scene","wkt")],Me.prototype,"writeWkt",null),u([d({type:String,json:{write:!1}})],Me.prototype,"wkt2",void 0),u([d({type:ke,json:{write:!0}})],Me.prototype,"vcsWkid",void 0),u([d({type:ke,json:{write:!0}})],Me.prototype,"latestVcsWkid",void 0),u([d()],Me.prototype,"imageCoordinateSystem",void 0),Me=_i=u([$("esri.geometry.SpatialReference")],Me),Me.prototype.toJSON.isDefaultToJSON=!0,Me.GCS_NAD_1927=Y.freeze(new Me({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),Me.WGS84=Y.freeze(new Me(u3)),Me.WebMercator=Y.freeze(new Me(h3)),Me.PlateCarree=Y.freeze(new Me(y5));const de=Me;function ve(e,t,r){let i,s;return t===void 0||Array.isArray(t)?(s=e,r=t,i=[void 0]):(s=t,i=Array.isArray(e)?e:[e]),(n,o)=>{const a=n.constructor.prototype;i.forEach(l=>{const h=vE(n,l,s);h.read&&typeof h.read=="object"||(h.read={}),h.read.reader=a[o],r&&(h.read.source=(h.read.source||[]).concat(r))})}}let wi=class extends W{constructor(...t){super(...t),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=de.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(t,r){if(t instanceof de)return t;if(t!=null){const i=new de;return i.read(t,r),i}return t}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(t){return this.cache[t]}setCacheValue(t,r){this.cache[t]=r}};u([d()],wi.prototype,"type",void 0),u([d({readOnly:!0})],wi.prototype,"cache",null),u([d({readOnly:!0})],wi.prototype,"extent",null),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],wi.prototype,"hasM",void 0),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],wi.prototype,"hasZ",void 0),u([d({type:de,json:{write:!0},value:de.WGS84})],wi.prototype,"spatialReference",void 0),u([ve("spatialReference")],wi.prototype,"readSpatialReference",null),wi=u([$("esri.geometry.Geometry")],wi);const Ps=wi,D5=Object.prototype.toString;function F5(e){const t="__accessorMetadata__"in e?Bt(e):e;return function(...r){if(r.push(t),typeof r[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return U5.apply(this,r)}}function U5(e,t,r,i){$f(e,t).cast=i}function j5(e){return(t,r)=>{$f(t,e).cast=t[r]}}function ct(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&D5.call(e[0])==="[object Function]"?F5(e[0]):e.length===1&&typeof e[0]=="string"?j5(e[0]):void 0}const G5=57.29577951308232,V5=.017453292519943;function hb(e){return e*G5}function db(e){return e*V5}function UQ(e){return Math.PI/2-2*Math.atan(Math.exp(-e/We.radius))}function m0(e){return e.wkid!=null||e.wkt!=null}const Cm=[0,0];function Lp(e,t,r,i,s){const n=e,o=s;if(o.spatialReference=r,"x"in n&&"x"in o)[o.x,o.y]=t(n.x,n.y,Cm,i);else if("xmin"in n&&"xmin"in o)[o.xmin,o.ymin]=t(n.xmin,n.ymin,Cm,i),[o.xmax,o.ymax]=t(n.xmax,n.ymax,Cm,i);else if("paths"in n&&"paths"in o||"rings"in n&&"rings"in o){const a="paths"in n?n.paths:n.rings,l=[];let h;for(let p=0;p<a.length;p++){const f=a[p];h=[],l.push(h);for(let m=0;m<f.length;m++)h.push(t(f[m][0],f[m][1],[0,0],i)),f[m].length>2&&h[m].push(f[m][2]),f[m].length>3&&h[m].push(f[m][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in n&&"points"in o){const a=n.points,l=[];for(let h=0;h<a.length;h++)l[h]=t(a[h][0],a[h][1],[0,0],i),a[h].length>2&&l[h].push(a[h][2]),a[h].length>3&&l[h].push(a[h][3]);o.points=l}return s}function gd(e,t){const r=e&&(m0(e)?e:e.spatialReference),i=t&&(m0(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!r||!i)&&(!!_t(i,r)||Vi(i)&&Bo(r)||Vi(r)&&Bo(i))}function kf(e,t){if(e==null)return null;const r=e.spatialReference,i=t&&(m0(t)?t:t.spatialReference);return gd(r,i)?_t(r,i)?N(e):Vi(i)?Lp(e,Va,de.WebMercator,!1,N(e)):Bo(i)?Lp(e,Nf,de.WGS84,!1,N(e)):null:null}function Va(e,t,r=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const i=db(t);return r[0]=db(e)*We.radius,r[1]=We.halfSemiMajorAxis*Math.log((1+Math.sin(i))/(1-Math.sin(i))),r}function Nf(e,t,r=[0,0],i=!1){if(e===Tu[0])r[0]=-180;else if(e===Tu[1])r[0]=180;else{const s=hb(e/We.radius);r[0]=i?s:s-360*Math.floor((s+180)/360)}return r[1]=hb(Math.PI/2-2*Math.atan(Math.exp(-t/We.radius))),r}function Do(e,t=!1,r=N(e)){return Lp(e,Va,de.WebMercator,t,r)}function cc(e,t=!1,r=N(e)){return Lp(e,Nf,de.WGS84,t,r)}function w3(e,t){const r=e.x-t.x,i=e.y-t.y,s=e.z!=null&&t.z!=null?e.z-t.z:0;return Math.sqrt(r*r+i*i+s*s)}function z5(e){var t;return((t=b3(e,S3))==null?void 0:t[0])??null}function B5(e){var t;return((t=b3(e,S3))==null?void 0:t[1])??null}function b3({x:e,y:t,spatialReference:r},i=[0,0]){if(r){if(Vi(r))return Nf(e,t,i);if(Pf(r))return i[0]=e,i[1]=t,i}return null}const S3=[0,0];var vd;const km=[0,0];function pb(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Ft=vd=class extends Ps{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const r=e._get("spatialReference");t._set("spatialReference",Y.isFrozen(r)?r:r.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,r,i,s){let n;if(Array.isArray(e))n=e,s=t,e=n[0],t=n[1],r=n[2],i=n[3];else if(e&&typeof e=="object"){if(n=e,e=n.x!=null?n.x:n.longitude,t=n.y!=null?n.y:n.latitude,r=n.z,i=n.m,(s=n.spatialReference)&&s.declaredClass!=="esri.geometry.SpatialReference"&&(s=new de(s)),n.longitude!=null||n.latitude!=null){if(n.longitude==null)V.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(n.latitude==null)V.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!n.declaredClass&&(s!=null&&s.isWebMercator)){const a=Va(n.longitude,n.latitude,km);e=a[0],t=a[1]}}}else pb(r)?(s=r,r=null):pb(i)&&(s=i,i=null);const o={x:e,y:t};return o.x==null&&o.y!=null?V.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&V.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),s!=null&&(o.spatialReference=s),r!=null&&(o.z=r),i!=null&&(o.m=i),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){return B5(this)}set latitude(e){const{spatialReference:t,x:r}=this;e!=null&&t&&(t.isWebMercator?this._set("y",Va(r,e,km)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){return z5(this)}set longitude(e){const{y:t,spatialReference:r}=this;e!=null&&r&&(r.isWebMercator?this._set("x",Va(e,t,km)[0]):r.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,r){t[r]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new vd;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return vd.copy(e,this),this}equals(e){if(e==null)return!1;const{x:t,y:r,z:i,m:s,spatialReference:n}=this,{z:o,m:a}=e;let{x:l,y:h,spatialReference:p}=e;if(!n.equals(p))if(n.isWebMercator&&p.isWGS84)[l,h]=Va(l,h),p=n;else{if(!n.isWGS84||!p.isWebMercator)return!1;[l,h]=Nf(l,h),p=n}return t===l&&r===h&&i===o&&s===a&&n.wkid===p.wkid}offset(e,t,r){return this.x+=e,this.y+=t,r!=null&&(this.z=(this.z??0)+r),this}normalize(){if(!this.spatialReference)return this;const e=zt(this.spatialReference);if(!e)return this;let t=this.x;const[r,i]=e.valid,s=2*i;let n;return t>i?(n=Math.ceil(Math.abs(t-i)/s),t-=n*s):t<r&&(n=Math.ceil(Math.abs(t-r)/s),t+=n*s),this._set("x",t),this}distance(e){return w3(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};u([d({readOnly:!0})],Ft.prototype,"cache",null),u([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Ft.prototype,"hasM",null),u([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Ft.prototype,"hasZ",null),u([d({type:Number})],Ft.prototype,"latitude",null),u([d({type:Number})],Ft.prototype,"longitude",null),u([d({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),ct(e=>isNaN(e)?e:pr(e))],Ft.prototype,"x",void 0),u([pe("x")],Ft.prototype,"writeX",null),u([ve("x")],Ft.prototype,"readX",null),u([d({type:Number,json:{write:!0}})],Ft.prototype,"y",void 0),u([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Ft.prototype,"z",void 0),u([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Ft.prototype,"m",void 0),Ft=vd=u([$("esri.geometry.Point")],Ft),Ft.prototype.toJSON.isDefaultToJSON=!0;const ae=Ft,Nm=[0,0];function rh(e,t){return t!=null&&Gt(e,t.x,t.y,t.z)}function jQ(e,t){if(!t.points||t.points.length)return!1;for(const r of t.points)if(!ml(e,r))return!1;return!0}function H5(e,t){const{xmin:r,ymin:i,zmin:s,xmax:n,ymax:o,zmax:a}=t;return e.hasZ&&t.hasZ?Gt(e,r,i,s)&&Gt(e,r,o,s)&&Gt(e,n,o,s)&&Gt(e,n,i,s)&&Gt(e,r,i,a)&&Gt(e,r,o,a)&&Gt(e,n,o,a)&&Gt(e,n,i,a):Gt(e,r,i)&&Gt(e,r,o)&&Gt(e,n,o)&&Gt(e,n,i)}function ml(e,t){return Gt(e,t[0],t[1])}function W5(e,t){return Gt(e,t[0],t[1],t[2])}function Gt(e,t,r,i){return t>=e.xmin&&t<=e.xmax&&r>=e.ymin&&r<=e.ymax&&(i==null||!e.hasZ||i>=e.zmin&&i<=e.zmax)}function Pv(e,t){return Nm[1]=t.y,Nm[0]=t.x,q5(e,Nm)}function q5(e,t){return Rv(e.rings,t)}function Rv(e,t){if(!e)return!1;if(Z5(e))return fb(!1,e,t);let r=!1;for(let i=0,s=e.length;i<s;i++)r=fb(r,e[i],t);return r}function Z5(e){return!Array.isArray(e[0][0])}function fb(e,t,r){const[i,s]=r;let n=e,o=0;for(let a=0,l=t.length;a<l;a++){o++,o===l&&(o=0);const[h,p]=t[a],[f,m]=t[o];(p<s&&m>=s||m<s&&p>=s)&&h+(s-p)/(m-p)*(f-h)<i&&(n=!n)}return n}function Y5(e,t){return rh(e,t)}function J5(e,t){const r=e.hasZ&&t.hasZ;let i,s,n;if(e.xmin<=t.xmin){if(i=t.xmin,e.xmax<i)return!1}else if(i=e.xmin,t.xmax<i)return!1;if(e.ymin<=t.ymin){if(s=t.ymin,e.ymax<s)return!1}else if(s=e.ymin,t.ymax<s)return!1;if(r&&t.hasZ){if(e.zmin<=t.zmin){if(n=t.zmin,e.zmax<n)return!1}else if(n=e.zmin,t.zmax<n)return!1}return!0}function X5(e,t){const{points:r,hasZ:i}=t,s=i?W5:ml;for(const n of r)if(s(e,n))return!0;return!1}const Ho=[0,0],Wo=[0,0],qo=[0,0],Zo=[0,0],K5=[Ho,Wo,qo,Zo],$3=[[qo,Ho],[Ho,Wo],[Wo,Zo],[Zo,qo]];function Q5(e,t){return e4(e,t.rings)}function e4(e,t){Ho[0]=e.xmin,Ho[1]=e.ymax,Wo[0]=e.xmax,Wo[1]=e.ymax,qo[0]=e.xmin,qo[1]=e.ymin,Zo[0]=e.xmax,Zo[1]=e.ymin;for(const r of K5)if(Rv(t,r))return!0;for(const r of t){if(!r.length)continue;let i=r[0];if(ml(e,i))return!0;for(let s=1;s<r.length;s++){const n=r[s];if(ml(e,n)||T3(i,n,$3))return!0;i=n}}return!1}function t4(e,t){Ho[0]=e.xmin,Ho[1]=e.ymax,Wo[0]=e.xmax,Wo[1]=e.ymax,qo[0]=e.xmin,qo[1]=e.ymin,Zo[0]=e.xmax,Zo[1]=e.ymin;const r=t.paths;for(const i of r){if(!r.length)continue;let s=i[0];if(ml(e,s))return!0;for(let n=1;n<i.length;n++){const o=i[n];if(ml(e,o)||T3(s,o,$3))return!0;s=o}}return!1}const ft=[0,0];function r4(e){for(let t=0;t<e.length;t++){const r=e[t];for(let s=0;s<r.length-1;s++){const n=r[s],o=r[s+1];for(let a=t+1;a<e.length;a++)for(let l=0;l<e[a].length-1;l++){const h=e[a][l],p=e[a][l+1];if(y0(n,o,h,p,ft)&&!(ft[0]===n[0]&&ft[1]===n[1]||ft[0]===h[0]&&ft[1]===h[1]||ft[0]===o[0]&&ft[1]===o[1]||ft[0]===p[0]&&ft[1]===p[1]))return!0}}const i=r.length;if(!(i<=4))for(let s=0;s<i-3;s++){let n=i-1;s===0&&(n=i-2);const o=r[s],a=r[s+1];for(let l=s+2;l<n;l++){const h=r[l],p=r[l+1];if(y0(o,a,h,p,ft)&&!(ft[0]===o[0]&&ft[1]===o[1]||ft[0]===h[0]&&ft[1]===h[1]||ft[0]===a[0]&&ft[1]===a[1]||ft[0]===p[0]&&ft[1]===p[1]))return!0}}}return!1}function T3(e,t,r){for(let i=0;i<r.length;i++)if(y0(e,t,r[i][0],r[i][1]))return!0;return!1}function y0(e,t,r,i,s){const[n,o]=e,[a,l]=t,[h,p]=r,[f,m]=i,y=f-h,v=n-h,_=a-n,w=m-p,S=o-p,E=l-o,x=w*_-y*E;if(x===0)return!1;const A=(y*S-w*v)/x,P=(_*S-E*v)/x;return A>=0&&A<=1&&P>=0&&P<=1&&(s&&(s[0]=n+A*(a-n),s[1]=o+A*(l-o)),!0)}function i4(e){switch(e){case"esriGeometryEnvelope":case"extent":return J5;case"esriGeometryMultipoint":case"multipoint":return X5;case"esriGeometryPoint":case"point":return Y5;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return Q5;case"esriGeometryPolyline":case"polyline":return t4}}var $r;function s4(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function Fs(e,t,r){return t==null?r:r==null?t:e(t,r)}let ot=$r=class extends Ps{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,r,i,s){return s4(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?de.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:r,ymax:i,spatialReference:s??de.WGS84}}static fromBounds(e,t){return new $r({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new $r({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new ae({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new $r;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&gd(t,r)&&(e=t.isWebMercator?Do(e):cc(e,!0)),e.type==="point"?rh(this,e):e.type==="extent"&&H5(this,e)}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&gd(t,r)&&(e=t.isWebMercator?Do(e):cc(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),r=this.width*t,i=this.height*t;if(this.xmin+=r,this.ymin+=i,this.xmax-=r,this.ymax-=i,this.hasZ){const s=(this.zmax-this.zmin)*t;this.zmin+=s,this.zmax-=s}if(this.hasM){const s=(this.mmax-this.mmin)*t;this.mmin+=s,this.mmax-=s}return this}intersects(e){if(e==null)return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,r=e.spatialReference;return t&&r&&!_t(t,r)&&gd(t,r)&&(e=t.isWebMercator?Do(e):cc(e,!0)),i4(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,r){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,r!=null&&(this.zmin+=r,this.zmax+=r),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Fs(Math.min,this.zmin,e.zmin),this.zmax=Fs(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Fs(Math.min,this.mmin,e.mmin),this.mmax=Fs(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:e!=null&&this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Fs(Math.max,this.zmin,e.zmin),this.zmax=Fs(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Fs(Math.max,this.mmin,e.mmin),this.mmax=Fs(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write({},e)}_shiftCM(e=zt(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,r=this._getCM(e);if(r){const i=t.isWebMercator?cc(r):r;this.xmin-=r.x,this.xmax-=r.x,t.isWebMercator||(i.x=Lm(i.x,e).x),this.spatialReference=new de(LT((t.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:i.x}))}return this}_getCM(e){let t=null;const[r,i]=e.valid,s=this.xmin,n=this.xmax;return s>=r&&s<=i&&n>=r&&n<=i||(t=this.center),t}_normalize(e,t,r){const i=this.spatialReference;if(!i)return this;const s=r??zt(i);if(s==null)return this;const n=this._getParts(s).map(l=>l.extent);if(n.length<2)return n[0]||this;if(n.length>2)return e?this._shiftCM(s):this.set({xmin:s.valid[0],xmax:s.valid[1]});if(e)return this._shiftCM(s);if(t)return n;let o=!0,a=!0;return n.forEach(l=>{l.hasZ||(o=!1),l.hasM||(a=!1)}),{rings:n.map(l=>{const h=[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(o){const p=(l.zmax-l.zmin)/2;for(let f=0;f<h.length;f++)h[f].push(p)}if(a){const p=(l.mmax-l.mmin)/2;for(let f=0;f<h.length;f++)h[f].push(p)}return h}),hasZ:o,hasM:a,spatialReference:i}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:s,ymax:n,spatialReference:o}=this,a=this.width,l=this.xmin,h=this.xmax;let p;e=e||zt(o);const[f,m]=e.valid;p=Lm(this.xmin,e);const y=p.x,v=p.frameId;p=Lm(this.xmax,e);const _=p.x,w=p.frameId,S=y===_&&a>0;if(a>2*m){const E=new $r(l<h?y:_,s,m,n,o),x=new $r(f,s,l<h?_:y,n,o),A=new $r(0,s,m,n,o),P=new $r(f,s,0,n,o),C=[],U=[];E.contains(A)&&C.push(v),E.contains(P)&&U.push(v),x.contains(A)&&C.push(w),x.contains(P)&&U.push(w);for(let F=v+1;F<w;F++)C.push(F),U.push(F);t.push({extent:E,frameIds:[v]},{extent:x,frameIds:[w]},{extent:A,frameIds:C},{extent:P,frameIds:U})}else y>_||S?t.push({extent:new $r(y,s,m,n,o),frameIds:[v]},{extent:new $r(f,s,_,n,o),frameIds:[w]}):t.push({extent:new $r(y,s,_,n,o),frameIds:[v]});this.cache._parts=t}const r=this.hasZ,i=this.hasM;if(r||i){const s={};r&&(s.zmin=this.zmin,s.zmax=this.zmax),i&&(s.mmin=this.mmin,s.mmax=this.mmax);for(let n=0;n<t.length;n++)t[n].extent.set(s)}return t}};function Lm(e,t){const[r,i]=t.valid,s=2*i;let n,o=0;return e>i?(n=Math.ceil(Math.abs(e-i)/s),e-=n*s,o=n):e<r&&(n=Math.ceil(Math.abs(e-r)/s),e+=n*s,o=-n),{x:e,frameId:o}}u([d({readOnly:!0})],ot.prototype,"cache",null),u([d({readOnly:!0})],ot.prototype,"center",null),u([d({readOnly:!0})],ot.prototype,"extent",null),u([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],ot.prototype,"hasM",null),u([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],ot.prototype,"hasZ",null),u([d({readOnly:!0})],ot.prototype,"height",null),u([d({readOnly:!0})],ot.prototype,"width",null),u([d({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],ot.prototype,"xmin",void 0),u([d({type:Number,json:{write:!0}})],ot.prototype,"ymin",void 0),u([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],ot.prototype,"mmin",void 0),u([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ot.prototype,"zmin",void 0),u([d({type:Number,json:{write:!0}})],ot.prototype,"xmax",void 0),u([d({type:Number,json:{write:!0}})],ot.prototype,"ymax",void 0),u([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],ot.prototype,"mmax",void 0),u([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ot.prototype,"zmax",void 0),ot=$r=u([$("esri.geometry.Extent")],ot),ot.prototype.toJSON.isDefaultToJSON=!0;const Be=ot;let tu;var pT,fT;const n4=((pT=globalThis.esriConfig)==null?void 0:pT.locale)??((fT=globalThis.dojoConfig)==null?void 0:fT.locale);var mT;const ru=(mT=globalThis.document)==null?void 0:mT.documentElement;function E3(){var r;const e=ru==null?void 0:ru.getAttribute("lang"),t=(r=globalThis.navigator)==null?void 0:r.language;return n4??e??t??"en"}function rr(){return tu===void 0&&(tu=E3()),tu}function o4(e=rr()){const t=/^([a-zA-Z]{2,3})(?:[_-][a-zA-Z0-9]+)*$/.exec(e);return t==null?void 0:t[1].toLowerCase()}const _d=[];function M3(e){return _d.push(e),_e(()=>_d.splice(_d.indexOf(e),1))}const wd=[];function Cv(e){return wd.push(e),_e(()=>wd.splice(wd.indexOf(e),1))}function mb(){const e=E3();tu!==e&&([...wd].forEach(t=>t(e)),tu=e,[..._d].forEach(t=>t(e)))}var yT;(yT=globalThis.addEventListener)==null||yT.call(globalThis,"languagechange",mb),ru&&new MutationObserver(()=>{mb()}).observe(ru,{attributeFilter:["lang"]});let Ah;function a4(e){return Ah&&!Ah.destroyed||(Ah=e()),Ah}var g0;const l4=new ut({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Tr=g0=class extends Y{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new g0({categories:this.categories?N(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let r=[];this.categories&&(r=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let i="";if(this.extent){const o=kf(this.extent,de.WGS84);o!=null&&(i=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let s=this.query;!this.disableExtraQuery&&e.extraQuery&&(s="("+s+")"+e.extraQuery);const n={categories:r,bbox:i,q:s,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(n.sortField=this.sortField.split(",").map(o=>l4.toJSON(o.trim())).join(","),n.sortOrder=this.sortOrder),{query:{...t,...n}}}};u([d()],Tr.prototype,"categories",void 0),u([d()],Tr.prototype,"disableExtraQuery",void 0),u([d({type:Be})],Tr.prototype,"extent",void 0),u([d()],Tr.prototype,"filter",void 0),u([d()],Tr.prototype,"num",void 0),u([d()],Tr.prototype,"query",void 0),u([d()],Tr.prototype,"sortField",void 0),u([d()],Tr.prototype,"sortOrder",null),u([d()],Tr.prototype,"start",void 0),Tr=g0=u([$("esri.portal.PortalQueryParams")],Tr);const Li=Tr;var v0;let et=v0=class extends W{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var r;const e=this.url,t=this.thumbnail;return e&&t&&this.portal?(r=this.portal)==null?void 0:r.normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal.request(this.url+"/categorySchema",e).then(t=>{const r=t.categorySchema||[];return r.some(i=>i.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):r})}fetchMembers(e){return this.portal.request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new k("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new v0({sourceJSON:e});return t.read(e),t}queryItems(e,t){let r=Bt(Li,e);const i=this.portal;return parseFloat(i.currentVersion)>5?(r=r||new Li,i.queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",t)):(r=r?r.clone():new Li,r.query="group:"+this.id+(r.query?" "+r.query:""),i.queryItems(r,t))}_fetchCategorySchemaSet(e,t){const r=this.portal;return r.fetchSelf(r.authMode,!0,t).then(i=>{const s=i.contentCategorySetsGroupQuery;if(s){const n=new Li({disableExtraQuery:!0,num:1,query:s});return r.queryGroups(n,t)}throw new k("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(i=>{if(i.total){const s=i.results[0],n=new Li({num:1,query:`typekeywords:"${e}"`});return s.queryItems(n,t)}throw new k("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(i=>i.total?i.results[0].fetchData("json",t).then(s=>{const n=s==null?void 0:s.categorySchema;return n!=null&&n.length?n:[]}):[])}};u([d()],et.prototype,"access",void 0),u([d({type:Date})],et.prototype,"created",void 0),u([d()],et.prototype,"description",void 0),u([d()],et.prototype,"id",void 0),u([d()],et.prototype,"isInvitationOnly",void 0),u([d({type:Date})],et.prototype,"modified",void 0),u([d()],et.prototype,"owner",void 0),u([d()],et.prototype,"portal",void 0),u([d()],et.prototype,"snippet",void 0),u([d()],et.prototype,"sortField",void 0),u([d()],et.prototype,"sortOrder",void 0),u([d()],et.prototype,"sourceJSON",void 0),u([d()],et.prototype,"tags",void 0),u([d()],et.prototype,"thumbnail",void 0),u([d({readOnly:!0})],et.prototype,"thumbnailUrl",null),u([d()],et.prototype,"title",void 0),u([d({readOnly:!0})],et.prototype,"url",null),et=v0=u([$("esri.portal.PortalGroup")],et);const _0=et;let Xn=class extends Y{constructor(t){super(t),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};u([d()],Xn.prototype,"nextQueryParams",void 0),u([d()],Xn.prototype,"queryParams",void 0),u([d()],Xn.prototype,"results",void 0),u([d()],Xn.prototype,"total",void 0),Xn=u([$("esri.portal.PortalQueryResult")],Xn);const c4=Xn;let rs=class extends W{constructor(t){super(t),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var r;const t=(r=this.portal)==null?void 0:r.restUrl;return t?`${t}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new k("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};u([d({type:Date})],rs.prototype,"created",void 0),u([d()],rs.prototype,"id",void 0),u([d()],rs.prototype,"portal",void 0),u([d()],rs.prototype,"title",void 0),u([d({readOnly:!0})],rs.prototype,"url",null),u([d()],rs.prototype,"username",void 0),rs=u([$("esri.portal.PortalFolder")],rs);const u4=rs;var w0;let Pe=w0=class extends W{constructor(e){super(e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/content/users/${this.username}`:null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,r=e==null?void 0:e.data,i=e==null?void 0:e.folder,s={method:"post"};t&&(s.query=t.createPostQuery(),r!=null&&(typeof r=="string"?s.query.text=r:typeof r=="object"&&(s.query.text=JSON.stringify(r))));let n=this.userContentUrl;return i&&(n+="/"+(typeof i=="string"?i:i.id)),this.portal.request(n+"/addItem",s).then(o=>(t.id=o.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}async deleteItem(e,t=!1){let r=this.userContentUrl;e.ownerFolder&&(r+="/"+e.ownerFolder);const i=t?{permanentDelete:!0}:{};await this.portal.request(r+`/items/${e.id}/delete`,{method:"post",query:i}),e.id=null,e.portal=null}async deleteItems(e,t=!1){e=e.slice();const r=this.userContentUrl+"/deleteItems",i=[],s=e.map(n=>n.id);if(s.length){const n={method:"post",query:{items:s.join(","),permanentDelete:t}},o=await this.portal.request(r,n);for(const a of o.results){const l=e.find(f=>a.itemId===f.id),h=a.success;let p=null;h?(l.id=null,l.portal=null):a.error&&(p=new k("portal:delete-item-failed",a.error.message,a.error)),i.push({item:l,success:h,error:p})}}return i}fetchFolders(){const e={query:{num:1}};return this.portal.request(this.userContentUrl??"",e).then(t=>{let r;return r=t&&t.folders?t.folders.map(i=>{const s=u4.fromJSON(i);return s.portal=this.portal,s}):[],r})}fetchGroups(){return this.portal.request(this.url??"").then(e=>{let t;return t=e&&e.groups?e.groups.map(r=>{const i=_0.fromJSON(r);return i.portal=this.portal,i}):[],t})}async fetchItems(e){e??(e={});let t=this.userContentUrl??"";e.folder&&(t+="/"+e.folder.id);const{default:r}=await j(()=>Promise.resolve().then(()=>P3),void 0,import.meta.url),i={folders:!1,inRecycleBin:!!e.inRecycleBin||null,foldersContent:!(e.folder||!e.includeSubfolderItems)||null,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"},s=await this.portal.request(t,{query:i});let n;return s!=null&&s.items?(n=s.items.map(o=>{const a=r.fromJSON(o);return a.portal=this.portal,a}),await Promise.all(n.map(o=>o.load())),{items:n,nextStart:s.nextStart,total:s.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new _0({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new k("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(e,t){const r=this.userContentUrl,i=t?{folderID:typeof t=="string"?t:t.id}:null;await this.portal.request(r+`/items/${e.id}/restore`,{method:"post",query:i})}toJSON(){throw new k("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new w0({sourceJSON:e});return t.read(e),t}};u([d()],Pe.prototype,"access",void 0),u([d({type:Date})],Pe.prototype,"created",void 0),u([d()],Pe.prototype,"culture",void 0),u([d()],Pe.prototype,"description",void 0),u([d()],Pe.prototype,"email",void 0),u([d()],Pe.prototype,"favGroupId",void 0),u([d()],Pe.prototype,"fullName",void 0),u([d({type:Date})],Pe.prototype,"modified",void 0),u([d()],Pe.prototype,"orgId",void 0),u([d()],Pe.prototype,"portal",void 0),u([d()],Pe.prototype,"preferredView",void 0),u([d()],Pe.prototype,"privileges",void 0),u([d()],Pe.prototype,"region",void 0),u([d()],Pe.prototype,"role",void 0),u([d()],Pe.prototype,"roleId",void 0),u([d()],Pe.prototype,"sourceJSON",void 0),u([d()],Pe.prototype,"thumbnail",void 0),u([d({readOnly:!0})],Pe.prototype,"thumbnailUrl",null),u([d()],Pe.prototype,"units",void 0),u([d({readOnly:!0})],Pe.prototype,"userContentUrl",null),u([d({readOnly:!0})],Pe.prototype,"url",null),u([d()],Pe.prototype,"username",void 0),u([d()],Pe.prototype,"userLicenseTypeId",void 0),u([d()],Pe.prototype,"userType",void 0),Pe=w0=u([$("esri.portal.PortalUser")],Pe);const x3=Pe;var or;let jl;const yb={PortalGroup:()=>Promise.resolve({default:_0}),PortalItem:()=>j(()=>Promise.resolve().then(()=>P3),void 0,import.meta.url),PortalUser:()=>Promise.resolve({default:x3})};let L=or=class extends Qu(En){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Te.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){gb.unregister(this),this.defaultBasemap=Ve(this.defaultBasemap),this.defaultDevBasemap=Ve(this.defaultDevBasemap),this.defaultVectorBasemap=Ve(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=Ue(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)Te.request.trustedServers.includes(t)||Te.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){var r;const e=(r=this.user)==null?void 0:r.orgId,t=!e||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get hasAPIKey(){return BE(this.url)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.slice(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=x3.fromJSON(e),t.portal=this),t}load(e){const t=j(()=>Promise.resolve().then(()=>j4),void 0,import.meta.url).then(({default:r})=>{Qe(e),jl=r}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(r=>{var i;if(!this.hasAPIKey&&Ae){const s=Ae;this.credential=s.findCredential(this.restUrl),this.credential||this.authMode!==or.AUTH_MODE_AUTO&&this.authMode!==or.AUTH_MODE_NO_PROMPT||((i=this._esriIdCredentialCreateHandle)==null||i.remove(),this._esriIdCredentialCreateHandle=s.on("credential-create",h4(new WeakRef(this))),gb.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await j(async()=>{const{default:r}=await import("./ElevationLayer-d8LyzoJU.js");return{default:r}},__vite__mapDeps([4,5,6,7,8,9,10,11,12,13,14,15]),import.meta.url)).default;return e?e.map(r=>new t({id:r.id,url:r.url})):[]}async fetchBasemaps(e,t){const r=await this._fetchBasemaps(e,t);if((t==null?void 0:t.include3d)===!0&&this.use3dBasemaps!==!1){const i=await this._fetchBasemaps3D(e,t);r.unshift(...i)}return r}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const t=new Li;t.query=this.default3DBasemapQuery,t.disableExtraQuery=!0;const r=(await this.queryItems(t,e)).results.find(i=>i.type==="Web Scene");return r?new jl({portalItem:r}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):hi(e)?Promise.reject(je()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,r=new Li({num:100,sortField:"title"});if(t!=null&&t.length){const i=[];for(const s of t)i.push(`(title:"${s.title}" AND owner:${s.owner})`);return r.query=i.join(" OR "),this.queryGroups(r,e).then(s=>s.results)}return hi(e)?Promise.reject(je()):Promise.resolve([])}fetchRegions(e){var r;const t=((r=this.user)==null?void 0:r.culture)||this.culture||rr();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){var r;const t=((r=this.user)==null?void 0:r.culture)||this.culture||rr();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return a4(()=>new or)}queryGroups(e,t){return this.queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this.queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",t)}fetchSelf(e=this.authMode,t=!1,r){const i=this.restUrl+"/portals/self",s={authMode:e,query:{culture:rr().toLowerCase()},withCredentials:!0,...r};return s.authMode==="auto"&&(s.authMode="no-prompt"),t&&(s.query.default=!0),this.request(i,s)}queryPortal(e,t,r,i){const s=Bt(Li,t),n=o=>this.request(this.restUrl+e,{...s.toRequestOptions(this),...i}).then(a=>{const l=s.clone();return l.start=a.nextStart,new c4({nextQueryParams:l,queryParams:s,total:a.total,results:or._resultsToTypedArray(o,{portal:this},a,i)})}).then(a=>Promise.all(a.results.map(l=>typeof l.when=="function"?l.when():a)).then(()=>a,l=>(iE(l),a)));return r&&yb[r]?yb[r]().then(({default:o})=>(Qe(i),n(o))):n()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new k("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===or.AUTH_MODE_ANONYMOUS||this.authMode===or.AUTH_MODE_NO_PROMPT&&!Ae)return Promise.reject(new k("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this.fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this.fetchSelf("immediate"))).then(r=>{r&&(this.sourceJSON=r,this.read(r))});return Ae?Ae.getCredential(this.restUrl,{prompt:this.authMode!==or.AUTH_MODE_NO_PROMPT}).then(t=>e(t)):e(this.credential)}normalizeUrl(e){var r;const t=(r=this.credential)==null?void 0:r.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}requestToTypedArray(e,t,r){return this.request(e,t).then(i=>{const s=or._resultsToTypedArray(r,{portal:this},i);return Promise.all(s.map(n=>typeof n.when=="function"?n.when():i)).then(()=>s,()=>s)})}request(e,t={}){const r={f:"json",...t.query},{authMode:i=this.authMode===or.AUTH_MODE_ANONYMOUS||this.authMode===or.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:s=null,cacheBust:n=!1,method:o="auto",responseType:a="json",signal:l}=t,h={authMode:i,body:s,cacheBust:n,method:o,query:r,responseType:a,timeout:0,signal:l};return t.withCredentials&&(h.withCredentials=!0),st(this._normalizeSSL(e),h).then(p=>p.data)}toJSON(){throw new k("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new or({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new k("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}async _fetchBasemaps(e,t){const r=new Li;r.query=e||(this.hasAPIKey?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0;const i=await this.queryGroups(r,t);if(!i.total)return[];const s=i.results[0];r.num=100,r.query='type:"Web Map" -type:"Web Application"',r.sortField=s.sortField||"name",r.sortOrder=s.sortOrder||"desc";const n=await s.queryItems(r,t);return n.total?n.results.filter(o=>o.type==="Web Map").map(o=>new jl({portalItem:o})):[]}async _fetchBasemaps3D(e,t){const r=e||this.basemapGalleryGroupQuery3D;if(!r)return[];const i=new Li({query:r,disableExtraQuery:!0}),s=await this.queryGroups(i,t);if(!s.total)return[];const n=s.results[0];i.num=100,i.query='type:"Web Scene"',i.sortField=n.sortField||"name",i.sortOrder=n.sortOrder||"desc";const o=await n.queryItems(i,t);return o.total?o.results.filter(a=>a.type==="Web Scene").map(a=>new jl({portalItem:a})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const t=jl.fromJSON(e);return t.portalItem={portal:this},t}return null}static _resultsToTypedArray(e,t,r,i){let s;if(r){const n=i!=null?i.signal:null;s=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||t)&&(s=s.map(o=>{const a=Object.assign(e?e.fromJSON(o):o,t);return typeof a.load=="function"&&a.load(n),a}))}else s=[];return s}};L.AUTH_MODE_ANONYMOUS="anonymous",L.AUTH_MODE_AUTO="auto",L.AUTH_MODE_IMMEDIATE="immediate",L.AUTH_MODE_NO_PROMPT="no-prompt",u([d()],L.prototype,"access",void 0),u([d()],L.prototype,"allSSL",void 0),u([d()],L.prototype,"authMode",void 0),u([d()],L.prototype,"authorizedCrossOriginDomains",void 0),u([ve("authorizedCrossOriginDomains")],L.prototype,"readAuthorizedCrossOriginDomains",null),u([d()],L.prototype,"basemapGalleryGroupQuery",void 0),u([d({json:{name:"3DBasemapGalleryGroupQuery"}})],L.prototype,"basemapGalleryGroupQuery3D",void 0),u([d()],L.prototype,"bingKey",void 0),u([d()],L.prototype,"canListApps",void 0),u([d()],L.prototype,"canListData",void 0),u([d()],L.prototype,"canListPreProvisionedItems",void 0),u([d()],L.prototype,"canProvisionDirectPurchase",void 0),u([d()],L.prototype,"canSearchPublic",void 0),u([d()],L.prototype,"canShareBingPublic",void 0),u([d()],L.prototype,"canSharePublic",void 0),u([d()],L.prototype,"canSignInArcGIS",void 0),u([d()],L.prototype,"canSignInIDP",void 0),u([d()],L.prototype,"colorSetsGroupQuery",void 0),u([d()],L.prototype,"commentsEnabled",void 0),u([d({type:Date})],L.prototype,"created",void 0),u([d()],L.prototype,"credential",void 0),u([d()],L.prototype,"culture",void 0),u([d()],L.prototype,"currentVersion",void 0),u([d()],L.prototype,"customBaseUrl",void 0),u([d()],L.prototype,"default3DBasemapQuery",void 0),u([d()],L.prototype,"defaultBasemap",void 0),u([ve("defaultBasemap")],L.prototype,"readDefaultBasemap",null),u([d()],L.prototype,"defaultDevBasemap",void 0),u([ve("defaultDevBasemap")],L.prototype,"readDefaultDevBasemap",null),u([d({type:Be})],L.prototype,"defaultExtent",void 0),u([d()],L.prototype,"defaultVectorBasemap",void 0),u([ve("defaultVectorBasemap")],L.prototype,"readDefaultVectorBasemap",null),u([d()],L.prototype,"description",void 0),u([d()],L.prototype,"devBasemapGalleryGroupQuery",void 0),u([d()],L.prototype,"eueiEnabled",void 0),u([d({readOnly:!0})],L.prototype,"extraQuery",null),u([d()],L.prototype,"featuredGroups",void 0),u([d()],L.prototype,"featuredItemsGroupQuery",void 0),u([d()],L.prototype,"galleryTemplatesGroupQuery",void 0),u([d()],L.prototype,"layoutGroupQuery",void 0),u([d()],L.prototype,"livingAtlasGroupQuery",void 0),u([d({readOnly:!0})],L.prototype,"hasAPIKey",null),u([d()],L.prototype,"hasCategorySchema",void 0),u([d()],L.prototype,"hasClassificationSchema",void 0),u([d()],L.prototype,"helpBase",void 0),u([d()],L.prototype,"helperServices",void 0),u([d()],L.prototype,"helpMap",void 0),u([d()],L.prototype,"homePageFeaturedContent",void 0),u([d()],L.prototype,"homePageFeaturedContentCount",void 0),u([d()],L.prototype,"httpPort",void 0),u([d()],L.prototype,"httpsPort",void 0),u([d()],L.prototype,"id",void 0),u([d()],L.prototype,"ipCntryCode",void 0),u([d({readOnly:!0})],L.prototype,"isOrganization",null),u([d()],L.prototype,"isPortal",void 0),u([d()],L.prototype,"isReadOnly",void 0),u([d({readOnly:!0})],L.prototype,"itemPageUrl",null),u([d()],L.prototype,"layerTemplatesGroupQuery",void 0),u([d()],L.prototype,"maxTokenExpirationMinutes",void 0),u([d({type:Date})],L.prototype,"modified",void 0),u([d()],L.prototype,"name",void 0),u([d()],L.prototype,"portalHostname",void 0),u([d()],L.prototype,"portalMode",void 0),u([d()],L.prototype,"portalProperties",void 0),u([d()],L.prototype,"region",void 0),u([d()],L.prototype,"recycleBinEnabled",void 0),u([d({readOnly:!0})],L.prototype,"restUrl",null),u([d()],L.prototype,"rotatorPanels",void 0),u([d()],L.prototype,"showHomePageDescription",void 0),u([d()],L.prototype,"sourceJSON",void 0),u([d()],L.prototype,"staticImagesUrl",void 0),u([d({json:{name:"2DStylesGroupQuery"}})],L.prototype,"stylesGroupQuery2d",void 0),u([d({json:{name:"stylesGroupQuery"}})],L.prototype,"stylesGroupQuery3d",void 0),u([d()],L.prototype,"supportsHostedServices",void 0),u([d()],L.prototype,"symbolSetsGroupQuery",void 0),u([d()],L.prototype,"templatesGroupQuery",void 0),u([d()],L.prototype,"thumbnail",void 0),u([d({readOnly:!0})],L.prototype,"thumbnailUrl",null),u([d()],L.prototype,"units",void 0),u([d()],L.prototype,"url",void 0),u([d()],L.prototype,"urlKey",void 0),u([ve("urlKey")],L.prototype,"readUrlKey",null),u([d()],L.prototype,"user",void 0),u([ve("user")],L.prototype,"readUser",null),u([d()],L.prototype,"use3dBasemaps",void 0),u([d()],L.prototype,"useDefault3dBasemap",void 0),u([d()],L.prototype,"useStandardizedQuery",void 0),u([d()],L.prototype,"useVectorBasemaps",void 0),u([d()],L.prototype,"vectorBasemapGalleryGroupQuery",void 0),L=or=u([$("esri.portal.Portal")],L);const An=L,gb=new FinalizationRegistry(e=>{e.remove()});function h4(e){const t=Ae;return()=>{const r=e.deref();r&&t.findCredential(r.restUrl)&&r.signIn().catch(()=>{})}}let is=class extends Y{constructor(t){super(t),this.portalItem=null}normalizeCtorArgs(t){return t!=null&&t.portalItem&&t.path?{...t,path:vb(t.path,t.portalItem)}:t}set path(t){t!=null&&yr(t)?V.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",t)}_castPath(t){return vb(t,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(t="json",r){const i=this.cdnUrl;if(i==null)throw new k("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(i,{responseType:t,query:{token:this.portalItem.apiKey,_ts:r!=null&&r.cacheBust?Date.now():null},signal:r==null?void 0:r.signal})}async update(t,r){const{addOrUpdateResources:i}=await j(()=>import("./resourceUtils-DuVRVPEv.js"),[],import.meta.url);return await i(this.portalItem,[{resource:this,content:t,compress:r==null?void 0:r.compress,access:r==null?void 0:r.access}],"update",r),this}hasPath(){return this.path!=null}};function vb(e,t){return e==null?e:(e=e.replace(/^\/+/,""),t!=null&&yr(e)&&(e=gv(e,t.itemUrl)),e==null?void 0:e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}u([d()],is.prototype,"portalItem",void 0),u([d({type:String,value:null})],is.prototype,"path",null),u([ct("path")],is.prototype,"_castPath",null),u([d({type:String,readOnly:!0})],is.prototype,"url",null),u([d({type:String,readOnly:!0})],is.prototype,"cdnUrl",null),u([d({type:String,readOnly:!0})],is.prototype,"itemRelativeUrl",null),is=u([$("esri.portal.PortalItemResource")],is);const d4=is;let uc=class extends Y{constructor(t){super(t),this.created=null,this.rating=null}};u([d()],uc.prototype,"created",void 0),u([d()],uc.prototype,"rating",void 0),uc=u([$("esri.portal.PortalRating")],uc);const Dm=uc;function ih(e,t){var i;const r=(i=t==null?void 0:t.url)==null?void 0:i.path;if(e&&r&&(e=Cr(e,r,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const s=gv(e,t.portalItem.itemUrl);s!=null&&p4.test(s)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(s).path)}return(e=b0(e,t==null?void 0:t.portal))&&Df.test(e)?Nv(e):e}function Lf(e,t,r=Mu.YES){var s,n;if((e=e&&Df.test(e)?I3(e):e)==null)return e;!yr(e)&&(t!=null&&t.blockedRelativeUrls)&&t.blockedRelativeUrls.push(e);let i=Cr(e);if(t){const o=((s=t.verifyItemRelativeUrls)==null?void 0:s.rootPath)||((n=t.url)==null?void 0:n.path);if(o){const a=b0(o,t.portal),l=b0(i,t.portal);i=gv(l,a,a),i!=null&&i!==l&&i!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(i)}}return i=A3(i,t==null?void 0:t.portal),yr(i)&&(i=_n(i)),t!=null&&t.resources&&(t!=null&&t.portalItem)&&!yr(i)&&!ea(i)&&r===Mu.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(i),compress:!1}),i}function kv(e,t,r){return ih(e,r)}function yl(e,t,r,i){const s=Lf(e,i);s!==void 0&&(t[r]=s)}const Df=/\/items\/([^/]+)\/resources\/(.*)/,p4=/^\.\/resources\//;function f4(e){const t=(e==null?void 0:e.match(Df))??null;return(t==null?void 0:t[1])??null}function m4(e){const t=(e==null?void 0:e.match(Df))??null;if(t==null)return null;const r=t[2],i=r.lastIndexOf("/");if(i===-1){const{path:o,extension:a}=Kw(r);return{prefix:null,filename:o,extension:a}}const{path:s,extension:n}=Kw(r.slice(i+1));return{prefix:r.slice(0,i),filename:s,extension:n}}function A3(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?t0(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function b0(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const r=`${t.urlKey}.${t.customBaseUrl}`,i=pv();return dl(i,`${i.scheme}://${r}`)?t0(e,t.portalHostname,r):t0(e,r,t.portalHostname)}function Nv(e){if(!e)return e||null;let t=e;return t&&Ae&&!Ae.findCredential(t)&&(t=RE(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}function I3(e){if(!e)return e||null;let t=e;return t=t.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),t=t.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),t=t.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),t&&Ae&&!Ae.findCredential(t)&&(t=RE(t)),t}var Mu;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(Mu||(Mu={}));const HQ=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return Mu},ensureMainOnlineDomain:A3,fromCDNUrl:I3,fromJSON:ih,itemIdFromResourceUrl:f4,prefixAndFilenameFromResourceUrl:m4,read:kv,toCDNUrl:Nv,toJSON:Lf,write:yl},Symbol.toStringTag,{value:"Module"}));var Kn;const y4=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Map Service","Media Layer","Scene Service","Stream Service","Vector Tile Service","WFS","WMS","WMTS"]),g4=new Set(["KML","GeoJson","CSV"]);let oe=Kn=class extends Qu(En){static from(e){return xf(Kn,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let r=e;return e==="Feature Service"||e==="Feature Collection"?r=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?r=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?r="Scene Layer":e==="Video Service"?r="Video Layer":e==="Scene Package"?r="Scene Layer Package":e==="Stream Service"?r="Feature Layer":e==="Geoprocessing Service"?r=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geoenrichment Service"?r="GeoEnrichment Service":e==="Geocoding Service"?r="Locator":e==="Microsoft Powerpoint"?r="Microsoft PowerPoint":e==="GeoJson"?r="GeoJSON":e==="Globe Service"?r="Globe Layer":e==="Vector Tile Service"?r="Tile Layer":e==="netCDF"?r="NetCDF":e==="Map Service"?r=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e!=null&&e.toLowerCase().includes("add in")?r=e.replaceAll(/(add in)/gi,"Add-In"):e==="datastore catalog service"?r="Big Data File Share":e==="Compact Tile Package"?r="Tile Package (tpkx)":e==="Raster function template"?r="Raster Function Template":e==="OGCFeatureServer"?r="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")?r="Instant App":e==="Insights Page"?r="Insights Report":e==="Excalibur Imagery Project"?r="Excalibur Project":e==="3DTiles Service"?r="3D tiles layer":e==="3DTiles Package"&&(r="3D tiles package"),r}readExtent(e){return e&&e.length?new Be(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){var y;const e=((y=this.type)==null?void 0:y.toLowerCase())||"",t=this.typeKeywords||[],r="esri/images/portal/",i="16";let s,n=!1,o=!1,a=!1,l=!1,h=!1,p=!1,f=!1,m=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(n=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(o=t.includes("Table"),a=t.includes("Route Layer"),l=t.includes("Markup"),h=t.includes("Spatiotemporal"),p=t.includes("UtilityNetwork"),s=h&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":h?"spatiotemporal":p?"utilitynetwork":n?"featureshosted":"features"):e==="map service"||e==="wms"||e==="wmts"?(h=t.includes("Spatiotemporal"),f=t.includes("Relational"),s=h||f?"mapimages":n||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages"):s=e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="video service"?t.includes("Live Stream")?"livestreamvideolayer":"videolayer":e==="geoprocessing service"?t.includes("Web Tool")?"tool":"layers":e==="geodata service"?"geodataservice":e==="3dtiles service"?t.includes("3DObject")?"3dobjecttileslayer":t.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):e==="web map"||e==="cityengine web scene"?s="maps":e==="web scene"?s=t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?s="instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?s="apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?s="mapsgray":e==="service definition"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="netcdf"||e==="administrative report"?s="datafiles":e==="360 vr experience"?s="360vr":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?s="appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?s="addindesktop":e==="pdf"?s="pdf":e==="microsoft word"?s="word":e==="microsoft excel"?s="excel":e==="microsoft powerpoint"?s="ppt":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?s="datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?s="toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?s="layersgray":e==="analysis model"?s="analysismodel":e==="scene package"?s="scenepackage":e==="3dtiles package"?s="3dtileslayerpackage":e==="3dtiles service"?s="3dtileslayer":e==="mobile scene package"?s="mobilescenepackage":e==="tile package"||e==="compact tile package"?s="tilepackage":e==="task file"?s="taskfile":e==="report template"?s="report-template":e==="statistical data collection"?s="statisticaldatacollection":e==="insights workbook"?s="workbook":e==="insights model"?s="insightsmodel":e==="insights page"?s="insightspage":e==="insights theme"?s="insightstheme":e==="hub initiative"?s="hubinitiative":e==="hub page"?s="hubpage":e==="hub site application"?s="hubsite":e==="hub event"?s="hubevent":e==="hub project"?s="hubproject":e==="relational database connection"?s="relationaldatabaseconnection":e==="big data file share"?s="datastorecollection":e==="image collection"?s="imagecollection":e==="desktop style"?s="desktopstyle":e==="style"?s=t.includes("Dictionary")?"dictionarystyle":"style":e==="dashboard"?s="dashboard":e==="raster function template"?s="rasterprocessingtemplate":e==="vector tile package"?s="vectortilepackage":e==="ortho mapping project"?s="orthomappingproject":e==="ortho mapping template"?s="orthomappingtemplate":e==="solution"?s="solutions":e==="geopackage"?s="geopackage":e==="deep learning package"?s="deeplearningpackage":e==="real time analytic"?s="realtimeanalytics":e==="reality mapping project"?s="realitymappingproject":e==="big data analytic"?s="bigdataanalytics":e==="feed"?s="feed":e==="excalibur imagery project"?s="excaliburimageryproject":e==="notebook"?s="notebook":e==="storymap"?s="storymap":e==="survey123 add in"?s="survey123addin":e==="mission"?s="mission":e==="mission report"?s="missionreport":e==="mission template"?s="missiontemplate":e==="quickcapture project"?s="quickcaptureproject":e==="pro report"?s="proreport":e==="pro report template"?s="proreporttemplate":e==="urban model"?s="urbanmodel":e==="urban project"?s="urbanproject":e==="web experience"?s="experiencebuilder":e==="web experience template"?s="webexperiencetemplate":e==="experience builder widget"?s="experiencebuilderwidget":e==="experience builder widget package"?s="experiencebuilderwidgetpackage":e==="workflow"?s="workflow":e==="kernel gateway connection"?s="kernelgatewayconnection":e==="insights script"?s="insightsscript":e==="hub initiative template"?s="hubinitiativetemplate":e==="storymap theme"?s="storymaptheme":e==="knowledge graph"?s="knowledgegraph":e==="knowledge graph layer"?s="knowledgegraphlayer":e==="knowledge studio project"?s="knowledgestudio":e==="native application"?s="nativeapp":e==="native application installer"?s="nativeappinstaller":e==="web link chart"?s="linkchart":e==="knowledge graph web investigation"?s="investigation":e==="ogcfeatureserver"?s="features":e==="pro presentation"?s="propresentation":e==="pro project"?s="proproject":e==="insights workbook package"?s="insightsworkbookpackage":e==="apache parquet"?s="apacheparquet":e==="notebook code snippet library"?s="notebookcodesnippets":e==="suitability model"?s="suitabilitymodel":e==="esri classifier definition"?s="classifierdefinition":e==="esri classification schema"?s="classificationschema":e==="insights data engineering workbook"?s="dataengineeringworkbook":e==="insights data engineering model"?s="dataengineeringmodel":e==="deep learning studio project"?s="deeplearningproject":e==="discussion"?s="discussion":e==="allsource project"?s="allsourceproject":e==="api key"?s="apikey":e==="data pipeline"?s="datapipelines":e==="group layer"?(m=t.includes("Map"),s=m?"layergroup2d":"layergroup"):s=e==="media layer"?"onlinemedialayer":e==="form"?t.includes("Survey123")?"survey":"datafilesgray":e==="csv"?"csv":e==="image"?"image":"maps",s?be(r+s+i+".png"):null}get isLayer(){return this.type!=null&&y4.has(this.type)}get itemCdnUrl(){return Nv(this.itemUrl)}get itemPageUrl(){var t;const e=(t=this.portal)==null?void 0:t.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){var r;const e=this.itemUrl,t=this.thumbnail;return e&&t?((r=this.portal)==null?void 0:r.normalizeUrl(`${e}/info/${t}?f=json`))??null:null}get userItemUrl(){var r,i,s;const e=(r=this.portal)==null?void 0:r.restUrl;if(!e)return null;const t=this.owner||((s=(i=this.portal)==null?void 0:i.user)==null?void 0:s.username);return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){const t=this.portal??(this.portal=An.getDefault()),r=t.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:e!=null?e.signal:null,query:{token:this.apiKey}}):{}).then(i=>{this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(r),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}};return e instanceof Dm&&(e=e.rating),e==null||isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal?(await this.portal.request(this.itemUrl+"/addRating",t),new Dm({rating:e,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:N(this.applicationProxies),avgRating:this.avgRating,categories:N(this.categories),classification:N(this.classification),created:N(this.created),culture:this.culture,description:this.description,extent:N(this.extent),groupCategories:N(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:N(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:N(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:N(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:N(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const t=new Kn({sourceJSON:this.sourceJSON}).set(e);return t._set("isOrgItem",this.isOrgItem),t}createPostQuery(){var t;const e=this.toJSON();for(const r of["tags","typeKeywords","categories"])e[r]=(t=e[r])==null?void 0:t.join(", ");for(const r of["extent","classification"]){const i=e[r];i&&(e[r]=JSON.stringify(i))}return e}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return this.portal.request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){const t=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return t.rating!=null?(t.created=new Date(t.created),new Dm(t)):null}fetchRelatedItems(e,t){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},Kn)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.applicationProxies&&!Object.hasOwn(e,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e==null?void 0:e.data,r={method:"post"};r.query=this.createPostQuery();for(const i in r.query)r.query[i]===null&&(r.query[i]="");return r.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?r.query.text=t:typeof t=="object"&&(r.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,r).then(()=>this.reload())}):Promise.reject(new k("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new k("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:t,itemUrl:r}=this;await t.signIn();const{copyResources:i,folder:s,tags:n,title:o}=e||{},a={method:"post",query:{copyPrivateResources:i==="all",folder:typeof s=="string"?s:s==null?void 0:s.id,includeResources:!!i,tags:n==null?void 0:n.join(","),title:o}},{itemId:l}=await t.request(`${r}/copy`,a);return new Kn({id:l,portal:t})}updateThumbnail(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e.thumbnail,r=e.filename,i={method:"post"};if(typeof t=="string")ea(t)?i.query={data:t}:i.query={url:Cr(t)},r!=null&&(i.query.filename=r);else{const s=new FormData;r!=null?s.append("file",t,r):s.append("file",t),i.body=s}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,i).then(()=>this.reload())}):Promise.reject(new k("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){const{fetchResources:r}=await j(()=>import("./resourceUtils-DuVRVPEv.js"),[],import.meta.url);return r(this,e,t)}async addResource(e,t,r){const{addOrUpdateResources:i}=await j(()=>import("./resourceUtils-DuVRVPEv.js"),[],import.meta.url);return e.portalItem=this,await i(this,[{resource:e,content:t,compress:r==null?void 0:r.compress,access:r==null?void 0:r.access}],"add",r),e}async removeResource(e,t){const{removeResource:r}=await j(()=>import("./resourceUtils-DuVRVPEv.js"),[],import.meta.url);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new k("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return r(this,e,t)}async removeAllResources(e){const{removeAllResources:t}=await j(()=>import("./resourceUtils-DuVRVPEv.js"),[],import.meta.url);return t(this,e)}resourceFromPath(e){return new d4({portalItem:this,path:e})}toJSON(){var r,i;const e=this.extent,t={accessInformation:this.accessInformation,categories:N(this.categories),classification:N(this.classification),created:(r=this.created)==null?void 0:r.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(i=this.modified)==null?void 0:i.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:N(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:N(this.typeKeywords),url:this.url};return jC(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Kn({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};u([d({type:["private","shared","org","public"]})],oe.prototype,"access",void 0),u([d()],oe.prototype,"accessInformation",void 0),u([d({type:String})],oe.prototype,"apiKey",void 0),u([d({json:{read:{source:"appProxies"}}})],oe.prototype,"applicationProxies",void 0),u([d()],oe.prototype,"avgRating",void 0),u([d()],oe.prototype,"categories",void 0),u([d()],oe.prototype,"classification",void 0),u([d({type:Date})],oe.prototype,"created",void 0),u([d()],oe.prototype,"culture",void 0),u([d()],oe.prototype,"description",void 0),u([d({readOnly:!0})],oe.prototype,"displayName",null),u([d({type:Be})],oe.prototype,"extent",void 0),u([ve("extent")],oe.prototype,"readExtent",null),u([d()],oe.prototype,"groupCategories",void 0),u([d({readOnly:!0})],oe.prototype,"iconUrl",null),u([d()],oe.prototype,"id",void 0),u([d({readOnly:!0})],oe.prototype,"isLayer",null),u([d({type:Boolean,readOnly:!0})],oe.prototype,"isOrgItem",void 0),u([d()],oe.prototype,"itemControl",void 0),u([d({readOnly:!0})],oe.prototype,"itemPageUrl",null),u([d({readOnly:!0})],oe.prototype,"itemUrl",null),u([d()],oe.prototype,"licenseInfo",void 0),u([d({type:Date})],oe.prototype,"modified",void 0),u([d()],oe.prototype,"name",void 0),u([d()],oe.prototype,"numComments",void 0),u([d()],oe.prototype,"numRatings",void 0),u([d()],oe.prototype,"numViews",void 0),u([d()],oe.prototype,"owner",void 0),u([d()],oe.prototype,"ownerFolder",void 0),u([d({type:An})],oe.prototype,"portal",void 0),u([d()],oe.prototype,"screenshots",void 0),u([d()],oe.prototype,"size",void 0),u([d()],oe.prototype,"snippet",void 0),u([d()],oe.prototype,"sourceJSON",void 0),u([d({type:String})],oe.prototype,"sourceUrl",void 0),u([d({type:String})],oe.prototype,"spatialReference",void 0),u([d()],oe.prototype,"tags",void 0),u([d()],oe.prototype,"thumbnail",void 0),u([d({readOnly:!0})],oe.prototype,"thumbnailUrl",null),u([d()],oe.prototype,"title",void 0),u([d()],oe.prototype,"type",void 0),u([d()],oe.prototype,"typeKeywords",void 0),u([d({type:String,json:{read(e,t){var r;if(g4.has(t.type)){const i=(r=this.portal)==null?void 0:r.restUrl;e||(e=i&&this.id?`${i}/content/items/${this.id}/data`:null)}return e}}})],oe.prototype,"url",void 0),u([d({readOnly:!0})],oe.prototype,"userItemUrl",null),oe=Kn=u([$("esri.portal.PortalItem")],oe);const O3=oe,P3=Object.freeze(Object.defineProperty({__proto__:null,default:O3},Symbol.toStringTag,{value:"Module"})),_b=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,v4={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function wb(e){return e in v4}const hc=[],Ka=new Map;function bb(e){for(const t of Ka.keys())C3(e.pattern,t)&&Ka.delete(t)}function _4(e){return hc.includes(e)||(bb(e),hc.unshift(e)),_e(()=>{const t=hc.indexOf(e);t>-1&&(hc.splice(t,1),bb(e))})}async function R3(e){const t=rr();Ka.has(e)||Ka.set(e,b4(e,t));const r=Ka.get(e);return r&&await S4.add(r),r}function w4(e){if(!_b.test(e))return null;const t=_b.exec(e);if(t===null)return null;const[,r,i]=t,s=r+(i?"-"+i.toUpperCase():"");return wb(s)?s:wb(r)?r:null}async function b4(e,t){const r=[];for(const i of hc)if(C3(i.pattern,e))try{return await i.fetchMessageBundle(e,t)}catch(s){r.push(s)}throw r.length?new k("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:r}):new k("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function C3(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}Cv(()=>{Ka.clear()});const S4=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=jr())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function $4(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e.includes("-3d")?e.slice(0,e.indexOf("-3d")):e,r=await R3("esri/t9n/basemaps");return r[e]||r[t]}const S0={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return be("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return be("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return be("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return be("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return be("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return be("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return be("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return be("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return be("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return be("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return be("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return be("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return be("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return be("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return be("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return be("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return be("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"arcgis-imagery":{get thumbnailUrl(){return be("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return be("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return be("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return be("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return be("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return be("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return be("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return be("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return be("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return be("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}},T4=new Set(["ar","bs","ca","hr","cs","da","nl","en","et","fi","fr","de","el","he","hu","id","it","ja","ko","lv","lt","nb","pl","ro","ru","sr","es","sv","th","tr","uk","vi"]);let ss=class extends Y{constructor(t){super(t),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/webmaps",this.worldview=null}getLanguageParamValue(){if(this.language)return this.language;const t=rr().toLowerCase();switch(t){case"pt-br":return"pt-BR";case"pt-pt":return"pt-PT";case"zh-cn":return"zh-CN";case"zh-hk":return"zh-HK";case"zh-tw":return"zh-TW"}const r=o4(t);return r==="pt"?"pt-BR":r&&T4.has(r)?r:"global"}};u([d()],ss.prototype,"apiKey",void 0),u([d()],ss.prototype,"id",void 0),u([d()],ss.prototype,"language",void 0),u([d()],ss.prototype,"places",void 0),u([d()],ss.prototype,"serviceUrl",void 0),u([d()],ss.prototype,"worldview",void 0),ss=u([$("esri.support.BasemapStyle")],ss);const E4=ss;function M4(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="subtype-group"&&"sublayers"in e}function Qn(e){return(e==null?void 0:e.type)==="subtype-sublayer"}const qQ={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function ZQ(e){const t=e==null?void 0:e.type;return t==="building-scene"||t==="integrated-mesh"||t==="point-cloud"||t==="scene"}function Ff(e){var t;return(e==null?void 0:e.type)==="feature"&&!e.url&&((t=e.source)==null?void 0:t.type)==="memory"}function YQ(e){var r;const t=e==null?void 0:e.type;return(t==="feature"||t==="subtype-group"||t==="oriented-imagery")&&((r=e.source)==null?void 0:r.type)==="feature-layer"}async function JQ(e,t){const r=Ae==null?void 0:Ae.findServerInfo(e);if((r==null?void 0:r.currentVersion)!=null)return r.owningSystemUrl||null;const i=e.toLowerCase().indexOf("/rest/services");if(i===-1)return null;const s=`${e.slice(0,i)}/rest/info`,n=t!=null?t.signal:null,{data:o}=await st(s,{query:{f:"json"},responseType:"json",signal:n});return(o==null?void 0:o.owningSystemUrl)||null}function x4(e){if(!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function A4(e){return x4(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function I4(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function O4(e){return!!I4(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}const P4=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),R4=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function C4(e){return e.layerContainerType==="basemap"?P4:e.layerContainerType==="operational-layers"?R4:null}function k4(e,t){if(t.restrictedWebMapWriting){const r=C4(t);return r==null||r.has(e.type)&&!Ff(e)}return!0}function N4(e,t){var r;if(t)if(Ff(e)){const i=Sf("featureCollection.layers",t),s=(r=i==null?void 0:i[0])==null?void 0:r.layerDefinition;s&&Sb(e,s)}else e.type!=="group"&&Sb(e,t)}function Sb(e,t){"maxScale"in e&&(t.maxScale=Ep(e.maxScale)??void 0),"minScale"in e&&(t.minScale=Ep(e.minScale)??void 0)}function L4(e,t){if(N4(e,t),t&&(t.id=e.id,"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=Ep(e.opacity)??void 0,t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts"))if(Ff(e)){const r=t.featureCollection;r&&(r.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function $b(e,t,r){if(!e.persistenceEnabled)return null;if(!("write"in e)||!e.write)return r!=null&&r.messages&&r.messages.push(new k("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(Ff(e)&&!e.isTable)t=e.resourceInfo;else if(k4(e,r)){const i={};return e.write(i,r)?i:null}return t!=null&&L4(e,t=N(t)),t}var dc;let D4=0,ar=dc=class extends Qu(En){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+D4++,this.baseLayers=new K,this.referenceLayers=new K;const t=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type==="elevation"&&V.getLogger(this).error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=i=>{i.parent=null};this.addHandles([this.baseLayers.on("after-add",i=>t(i.item)),this.referenceLayers.on("after-add",i=>t(i.item)),this.baseLayers.on("after-remove",i=>r(i.item)),this.referenceLayers.on("after-remove",i=>r(i.item))])}initialize(){this.when().catch(e=>{V.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const r of e)r.destroy();const t=this.referenceLayers.toArray();for(const r of t)r.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=Ve(this.portalItem)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",Tn(e,this._get("baseLayers")))}_writeBaseLayers(e,t,r){const i=[];e&&(r={...r,layerContainerType:"basemap"},this.baseLayers.forEach(s=>{const n=$b(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);n!=null&&i.push(n)}),this.referenceLayers.forEach(s=>{const n=$b(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);n!=null&&(s.type!=="scene"&&(n.isReference=!0),i.push(n))})),t.baseMapLayers=i}set referenceLayers(e){this._set("referenceLayers",Tn(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return e3(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(t=>dp(t)?t.clone():t),referenceLayers:this.referenceLayers.map(t=>dp(t)?t.clone():t)};return this.loaded&&(e.loadStatus="loaded"),new dc({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){var r;return e=e||{},t!=null&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&((r=this.resourceInfo)!=null&&r.data.baseMapLayers)&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const s=N(i);return s.url&&Gi(s.url)&&(s.url=`https:${s.url}`),s.templateUrl&&Gi(s.templateUrl)&&(s.templateUrl=`https:${s.templateUrl}`),s})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:r,style:i}=this;Qe(e);const s=[];if(t){const n=t.context?t.context.url:null;if(s.push(this._loadLayersFromJSON(t.data,n,e)),t.data.id&&!t.data.title){const o=t.data.id;s.push($4(o).then(a=>{a&&this.read({title:a},t.context)}))}}else r?s.push(this._loadFromItem(r,e)):i&&s.push(this._loadFromStylesService(i,e));await Promise.all(s)}async _loadLayersFromJSON(e,t,r){var l,h;const i=(l=this.resourceInfo)==null?void 0:l.context,s=((h=this.portalItem)==null?void 0:h.portal)||(i==null?void 0:i.portal)||null,n=U4[(i==null?void 0:i.origin)||""]??"web-map",{populateOperationalLayers:o}=await j(async()=>{const{populateOperationalLayers:p}=await import("./layersCreator-DzITB28n.js");return{populateOperationalLayers:p}},__vite__mapDeps([16,17,18,19,15,20]),import.meta.url),a=[];if(Qe(r),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const p={context:{...i,origin:n,url:t,portal:s,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},f=v=>n==="web-scene"&&v.layerType==="ArcGISSceneServiceLayer"||v.isReference,m=o(this.baseLayers,e.baseMapLayers.filter(v=>!f(v)),p);a.push(m);const y=o(this.referenceLayers,e.baseMapLayers.filter(f),p);a.push(y)}await Promise.allSettled(a)}async _loadFromItem(e,t){const r=await e.load(t),i=await r.fetchData("json",t),s=Ht(e.itemUrl??"");return this._set("resourceInfo",{data:i.baseMap??{},context:{origin:F4[e.type||""]??"web-map",portal:e.portal||An.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:i.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||An.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,t)}async _loadFromStylesService(e,t){const r=`${e.serviceUrl}/${e.id}`,i=(await st(r,{query:{language:e.getLanguageParamValue(),places:e.places,worldview:e.worldview,token:e.apiKey},signal:t==null?void 0:t.signal})).data,s=Ht(r);if(this._set("resourceInfo",{data:i.baseMap??{},context:{origin:"web-map",url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:i.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,s,t),e.apiKey)for(const n of[...this.baseLayers,...this.referenceLayers])"apiKey"in n&&(n.apiKey=e.apiKey)}static fromId(e){const t=S0[e];return t?t.itemId?new dc({portalItem:{id:t.itemId,portal:{url:"https://www.arcgis.com"}}}):dc.fromJSON(t,{origin:t.is3d?"web-scene":"web-map"}):null}};u([d({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,r,i){this._writeBaseLayers(e,t,i)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:K}},writer(e,t,r,i){this._writeBaseLayers(e,t,i)}}}}}})],ar.prototype,"baseLayers",null),u([d({type:String,json:{origins:{"web-scene":{write:!0}}}})],ar.prototype,"id",void 0),u([d({type:O3})],ar.prototype,"portalItem",void 0),u([d()],ar.prototype,"referenceLayers",null),u([d({readOnly:!0})],ar.prototype,"resourceInfo",void 0),u([d({type:de})],ar.prototype,"spatialReference",void 0),u([d({type:E4})],ar.prototype,"style",void 0),u([d()],ar.prototype,"thumbnailUrl",void 0),u([d({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],ar.prototype,"title",void 0),u([pe("title")],ar.prototype,"writeTitle",null),ar=dc=u([$("esri.Basemap")],ar);const F4={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},U4={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},iu=ar,j4=Object.freeze(Object.defineProperty({__proto__:null,default:iu},Symbol.toStringTag,{value:"Module"})),Dp={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function k3(e){return!!Dp[e]||!!Dp[e.toLowerCase()]}function Lv(e){return Dp[e]??Dp[e.toLowerCase()]}function G4(e){return[...Lv(e)]}function Fm(e,t,r){r<0&&++r,r>1&&--r;const i=6*r;return i<1?e+(t-e)*i:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function N3(e,t,r,i=1){const s=(e%360+360)%360/360,n=r<=.5?r*(t+1):r+t-r*t,o=2*r-n;return[Math.round(255*Fm(o,n,s+1/3)),Math.round(255*Fm(o,n,s)),Math.round(255*Fm(o,n,s-1/3)),i]}function V4(e){const t=e.length>5,r=t?8:4,i=(1<<r)-1,s=t?1:17,n=t?e.length===9:e.length===5;let o=+("0x"+e.slice(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return n&&(l=o&i,o>>=r,a[3]=s*l/255),l=o&i,o>>=r,a[2]=s*l,l=o&i,o>>=r,a[1]=s*l,l=o&i,o>>=r,a[0]=s*l,a}const Tb=new Float32Array(1);function XQ(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function di(e,t,r){return Math.min(Math.max(e,t),r)}function KQ(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function pc(e,t,r){return e+(t-e)*r}function QQ(e,t,r,i,s){return pc(i,s,(e-t)/(r-t))}function Uf(e){return e*Math.PI/180}function L3(e){return 180*e/Math.PI}function eee(e){return Math.acos(di(e,-1,1))}function z4(e){return Math.asin(di(e,-1,1))}function Um(e,t,r=1e-6){return e===t?!0:!Number.isFinite(e)||!Number.isFinite(t)?!1:(e>t?e-t:t-e)<=r}const Fp=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function $0(e){return Fp.setFloat64(0,e),Fp.getBigInt64(0)}function B4(e){return Fp.setBigInt64(0,e),Fp.getFloat64(0)}const bd=BigInt("1000000"),H4=D3(1);function D3(e){const t=$0(e=Math.abs(e)),r=B4(t<=bd?bd:t-bd);return Math.abs(e-r)}function tee(e,t,r=H4){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;if(r!=null&&D3(Math.min(Math.abs(e),Math.abs(t)))<r)return Math.abs(e-t)<=r;const i=$0(e),s=$0(t);return i<0!=s<0?!1:!((i<s?s-i:i-s)>bd)}function ree(e){return F3(Math.max(-Eb,Math.min(e,Eb)))}function F3(e){return Tb[0]=e,Tb[0]}function iee(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],i=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(Um(t,1)&&Um(r,1)&&Um(i,1))}const Eb=F3(34028234663852886e22);function see(e,t,r){if(r===void 0||+r==0)return Math[e](t);if(t=+t,r=+r,isNaN(t)||typeof r!="number"||r%1!=0)return NaN;let i=t.toString().split("e");return i=(t=Math[e](+(i[0]+"e"+(i[1]?+i[1]-r:-r)))).toString().split("e"),+(i[0]+"e"+(i[1]?+i[1]+r:r))}function Ih(e){return di(ov(e),0,255)}function Oh(e,t,r){return e=Number(e),isNaN(e)?r:e<t?t:e>r?r:e}function Ph(e,t){const r=e.toString(16).padStart(2,"0");return t?r.slice(0,1):r}let Sd=class at{static blendColors(t,r,i,s=new at){return s.r=Math.round(t.r+(r.r-t.r)*i),s.g=Math.round(t.g+(r.g-t.g)*i),s.b=Math.round(t.b+(r.b-t.b)*i),s.a=t.a+(r.a-t.a)*i,s._sanitize()}static fromRgb(t,r){const i=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(i){const s=i[2].split(/\s*,\s*/),n=i[1];if(n==="rgb"&&s.length===3||n==="rgba"&&s.length===4){const o=s[0];if(o.charAt(o.length-1)==="%"){const a=s.map(l=>2.56*parseFloat(l));return s.length===4&&(a[3]=parseFloat(s[3])),at.fromArray(a,r)}return at.fromArray(s.map(a=>parseFloat(a)),r)}if(n==="hsl"&&s.length===3||n==="hsla"&&s.length===4)return at.fromArray(N3(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100,parseFloat(s[3])),r)}return null}static fromHex(t,r=new at){if(t[0]!=="#"||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const i=parseInt(t.slice(1,2),16),s=parseInt(t.slice(2,3),16),n=parseInt(t.slice(3,4),16),o=t.length===5?15:parseInt(t.slice(4),16);return at.fromArray([i+16*i,s+16*s,n+16*n,(o+16*o)/255],r)}case 7:case 9:{const i=parseInt(t.slice(1,3),16),s=parseInt(t.slice(3,5),16),n=parseInt(t.slice(5,7),16),o=t.length===7?255:parseInt(t.slice(7),16);return at.fromArray([i,s,n,o/255],r)}default:return null}}static fromArray(t,r=new at){return r._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(r.a)&&(r.a=1),r._sanitize()}static fromString(t,r){const i=k3(t)?Lv(t):null;return i&&at.fromArray(i,r)||at.fromRgb(t,r)||at.fromHex(t,r)}static fromJSON(t){return t!=null?new at([t[0],t[1],t[2],(t[3]??255)/255]):void 0}static toUnitRGB(t){return t!=null?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return t!=null?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return typeof t=="string"?at.fromString(t,this):Array.isArray(t)?at.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof at||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(t){const r=(t==null?void 0:t.capitalize)??!1,i=(t==null?void 0:t.digits)??6,s=i===3||i===4,n=i===4||i===8,o=`#${Ph(this.r,s)}${Ph(this.g,s)}${Ph(this.b,s)}${n?Ph(Math.round(255*this.a),s):""}`;return r?o.toUpperCase():o}toCss(t=!1){const r=this.r+", "+this.g+", "+this.b;return t?`rgba(${r}, ${this.a})`:`rgb(${r})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=at.AlphaMode.ALWAYS){const r=Ih(this.r),i=Ih(this.g),s=Ih(this.b);return t===at.AlphaMode.ALWAYS||this.a!==1?[r,i,s,Ih(255*this.a)]:[r,i,s]}clone(){return new at(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return t!=null&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(Oh(this.r,0,255)),this.g=Math.round(Oh(this.g,0,255)),this.b=Math.round(Oh(this.b,0,255)),this.a=Oh(this.a,0,1),this}_set(t,r,i,s){this.r=t,this.g=r,this.b=i,this.a=s}};Sd.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(Sd||(Sd={}));const fe=Sd;function nee(e){}function W4(e){return()=>e}function re(e,t={}){const r=e instanceof ut?e:new ut(e,t),{alwaysWriteDefaults:i,default:s,ignoreUnknown:n=!0,name:o,nonNullable:a,readOnly:l=!1}=t;return d({type:n?r.apiValues:String,json:{type:r.jsonValues,default:s,name:o,read:!l&&{reader:r.read},write:{writer:r.write,alwaysWriteDefaults:i}},nonNullable:a,readOnly:l})}var T0;let $d=T0=class extends W{constructor(e){super(e),this.type="none"}clone(){return new T0({type:this.type})}};u([re({none:"none",stayAbove:"stay-above"})],$d.prototype,"type",void 0),$d=T0=u([$("esri.ground.NavigationConstraint")],$d);function U3(e){const t=ov(100*(1-e));return Math.max(0,Math.min(t,100))}function j3(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}var E0;let ns=E0=class extends Qu(En){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new K;const t=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type!=="elevation"&&i.type!=="base-elevation"&&V.getLogger(this).error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},r=i=>{i.parent=null};this.addHandles([this.layers.on("after-add",i=>t(i.item)),this.layers.on("after-remove",i=>r(i.item))])}initialize(){this.when().catch(e=>{vr(e)||V.getLogger(this).error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)Ve(t);this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",Tn(e,this._get("layers")))}writeLayers(e,t,r,i){const s=[];e&&(i={...i,layerContainerType:"ground"},e.forEach(n=>{if("write"in n){const o={};W4(n)().write(o,i)&&s.push(o)}else i!=null&&i.messages&&i.messages.push(new k("layer:unsupported",`Layers (${n.title}, ${n.id}) of type '${n.declaredClass}' cannot be persisted in the ground`,{layer:n}))})),t.layers=s}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return e3(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:r}=await j(()=>import("./ElevationQuery-Ce75IoL5.js"),[],import.meta.url);Qe(t);const i=new r,s=this.layers.filter(Mb).toArray();return i.queryAll(s,e,t)}async createElevationSampler(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:r}=await j(()=>import("./ElevationQuery-Ce75IoL5.js"),[],import.meta.url);Qe(t);const i=new r,s=this.layers.filter(Mb).toArray();return i.createSamplerAll(s,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:N(this.surfaceColor),navigationConstraint:N(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new E0({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}async _loadLayersFromJSON(e,t,r){const i=(t==null?void 0:t.origin)||"web-scene",s=(t==null?void 0:t.portal)||null,n=(t==null?void 0:t.url)||null,{populateOperationalLayers:o}=await j(async()=>{const{populateOperationalLayers:l}=await import("./layersCreator-DzITB28n.js");return{populateOperationalLayers:l}},__vite__mapDeps([16,17,18,19,15,20]),import.meta.url);Qe(r);const a=[];if(e.layers&&Array.isArray(e.layers)){const l={context:{origin:i,url:n,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,e.layers,l))}await Promise.allSettled(a)}};function q4(e){return e&&"createElevationSampler"in e}function Mb(e){return e.type==="elevation"||q4(e)}u([d({json:{read:!1}})],ns.prototype,"layers",null),u([pe("layers")],ns.prototype,"writeLayers",null),u([d({readOnly:!0})],ns.prototype,"resourceInfo",void 0),u([d({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:ke,read:{reader:j3,source:"transparency"},write:{writer:(e,t)=>{t.transparency=U3(e)},target:"transparency"}}})],ns.prototype,"opacity",void 0),u([d({type:fe,json:{type:[ke],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],ns.prototype,"surfaceColor",void 0),u([d({type:$d,json:{write:!0}})],ns.prototype,"navigationConstraint",void 0),ns=E0=u([$("esri.Ground")],ns);const Up=ns;function se(e,t,r={}){return Dv(e,t,r,G3)}function zi(e,t,r={}){return Dv(e,t,r,V3)}function Dv(e,t,r={},i){let s=null;const n=r.once?(o,a)=>{i(o)&&(Ue(s),t(o,a))}:(o,a)=>{i(o)&&t(o,a)};if(s=aN(e,n,r.sync,r.equals),r.initial){const o=e();n(o,o)}return s}function Yo(e,t,r,i={}){let s=null,n=null,o=null;function a(){var p;s&&n&&(n.remove(),(p=i.onListenerRemove)==null||p.call(i,s),s=null,n=null)}function l(p){i.once&&i.once&&Ue(o),r(p)}const h=se(e,(p,f)=>{var m;a(),Ef(p)&&(s=p,n=Ju(p,t,l),(m=i.onListenerAdd)==null||m.call(i,p))},{sync:i.sync,initial:!0});return o=_e(()=>{h.remove(),a()}),o}function Fv(e,t){return Z4(e,V3,t)}function Z4(e,t,r){if(hi(r))return Promise.reject(je());const i=e();if(t!=null&&t(i))return Promise.resolve(i);let s=null;function n(){s=Ue(s)}return new Promise((o,a)=>{s=qu([Fr(r,()=>{n(),a(je())}),Dv(e,l=>{n(),o(l)},{sync:!1,once:!0},t??G3)])})}function G3(e){return!0}function V3(e){return!!e}const In={sync:!0},Nt={initial:!0},dr={sync:!0,initial:!0};let _a=class extends K{constructor(t){super(t),this.getCollections=null}initialize(){this.addHandles(Jk(()=>this._refresh(),In))}destroy(){this.getCollections=null}_refresh(){const t=this.getCollections!=null?this.getCollections():null;if(t==null)return void this.removeAll();let r=0;for(const i of t)i!=null&&(r=this._processCollection(r,i));this.splice(r,this.length)}_createNewInstance(t){return new K(t)}_processCollection(t,r){if(!r)return t;const i=this.itemFilterFunction??(s=>!!s);for(const s of r)if(s){if(i(s)){const n=this.indexOf(s,t);n>=0?n!==t&&this.reorder(s,t):this.add(s,t),++t}if(this.getChildrenFunction){const n=this.getChildrenFunction(s);if(Array.isArray(n))for(const o of n)t=this._processCollection(t,o);else t=this._processCollection(t,n)}}return t}};u([d()],_a.prototype,"getCollections",void 0),u([d()],_a.prototype,"getChildrenFunction",void 0),u([d()],_a.prototype,"itemFilterFunction",void 0),_a=u([$("esri.core.CollectionFlattener")],_a);const xu=_a,Rh=new WeakMap;function z3(e){return!e.destroyed&&(Rh.has(e)||e.addHandles([se(()=>{const t=e.parent;return!(!t||!("type"in t))&&(t.type==="catalog-dynamic-group"||z3(t))},t=>Rh.set(e,t),dr),_e(()=>Rh.delete(e))]),Rh.get(e))}function Y4(e){return typeof e=="object"&&e!=null&&"loaded"in e&&e.loaded===!0&&"type"in e}function J4(e){var t,r;return!(!Y4(e)||!((r=(t=A4(e))==null?void 0:t.operations)!=null&&r.supportsEditing)||"editingEnabled"in e&&!O4(e)||z3(e))}const X4=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,K4="screenUtils.toPt: input not recognized!",B3=96;function aee(e){return e?e/72*B3:0}function On(e){return e?72*e/B3:0}function ze(e){if(typeof e=="string"){const t=e.match(X4);if(t){const r=Number(t[1]),i=t[3]&&t[3].toLowerCase(),s=e.charAt(0)==="-",n=i==="px"?On(r):r;return s?-n:n}return console.warn(K4),null}return e}function vt(e=0,t=0){return{x:e,y:t}}function lee(e){return e?vt(e.x,e.y):null}function cee(e=0,t=0){return[e,t]}function uee(e=0,t=0,r=0){return[e,t,r]}function hee(e,t){return t?(t[0]=e.x,t[1]=e.y,t.length>2&&(t[2]=0),t):[e.x,e.y]}function jf(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Q4(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function eD(e,t,r,i,s,n,o,a,l,h,p,f,m,y,v,_){const w=new Float32Array(16);return w[0]=e,w[1]=t,w[2]=r,w[3]=i,w[4]=s,w[5]=n,w[6]=o,w[7]=a,w[8]=l,w[9]=h,w[10]=p,w[11]=f,w[12]=m,w[13]=y,w[14]=v,w[15]=_,w}function tD(e,t){return new Float32Array(e,t,16)}const rD=jf();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:rD,clone:Q4,create:jf,createView:tD,fromValues:eD},Symbol.toStringTag,{value:"Module"}));function Fn(){return[0,0,0]}function Uv(e){return[e[0],e[1],e[2]]}function Il(e,t,r){return[e,t,r]}function iD(e,t,r){return[e,t,r]}function sD(e,t=Fn()){const r=Math.min(3,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function nD(e,t){return new Float64Array(e,t,3)}function H3(){return Fn()}function W3(){return Il(1,1,1)}function q3(){return Il(1,0,0)}function Z3(){return Il(0,1,0)}function Y3(){return Il(0,0,1)}const oD=H3(),aD=W3(),lD=q3(),cD=Z3(),uD=Y3();Object.freeze(Object.defineProperty({__proto__:null,ONES:aD,UNIT_X:lD,UNIT_Y:cD,UNIT_Z:uD,ZEROS:oD,clone:Uv,create:Fn,createView:nD,freeze:iD,fromArray:sD,fromValues:Il,ones:W3,unitX:q3,unitY:Z3,unitZ:Y3,zeros:H3},Symbol.toStringTag,{value:"Module"}));let jv=1e-6;function ir(){return jv}function hD(e){jv=e}const Gv=Math.random,dD=Math.PI/180,pD=180/Math.PI;function Vv(e){return e*dD}function fD(e){return e*pD}function mD(e,t){return Math.abs(e-t)<=jv*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:Gv,equals:mD,getEpsilon:ir,setEpsilon:hD,toDegree:fD,toRadian:Vv},Symbol.toStringTag,{value:"Module"}));function J3(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Un(e,t,r,i,s,n,o,a,l,h,p,f,m,y,v,_,w){return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e[4]=n,e[5]=o,e[6]=a,e[7]=l,e[8]=h,e[9]=p,e[10]=f,e[11]=m,e[12]=y,e[13]=v,e[14]=_,e[15]=w,e}function Gf(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function jn(e,t){if(e===t){const r=t[1],i=t[2],s=t[3],n=t[6],o=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=n,e[11]=t[14],e[12]=s,e[13]=o,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function yD(e,t){return X3(e,t)||Gf(e),e}function X3(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],h=t[7],p=t[8],f=t[9],m=t[10],y=t[11],v=t[12],_=t[13],w=t[14],S=t[15],E=r*a-i*o,x=r*l-s*o,A=r*h-n*o,P=i*l-s*a,C=i*h-n*a,U=s*h-n*l,F=p*_-f*v,z=p*w-m*v,q=p*S-y*v,ee=f*w-m*_,ce=f*S-y*_,ye=m*S-y*w;let ne=E*ye-x*ce+A*ee+P*q-C*z+U*F;return ne?(ne=1/ne,e[0]=(a*ye-l*ce+h*ee)*ne,e[1]=(s*ce-i*ye-n*ee)*ne,e[2]=(_*U-w*C+S*P)*ne,e[3]=(m*C-f*U-y*P)*ne,e[4]=(l*q-o*ye-h*z)*ne,e[5]=(r*ye-s*q+n*z)*ne,e[6]=(w*A-v*U-S*x)*ne,e[7]=(p*U-m*A+y*x)*ne,e[8]=(o*ce-a*q+h*F)*ne,e[9]=(i*q-r*ce-n*F)*ne,e[10]=(v*C-_*A+S*E)*ne,e[11]=(f*A-p*C-y*E)*ne,e[12]=(a*z-o*ee-l*F)*ne,e[13]=(r*ee-i*z+s*F)*ne,e[14]=(_*x-v*P-w*E)*ne,e[15]=(p*P-f*x+m*E)*ne,e):null}function gD(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],h=t[7],p=t[8],f=t[9],m=t[10],y=t[11],v=t[12],_=t[13],w=t[14],S=t[15];return e[0]=a*(m*S-y*w)-f*(l*S-h*w)+_*(l*y-h*m),e[1]=-(i*(m*S-y*w)-f*(s*S-n*w)+_*(s*y-n*m)),e[2]=i*(l*S-h*w)-a*(s*S-n*w)+_*(s*h-n*l),e[3]=-(i*(l*y-h*m)-a*(s*y-n*m)+f*(s*h-n*l)),e[4]=-(o*(m*S-y*w)-p*(l*S-h*w)+v*(l*y-h*m)),e[5]=r*(m*S-y*w)-p*(s*S-n*w)+v*(s*y-n*m),e[6]=-(r*(l*S-h*w)-o*(s*S-n*w)+v*(s*h-n*l)),e[7]=r*(l*y-h*m)-o*(s*y-n*m)+p*(s*h-n*l),e[8]=o*(f*S-y*_)-p*(a*S-h*_)+v*(a*y-h*f),e[9]=-(r*(f*S-y*_)-p*(i*S-n*_)+v*(i*y-n*f)),e[10]=r*(a*S-h*_)-o*(i*S-n*_)+v*(i*h-n*a),e[11]=-(r*(a*y-h*f)-o*(i*y-n*f)+p*(i*h-n*a)),e[12]=-(o*(f*w-m*_)-p*(a*w-l*_)+v*(a*m-l*f)),e[13]=r*(f*w-m*_)-p*(i*w-s*_)+v*(i*m-s*f),e[14]=-(r*(a*w-l*_)-o*(i*w-s*_)+v*(i*l-s*a)),e[15]=r*(a*m-l*f)-o*(i*m-s*f)+p*(i*l-s*a),e}function vD(e){const t=e[0],r=e[1],i=e[2],s=e[3],n=e[4],o=e[5],a=e[6],l=e[7],h=e[8],p=e[9],f=e[10],m=e[11],y=e[12],v=e[13],_=e[14],w=e[15];return(t*o-r*n)*(f*w-m*_)-(t*a-i*n)*(p*w-m*v)+(t*l-s*n)*(p*_-f*v)+(r*a-i*o)*(h*w-m*y)-(r*l-s*o)*(h*_-f*y)+(i*l-s*a)*(h*v-p*y)}function K3(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],h=t[6],p=t[7],f=t[8],m=t[9],y=t[10],v=t[11],_=t[12],w=t[13],S=t[14],E=t[15];let x=r[0],A=r[1],P=r[2],C=r[3];return e[0]=x*i+A*a+P*f+C*_,e[1]=x*s+A*l+P*m+C*w,e[2]=x*n+A*h+P*y+C*S,e[3]=x*o+A*p+P*v+C*E,x=r[4],A=r[5],P=r[6],C=r[7],e[4]=x*i+A*a+P*f+C*_,e[5]=x*s+A*l+P*m+C*w,e[6]=x*n+A*h+P*y+C*S,e[7]=x*o+A*p+P*v+C*E,x=r[8],A=r[9],P=r[10],C=r[11],e[8]=x*i+A*a+P*f+C*_,e[9]=x*s+A*l+P*m+C*w,e[10]=x*n+A*h+P*y+C*S,e[11]=x*o+A*p+P*v+C*E,x=r[12],A=r[13],P=r[14],C=r[15],e[12]=x*i+A*a+P*f+C*_,e[13]=x*s+A*l+P*m+C*w,e[14]=x*n+A*h+P*y+C*S,e[15]=x*o+A*p+P*v+C*E,e}function _D(e,t,r){const i=r[0],s=r[1],n=r[2];if(t===e)e[12]=t[0]*i+t[4]*s+t[8]*n+t[12],e[13]=t[1]*i+t[5]*s+t[9]*n+t[13],e[14]=t[2]*i+t[6]*s+t[10]*n+t[14],e[15]=t[3]*i+t[7]*s+t[11]*n+t[15];else{const o=t[0],a=t[1],l=t[2],h=t[3],p=t[4],f=t[5],m=t[6],y=t[7],v=t[8],_=t[9],w=t[10],S=t[11];e[0]=o,e[1]=a,e[2]=l,e[3]=h,e[4]=p,e[5]=f,e[6]=m,e[7]=y,e[8]=v,e[9]=_,e[10]=w,e[11]=S,e[12]=o*i+p*s+v*n+t[12],e[13]=a*i+f*s+_*n+t[13],e[14]=l*i+m*s+w*n+t[14],e[15]=h*i+y*s+S*n+t[15]}return e}function wD(e,t,r){const i=r[0],s=r[1],n=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function bD(e,t,r,i){let s=i[0],n=i[1],o=i[2],a=Math.sqrt(s*s+n*n+o*o);if(a<=ir())return void J3(e,t);a=1/a,s*=a,n*=a,o*=a;const l=Math.sin(r),h=Math.cos(r),p=1-h,f=t[0],m=t[1],y=t[2],v=t[3],_=t[4],w=t[5],S=t[6],E=t[7],x=t[8],A=t[9],P=t[10],C=t[11],U=s*s*p+h,F=n*s*p+o*l,z=o*s*p-n*l,q=s*n*p-o*l,ee=n*n*p+h,ce=o*n*p+s*l,ye=s*o*p+n*l,ne=n*o*p-s*l,bt=o*o*p+h;e[0]=f*U+_*F+x*z,e[1]=m*U+w*F+A*z,e[2]=y*U+S*F+P*z,e[3]=v*U+E*F+C*z,e[4]=f*q+_*ee+x*ce,e[5]=m*q+w*ee+A*ce,e[6]=y*q+S*ee+P*ce,e[7]=v*q+E*ee+C*ce,e[8]=f*ye+_*ne+x*bt,e[9]=m*ye+w*ne+A*bt,e[10]=y*ye+S*ne+P*bt,e[11]=v*ye+E*ne+C*bt,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15])}function SD(e,t,r){const i=Math.sin(r),s=Math.cos(r),n=t[4],o=t[5],a=t[6],l=t[7],h=t[8],p=t[9],f=t[10],m=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=n*s+h*i,e[5]=o*s+p*i,e[6]=a*s+f*i,e[7]=l*s+m*i,e[8]=h*s-n*i,e[9]=p*s-o*i,e[10]=f*s-a*i,e[11]=m*s-l*i,e}function $D(e,t,r){const i=Math.sin(r),s=Math.cos(r),n=t[0],o=t[1],a=t[2],l=t[3],h=t[8],p=t[9],f=t[10],m=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*s-h*i,e[1]=o*s-p*i,e[2]=a*s-f*i,e[3]=l*s-m*i,e[8]=n*i+h*s,e[9]=o*i+p*s,e[10]=a*i+f*s,e[11]=l*i+m*s,e}function TD(e,t,r){const i=Math.sin(r),s=Math.cos(r),n=t[0],o=t[1],a=t[2],l=t[3],h=t[4],p=t[5],f=t[6],m=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*s+h*i,e[1]=o*s+p*i,e[2]=a*s+f*i,e[3]=l*s+m*i,e[4]=h*s-n*i,e[5]=p*s-o*i,e[6]=f*s-a*i,e[7]=m*s-l*i,e}function ED(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function MD(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function xD(e,t,r){if(t===0)return Gf(e);let i=r[0],s=r[1],n=r[2],o=Math.sqrt(i*i+s*s+n*n);if(o<=ir())return null;o=1/o,i*=o,s*=o,n*=o;const a=Math.sin(t),l=Math.cos(t),h=1-l;return e[0]=i*i*h+l,e[1]=s*i*h+n*a,e[2]=n*i*h-s*a,e[3]=0,e[4]=i*s*h-n*a,e[5]=s*s*h+l,e[6]=n*s*h+i*a,e[7]=0,e[8]=i*n*h+s*a,e[9]=s*n*h-i*a,e[10]=n*n*h+l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function AD(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ID(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function OD(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Q3(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=i+i,l=s+s,h=n+n,p=i*a,f=i*l,m=i*h,y=s*l,v=s*h,_=n*h,w=o*a,S=o*l,E=o*h;return e[0]=1-(y+_),e[1]=f+E,e[2]=m-S,e[3]=0,e[4]=f-E,e[5]=1-(p+_),e[6]=v+w,e[7]=0,e[8]=m+S,e[9]=v-w,e[10]=1-(p+y),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function PD(e,t){const r=RD,i=-t[0],s=-t[1],n=-t[2],o=t[3],a=t[4],l=t[5],h=t[6],p=t[7],f=i*i+s*s+n*n+o*o;return f>0?(r[0]=2*(a*o+p*i+l*n-h*s)/f,r[1]=2*(l*o+p*s+h*i-a*n)/f,r[2]=2*(h*o+p*n+a*s-l*i)/f):(r[0]=2*(a*o+p*i+l*n-h*s),r[1]=2*(l*o+p*s+h*i-a*n),r[2]=2*(h*o+p*n+a*s-l*i)),Q3(e,t,r),e}const RD=Fn();function CD(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function kD(e,t){const r=t[0],i=t[1],s=t[2],n=t[4],o=t[5],a=t[6],l=t[8],h=t[9],p=t[10];return e[0]=Math.sqrt(r*r+i*i+s*s),e[1]=Math.sqrt(n*n+o*o+a*a),e[2]=Math.sqrt(l*l+h*h+p*p),e}function ND(e,t){const r=t[0]+t[5]+t[10];let i=0;return r>0?(i=2*Math.sqrt(r+1),e[3]=.25*i,e[0]=(t[6]-t[9])/i,e[1]=(t[8]-t[2])/i,e[2]=(t[1]-t[4])/i):t[0]>t[5]&&t[0]>t[10]?(i=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/i,e[0]=.25*i,e[1]=(t[1]+t[4])/i,e[2]=(t[8]+t[2])/i):t[5]>t[10]?(i=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/i,e[0]=(t[1]+t[4])/i,e[1]=.25*i,e[2]=(t[6]+t[9])/i):(i=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/i,e[0]=(t[8]+t[2])/i,e[1]=(t[6]+t[9])/i,e[2]=.25*i),e}function LD(e,t,r,i){const s=t[0],n=t[1],o=t[2],a=t[3],l=s+s,h=n+n,p=o+o,f=s*l,m=s*h,y=s*p,v=n*h,_=n*p,w=o*p,S=a*l,E=a*h,x=a*p,A=i[0],P=i[1],C=i[2];return e[0]=(1-(v+w))*A,e[1]=(m+x)*A,e[2]=(y-E)*A,e[3]=0,e[4]=(m-x)*P,e[5]=(1-(f+w))*P,e[6]=(_+S)*P,e[7]=0,e[8]=(y+E)*C,e[9]=(_-S)*C,e[10]=(1-(f+v))*C,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function DD(e,t,r,i,s){const n=t[0],o=t[1],a=t[2],l=t[3],h=n+n,p=o+o,f=a+a,m=n*h,y=n*p,v=n*f,_=o*p,w=o*f,S=a*f,E=l*h,x=l*p,A=l*f,P=i[0],C=i[1],U=i[2],F=s[0],z=s[1],q=s[2],ee=(1-(_+S))*P,ce=(y+A)*P,ye=(v-x)*P,ne=(y-A)*C,bt=(1-(m+S))*C,mi=(w+E)*C,Dt=(v+x)*U,Ee=(w-E)*U,_r=(1-(m+_))*U;return e[0]=ee,e[1]=ce,e[2]=ye,e[3]=0,e[4]=ne,e[5]=bt,e[6]=mi,e[7]=0,e[8]=Dt,e[9]=Ee,e[10]=_r,e[11]=0,e[12]=r[0]+F-(ee*F+ne*z+Dt*q),e[13]=r[1]+z-(ce*F+bt*z+Ee*q),e[14]=r[2]+q-(ye*F+mi*z+_r*q),e[15]=1,e}function FD(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=r+r,a=i+i,l=s+s,h=r*o,p=i*o,f=i*a,m=s*o,y=s*a,v=s*l,_=n*o,w=n*a,S=n*l;return e[0]=1-f-v,e[1]=p+S,e[2]=m-w,e[3]=0,e[4]=p-S,e[5]=1-h-v,e[6]=y+_,e[7]=0,e[8]=m+w,e[9]=y-_,e[10]=1-h-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function UD(e,t,r,i,s,n,o){const a=1/(r-t),l=1/(s-i),h=1/(n-o);return e[0]=2*n*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*n*l,e[6]=0,e[7]=0,e[8]=(r+t)*a,e[9]=(s+i)*l,e[10]=(o+n)*h,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*n*2*h,e[15]=0,e}function jD(e,t,r,i,s){const n=1/Math.tan(t/2);let o;return e[0]=n/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,s!=null&&s!==1/0?(o=1/(i-s),e[10]=(s+i)*o,e[14]=2*s*i*o):(e[10]=-1,e[14]=-2*i),e}function GD(e,t,r,i){const s=Math.tan(t.upDegrees*Math.PI/180),n=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+a),h=2/(s+n);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=h,e[6]=0,e[7]=0,e[8]=-(o-a)*l*.5,e[9]=(s-n)*h*.5,e[10]=i/(r-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r/(r-i),e[15]=0,e}function VD(e,t,r,i,s,n,o){const a=1/(t-r),l=1/(i-s),h=1/(n-o);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*h,e[11]=0,e[12]=(t+r)*a,e[13]=(s+i)*l,e[14]=(o+n)*h,e[15]=1,e}function zD(e,t,r,i){const s=t[0],n=t[1],o=t[2];let a=s-r[0],l=n-r[1],h=o-r[2];const p=ir();if(Math.abs(a)<p&&Math.abs(l)<p&&Math.abs(h)<p)return void Gf(e);let f=1/Math.sqrt(a*a+l*l+h*h);a*=f,l*=f,h*=f;const m=i[0],y=i[1],v=i[2];let _=y*h-v*l,w=v*a-m*h,S=m*l-y*a;f=Math.sqrt(_*_+w*w+S*S),f?(f=1/f,_*=f,w*=f,S*=f):(_=0,w=0,S=0);let E=l*S-h*w,x=h*_-a*S,A=a*w-l*_;f=Math.sqrt(E*E+x*x+A*A),f?(f=1/f,E*=f,x*=f,A*=f):(E=0,x=0,A=0),e[0]=_,e[1]=E,e[2]=a,e[3]=0,e[4]=w,e[5]=x,e[6]=l,e[7]=0,e[8]=S,e[9]=A,e[10]=h,e[11]=0,e[12]=-(_*s+w*n+S*o),e[13]=-(E*s+x*n+A*o),e[14]=-(a*s+l*n+h*o),e[15]=1}function BD(e,t,r,i){const s=t[0],n=t[1],o=t[2],a=i[0],l=i[1],h=i[2];let p=s-r[0],f=n-r[1],m=o-r[2],y=p*p+f*f+m*m;y>0&&(y=1/Math.sqrt(y),p*=y,f*=y,m*=y);let v=l*m-h*f,_=h*p-a*m,w=a*f-l*p;return y=v*v+_*_+w*w,y>0&&(y=1/Math.sqrt(y),v*=y,_*=y,w*=y),e[0]=v,e[1]=_,e[2]=w,e[3]=0,e[4]=f*w-m*_,e[5]=m*v-p*w,e[6]=p*_-f*v,e[7]=0,e[8]=p,e[9]=f,e[10]=m,e[11]=0,e[12]=s,e[13]=n,e[14]=o,e[15]=1,e}function HD(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function WD(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function qD(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function eM(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function ZD(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function YD(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e[9]=t[9]+r[9]*i,e[10]=t[10]+r[10]*i,e[11]=t[11]+r[11]*i,e[12]=t[12]+r[12]*i,e[13]=t[13]+r[13]*i,e[14]=t[14]+r[14]*i,e[15]=t[15]+r[15]*i,e}function JD(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function XD(e,t){if(e===t)return!0;const r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],h=e[7],p=e[8],f=e[9],m=e[10],y=e[11],v=e[12],_=e[13],w=e[14],S=e[15],E=t[0],x=t[1],A=t[2],P=t[3],C=t[4],U=t[5],F=t[6],z=t[7],q=t[8],ee=t[9],ce=t[10],ye=t[11],ne=t[12],bt=t[13],mi=t[14],Dt=t[15],Ee=ir();return Math.abs(r-E)<=Ee*Math.max(1,Math.abs(r),Math.abs(E))&&Math.abs(i-x)<=Ee*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(s-A)<=Ee*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(n-P)<=Ee*Math.max(1,Math.abs(n),Math.abs(P))&&Math.abs(o-C)<=Ee*Math.max(1,Math.abs(o),Math.abs(C))&&Math.abs(a-U)<=Ee*Math.max(1,Math.abs(a),Math.abs(U))&&Math.abs(l-F)<=Ee*Math.max(1,Math.abs(l),Math.abs(F))&&Math.abs(h-z)<=Ee*Math.max(1,Math.abs(h),Math.abs(z))&&Math.abs(p-q)<=Ee*Math.max(1,Math.abs(p),Math.abs(q))&&Math.abs(f-ee)<=Ee*Math.max(1,Math.abs(f),Math.abs(ee))&&Math.abs(m-ce)<=Ee*Math.max(1,Math.abs(m),Math.abs(ce))&&Math.abs(y-ye)<=Ee*Math.max(1,Math.abs(y),Math.abs(ye))&&Math.abs(v-ne)<=Ee*Math.max(1,Math.abs(v),Math.abs(ne))&&Math.abs(_-bt)<=Ee*Math.max(1,Math.abs(_),Math.abs(bt))&&Math.abs(w-mi)<=Ee*Math.max(1,Math.abs(w),Math.abs(mi))&&Math.abs(S-Dt)<=Ee*Math.max(1,Math.abs(S),Math.abs(Dt))}function KD(e){const t=ir(),r=e[0],i=e[1],s=e[2],n=e[4],o=e[5],a=e[6],l=e[8],h=e[9],p=e[10];return Math.abs(1-(r*r+n*n+l*l))<=t&&Math.abs(1-(i*i+o*o+h*h))<=t&&Math.abs(1-(s*s+a*a+p*p))<=t}function QD(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[8]===0&&e[9]===0&&e[10]===1}const e6=K3,t6=eM;Object.freeze(Object.defineProperty({__proto__:null,add:qD,adjoint:gD,copy:J3,determinant:vD,equals:XD,exactEquals:JD,frob:WD,fromQuat:FD,fromQuat2:PD,fromRotation:xD,fromRotationTranslation:Q3,fromRotationTranslationScale:LD,fromRotationTranslationScaleOrigin:DD,fromScaling:MD,fromTranslation:ED,fromXRotation:AD,fromYRotation:ID,fromZRotation:OD,frustum:UD,getRotation:ND,getScaling:kD,getTranslation:CD,hasIdentityRotation:QD,identity:Gf,invert:X3,invertOrIdentity:yD,isOrthoNormal:KD,lookAt:zD,mul:e6,multiply:K3,multiplyScalar:ZD,multiplyScalarAndAdd:YD,ortho:VD,perspective:jD,perspectiveFromFieldOfView:GD,rotate:bD,rotateX:SD,rotateY:$D,rotateZ:TD,scale:wD,set:Un,str:HD,sub:t6,subtract:eM,targetTo:BD,translate:_D,transpose:jn},Symbol.toStringTag,{value:"Module"}));const r6=(e,t)=>{const r=Un(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return jn(r,r)},i6=(e,t)=>{const r=Un(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return jn(r,r)},s6=(e,t)=>{const r=1-t,i=Un(e,.2126+.7874*r,.7152-.7152*r,.0722-.0722*r,0,.2126-.2126*r,.7152+.2848*r,.0722-.0722*r,0,.2126-.2126*r,.7152-.7152*r,.0722+.9278*r,0,0,0,0,1);return jn(i,i)},n6=(e,t)=>{const r=Math.sin(t*Math.PI/180),i=Math.cos(t*Math.PI/180),s=Un(e,.213+.787*i-.213*r,.715-.715*i-.715*r,.072-.072*i+.928*r,0,.213-.213*i+.143*r,.715+.285*i+.14*r,.072-.072*i-.283*r,0,.213-.213*i-.787*r,.715-.715*i+.715*r,.072+.928*i+.072*r,0,0,0,0,1);return jn(s,s)},o6=(e,t)=>{const r=1-2*t,i=Un(e,r,0,0,t,0,r,0,t,0,0,r,t,0,0,0,1);return jn(i,i)},a6=(e,t)=>{const r=Un(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return jn(r,r)},l6=(e,t)=>{const r=1-t,i=Un(e,.393+.607*r,.769-.769*r,.189-.189*r,0,.349-.349*r,.686+.314*r,.168-.168*r,0,.272-.272*r,.534-.534*r,.131+.869*r,0,0,0,0,1);return jn(i,i)};let tM=class rM{constructor(t,r,i){this.strength=t,this.radius=r,this.threshold=i,this.type="bloom"}interpolate(t,r,i){this.strength=Kt(t.strength,r.strength,i),this.radius=Kt(t.radius,r.radius,i),this.threshold=Kt(t.threshold,r.threshold,i)}clone(){return new rM(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:su(this.radius),strength:this.strength,threshold:this.threshold}}},iM=class sM{constructor(t){this.radius=t,this.type="blur"}interpolate(t,r,i){this.radius=Math.round(Kt(t.radius,r.radius,i))}clone(){return new sM(this.radius)}toJSON(){return{type:"blur",radius:su(this.radius)}}},M0=class nM{constructor(t,r){this.type=t,this.amount=r,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,i){this.amount=Kt(t.amount,r.amount,i),this._updateMatrix()}clone(){return new nM(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||jf();switch(this.type){case"brightness":this._colorMatrix=r6(t,this.amount);break;case"contrast":this._colorMatrix=i6(t,this.amount);break;case"grayscale":this._colorMatrix=s6(t,this.amount);break;case"invert":this._colorMatrix=o6(t,this.amount);break;case"saturate":this._colorMatrix=a6(t,this.amount);break;case"sepia":this._colorMatrix=l6(t,this.amount)}}},oM=class aM{constructor(t,r,i,s){this.offsetX=t,this.offsetY=r,this.blurRadius=i,this.color=s,this.type="drop-shadow"}interpolate(t,r,i){this.offsetX=Kt(t.offsetX,r.offsetX,i),this.offsetY=Kt(t.offsetY,r.offsetY,i),this.blurRadius=Kt(t.blurRadius,r.blurRadius,i),this.color[0]=Math.round(Kt(t.color[0],r.color[0],i)),this.color[1]=Math.round(Kt(t.color[1],r.color[1],i)),this.color[2]=Math.round(Kt(t.color[2],r.color[2],i)),this.color[3]=Kt(t.color[3],r.color[3],i)}clone(){return new aM(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:su(this.offsetX),yoffset:su(this.offsetY),blurRadius:su(this.blurRadius),color:t}}},lM=class cM{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,i){this.angle=Kt(t.angle,r.angle,i),this._updateMatrix()}clone(){return new cM(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||jf();this._colorMatrix=n6(t,this.angle)}},uM=class hM{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,r,i){this.amount=Kt(t.amount,r.amount,i)}clone(){return new hM(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function Kt(e,t,r){return e+(t-e)*r}function su(e){return Math.round(1e3*On(e))/1e3}function c6(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new M0(e.type,0);case"saturate":case"brightness":case"contrast":return new M0(e.type,1);case"opacity":return new uM(1);case"hue-rotate":return new lM(0);case"blur":return new iM(0);case"drop-shadow":return new oM(0,0,0,[...Lv("transparent")]);case"bloom":return new tM(0,0,1)}}function u6(e,t){const r=e.length>t.length?e:t;return(e.length>t.length?t:e).every((i,s)=>i.type===r[s].type)}function h6(e,t){const r=e.length>t.length?e:t,i=e.length>t.length?t:e;for(let s=i.length;s<r.length;s++)i.push(c6(r[s]))}function d6(e){const t=e[0];return!!t&&"type"in t}const jm=()=>V.getLogger("esri.support.basemapUtils");function p6(){return{}}function f6(e){for(const t in e){const r=e[t];Ve(r),delete e[t]}}function m6(e,t){let r;if(typeof e=="string"){const i=e in S0,s=!i&&e.includes("/");if(!i&&!s){if(Te.apiKey)jm().warn(`Unable to find basemap definition for: ${e}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const n=Object.entries(S0).filter(([o,a])=>a.classic||a.is3d).map(([o])=>`"${o}"`).sort().join(", ");jm().warn(`Unable to find basemap definition for: ${e}. Try one of these: ${n}`)}return null}t&&(r=t[e]),r||(r=i?iu.fromId(e):new iu({style:{id:e}}),t&&(t[e]=r))}else r=Bt(iu,e);return r!=null&&r.destroyed&&(jm().warn("The provided basemap is already destroyed",{basemap:r}),r=null),r}function y6(e){return new xu({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const r=[];return"tables"in t&&r.push(t.tables),"layers"in t&&r.push(t.layers),r},itemFilterFunction:t=>{const r=t.parent;return!!r&&"tables"in r&&r.tables.includes(t)}})}function Gm(e){for(const t of e.values())t==null||t.destroy();e.clear()}const xb={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function g6(e){let t=null;if(typeof e=="string")if(e in xb){const r=xb[e];t=new Up({resourceInfo:{data:{layers:[r]}}})}else V.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=Bt(Up,e);return t}function gl(e,t,r=!1){let{hasM:i,hasZ:s}=e;Array.isArray(t)?t.length!==4||i||s?t.length===3&&r&&!i?(s=!0,i=!1):t.length===3&&i&&s&&(i=!1,s=!1):(i=!0,s=!0):(s=!s&&t.hasZ&&(!i||t.hasM),i=!i&&t.hasM&&(!s||t.hasZ)),e.hasZ=s,e.hasM=i}var x0;function Ab(e){return(t,r)=>t==null?r:r==null?t:e(t,r)}function v6(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Bs=x0=class extends Ps{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){var s;if(!e&&!t)return{};const r={};Array.isArray(e)?(r.points=e,r.spatialReference=t):v6(e)?r.spatialReference=e:(e.points&&(r.points=e.points),e.spatialReference&&(r.spatialReference=e.spatialReference),e.hasZ&&(r.hasZ=e.hasZ),e.hasM&&(r.hasM=e.hasM));const i=(s=r.points)==null?void 0:s[0];return i&&(r.hasZ===void 0&&r.hasM===void 0?(r.hasZ=i.length>2,r.hasM=!1):r.hasZ===void 0?r.hasZ=i.length>3:r.hasM===void 0&&(r.hasM=i.length>3)),r}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new Be,r=this.hasZ,i=this.hasM,s=r?3:2,n=e[0],o=Ab(Math.min),a=Ab(Math.max);let l,h,p,f,[m,y]=n,[v,_]=n;for(let w=0,S=e.length;w<S;w++){const E=e[w],[x,A]=E;if(m=o(m,x),y=o(y,A),v=a(v,x),_=a(_,A),r&&E.length>2){const P=E[2];l=o(l,P),p=a(p,P)}if(i&&E.length>s){const P=E[s];h=o(h,P),f=a(f,P)}}return t.xmin=m,t.ymin=y,t.xmax=v,t.ymax=_,t.spatialReference=this.spatialReference,r?(t.zmin=l,t.zmax=p):(t.zmin=void 0,t.zmax=void 0),i?(t.mmin=h,t.mmax=f):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=N(this.points)}addPoint(e){return gl(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:N(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new x0(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],r={x:t[0],y:t[1],spatialReference:this.spatialReference};let i=2;return this.hasZ&&(r.z=t[2],i=3),this.hasM&&(r.m=t[i]),new ae(r)}removePoint(e){if(!this._validateInputs(e))return null;const t=new ae(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(gl(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};u([d({readOnly:!0})],Bs.prototype,"cache",null),u([d()],Bs.prototype,"extent",null),u([d({type:[[Number]],json:{write:{isRequired:!0}}})],Bs.prototype,"points",void 0),u([pe("points")],Bs.prototype,"writePoints",null),Bs=x0=u([$("esri.geometry.Multipoint")],Bs),Bs.prototype.toJSON.isDefaultToJSON=!0;const Vf=Bs;function dee(e){const t=[];for(e.reset();e.nextPath();){const r=[];for(;e.nextPoint();)r.push([e.x,e.y]);t.push(r)}return e.reset(),t}function _6(e){const t=[];for(;e.nextPoint();)t.push([e.x,e.y]);return e.seekPathStart(),t}var jp;(function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"})(jp||(jp={}));function zv(e,t){const r=t[0]-e[0],i=t[1]-e[1];if(e.length>2&&t.length>2){const s=e[2]-t[2];return Math.sqrt(r*r+i*i+s*s)}return Math.sqrt(r*r+i*i)}function w6(e,t,r){const i=e[0]+r*(t[0]-e[0]),s=e[1]+r*(t[1]-e[1]);return e.length>2&&t.length>2?[i,s,e[2]+r*(t[2]-e[2])]:[i,s]}function b6(e,t,r,i){return S6(e,t,r[i],r[i+1])}function S6(e,t,r,i){const[s,n]=t,[o,a]=r,[l,h]=i,p=l-o,f=h-a,m=p*p+f*f,y=(s-o)*p+(n-a)*f,v=Math.min(1,Math.max(0,y/m));return e[0]=o+p*v,e[1]=a+f*v,e}function pee(e,t,r,i,s,n){let o=r,a=i,l=s-o,h=n-a;if(l!==0||h!==0){const p=((e-o)*l+(t-a)*h)/(l*l+h*h);p>1?(o=s,a=n):p>0&&(o+=l*p,a+=h*p)}return l=e-o,h=t-a,l*l+h*h}function dM(e,t){return w6(e,t,.5)}function fee(e){const t=e.length;let r=0;for(let i=0;i<t-1;++i)r+=zv(e[i],e[i+1]);return r}function pM(e,t=jp.X,r=jp.Y){let i=0;const s=e.length;let n=e[0];for(let o=1;o<s;o++){const a=e[o];i+=(a[t]-n[t])*(a[r]+n[r]),n=a}if(!fM(e)){const o=e[0];i+=(o[t]-n[t])*(o[r]+n[r])}return i>=0}function fM(e){const t=e.length;return t<3||_f(e[0],e[t-1])}function mee(e){"rings"in e&&($6(e),T6(e))}function $6(e){if(!("rings"in e))return!1;let t=!1;for(const r of e.rings)fM(r)||(r.push(r[0].slice()),t=!0);return t}function T6(e){if(!("rings"in e)||e.rings.length===0||pM(e.rings[0]))return!1;for(const t of e.rings)t.reverse();return!0}function yee(e){return e.type!=="polygon"&&e.type!=="polyline"||E6(e.type==="polygon"?e.rings:e.paths,e.spatialReference),e}function E6(e,t){const r=zt(t);if(!r)return;const i=r.valid[0],s=r.valid[1],n=s-i;for(const o of e){let a=1/0,l=-1/0;for(const p of o){const f=M6(p[0],i,s);a=Math.min(a,f),l=Math.max(l,f),p[0]=f}const h=l-a;n-h<h&&o.forEach(p=>{p[0]<0&&(p[0]+=n)})}}function M6(e,t,r){const i=r-t;return e<t?r-(t-e)%i:e>r?t+(e-t)%i:e}function gee(e,t){if(e===t)return!0;if(e.type!==t.type)return!1;if(e.type==="point"||e.type==="mesh"||e.type==="extent")return!0;if(e.type==="multipoint")return e.points.length===t.points.length;const[r,i]=e.type==="polyline"?[e.paths,t.paths]:[e.rings,t.rings];return r.length===i.length&&r.every((s,n)=>s.length===i[n].length)}function vee(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function x6(e){return e?A6(e.rings,e.hasZ??!1):null}function A6(e,t){if(!(e!=null&&e.length))return null;const r=[],i=[],s=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let n=0,o=e.length;n<o;n++){const a=mM(e[n],t,s);a&&i.push(a)}if(i.sort((n,o)=>{let a=n[2]-o[2];return a===0&&t&&(a=n[4]-o[4]),a}),i.length&&(r[0]=i[0][0],r[1]=i[0][1],t&&(r[2]=i[0][3]),(r[0]<s[0]||r[0]>s[1]||r[1]<s[2]||r[1]>s[3]||t&&(r[2]<s[4]||r[2]>s[5]))&&(r.length=0)),!r.length){const n=e[0]&&e[0].length?I6(e[0],t):null;if(!n)return null;r[0]=n[0],r[1]=n[1],t&&n.length>2&&(r[2]=n[2])}return r}function mM(e,t,r){let i=0,s=0,n=0,o=0,a=0;const l=e.length?e[0][0]:0,h=e.length?e[0][1]:0,p=e.length&&t?e[0][2]:0;for(let m=0;m<e.length;m++){const y=e[m],v=e[(m+1)%e.length],[_,w,S]=y,E=_-l,x=w-h,[A,P,C]=v,U=A-l,F=P-h,z=E*F-U*x;if(o+=z,i+=(E+U)*z,s+=(x+F)*z,t&&y.length>2&&v.length>2){const q=S-p,ee=C-p,ce=E*ee-U*q;n+=(q+ee)*ce,a+=ce}_<r[0]&&(r[0]=_),_>r[1]&&(r[1]=_),w<r[2]&&(r[2]=w),w>r[3]&&(r[3]=w),t&&(S<r[4]&&(r[4]=S),S>r[5]&&(r[5]=S))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const f=[i/(6*o)+l,s/(6*o)+h,o];return t&&(r[4]===r[5]||a===0?(f[3]=(r[4]+r[5])/2,f[4]=0):(f[3]=n/(6*a)+p,f[4]=a)),f}function _ee(e,t){let r=0,i=0,s=0;e.nextPoint();const n=e.pathSize?e.x:0,o=e.pathSize?e.y:0;for(let a=0;a<e.pathSize;a++){e.seekInPath(a);const l=[e.x,e.y];e.seekInPath((a+1)%e.pathSize);const h=[e.x,e.y],[p,f]=l,m=p-n,y=f-o,[v,_]=h,w=v-n,S=_-o,E=m*S-w*y;s+=E,r+=(m+w)*E,i+=(y+S)*E,p<t[0]&&(t[0]=p),p>t[1]&&(t[1]=p),f<t[2]&&(t[2]=f),f>t[3]&&(t[3]=f)}return s>0&&(s*=-1),s?(s*=.5,[r/(6*s)+n,i/(6*s)+o,s]):null}function I6(e,t){const r=t?[0,0,0]:[0,0],i=t?[0,0,0]:[0,0];let s=0,n=0,o=0,a=0;for(let l=0,h=e.length;l<h-1;l++){const p=e[l],f=e[l+1];if(p&&f){r[0]=p[0],r[1]=p[1],i[0]=f[0],i[1]=f[1],t&&p.length>2&&f.length>2&&(r[2]=p[2],i[2]=f[2]);const m=zv(r,i);if(m){s+=m;const y=dM(p,f);n+=m*y[0],o+=m*y[1],t&&y.length>2&&(a+=m*y[2])}}}return s>0?t?[n/s,o/s,a/s]:[n/s,o/s]:e.length?e[0]:null}function O6(e){const{hasZ:t,totalSize:r}=e;if(r===0)return null;const i=[],s=[],n=t?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(e.reset();e.nextPath();){const o=mM(_6(e),e.hasZ,n);o&&s.push(o)}if(s.sort((o,a)=>{let l=o[2]-a[2];return l===0&&t&&(l=o[4]-a[4]),l}),s.length&&(i[0]=s[0][0],i[1]=s[0][1],t&&(i[2]=s[0][3]),(i[0]<n[0]||i[0]>n[1]||i[1]<n[2]||i[1]>n[3]||t&&(i[2]<n[4]||i[2]>n[5]))&&(i.length=0)),!i.length){e.reset(),e.nextPath();const o=e.pathSize?P6(e):null;if(!o)return null;i[0]=o[0],i[1]=o[1],t&&o.length>2&&(i[2]=o[2])}return i}function P6(e){const{hasZ:t}=e,r=t?[0,0,0]:[0,0],i=t?[0,0,0]:[0,0];let s=0,n=0,o=0,a=0;if(e.nextPoint()){let l=e.x,h=e.y,p=e.z;for(;e.nextPoint();){const f=e.x,m=e.y,y=e.z;r[0]=l,r[1]=h,i[0]=f,i[1]=m,t&&(r[2]=p,i[2]=y);const v=zv(r,i);if(v){s+=v;const _=dM(r,i);n+=v*_[0],o+=v*_[1],t&&_.length>2&&(a+=v*_[2])}l=f,h=m,p=y}}return s>0?t?[n/s,o/s,a/s]:[n/s,o/s]:e.pathSize?(e.seekPathStart(),e.nextPoint(),[e.x,e.y]):null}const R6=1e-6;function wee(e){let t=0;for(e.reset();e.nextPath();)t+=e.getCurrentRingArea();if(t<R6){const s=O6(e);return s?[s[0],s[1]]:null}const r=[0,0];if(e.reset(),!e.nextPath()||!e.nextPoint())return null;const i=[e.x,e.y];for(e.reset();e.nextPath();)k6(r,i,e);return r[0]*=1/t,r[1]*=1/t,r[0]+=i[0],r[1]+=i[1],r}const C6=1/3;function k6(e,t,r){if(!e||!r||r.pathSize<3)return null;r.nextPoint();const i=r.x,s=r.y;r.nextPoint();let n,o=r.x-i,a=r.y-s,l=0,h=0;for(;r.nextPoint();)l=r.x-i,h=r.y-s,n=.5*C6*(l*a-h*o),e[0]+=n*(o+l),e[1]+=n*(a+h),o=l,a=h;const p=r.getCurrentRingArea(),f=[i,s];return f[0]-=t[0],f[1]-=t[1],f[0]*=p,f[1]*=p,e[0]+=f[0],e[1]+=f[1],e}function er(e=L6){return[e[0],e[1],e[2],e[3]]}function yM(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function bee(e,t,r,i,s=er()){return s[0]=e,s[1]=t,s[2]=r,s[3]=i,s}function See(e,t=er()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function $ee(e,t){return new Be({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function Tee(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function Eee(e,t,r){if(t!=null)if("length"in t)A0(t)?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[0]),r[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":r[0]=Math.min(e[0],t.xmin),r[1]=Math.min(e[1],t.ymin),r[2]=Math.max(e[2],t.xmax),r[3]=Math.max(e[3],t.ymax);break;case"point":r[0]=Math.min(e[0],t.x),r[1]=Math.min(e[1],t.y),r[2]=Math.max(e[2],t.x),r[3]=Math.max(e[3],t.y)}else yM(r,e)}function gM(e){return e==null||e[0]>=e[2]?0:e[2]-e[0]}function vM(e){return e==null||e[1]>=e[3]?0:e[3]-e[1]}function Mee(e){return gM(e)*vM(e)}function xee(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function Aee(e,t,r){return t>=e[0]&&r>=e[1]&&t<=e[2]&&r<=e[3]}function Iee(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function N6(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function Oee(e){return e?yM(e,Ib):er(Ib)}function A0(e){return e!=null&&e.length===4}function Pee(e,t){return A0(e)&&A0(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}const Ib=[1/0,1/0,-1/0,-1/0],L6=[0,0,0,0];function _M(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function wM(e){return e.points!==void 0}function bM(e){return e.x!==void 0&&e.y!==void 0}function SM(e){return e.paths!==void 0}function $M(e){return e.rings!==void 0}function TM(e){function t(r,i){return r==null?i:i==null?r:e(r,i)}return t}const yn=TM(Math.min),gn=TM(Math.max);function Ree(e,t){return SM(t)?vl(e,t.paths,!1,!1):$M(t)?vl(e,t.rings,!1,!1):wM(t)?Bv(e,t.points,!1,!1,!1,!1):_M(t)?EM(e,t):(bM(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function Cee(e){let t,r,i,s;for(e.reset(),t=i=1/0,r=s=-1/0;e.nextPath();){const n=D6(e);t=Math.min(n[0],t),i=Math.min(n[1],i),r=Math.max(n[2],r),s=Math.max(n[3],s)}return er([t,i,r,s])}function D6(e){let t,r,i,s;for(t=i=1/0,r=s=-1/0;e.nextPoint();)t=Math.min(e.x,t),i=Math.min(e.y,i),r=Math.max(e.x,r),s=Math.max(e.y,s);return er([t,i,r,s])}function kee(e,t){return SM(t)?vl(e,t.paths,!0,!1):$M(t)?vl(e,t.rings,!0,!1):wM(t)?Bv(e,t.points,!0,!1,!0,!1):_M(t)?EM(e,t,!0,!1,!0,!1):(bM(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function vl(e,t,r,i){const s=r?3:2;if(!t.length||!t[0].length)return null;let n,o,a,l,[h,p]=t[0][0],[f,m]=t[0][0];for(let y=0;y<t.length;y++){const v=t[y];for(let _=0;_<v.length;_++){const w=v[_],[S,E]=w;if(h=yn(h,S),p=yn(p,E),f=gn(f,S),m=gn(m,E),r&&w.length>2){const x=w[2];n=yn(n,x),o=gn(o,x)}if(i&&w.length>s){const x=w[s];a=yn(n,x),l=gn(o,x)}}}return r?i?(e[0]=h,e[1]=p,e[2]=n,e[3]=a,e[4]=f,e[5]=m,e[6]=o,e[7]=l,e.length=8,e):(e[0]=h,e[1]=p,e[2]=n,e[3]=f,e[4]=m,e[5]=o,e.length=6,e):i?(e[0]=h,e[1]=p,e[2]=a,e[3]=f,e[4]=m,e[5]=l,e.length=6,e):(e[0]=h,e[1]=p,e[2]=f,e[3]=m,e.length=4,e)}function EM(e,t,r,i,s,n){const o=t.xmin,a=t.xmax,l=t.ymin,h=t.ymax;let p=t.zmin,f=t.zmax,m=t.mmin,y=t.mmax;return s?(p=p||0,f=f||0,n?(m=m||0,y=y||0,e[0]=o,e[1]=l,e[2]=p,e[3]=m,e[4]=a,e[5]=h,e[6]=f,e[7]=y,e):(e[0]=o,e[1]=l,e[2]=p,e[3]=a,e[4]=h,e[5]=f,e)):n?(m=m||0,y=y||0,e[0]=o,e[1]=l,e[2]=m,e[3]=a,e[4]=h,e[5]=y,e):(e[0]=o,e[1]=l,e[2]=a,e[3]=h,e)}function Bv(e,t,r,i,s,n){const o=r?3:2,a=i&&n,l=r&&s;if(!t.length||!t[0].length)return null;let h,p,f,m,[y,v]=t[0],[_,w]=t[0];for(let S=0;S<t.length;S++){const E=t[S],[x,A]=E;if(y=yn(y,x),v=yn(v,A),_=gn(_,x),w=gn(w,A),l&&E.length>2){const P=E[2];h=yn(h,P),p=gn(p,P)}if(a&&E.length>o){const P=E[o];f=yn(h,P),m=gn(p,P)}}return s?(h=h||0,p=p||0,n?(f=f||0,m=m||0,e[0]=y,e[1]=v,e[2]=h,e[3]=f,e[4]=_,e[5]=w,e[6]=p,e[7]=m,e):(e[0]=y,e[1]=v,e[2]=h,e[3]=_,e[4]=w,e[5]=p,e)):n?(f=f||0,m=m||0,e[0]=y,e[1]=v,e[2]=f,e[3]=_,e[4]=w,e[5]=m,e):(e[0]=y,e[1]=v,e[2]=_,e[3]=w,e)}function F6(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function U6(e){return e.points!==void 0}function j6(e){return e.x!==void 0&&e.y!==void 0}function G6(e){return e.paths!==void 0}function V6(e){return e.rings!==void 0}const Hv=[];function MM(e,t,r,i){return{xmin:e,ymin:t,xmax:r,ymax:i}}function xM(e,t,r,i,s,n){return{xmin:e,ymin:t,zmin:r,xmax:i,ymax:s,zmax:n}}function AM(e,t,r,i,s,n){return{xmin:e,ymin:t,mmin:r,xmax:i,ymax:s,mmax:n}}function IM(e,t,r,i,s,n,o,a){return{xmin:e,ymin:t,zmin:r,mmin:i,xmax:s,ymax:n,zmax:o,mmax:a}}function Wv(e,t=!1,r=!1){return t?r?IM(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):xM(e[0],e[1],e[2],e[3],e[4],e[5]):r?AM(e[0],e[1],e[2],e[3],e[4],e[5]):MM(e[0],e[1],e[2],e[3])}function Nee(e){return e?F6(e)?e:j6(e)?B6(e):V6(e)?OM(e):G6(e)?PM(e):U6(e)?z6(e):null:null}function z6(e){const{hasZ:t,hasM:r,points:i}=e;return Wv(Bv(Hv,i,t??!1,r??!1),t,r)}function B6(e){const{x:t,y:r,z:i,m:s}=e,n=s!=null;return i!=null?n?IM(t,r,i,s,t,r,i,s):xM(t,r,i,t,r,i):n?AM(t,r,s,t,r,s):MM(t,r,t,r)}function OM(e){const{hasZ:t,hasM:r,rings:i}=e,s=vl(Hv,i,t??!1,r??!1);return s?Wv(s,t,r):null}function PM(e){const{hasZ:t,hasM:r,paths:i}=e,s=vl(Hv,i,t??!1,r??!1);return s?Wv(s,t,r):null}var Td;function Ob(e){return!Array.isArray(e[0])}function H6(e){var t;return typeof((t=e[0])==null?void 0:t[0])=="number"}function W6(e){var n,o;if(!e)return;let{rings:t,hasM:r,hasZ:i,spatialReference:s}=e;switch(t??(t=[]),H6(t)&&(t=[t]),(o=(n=t[0])==null?void 0:n[0])==null?void 0:o.length){case 4:i??(i=!0),r??(r=!0);break;case 3:i??(i=r!==!0),r??(r=!i);break;default:i??(i=!1),r??(r=!1)}return s??(s=de.WGS84),{...e,hasM:r,hasZ:i,rings:t,spatialReference:s}}let Ri=Td=class extends Ps{static fromExtent(e){const t=e.clone().normalize(),{spatialReference:r}=e;let i=!1,s=!1;for(const o of t)o.hasZ&&(i=!0),o.hasM&&(s=!0);const n={rings:t.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(i&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let h=0;h<a.length;h++)a[h].push(l)}if(s&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let h=0;h<a.length;h++)a[h].push(l)}return a}),spatialReference:r};return i&&(n.hasZ=!0),s&&(n.hasM=!0),new Td(n)}constructor(e){super(W6(e)),this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=x6(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new ae;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=OM(this);if(!t)return null;const r=new Be(t);return r.spatialReference=e,r}get isSelfIntersecting(){return r4(this.rings)}writeRings(e,t){t.rings=N(this.rings)}addRing(e){if(!e)return;const t=this.rings,r=t.length;if(Ob(e)){const i=[];for(let s=0,n=e.length;s<n;s++)i[s]=e[s].toArray();t[r]=i}else t[r]=e.slice();return this.notifyChange("rings"),this}clone(){const e=new Td;return e.spatialReference=this.spatialReference,e.rings=N(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,r=e.spatialReference;if(t!=null!=(r!=null)||t!=null&&r!=null&&!t.equals(r)||this.rings.length!==e.rings.length)return!1;const i=([s,n,o,a],[l,h,p,f])=>s===l&&n===h&&(o==null&&p==null||o===p)&&(a==null&&f==null||a===f);for(let s=0;s<this.rings.length;s++){const n=this.rings[s],o=e.rings[s];if(!_f(n,o,i))return!1}return!0}contains(e){if(!e)return!1;const t=kf(e,this.spatialReference);return Pv(this,t??e)}isClockwise(e){const t=Ob(e)?e.map(r=>this.hasZ?this.hasM?[r.x,r.y,r.z,r.m]:[r.x,r.y,r.z]:[r.x,r.y]):e;return pM(t)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.rings[e][t],i=this.hasZ,s=this.hasM;return i&&!s?new ae(r[0],r[1],r[2],void 0,this.spatialReference):s&&!i?new ae(r[0],r[1],void 0,r[2],this.spatialReference):i&&s?new ae(r[0],r[1],r[2],r[3],this.spatialReference):new ae(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(gl(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e].splice(t,0,r),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new ae(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),r}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],r=this.spatialReference,i=t.map(s=>new ae(s,r));return this.notifyChange("rings"),i}setPoint(e,t,r){return this._validateInputs(e,t)?(gl(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e][t]=r,this.notifyChange("rings"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const i=this.rings[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};u([d({readOnly:!0})],Ri.prototype,"cache",null),u([d({readOnly:!0})],Ri.prototype,"centroid",null),u([d({readOnly:!0})],Ri.prototype,"extent",null),u([d({readOnly:!0})],Ri.prototype,"isSelfIntersecting",null),u([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],Ri.prototype,"rings",void 0),u([pe("rings")],Ri.prototype,"writeRings",null),Ri=Td=u([$("esri.geometry.Polygon")],Ri);const Bi=Ri;Ri.prototype.toJSON.isDefaultToJSON=!0;var I0;function q6(e){return!Array.isArray(e[0])}function Z6(e){var t;return typeof((t=e[0])==null?void 0:t[0])=="number"}function Y6(e){var n,o;if(!e)return;let{paths:t,hasM:r,hasZ:i,spatialReference:s}=e;switch(t??(t=[]),Z6(t)&&(t=[t]),(o=(n=t[0])==null?void 0:n[0])==null?void 0:o.length){case 4:i??(i=!0),r??(r=!0);break;case 3:i??(i=r!==!0),r??(r=!i);break;default:i??(i=!1),r??(r=!1)}return s??(s=de.WGS84),{...e,hasM:r,hasZ:i,paths:t,spatialReference:s}}let an=I0=class extends Ps{constructor(e){super(Y6(e)),this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=PM(this);if(!t)return null;const r=new Be(t);return r.spatialReference=e,r}writePaths(e,t){t.paths=N(this.paths)}addPath(e){if(!e)return;const t=this.paths,r=t.length;if(q6(e)){const i=[];for(let s=0,n=e.length;s<n;s++)i[s]=e[s].toArray();t[r]=i}else t[r]=e.slice();return this.notifyChange("paths"),this}clone(){const e=new I0;return e.spatialReference=this.spatialReference,e.paths=N(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.paths[e][t],i=this.hasZ,s=this.hasM;return i&&!s?new ae(r[0],r[1],r[2],void 0,this.spatialReference):s&&!i?new ae(r[0],r[1],void 0,r[2],this.spatialReference):i&&s?new ae(r[0],r[1],r[2],r[3],this.spatialReference):new ae(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(gl(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e].splice(t,0,r),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],r=this.spatialReference,i=t.map(s=>new ae(s,r));return this.notifyChange("paths"),i}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new ae(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),r}setPoint(e,t,r){return this._validateInputs(e,t)?(gl(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e][t]=r,this.notifyChange("paths"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const i=this.paths[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};u([d({readOnly:!0})],an.prototype,"cache",null),u([d({readOnly:!0})],an.prototype,"extent",null),u([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],an.prototype,"paths",void 0),u([pe("paths")],an.prototype,"writePaths",null),an=I0=u([$("esri.geometry.Polyline")],an);const oi=an;an.prototype.toJSON.isDefaultToJSON=!0;const J6=Wt()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),Lee=Wt()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function RM(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function CM(e){return e.points!==void 0}function kM(e){return e.x!==void 0&&e.y!==void 0}function NM(e){return e.paths!==void 0}function qv(e){return e.rings!==void 0}function _l(e){return e==null?null:e instanceof Ps?e:kM(e)?ae.fromJSON(e):NM(e)?oi.fromJSON(e):qv(e)?Bi.fromJSON(e):CM(e)?Vf.fromJSON(e):RM(e)?Be.fromJSON(e):null}function Zv(e){return e?kM(e)?"esriGeometryPoint":NM(e)?"esriGeometryPolyline":qv(e)?"esriGeometryPolygon":RM(e)?"esriGeometryEnvelope":CM(e)?"esriGeometryMultipoint":null:null}const X6={esriGeometryPoint:ae,esriGeometryPolyline:oi,esriGeometryPolygon:Bi,esriGeometryEnvelope:Be,esriGeometryMultipoint:Vf,esriGeometryMultiPatch:Bi};function K6(e){return e&&X6[e]||null}const zf={base:Ps,key:"type",typeMap:{extent:Be,multipoint:Vf,point:ae,polyline:oi,polygon:Bi}};Is(zf);let LM=0;const Yv=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+LM++})}};return t=u([$("esri.core.Identifiable")],t),t},Jv=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:LM++})}};return t=u([$("esri.core.Identifiable.NumericIdentifiable")],t),t};let Pb=class extends Yv(class{}){};Pb=u([$("esri.core.Identifiable")],Pb);async function Q6(e){var i;const t="portalItem"in e?e:{portalItem:e},{fromItem:r}=await j(async()=>{const{fromItem:s}=await import("./portalLayers-mBdXUtG5.js").then(n=>n.p);return{fromItem:s}},__vite__mapDeps([17,18,19,15]),import.meta.url);try{return await r(t)}catch(s){const n=t==null?void 0:t.portalItem,o=(n==null?void 0:n.id)||"unset",a=((i=n==null?void 0:n.portal)==null?void 0:i.url)||Te.portalUrl;throw V.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+a+"', id: '"+o+"')",s),s}}const Rb=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class ta extends Error{}class e8 extends ta{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class t8 extends ta{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class r8 extends ta{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class za extends ta{}class DM extends ta{constructor(t){super(`Invalid unit ${t}`)}}class It extends ta{}class Us extends ta{constructor(){super("Zone is an abstract class")}}const G="numeric",pi="short",gr="long",Gp={year:G,month:G,day:G},FM={year:G,month:pi,day:G},i8={year:G,month:pi,day:G,weekday:pi},UM={year:G,month:gr,day:G},jM={year:G,month:gr,day:G,weekday:gr},GM={hour:G,minute:G},VM={hour:G,minute:G,second:G},zM={hour:G,minute:G,second:G,timeZoneName:pi},BM={hour:G,minute:G,second:G,timeZoneName:gr},HM={hour:G,minute:G,hourCycle:"h23"},WM={hour:G,minute:G,second:G,hourCycle:"h23"},qM={hour:G,minute:G,second:G,hourCycle:"h23",timeZoneName:pi},ZM={hour:G,minute:G,second:G,hourCycle:"h23",timeZoneName:gr},YM={year:G,month:G,day:G,hour:G,minute:G},JM={year:G,month:G,day:G,hour:G,minute:G,second:G},XM={year:G,month:pi,day:G,hour:G,minute:G},KM={year:G,month:pi,day:G,hour:G,minute:G,second:G},s8={year:G,month:pi,day:G,weekday:pi,hour:G,minute:G},QM={year:G,month:gr,day:G,hour:G,minute:G,timeZoneName:pi},ex={year:G,month:gr,day:G,hour:G,minute:G,second:G,timeZoneName:pi},tx={year:G,month:gr,day:G,weekday:gr,hour:G,minute:G,timeZoneName:gr},rx={year:G,month:gr,day:G,weekday:gr,hour:G,minute:G,second:G,timeZoneName:gr};class sh{get type(){throw new Us}get name(){throw new Us}get ianaName(){return this.name}get isUniversal(){throw new Us}offsetName(t,r){throw new Us}formatOffset(t,r){throw new Us}offset(t){throw new Us}equals(t){throw new Us}get isValid(){throw new Us}}let Vm=null;class Bf extends sh{static get instance(){return Vm===null&&(Vm=new Bf),Vm}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return hx(t,r,i)}formatOffset(t,r){return nu(this.offset(t),r)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let Ed={};function n8(e){return Ed[e]||(Ed[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Ed[e]}const o8={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function a8(e,t){const r=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,s,n,o,a,l,h,p]=i;return[o,s,n,a,l,h,p]}function l8(e,t){const r=e.formatToParts(t),i=[];for(let s=0;s<r.length;s++){const{type:n,value:o}=r[s],a=o8[n];n==="era"?i[a]=o:le(a)||(i[a]=parseInt(o,10))}return i}let Ch={};class fi extends sh{static create(t){return Ch[t]||(Ch[t]=new fi(t)),Ch[t]}static resetCache(){Ch={},Ed={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=fi.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return hx(t,r,i,this.name)}formatOffset(t,r){return nu(this.offset(t),r)}offset(t){const r=new Date(t);if(isNaN(r))return NaN;const i=n8(this.name);let[s,n,o,a,l,h,p]=i.formatToParts?l8(i,r):a8(i,r);a==="BC"&&(s=-Math.abs(s)+1);const m=Wf({year:s,month:n,day:o,hour:l===24?0:l,minute:h,second:p,millisecond:0});let y=+r;const v=y%1e3;return y-=v>=0?v:1e3+v,(m-y)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let Cb={};function c8(e,t={}){const r=JSON.stringify([e,t]);let i=Cb[r];return i||(i=new Intl.ListFormat(e,t),Cb[r]=i),i}let O0={};function P0(e,t={}){const r=JSON.stringify([e,t]);let i=O0[r];return i||(i=new Intl.DateTimeFormat(e,t),O0[r]=i),i}let R0={};function u8(e,t={}){const r=JSON.stringify([e,t]);let i=R0[r];return i||(i=new Intl.NumberFormat(e,t),R0[r]=i),i}let C0={};function h8(e,t={}){const{base:r,...i}=t,s=JSON.stringify([e,i]);let n=C0[s];return n||(n=new Intl.RelativeTimeFormat(e,t),C0[s]=n),n}let fc=null;function d8(){return fc||(fc=new Intl.DateTimeFormat().resolvedOptions().locale,fc)}let kb={};function p8(e){let t=kb[e];if(!t){const r=new Intl.Locale(e);t="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,kb[e]=t}return t}function f8(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const r=e.indexOf("-u-");if(r===-1)return[e];{let i,s;try{i=P0(e).resolvedOptions(),s=e}catch{const l=e.substring(0,r);i=P0(l).resolvedOptions(),s=l}const{numberingSystem:n,calendar:o}=i;return[s,n,o]}}function m8(e,t,r){return(r||t)&&(e.includes("-u-")||(e+="-u"),r&&(e+=`-ca-${r}`),t&&(e+=`-nu-${t}`)),e}function y8(e){const t=[];for(let r=1;r<=12;r++){const i=te.utc(2009,r,1);t.push(e(i))}return t}function g8(e){const t=[];for(let r=1;r<=7;r++){const i=te.utc(2016,11,13+r);t.push(e(i))}return t}function kh(e,t,r,i){const s=e.listingMode();return s==="error"?null:s==="en"?r(t):i(t)}function v8(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class _8{constructor(t,r,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:s,floor:n,...o}=i;if(!r||Object.keys(o).length>0){const a={useGrouping:!1,...i};i.padTo>0&&(a.minimumIntegerDigits=i.padTo),this.inf=u8(t,a)}}format(t){if(this.inf){const r=this.floor?Math.floor(t):t;return this.inf.format(r)}else{const r=this.floor?Math.floor(t):t_(t,3);return it(r,this.padTo)}}}class w8{constructor(t,r,i){this.opts=i,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const o=-1*(t.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&fi.create(a).valid?(s=a,this.dt=t):(s="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,s=t.zone.name):(s="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const n={...this.opts};n.timeZone=n.timeZone||s,this.dtf=P0(r,n)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(r=>{if(r.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:i}}else return r}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class b8{constructor(t,r,i){this.opts={style:"long",...i},!r&&cx()&&(this.rtf=h8(t,i))}format(t,r){return this.rtf?this.rtf.format(t,r):B8(r,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,r){return this.rtf?this.rtf.formatToParts(t,r):[]}}const S8={firstDay:1,minimalDays:4,weekend:[6,7]};class xe{static fromOpts(t){return xe.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,r,i,s,n=!1){const o=t||Ke.defaultLocale,a=o||(n?"en-US":d8()),l=r||Ke.defaultNumberingSystem,h=i||Ke.defaultOutputCalendar,p=k0(s)||Ke.defaultWeekSettings;return new xe(a,l,h,p,o)}static resetCache(){fc=null,O0={},R0={},C0={}}static fromObject({locale:t,numberingSystem:r,outputCalendar:i,weekSettings:s}={}){return xe.create(t,r,i,s)}constructor(t,r,i,s,n){const[o,a,l]=f8(t);this.locale=o,this.numberingSystem=r||a||null,this.outputCalendar=i||l||null,this.weekSettings=s,this.intl=m8(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=n,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=v8(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&r?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:xe.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,k0(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,r=!1){return kh(this,t,fx,()=>{const i=r?{month:t,day:"numeric"}:{month:t},s=r?"format":"standalone";return this.monthsCache[s][t]||(this.monthsCache[s][t]=y8(n=>this.extract(n,i,"month"))),this.monthsCache[s][t]})}weekdays(t,r=!1){return kh(this,t,gx,()=>{const i=r?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},s=r?"format":"standalone";return this.weekdaysCache[s][t]||(this.weekdaysCache[s][t]=g8(n=>this.extract(n,i,"weekday"))),this.weekdaysCache[s][t]})}meridiems(){return kh(this,void 0,()=>vx,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[te.utc(2016,11,13,9),te.utc(2016,11,13,19)].map(r=>this.extract(r,t,"dayperiod"))}return this.meridiemCache})}eras(t){return kh(this,t,_x,()=>{const r={era:t};return this.eraCache[t]||(this.eraCache[t]=[te.utc(-40,1,1),te.utc(2017,1,1)].map(i=>this.extract(i,r,"era"))),this.eraCache[t]})}extract(t,r,i){const s=this.dtFormatter(t,r),n=s.formatToParts(),o=n.find(a=>a.type.toLowerCase()===i);return o?o.value:null}numberFormatter(t={}){return new _8(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,r={}){return new w8(t,this.intl,r)}relFormatter(t={}){return new b8(this.intl,this.isEnglish(),t)}listFormatter(t={}){return c8(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:ux()?p8(this.locale):S8}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let zm=null;class Ct extends sh{static get utcInstance(){return zm===null&&(zm=new Ct(0)),zm}static instance(t){return t===0?Ct.utcInstance:new Ct(t)}static parseSpecifier(t){if(t){const r=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new Ct(qf(r[1],r[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${nu(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${nu(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,r){return nu(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class $8 extends sh{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function fn(e,t){if(le(e)||e===null)return t;if(e instanceof sh)return e;if(I8(e)){const r=e.toLowerCase();return r==="default"?t:r==="local"||r==="system"?Bf.instance:r==="utc"||r==="gmt"?Ct.utcInstance:Ct.parseSpecifier(r)||fi.create(e)}else return wn(e)?Ct.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new $8(e)}const Xv={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},Nb={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},T8=Xv.hanidec.replace(/[\[|\]]/g,"").split("");function E8(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);if(e[r].search(Xv.hanidec)!==-1)t+=T8.indexOf(e[r]);else for(const s in Nb){const[n,o]=Nb[s];i>=n&&i<=o&&(t+=i-n)}}return parseInt(t,10)}else return t}let wa={};function M8(){wa={}}function Br({numberingSystem:e},t=""){const r=e||"latn";return wa[r]||(wa[r]={}),wa[r][t]||(wa[r][t]=new RegExp(`${Xv[r]}${t}`)),wa[r][t]}let Lb=()=>Date.now(),Db="system",Fb=null,Ub=null,jb=null,Gb=60,Vb,zb=null;class Ke{static get now(){return Lb}static set now(t){Lb=t}static set defaultZone(t){Db=t}static get defaultZone(){return fn(Db,Bf.instance)}static get defaultLocale(){return Fb}static set defaultLocale(t){Fb=t}static get defaultNumberingSystem(){return Ub}static set defaultNumberingSystem(t){Ub=t}static get defaultOutputCalendar(){return jb}static set defaultOutputCalendar(t){jb=t}static get defaultWeekSettings(){return zb}static set defaultWeekSettings(t){zb=k0(t)}static get twoDigitCutoffYear(){return Gb}static set twoDigitCutoffYear(t){Gb=t%100}static get throwOnInvalid(){return Vb}static set throwOnInvalid(t){Vb=t}static resetCaches(){xe.resetCache(),fi.resetCache(),te.resetCache(),M8()}}class ai{constructor(t,r){this.reason=t,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const ix=[0,31,59,90,120,151,181,212,243,273,304,334],sx=[0,31,60,91,121,152,182,213,244,274,305,335];function Lr(e,t){return new ai("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function Kv(e,t,r){const i=new Date(Date.UTC(e,t-1,r));e<100&&e>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const s=i.getUTCDay();return s===0?7:s}function nx(e,t,r){return r+(nh(e)?sx:ix)[t-1]}function ox(e,t){const r=nh(e)?sx:ix,i=r.findIndex(n=>n<t),s=t-r[i];return{month:i+1,day:s}}function Qv(e,t){return(e-t+7)%7+1}function Vp(e,t=4,r=1){const{year:i,month:s,day:n}=e,o=nx(i,s,n),a=Qv(Kv(i,s,n),r);let l=Math.floor((o-a+14-t)/7),h;return l<1?(h=i-1,l=Au(h,t,r)):l>Au(i,t,r)?(h=i+1,l=1):h=i,{weekYear:h,weekNumber:l,weekday:a,...Zf(e)}}function Bb(e,t=4,r=1){const{weekYear:i,weekNumber:s,weekday:n}=e,o=Qv(Kv(i,1,t),r),a=Qa(i);let l=s*7+n-o-7+t,h;l<1?(h=i-1,l+=Qa(h)):l>a?(h=i+1,l-=Qa(i)):h=i;const{month:p,day:f}=ox(h,l);return{year:h,month:p,day:f,...Zf(e)}}function Bm(e){const{year:t,month:r,day:i}=e,s=nx(t,r,i);return{year:t,ordinal:s,...Zf(e)}}function Hb(e){const{year:t,ordinal:r}=e,{month:i,day:s}=ox(t,r);return{year:t,month:i,day:s,...Zf(e)}}function Wb(e,t){if(!le(e.localWeekday)||!le(e.localWeekNumber)||!le(e.localWeekYear)){if(!le(e.weekday)||!le(e.weekNumber)||!le(e.weekYear))throw new za("Cannot mix locale-based week fields with ISO-based week fields");return le(e.localWeekday)||(e.weekday=e.localWeekday),le(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),le(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function x8(e,t=4,r=1){const i=Hf(e.weekYear),s=Dr(e.weekNumber,1,Au(e.weekYear,t,r)),n=Dr(e.weekday,1,7);return i?s?n?!1:Lr("weekday",e.weekday):Lr("week",e.weekNumber):Lr("weekYear",e.weekYear)}function A8(e){const t=Hf(e.year),r=Dr(e.ordinal,1,Qa(e.year));return t?r?!1:Lr("ordinal",e.ordinal):Lr("year",e.year)}function ax(e){const t=Hf(e.year),r=Dr(e.month,1,12),i=Dr(e.day,1,zp(e.year,e.month));return t?r?i?!1:Lr("day",e.day):Lr("month",e.month):Lr("year",e.year)}function lx(e){const{hour:t,minute:r,second:i,millisecond:s}=e,n=Dr(t,0,23)||t===24&&r===0&&i===0&&s===0,o=Dr(r,0,59),a=Dr(i,0,59),l=Dr(s,0,999);return n?o?a?l?!1:Lr("millisecond",s):Lr("second",i):Lr("minute",r):Lr("hour",t)}function le(e){return typeof e>"u"}function wn(e){return typeof e=="number"}function Hf(e){return typeof e=="number"&&e%1===0}function I8(e){return typeof e=="string"}function O8(e){return Object.prototype.toString.call(e)==="[object Date]"}function cx(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function ux(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function P8(e){return Array.isArray(e)?e:[e]}function qb(e,t,r){if(e.length!==0)return e.reduce((i,s)=>{const n=[t(s),s];return i&&r(i[0],n[0])===i[0]?i:n},null)[1]}function R8(e,t){return t.reduce((r,i)=>(r[i]=e[i],r),{})}function wl(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function k0(e){if(e==null)return null;if(typeof e!="object")throw new It("Week settings must be an object");if(!Dr(e.firstDay,1,7)||!Dr(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(t=>!Dr(t,1,7)))throw new It("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function Dr(e,t,r){return Hf(e)&&e>=t&&e<=r}function C8(e,t){return e-t*Math.floor(e/t)}function it(e,t=2){const r=e<0;let i;return r?i="-"+(""+-e).padStart(t,"0"):i=(""+e).padStart(t,"0"),i}function ln(e){if(!(le(e)||e===null||e===""))return parseInt(e,10)}function zn(e){if(!(le(e)||e===null||e===""))return parseFloat(e)}function e_(e){if(!(le(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function t_(e,t,r=!1){const i=10**t;return(r?Math.trunc:Math.round)(e*i)/i}function nh(e){return e%4===0&&(e%100!==0||e%400===0)}function Qa(e){return nh(e)?366:365}function zp(e,t){const r=C8(t-1,12)+1,i=e+(t-r)/12;return r===2?nh(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function Wf(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function Zb(e,t,r){return-Qv(Kv(e,1,t),r)+t-1}function Au(e,t=4,r=1){const i=Zb(e,t,r),s=Zb(e+1,t,r);return(Qa(e)-i+s)/7}function N0(e){return e>99?e:e>Ke.twoDigitCutoffYear?1900+e:2e3+e}function hx(e,t,r,i=null){const s=new Date(e),n={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(n.timeZone=i);const o={timeZoneName:t,...n},a=new Intl.DateTimeFormat(r,o).formatToParts(s).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function qf(e,t){let r=parseInt(e,10);Number.isNaN(r)&&(r=0);const i=parseInt(t,10)||0,s=r<0||Object.is(r,-0)?-i:i;return r*60+s}function dx(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new It(`Invalid unit value ${e}`);return t}function Bp(e,t){const r={};for(const i in e)if(wl(e,i)){const s=e[i];if(s==null)continue;r[t(i)]=dx(s)}return r}function nu(e,t){const r=Math.trunc(Math.abs(e/60)),i=Math.trunc(Math.abs(e%60)),s=e>=0?"+":"-";switch(t){case"short":return`${s}${it(r,2)}:${it(i,2)}`;case"narrow":return`${s}${r}${i>0?`:${i}`:""}`;case"techie":return`${s}${it(r,2)}${it(i,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function Zf(e){return R8(e,["hour","minute","second","millisecond"])}const k8=["January","February","March","April","May","June","July","August","September","October","November","December"],px=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],N8=["J","F","M","A","M","J","J","A","S","O","N","D"];function fx(e){switch(e){case"narrow":return[...N8];case"short":return[...px];case"long":return[...k8];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const mx=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],yx=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],L8=["M","T","W","T","F","S","S"];function gx(e){switch(e){case"narrow":return[...L8];case"short":return[...yx];case"long":return[...mx];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const vx=["AM","PM"],D8=["Before Christ","Anno Domini"],F8=["BC","AD"],U8=["B","A"];function _x(e){switch(e){case"narrow":return[...U8];case"short":return[...F8];case"long":return[...D8];default:return null}}function j8(e){return vx[e.hour<12?0:1]}function G8(e,t){return gx(t)[e.weekday-1]}function V8(e,t){return fx(t)[e.month-1]}function z8(e,t){return _x(t)[e.year<0?0:1]}function B8(e,t,r="always",i=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},n=["hours","minutes","seconds"].indexOf(e)===-1;if(r==="auto"&&n){const f=e==="days";switch(t){case 1:return f?"tomorrow":`next ${s[e][0]}`;case-1:return f?"yesterday":`last ${s[e][0]}`;case 0:return f?"today":`this ${s[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),l=a===1,h=s[e],p=i?l?h[1]:h[2]||h[1]:l?s[e][0]:e;return o?`${a} ${p} ago`:`in ${a} ${p}`}function Yb(e,t){let r="";for(const i of e)i.literal?r+=i.val:r+=t(i.val);return r}const H8={D:Gp,DD:FM,DDD:UM,DDDD:jM,t:GM,tt:VM,ttt:zM,tttt:BM,T:HM,TT:WM,TTT:qM,TTTT:ZM,f:YM,ff:XM,fff:QM,ffff:tx,F:JM,FF:KM,FFF:ex,FFFF:rx};class Rt{static create(t,r={}){return new Rt(t,r)}static parseFormat(t){let r=null,i="",s=!1;const n=[];for(let o=0;o<t.length;o++){const a=t.charAt(o);a==="'"?(i.length>0&&n.push({literal:s||/^\s+$/.test(i),val:i}),r=null,i="",s=!s):s||a===r?i+=a:(i.length>0&&n.push({literal:/^\s+$/.test(i),val:i}),i=a,r=a)}return i.length>0&&n.push({literal:s||/^\s+$/.test(i),val:i}),n}static macroTokenToFormatOpts(t){return H8[t]}constructor(t,r){this.opts=r,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...r}).format()}dtFormatter(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r})}formatDateTime(t,r){return this.dtFormatter(t,r).format()}formatDateTimeParts(t,r){return this.dtFormatter(t,r).formatToParts()}formatInterval(t,r){return this.dtFormatter(t.start,r).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,r){return this.dtFormatter(t,r).resolvedOptions()}num(t,r=0){if(this.opts.forceSimple)return it(t,r);const i={...this.opts};return r>0&&(i.padTo=r),this.loc.numberFormatter(i).format(t)}formatDateTimeFromString(t,r){const i=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",n=(y,v)=>this.loc.extract(t,y,v),o=y=>t.isOffsetFixed&&t.offset===0&&y.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,y.format):"",a=()=>i?j8(t):n({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(y,v)=>i?V8(t,y):n(v?{month:y}:{month:y,day:"numeric"},"month"),h=(y,v)=>i?G8(t,y):n(v?{weekday:y}:{weekday:y,month:"long",day:"numeric"},"weekday"),p=y=>{const v=Rt.macroTokenToFormatOpts(y);return v?this.formatWithSystemDefault(t,v):y},f=y=>i?z8(t,y):n({era:y},"era"),m=y=>{switch(y){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return s?n({day:"numeric"},"day"):this.num(t.day);case"dd":return s?n({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return h("short",!0);case"cccc":return h("long",!0);case"ccccc":return h("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return h("short",!1);case"EEEE":return h("long",!1);case"EEEEE":return h("narrow",!1);case"L":return s?n({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return s?n({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return s?n({month:"numeric"},"month"):this.num(t.month);case"MM":return s?n({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return s?n({year:"numeric"},"year"):this.num(t.year);case"yy":return s?n({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return s?n({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return s?n({year:"numeric"},"year"):this.num(t.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return p(y)}};return Yb(Rt.parseFormat(r),m)}formatDurationFromString(t,r){const i=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=l=>h=>{const p=i(h);return p?this.num(l.get(p),h.length):h},n=Rt.parseFormat(r),o=n.reduce((l,{literal:h,val:p})=>h?l:l.concat(p),[]),a=t.shiftTo(...o.map(i).filter(l=>l));return Yb(n,s(a))}}const wx=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Ol(...e){const t=e.reduce((r,i)=>r+i.source,"");return RegExp(`^${t}$`)}function Pl(...e){return t=>e.reduce(([r,i,s],n)=>{const[o,a,l]=n(t,s);return[{...r,...o},a||i,l]},[{},null,1]).slice(0,2)}function Rl(e,...t){if(e==null)return[null,null];for(const[r,i]of t){const s=r.exec(e);if(s)return i(s)}return[null,null]}function bx(...e){return(t,r)=>{const i={};let s;for(s=0;s<e.length;s++)i[e[s]]=ln(t[r+s]);return[i,null,r+s]}}const Sx=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,W8=`(?:${Sx.source}?(?:\\[(${wx.source})\\])?)?`,r_=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,$x=RegExp(`${r_.source}${W8}`),i_=RegExp(`(?:T${$x.source})?`),q8=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Z8=/(\d{4})-?W(\d\d)(?:-?(\d))?/,Y8=/(\d{4})-?(\d{3})/,J8=bx("weekYear","weekNumber","weekDay"),X8=bx("year","ordinal"),K8=/(\d{4})-(\d\d)-(\d\d)/,Tx=RegExp(`${r_.source} ?(?:${Sx.source}|(${wx.source}))?`),Q8=RegExp(`(?: ${Tx.source})?`);function el(e,t,r){const i=e[t];return le(i)?r:ln(i)}function eF(e,t){return[{year:el(e,t),month:el(e,t+1,1),day:el(e,t+2,1)},null,t+3]}function Cl(e,t){return[{hours:el(e,t,0),minutes:el(e,t+1,0),seconds:el(e,t+2,0),milliseconds:e_(e[t+3])},null,t+4]}function oh(e,t){const r=!e[t]&&!e[t+1],i=qf(e[t+1],e[t+2]),s=r?null:Ct.instance(i);return[{},s,t+3]}function ah(e,t){const r=e[t]?fi.create(e[t]):null;return[{},r,t+1]}const tF=RegExp(`^T?${r_.source}$`),rF=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function iF(e){const[t,r,i,s,n,o,a,l,h]=e,p=t[0]==="-",f=l&&l[0]==="-",m=(y,v=!1)=>y!==void 0&&(v||y&&p)?-y:y;return[{years:m(zn(r)),months:m(zn(i)),weeks:m(zn(s)),days:m(zn(n)),hours:m(zn(o)),minutes:m(zn(a)),seconds:m(zn(l),l==="-0"),milliseconds:m(e_(h),f)}]}const sF={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function s_(e,t,r,i,s,n,o){const a={year:t.length===2?N0(ln(t)):ln(t),month:px.indexOf(r)+1,day:ln(i),hour:ln(s),minute:ln(n)};return o&&(a.second=ln(o)),e&&(a.weekday=e.length>3?mx.indexOf(e)+1:yx.indexOf(e)+1),a}const nF=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function oF(e){const[,t,r,i,s,n,o,a,l,h,p,f]=e,m=s_(t,s,i,r,n,o,a);let y;return l?y=sF[l]:h?y=0:y=qf(p,f),[m,new Ct(y)]}function aF(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const lF=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,cF=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,uF=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Jb(e){const[,t,r,i,s,n,o,a]=e;return[s_(t,s,i,r,n,o,a),Ct.utcInstance]}function hF(e){const[,t,r,i,s,n,o,a]=e;return[s_(t,a,r,i,s,n,o),Ct.utcInstance]}const dF=Ol(q8,i_),pF=Ol(Z8,i_),fF=Ol(Y8,i_),mF=Ol($x),Ex=Pl(eF,Cl,oh,ah),yF=Pl(J8,Cl,oh,ah),gF=Pl(X8,Cl,oh,ah),vF=Pl(Cl,oh,ah);function _F(e){return Rl(e,[dF,Ex],[pF,yF],[fF,gF],[mF,vF])}function wF(e){return Rl(aF(e),[nF,oF])}function bF(e){return Rl(e,[lF,Jb],[cF,Jb],[uF,hF])}function SF(e){return Rl(e,[rF,iF])}const $F=Pl(Cl);function TF(e){return Rl(e,[tF,$F])}const EF=Ol(K8,Q8),MF=Ol(Tx),xF=Pl(Cl,oh,ah);function AF(e){return Rl(e,[EF,Ex],[MF,xF])}const Xb="Invalid Duration",Mx={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},IF={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Mx},Sr=146097/400,la=146097/4800,OF={years:{quarters:4,months:12,weeks:Sr/7,days:Sr,hours:Sr*24,minutes:Sr*24*60,seconds:Sr*24*60*60,milliseconds:Sr*24*60*60*1e3},quarters:{months:3,weeks:Sr/28,days:Sr/4,hours:Sr*24/4,minutes:Sr*24*60/4,seconds:Sr*24*60*60/4,milliseconds:Sr*24*60*60*1e3/4},months:{weeks:la/7,days:la,hours:la*24,minutes:la*24*60,seconds:la*24*60*60,milliseconds:la*24*60*60*1e3},...Mx},Po=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],PF=Po.slice(0).reverse();function js(e,t,r=!1){const i={values:r?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new ge(i)}function xx(e,t){let r=t.milliseconds??0;for(const i of PF.slice(1))t[i]&&(r+=t[i]*e[i].milliseconds);return r}function Kb(e,t){const r=xx(e,t)<0?-1:1;Po.reduceRight((i,s)=>{if(le(t[s]))return i;if(i){const n=t[i]*r,o=e[s][i],a=Math.floor(n/o);t[s]+=a*r,t[i]-=a*o*r}return s},null),Po.reduce((i,s)=>{if(le(t[s]))return i;if(i){const n=t[i]%1;t[i]-=n,t[s]+=n*e[i][s]}return s},null)}function RF(e){const t={};for(const[r,i]of Object.entries(e))i!==0&&(t[r]=i);return t}class ge{constructor(t){const r=t.conversionAccuracy==="longterm"||!1;let i=r?OF:IF;t.matrix&&(i=t.matrix),this.values=t.values,this.loc=t.loc||xe.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(t,r){return ge.fromObject({milliseconds:t},r)}static fromObject(t,r={}){if(t==null||typeof t!="object")throw new It(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new ge({values:Bp(t,ge.normalizeUnit),loc:xe.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(t){if(wn(t))return ge.fromMillis(t);if(ge.isDuration(t))return t;if(typeof t=="object")return ge.fromObject(t);throw new It(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,r){const[i]=SF(t);return i?ge.fromObject(i,r):ge.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,r){const[i]=TF(t);return i?ge.fromObject(i,r):ge.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,r=null){if(!t)throw new It("need to specify a reason the Duration is invalid");const i=t instanceof ai?t:new ai(t,r);if(Ke.throwOnInvalid)throw new r8(i);return new ge({invalid:i})}static normalizeUnit(t){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!r)throw new DM(t);return r}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,r={}){const i={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?Rt.create(this.loc,i).formatDurationFromString(this,t):Xb}toHuman(t={}){if(!this.isValid)return Xb;const r=Po.map(i=>{const s=this.values[i];return le(s)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:i.slice(0,-1)}).format(s)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=t_(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const r=this.toMillis();return r<0||r>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},te.fromMillis(r,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?xx(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const r=ge.fromDurationLike(t),i={};for(const s of Po)(wl(r.values,s)||wl(this.values,s))&&(i[s]=r.get(s)+this.get(s));return js(this,{values:i},!0)}minus(t){if(!this.isValid)return this;const r=ge.fromDurationLike(t);return this.plus(r.negate())}mapUnits(t){if(!this.isValid)return this;const r={};for(const i of Object.keys(this.values))r[i]=dx(t(this.values[i],i));return js(this,{values:r},!0)}get(t){return this[ge.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const r={...this.values,...Bp(t,ge.normalizeUnit)};return js(this,{values:r})}reconfigure({locale:t,numberingSystem:r,conversionAccuracy:i,matrix:s}={}){const o={loc:this.loc.clone({locale:t,numberingSystem:r}),matrix:s,conversionAccuracy:i};return js(this,o)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return Kb(this.matrix,t),js(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=RF(this.normalize().shiftToAll().toObject());return js(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>ge.normalizeUnit(o));const r={},i={},s=this.toObject();let n;for(const o of Po)if(t.indexOf(o)>=0){n=o;let a=0;for(const h in i)a+=this.matrix[h][o]*i[h],i[h]=0;wn(s[o])&&(a+=s[o]);const l=Math.trunc(a);r[o]=l,i[o]=(a*1e3-l*1e3)/1e3}else wn(s[o])&&(i[o]=s[o]);for(const o in i)i[o]!==0&&(r[n]+=o===n?i[o]:i[o]/this.matrix[n][o]);return Kb(this.matrix,r),js(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=this.values[r]===0?0:-this.values[r];return js(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function r(i,s){return i===void 0||i===0?s===void 0||s===0:i===s}for(const i of Po)if(!r(this.values[i],t.values[i]))return!1;return!0}}const ca="Invalid Interval";function CF(e,t){return!e||!e.isValid?Xe.invalid("missing or invalid start"):!t||!t.isValid?Xe.invalid("missing or invalid end"):t<e?Xe.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class Xe{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,r=null){if(!t)throw new It("need to specify a reason the Interval is invalid");const i=t instanceof ai?t:new ai(t,r);if(Ke.throwOnInvalid)throw new t8(i);return new Xe({invalid:i})}static fromDateTimes(t,r){const i=Gl(t),s=Gl(r),n=CF(i,s);return n??new Xe({start:i,end:s})}static after(t,r){const i=ge.fromDurationLike(r),s=Gl(t);return Xe.fromDateTimes(s,s.plus(i))}static before(t,r){const i=ge.fromDurationLike(r),s=Gl(t);return Xe.fromDateTimes(s.minus(i),s)}static fromISO(t,r){const[i,s]=(t||"").split("/",2);if(i&&s){let n,o;try{n=te.fromISO(i,r),o=n.isValid}catch{o=!1}let a,l;try{a=te.fromISO(s,r),l=a.isValid}catch{l=!1}if(o&&l)return Xe.fromDateTimes(n,a);if(o){const h=ge.fromISO(s,r);if(h.isValid)return Xe.after(n,h)}else if(l){const h=ge.fromISO(i,r);if(h.isValid)return Xe.before(a,h)}}return Xe.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",r){if(!this.isValid)return NaN;const i=this.start.startOf(t,r);let s;return r!=null&&r.useLocaleWeeks?s=this.end.reconfigure({locale:i.locale}):s=this.end,s=s.startOf(t,r),Math.floor(s.diff(i,t).get(t))+(s.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:r}={}){return this.isValid?Xe.fromDateTimes(t||this.s,r||this.e):this}splitAt(...t){if(!this.isValid)return[];const r=t.map(Gl).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),i=[];let{s}=this,n=0;for(;s<this.e;){const o=r[n]||this.e,a=+o>+this.e?this.e:o;i.push(Xe.fromDateTimes(s,a)),s=a,n+=1}return i}splitBy(t){const r=ge.fromDurationLike(t);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:i}=this,s=1,n;const o=[];for(;i<this.e;){const a=this.start.plus(r.mapUnits(l=>l*s));n=+a>+this.e?this.e:a,o.push(Xe.fromDateTimes(i,n)),i=n,s+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const r=this.s>t.s?this.s:t.s,i=this.e<t.e?this.e:t.e;return r>=i?null:Xe.fromDateTimes(r,i)}union(t){if(!this.isValid)return this;const r=this.s<t.s?this.s:t.s,i=this.e>t.e?this.e:t.e;return Xe.fromDateTimes(r,i)}static merge(t){const[r,i]=t.sort((s,n)=>s.s-n.s).reduce(([s,n],o)=>n?n.overlaps(o)||n.abutsStart(o)?[s,n.union(o)]:[s.concat([n]),o]:[s,o],[[],null]);return i&&r.push(i),r}static xor(t){let r=null,i=0;const s=[],n=t.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...n),a=o.sort((l,h)=>l.time-h.time);for(const l of a)i+=l.type==="s"?1:-1,i===1?r=l.time:(r&&+r!=+l.time&&s.push(Xe.fromDateTimes(r,l.time)),r=null);return Xe.merge(s)}difference(...t){return Xe.xor([this].concat(t)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:ca}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=Gp,r={}){return this.isValid?Rt.create(this.s.loc.clone(r),t).formatInterval(this):ca}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:ca}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:ca}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:ca}toFormat(t,{separator:r=" – "}={}){return this.isValid?`${this.s.toFormat(t)}${r}${this.e.toFormat(t)}`:ca}toDuration(t,r){return this.isValid?this.e.diff(this.s,t,r):ge.invalid(this.invalidReason)}mapEndpoints(t){return Xe.fromDateTimes(t(this.s),t(this.e))}}class Nh{static hasDST(t=Ke.defaultZone){const r=te.now().setZone(t).set({month:12});return!t.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(t){return fi.isValidZone(t)}static normalizeZone(t){return fn(t,Ke.defaultZone)}static getStartOfWeek({locale:t=null,locObj:r=null}={}){return(r||xe.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:r=null}={}){return(r||xe.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:r=null}={}){return(r||xe.create(t)).getWeekendDays().slice()}static months(t="long",{locale:r=null,numberingSystem:i=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||xe.create(r,i,n)).months(t)}static monthsFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||xe.create(r,i,n)).months(t,!0)}static weekdays(t="long",{locale:r=null,numberingSystem:i=null,locObj:s=null}={}){return(s||xe.create(r,i,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:s=null}={}){return(s||xe.create(r,i,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return xe.create(t).meridiems()}static eras(t="short",{locale:r=null}={}){return xe.create(r,null,"gregory").eras(t)}static features(){return{relative:cx(),localeWeek:ux()}}}function Qb(e,t){const r=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=r(t)-r(e);return Math.floor(ge.fromMillis(i).as("days"))}function kF(e,t,r){const i=[["years",(l,h)=>h.year-l.year],["quarters",(l,h)=>h.quarter-l.quarter+(h.year-l.year)*4],["months",(l,h)=>h.month-l.month+(h.year-l.year)*12],["weeks",(l,h)=>{const p=Qb(l,h);return(p-p%7)/7}],["days",Qb]],s={},n=e;let o,a;for(const[l,h]of i)r.indexOf(l)>=0&&(o=l,s[l]=h(e,t),a=n.plus(s),a>t?(s[l]--,e=n.plus(s),e>t&&(a=e,s[l]--,e=n.plus(s))):e=a);return[e,s,a,o]}function NF(e,t,r,i){let[s,n,o,a]=kF(e,t,r);const l=t-s,h=r.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);h.length===0&&(o<t&&(o=s.plus({[a]:1})),o!==s&&(n[a]=(n[a]||0)+l/(o-s)));const p=ge.fromObject(n,i);return h.length>0?ge.fromMillis(l,i).shiftTo(...h).plus(p):p}const LF="missing Intl.DateTimeFormat.formatToParts support";function Se(e,t=r=>r){return{regex:e,deser:([r])=>t(E8(r))}}const DF=" ",Ax=`[ ${DF}]`,Ix=new RegExp(Ax,"g");function FF(e){return e.replace(/\./g,"\\.?").replace(Ix,Ax)}function e2(e){return e.replace(/\./g,"").replace(Ix," ").toLowerCase()}function Hr(e,t){return e===null?null:{regex:RegExp(e.map(FF).join("|")),deser:([r])=>e.findIndex(i=>e2(r)===e2(i))+t}}function t2(e,t){return{regex:e,deser:([,r,i])=>qf(r,i),groups:t}}function Lh(e){return{regex:e,deser:([t])=>t}}function UF(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function jF(e,t){const r=Br(t),i=Br(t,"{2}"),s=Br(t,"{3}"),n=Br(t,"{4}"),o=Br(t,"{6}"),a=Br(t,"{1,2}"),l=Br(t,"{1,3}"),h=Br(t,"{1,6}"),p=Br(t,"{1,9}"),f=Br(t,"{2,4}"),m=Br(t,"{4,6}"),y=w=>({regex:RegExp(UF(w.val)),deser:([S])=>S,literal:!0}),_=(w=>{if(e.literal)return y(w);switch(w.val){case"G":return Hr(t.eras("short"),0);case"GG":return Hr(t.eras("long"),0);case"y":return Se(h);case"yy":return Se(f,N0);case"yyyy":return Se(n);case"yyyyy":return Se(m);case"yyyyyy":return Se(o);case"M":return Se(a);case"MM":return Se(i);case"MMM":return Hr(t.months("short",!0),1);case"MMMM":return Hr(t.months("long",!0),1);case"L":return Se(a);case"LL":return Se(i);case"LLL":return Hr(t.months("short",!1),1);case"LLLL":return Hr(t.months("long",!1),1);case"d":return Se(a);case"dd":return Se(i);case"o":return Se(l);case"ooo":return Se(s);case"HH":return Se(i);case"H":return Se(a);case"hh":return Se(i);case"h":return Se(a);case"mm":return Se(i);case"m":return Se(a);case"q":return Se(a);case"qq":return Se(i);case"s":return Se(a);case"ss":return Se(i);case"S":return Se(l);case"SSS":return Se(s);case"u":return Lh(p);case"uu":return Lh(a);case"uuu":return Se(r);case"a":return Hr(t.meridiems(),0);case"kkkk":return Se(n);case"kk":return Se(f,N0);case"W":return Se(a);case"WW":return Se(i);case"E":case"c":return Se(r);case"EEE":return Hr(t.weekdays("short",!1),1);case"EEEE":return Hr(t.weekdays("long",!1),1);case"ccc":return Hr(t.weekdays("short",!0),1);case"cccc":return Hr(t.weekdays("long",!0),1);case"Z":case"ZZ":return t2(new RegExp(`([+-]${a.source})(?::(${i.source}))?`),2);case"ZZZ":return t2(new RegExp(`([+-]${a.source})(${i.source})?`),2);case"z":return Lh(/[a-z_+-/]{1,256}?/i);case" ":return Lh(/[^\S\n\r]/);default:return y(w)}})(e)||{invalidReason:LF};return _.token=e,_}const GF={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function VF(e,t,r){const{type:i,value:s}=e;if(i==="literal"){const l=/^\s+$/.test(s);return{literal:!l,val:l?" ":s}}const n=t[i];let o=i;i==="hour"&&(t.hour12!=null?o=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?o="hour12":o="hour24":o=r.hour12?"hour12":"hour24");let a=GF[o];if(typeof a=="object"&&(a=a[n]),a)return{literal:!1,val:a}}function zF(e){return[`^${e.map(r=>r.regex).reduce((r,i)=>`${r}(${i.source})`,"")}$`,e]}function BF(e,t,r){const i=e.match(t);if(i){const s={};let n=1;for(const o in r)if(wl(r,o)){const a=r[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(s[a.token.val[0]]=a.deser(i.slice(n,n+l))),n+=l}return[i,s]}else return[i,{}]}function HF(e){const t=n=>{switch(n){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,i;return le(e.z)||(r=fi.create(e.z)),le(e.Z)||(r||(r=new Ct(e.Z)),i=e.Z),le(e.q)||(e.M=(e.q-1)*3+1),le(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),le(e.u)||(e.S=e_(e.u)),[Object.keys(e).reduce((n,o)=>{const a=t(o);return a&&(n[a]=e[o]),n},{}),r,i]}let Hm=null;function WF(){return Hm||(Hm=te.fromMillis(1555555555555)),Hm}function qF(e,t){if(e.literal)return e;const r=Rt.macroTokenToFormatOpts(e.val),i=Cx(r,t);return i==null||i.includes(void 0)?e:i}function Ox(e,t){return Array.prototype.concat(...e.map(r=>qF(r,t)))}class Px{constructor(t,r){if(this.locale=t,this.format=r,this.tokens=Ox(Rt.parseFormat(r),t),this.units=this.tokens.map(i=>jF(i,t)),this.disqualifyingUnit=this.units.find(i=>i.invalidReason),!this.disqualifyingUnit){const[i,s]=zF(this.units);this.regex=RegExp(i,"i"),this.handlers=s}}explainFromTokens(t){if(this.isValid){const[r,i]=BF(t,this.regex,this.handlers),[s,n,o]=i?HF(i):[null,null,void 0];if(wl(i,"a")&&wl(i,"H"))throw new za("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:this.tokens,regex:this.regex,rawMatches:r,matches:i,result:s,zone:n,specificOffset:o}}else return{input:t,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function Rx(e,t,r){return new Px(e,r).explainFromTokens(t)}function ZF(e,t,r){const{result:i,zone:s,specificOffset:n,invalidReason:o}=Rx(e,t,r);return[i,s,n,o]}function Cx(e,t){if(!e)return null;const i=Rt.create(t,e).dtFormatter(WF()),s=i.formatToParts(),n=i.resolvedOptions();return s.map(o=>VF(o,e,n))}const Wm="Invalid DateTime",r2=864e13;function mc(e){return new ai("unsupported zone",`the zone "${e.name}" is not supported`)}function qm(e){return e.weekData===null&&(e.weekData=Vp(e.c)),e.weekData}function Zm(e){return e.localWeekData===null&&(e.localWeekData=Vp(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function Bn(e,t){const r={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new te({...r,...t,old:r})}function kx(e,t,r){let i=e-t*60*1e3;const s=r.offset(i);if(t===s)return[i,t];i-=(s-t)*60*1e3;const n=r.offset(i);return s===n?[i,s]:[e-Math.min(s,n)*60*1e3,Math.max(s,n)]}function Dh(e,t){e+=t*60*1e3;const r=new Date(e);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function Md(e,t,r){return kx(Wf(e),t,r)}function i2(e,t){const r=e.o,i=e.c.year+Math.trunc(t.years),s=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,n={...e.c,year:i,month:s,day:Math.min(e.c.day,zp(i,s))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=ge.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=Wf(n);let[l,h]=kx(a,r,e.zone);return o!==0&&(l+=o,h=e.zone.offset(l)),{ts:l,o:h}}function ua(e,t,r,i,s,n){const{setZone:o,zone:a}=r;if(e&&Object.keys(e).length!==0||t){const l=t||a,h=te.fromObject(e,{...r,zone:l,specificOffset:n});return o?h:h.setZone(a)}else return te.invalid(new ai("unparsable",`the input "${s}" can't be parsed as ${i}`))}function Fh(e,t,r=!0){return e.isValid?Rt.create(xe.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(e,t):null}function Ym(e,t){const r=e.c.year>9999||e.c.year<0;let i="";return r&&e.c.year>=0&&(i+="+"),i+=it(e.c.year,r?6:4),t?(i+="-",i+=it(e.c.month),i+="-",i+=it(e.c.day)):(i+=it(e.c.month),i+=it(e.c.day)),i}function s2(e,t,r,i,s,n){let o=it(e.c.hour);return t?(o+=":",o+=it(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!r)&&(o+=":")):o+=it(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!r)&&(o+=it(e.c.second),(e.c.millisecond!==0||!i)&&(o+=".",o+=it(e.c.millisecond,3))),s&&(e.isOffsetFixed&&e.offset===0&&!n?o+="Z":e.o<0?(o+="-",o+=it(Math.trunc(-e.o/60)),o+=":",o+=it(Math.trunc(-e.o%60))):(o+="+",o+=it(Math.trunc(e.o/60)),o+=":",o+=it(Math.trunc(e.o%60)))),n&&(o+="["+e.zone.ianaName+"]"),o}const Nx={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},YF={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},JF={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Lx=["year","month","day","hour","minute","second","millisecond"],XF=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],KF=["year","ordinal","hour","minute","second","millisecond"];function QF(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new DM(e);return t}function n2(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return QF(e)}}function e9(e){return Ad[e]||(xd===void 0&&(xd=Ke.now()),Ad[e]=e.offset(xd)),Ad[e]}function o2(e,t){const r=fn(t.zone,Ke.defaultZone);if(!r.isValid)return te.invalid(mc(r));const i=xe.fromObject(t);let s,n;if(le(e.year))s=Ke.now();else{for(const l of Lx)le(e[l])&&(e[l]=Nx[l]);const o=ax(e)||lx(e);if(o)return te.invalid(o);const a=e9(r);[s,n]=Md(e,a,r)}return new te({ts:s,zone:r,loc:i,o:n})}function a2(e,t,r){const i=le(r.round)?!0:r.round,s=(o,a)=>(o=t_(o,i||r.calendary?0:2,!0),t.loc.clone(r).relFormatter(r).format(o,a)),n=o=>r.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(r.unit)return s(n(r.unit),r.unit);for(const o of r.units){const a=n(o);if(Math.abs(a)>=1)return s(a,o)}return s(e>t?-0:0,r.units[r.units.length-1])}function l2(e){let t={},r;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],r=Array.from(e).slice(0,e.length-1)):r=Array.from(e),[t,r]}let xd,Ad={};class te{constructor(t){const r=t.zone||Ke.defaultZone;let i=t.invalid||(Number.isNaN(t.ts)?new ai("invalid input"):null)||(r.isValid?null:mc(r));this.ts=le(t.ts)?Ke.now():t.ts;let s=null,n=null;if(!i)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(r))[s,n]=[t.old.c,t.old.o];else{const a=wn(t.o)&&!t.old?t.o:r.offset(this.ts);s=Dh(this.ts,a),i=Number.isNaN(s.year)?new ai("invalid input"):null,s=i?null:s,n=i?null:a}this._zone=r,this.loc=t.loc||xe.create(),this.invalid=i,this.weekData=null,this.localWeekData=null,this.c=s,this.o=n,this.isLuxonDateTime=!0}static now(){return new te({})}static local(){const[t,r]=l2(arguments),[i,s,n,o,a,l,h]=r;return o2({year:i,month:s,day:n,hour:o,minute:a,second:l,millisecond:h},t)}static utc(){const[t,r]=l2(arguments),[i,s,n,o,a,l,h]=r;return t.zone=Ct.utcInstance,o2({year:i,month:s,day:n,hour:o,minute:a,second:l,millisecond:h},t)}static fromJSDate(t,r={}){const i=O8(t)?t.valueOf():NaN;if(Number.isNaN(i))return te.invalid("invalid input");const s=fn(r.zone,Ke.defaultZone);return s.isValid?new te({ts:i,zone:s,loc:xe.fromObject(r)}):te.invalid(mc(s))}static fromMillis(t,r={}){if(wn(t))return t<-r2||t>r2?te.invalid("Timestamp out of range"):new te({ts:t,zone:fn(r.zone,Ke.defaultZone),loc:xe.fromObject(r)});throw new It(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,r={}){if(wn(t))return new te({ts:t*1e3,zone:fn(r.zone,Ke.defaultZone),loc:xe.fromObject(r)});throw new It("fromSeconds requires a numerical input")}static fromObject(t,r={}){t=t||{};const i=fn(r.zone,Ke.defaultZone);if(!i.isValid)return te.invalid(mc(i));const s=xe.fromObject(r),n=Bp(t,n2),{minDaysInFirstWeek:o,startOfWeek:a}=Wb(n,s),l=Ke.now(),h=le(r.specificOffset)?i.offset(l):r.specificOffset,p=!le(n.ordinal),f=!le(n.year),m=!le(n.month)||!le(n.day),y=f||m,v=n.weekYear||n.weekNumber;if((y||p)&&v)throw new za("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(m&&p)throw new za("Can't mix ordinal dates with month/day");const _=v||n.weekday&&!y;let w,S,E=Dh(l,h);_?(w=XF,S=YF,E=Vp(E,o,a)):p?(w=KF,S=JF,E=Bm(E)):(w=Lx,S=Nx);let x=!1;for(const q of w){const ee=n[q];le(ee)?x?n[q]=S[q]:n[q]=E[q]:x=!0}const A=_?x8(n,o,a):p?A8(n):ax(n),P=A||lx(n);if(P)return te.invalid(P);const C=_?Bb(n,o,a):p?Hb(n):n,[U,F]=Md(C,h,i),z=new te({ts:U,zone:i,o:F,loc:s});return n.weekday&&y&&t.weekday!==z.weekday?te.invalid("mismatched weekday",`you can't specify both a weekday of ${n.weekday} and a date of ${z.toISO()}`):z.isValid?z:te.invalid(z.invalid)}static fromISO(t,r={}){const[i,s]=_F(t);return ua(i,s,r,"ISO 8601",t)}static fromRFC2822(t,r={}){const[i,s]=wF(t);return ua(i,s,r,"RFC 2822",t)}static fromHTTP(t,r={}){const[i,s]=bF(t);return ua(i,s,r,"HTTP",r)}static fromFormat(t,r,i={}){if(le(t)||le(r))throw new It("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:n=null}=i,o=xe.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0}),[a,l,h,p]=ZF(o,t,r);return p?te.invalid(p):ua(a,l,i,`format ${r}`,t,h)}static fromString(t,r,i={}){return te.fromFormat(t,r,i)}static fromSQL(t,r={}){const[i,s]=AF(t);return ua(i,s,r,"SQL",t)}static invalid(t,r=null){if(!t)throw new It("need to specify a reason the DateTime is invalid");const i=t instanceof ai?t:new ai(t,r);if(Ke.throwOnInvalid)throw new e8(i);return new te({invalid:i})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,r={}){const i=Cx(t,xe.fromObject(r));return i?i.map(s=>s?s.val:null).join(""):null}static expandFormat(t,r={}){return Ox(Rt.parseFormat(t),xe.fromObject(r)).map(s=>s.val).join("")}static resetCache(){xd=void 0,Ad={}}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?qm(this).weekYear:NaN}get weekNumber(){return this.isValid?qm(this).weekNumber:NaN}get weekday(){return this.isValid?qm(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Zm(this).weekday:NaN}get localWeekNumber(){return this.isValid?Zm(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Zm(this).weekYear:NaN}get ordinal(){return this.isValid?Bm(this.c).ordinal:NaN}get monthShort(){return this.isValid?Nh.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Nh.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Nh.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Nh.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,r=6e4,i=Wf(this.c),s=this.zone.offset(i-t),n=this.zone.offset(i+t),o=this.zone.offset(i-s*r),a=this.zone.offset(i-n*r);if(o===a)return[this];const l=i-o*r,h=i-a*r,p=Dh(l,o),f=Dh(h,a);return p.hour===f.hour&&p.minute===f.minute&&p.second===f.second&&p.millisecond===f.millisecond?[Bn(this,{ts:l}),Bn(this,{ts:h})]:[this]}get isInLeapYear(){return nh(this.year)}get daysInMonth(){return zp(this.year,this.month)}get daysInYear(){return this.isValid?Qa(this.year):NaN}get weeksInWeekYear(){return this.isValid?Au(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Au(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:r,numberingSystem:i,calendar:s}=Rt.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:r,numberingSystem:i,outputCalendar:s}}toUTC(t=0,r={}){return this.setZone(Ct.instance(t),r)}toLocal(){return this.setZone(Ke.defaultZone)}setZone(t,{keepLocalTime:r=!1,keepCalendarTime:i=!1}={}){if(t=fn(t,Ke.defaultZone),t.equals(this.zone))return this;if(t.isValid){let s=this.ts;if(r||i){const n=t.offset(this.ts),o=this.toObject();[s]=Md(o,n,t)}return Bn(this,{ts:s,zone:t})}else return te.invalid(mc(t))}reconfigure({locale:t,numberingSystem:r,outputCalendar:i}={}){const s=this.loc.clone({locale:t,numberingSystem:r,outputCalendar:i});return Bn(this,{loc:s})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const r=Bp(t,n2),{minDaysInFirstWeek:i,startOfWeek:s}=Wb(r,this.loc),n=!le(r.weekYear)||!le(r.weekNumber)||!le(r.weekday),o=!le(r.ordinal),a=!le(r.year),l=!le(r.month)||!le(r.day),h=a||l,p=r.weekYear||r.weekNumber;if((h||o)&&p)throw new za("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new za("Can't mix ordinal dates with month/day");let f;n?f=Bb({...Vp(this.c,i,s),...r},i,s):le(r.ordinal)?(f={...this.toObject(),...r},le(r.day)&&(f.day=Math.min(zp(f.year,f.month),f.day))):f=Hb({...Bm(this.c),...r});const[m,y]=Md(f,this.o,this.zone);return Bn(this,{ts:m,o:y})}plus(t){if(!this.isValid)return this;const r=ge.fromDurationLike(t);return Bn(this,i2(this,r))}minus(t){if(!this.isValid)return this;const r=ge.fromDurationLike(t).negate();return Bn(this,i2(this,r))}startOf(t,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;const i={},s=ge.normalizeUnit(t);switch(s){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(s==="weeks")if(r){const n=this.loc.getStartOfWeek(),{weekday:o}=this;o<n&&(i.weekNumber=this.weekNumber-1),i.weekday=n}else i.weekday=1;if(s==="quarters"){const n=Math.ceil(this.month/3);i.month=(n-1)*3+1}return this.set(i)}endOf(t,r){return this.isValid?this.plus({[t]:1}).startOf(t,r).minus(1):this}toFormat(t,r={}){return this.isValid?Rt.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,t):Wm}toLocaleString(t=Gp,r={}){return this.isValid?Rt.create(this.loc.clone(r),t).formatDateTime(this):Wm}toLocaleParts(t={}){return this.isValid?Rt.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:r=!1,suppressMilliseconds:i=!1,includeOffset:s=!0,extendedZone:n=!1}={}){if(!this.isValid)return null;const o=t==="extended";let a=Ym(this,o);return a+="T",a+=s2(this,o,r,i,s,n),a}toISODate({format:t="extended"}={}){return this.isValid?Ym(this,t==="extended"):null}toISOWeekDate(){return Fh(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:r=!1,includeOffset:i=!0,includePrefix:s=!1,extendedZone:n=!1,format:o="extended"}={}){return this.isValid?(s?"T":"")+s2(this,o==="extended",r,t,i,n):null}toRFC2822(){return Fh(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Fh(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Ym(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:r=!1,includeOffsetSpace:i=!0}={}){let s="HH:mm:ss.SSS";return(r||t)&&(i&&(s+=" "),r?s+="z":t&&(s+="ZZ")),Fh(this,s,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():Wm}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const r={...this.c};return t.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,r="milliseconds",i={}){if(!this.isValid||!t.isValid)return ge.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...i},n=P8(r).map(ge.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,l=o?t:this,h=NF(a,l,n,s);return o?h.negate():h}diffNow(t="milliseconds",r={}){return this.diff(te.now(),t,r)}until(t){return this.isValid?Xe.fromDateTimes(this,t):this}hasSame(t,r,i){if(!this.isValid)return!1;const s=t.valueOf(),n=this.setZone(t.zone,{keepLocalTime:!0});return n.startOf(r,i)<=s&&s<=n.endOf(r,i)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const r=t.base||te.fromObject({},{zone:this.zone}),i=t.padding?this<r?-t.padding:t.padding:0;let s=["years","months","days","hours","minutes","seconds"],n=t.unit;return Array.isArray(t.unit)&&(s=t.unit,n=void 0),a2(r,this.plus(i),{...t,numeric:"always",units:s,unit:n})}toRelativeCalendar(t={}){return this.isValid?a2(t.base||te.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(te.isDateTime))throw new It("min requires all arguments be DateTimes");return qb(t,r=>r.valueOf(),Math.min)}static max(...t){if(!t.every(te.isDateTime))throw new It("max requires all arguments be DateTimes");return qb(t,r=>r.valueOf(),Math.max)}static fromFormatExplain(t,r,i={}){const{locale:s=null,numberingSystem:n=null}=i,o=xe.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});return Rx(o,t,r)}static fromStringExplain(t,r,i={}){return te.fromFormatExplain(t,r,i)}static buildFormatParser(t,r={}){const{locale:i=null,numberingSystem:s=null}=r,n=xe.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return new Px(n,t)}static fromFormatParser(t,r,i={}){if(le(t)||le(r))throw new It("fromFormatParser requires an input string and a format parser");const{locale:s=null,numberingSystem:n=null}=i,o=xe.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});if(!o.equals(r.locale))throw new It(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${r.locale}`);const{result:a,zone:l,specificOffset:h,invalidReason:p}=r.explainFromTokens(t);return p?te.invalid(p):ua(a,l,i,`format ${r.format}`,t,h)}static get DATE_SHORT(){return Gp}static get DATE_MED(){return FM}static get DATE_MED_WITH_WEEKDAY(){return i8}static get DATE_FULL(){return UM}static get DATE_HUGE(){return jM}static get TIME_SIMPLE(){return GM}static get TIME_WITH_SECONDS(){return VM}static get TIME_WITH_SHORT_OFFSET(){return zM}static get TIME_WITH_LONG_OFFSET(){return BM}static get TIME_24_SIMPLE(){return HM}static get TIME_24_WITH_SECONDS(){return WM}static get TIME_24_WITH_SHORT_OFFSET(){return qM}static get TIME_24_WITH_LONG_OFFSET(){return ZM}static get DATETIME_SHORT(){return YM}static get DATETIME_SHORT_WITH_SECONDS(){return JM}static get DATETIME_MED(){return XM}static get DATETIME_MED_WITH_SECONDS(){return KM}static get DATETIME_MED_WITH_WEEKDAY(){return s8}static get DATETIME_FULL(){return QM}static get DATETIME_FULL_WITH_SECONDS(){return ex}static get DATETIME_HUGE(){return tx}static get DATETIME_HUGE_WITH_SECONDS(){return rx}}function Gl(e){if(te.isDateTime(e))return e;if(e&&e.valueOf&&wn(e.valueOf()))return te.fromJSDate(e);if(e&&typeof e=="object")return te.fromObject(e);throw new It(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const Hi="system",n_="unknown",Iu="UTC",t9=Intl.DateTimeFormat().resolvedOptions().timeZone,r9="shortOffset";function i9(e){return"timeZoneIANA"in e}function s9(e){return e.startsWith("UTC")}function Fee(e,t=!1){return{json:{read:{source:e,reader:(r,i)=>i[e]?n9(i[e]):null},write:!!t&&{allowNull:!0,writer(r,i){i[e]=r?o9(r):null}}}}}function n9(e,t=Hi){return e?i9(e)?e.timeZoneIANA:a9(e,t):t}function o9(e){return{timeZoneIANA:e}}function a9(e,t=Hi){if(!e||!Rb.has(e.timeZone))return t;const r=Rb.get(e.timeZone);return s9(e.timeZone)||e.respectsDaylightSaving?r:l9(r)}function l9(e){const t=te.local().setZone(e),r=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return r===0?"Etc/UTC":`Etc/GMT${Ct.instance(-r).formatOffset(0,"narrow")}`}function Uee(e,t,r,i,s){if(t&&s==="date")return{timeZone:Iu,timeZoneName:void 0};const n=i.timeStyle||i.hour,o=r===n_;return{timeZone:o?s==="timestamp-offset"?void 0:e??Iu:r,timeZoneName:o&&n?r9:void 0}}function c9(e){const t=new Set(["etc/utc","etc/gmt","gmt"]),r=new Set(Intl.supportedValuesOf("timeZone").map(i=>i.toLowerCase()));return e===Hi||e===n_||t.has(e.toLowerCase())||r.has(e.toLowerCase())}const u9={year:void 0,month:void 0,day:void 0,weekday:void 0},h9={hour:void 0,minute:void 0,second:void 0},Dx={timeZone:Iu},gi={year:"numeric",month:"numeric",day:"numeric"},Vl={year:"numeric",month:"long",day:"numeric"},zl={year:"numeric",month:"short",day:"numeric"},Bl={year:"numeric",month:"long",weekday:"long",day:"numeric"},cn={hour:"numeric",minute:"numeric"},eo={...cn,second:"numeric"},Fx={hourCycle:"h23"},Hl={...cn,...Fx},Wl={...eo,...Fx},Ux={"short-date":gi,"short-date-short-time":{...gi,...cn},"short-date-short-time-24":{...gi,...Hl},"short-date-long-time":{...gi,...eo},"short-date-long-time-24":{...gi,...Wl},"short-date-le":gi,"short-date-le-short-time":{...gi,...cn},"short-date-le-short-time-24":{...gi,...Hl},"short-date-le-long-time":{...gi,...eo},"short-date-le-long-time-24":{...gi,...Wl},"long-month-day-year":Vl,"long-month-day-year-short-time":{...Vl,...cn},"long-month-day-year-short-time-24":{...Vl,...Hl},"long-month-day-year-long-time":{...Vl,...eo},"long-month-day-year-long-time-24":{...Vl,...Wl},"day-short-month-year":zl,"day-short-month-year-short-time":{...zl,...cn},"day-short-month-year-short-time-24":{...zl,...Hl},"day-short-month-year-long-time":{...zl,...eo},"day-short-month-year-long-time-24":{...zl,...Wl},"long-date":Bl,"long-date-short-time":{...Bl,...cn},"long-date-short-time-24":{...Bl,...Hl},"long-date-long-time":{...Bl,...eo},"long-date-long-time-24":{...Bl,...Wl},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":cn,"long-time":eo},d9=Wt()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),jx={ar:"ar-u-nu-latn-ca-gregory"};let L0=new WeakMap;const Yf=Ux["short-date-short-time"];function p9(e){let t=L0.get(e);if(!t){const r=rr(),i=jx[r]||r,s=a_(e.timeZone??Hi),n={...e,timeZone:s};t=new Intl.DateTimeFormat(i,n),L0.set(e,t)}return t}function jee(e){return Ux[e]}function o_(e,t=Yf){return p9(t).format(e)}function Gee(e,t=Yf){return o_(new Date(e),{...t,...Dx,...h9})}function Vee(e,t=Yf){return o_(new Date(`1970-01-01T${e}Z`),{...t,...Dx,...u9})}function zee(e,t=Yf){if(t.timeZone)return o_(new Date(e),t);const r=te.fromISO(e,{setZone:!0}),i=rr(),s=jx[i]??i,n=r.offset===0?Iu:t.timeZone,o={...t,timeZone:n};return r.toLocaleString(o,{locale:s})}function a_(e){switch(e){case Hi:return t9;case n_:return Iu;default:return e}}Cv(()=>{L0=new WeakMap});const c2={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function Jm(e,t,r,i=Hi){const s=new fi(a_(i)),n=te.fromJSDate(e,{zone:s}),o=r==="decades"||r==="centuries"?"year":Gx(r);return r==="decades"&&(t*=10),r==="centuries"&&(t*=100),n.plus({[o]:t}).toJSDate()}function Bee(e,t,r="milliseconds"){const i=e.getTime(),s=f9(t,r,"milliseconds");return new Date(i+s)}function u2(e,t,r=Hi){const i=new fi(a_(r)),s=te.fromJSDate(e,{zone:i});if(t==="decades"||t==="centuries"){const o=s.startOf("year"),{year:a}=o,l=a-a%(t==="decades"?10:100);return o.set({year:l}).toJSDate()}const n=Gx(t);return s.startOf(n).toJSDate()}function f9(e,t,r){return e===0?0:e*c2[t]/c2[r]}function Gx(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var Er;let ur=Er=class extends W{static get allTime(){return h2}static get empty(){return m9}static fromArray(e){return new Er({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=(e==null?void 0:e.getTime())??null}get isAllTime(){return this.equals(Er.allTime)}get isEmpty(){return this.equals(Er.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=(e==null?void 0:e.getTime())??null}clone(){return new Er({end:this.end,start:this.start})}equals(e){var n,o,a,l;if(!e)return!1;const t=((n=this.start)==null?void 0:n.getTime())??this.start,r=((o=this.end)==null?void 0:o.getTime())??this.end,i=((a=e.start)==null?void 0:a.getTime())??e.start,s=((l=e.end)==null?void 0:l.getTime())??e.end;return t===i&&r===s}expandTo(e,t=Hi){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=u2(r,e,t));let i=this.end;if(i){const s=u2(i,e,t);i=i.getTime()===s.getTime()?s:Jm(s,1,e,t)}return new Er({start:r,end:i})}intersection(e){var a,l,h,p;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return Er.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=((a=this.start)==null?void 0:a.getTime())??-1/0,r=((l=this.end)==null?void 0:l.getTime())??1/0,i=((h=e.start)==null?void 0:h.getTime())??-1/0,s=((p=e.end)==null?void 0:p.getTime())??1/0;let n,o;return i>=t&&i<=r?n=i:t>=i&&t<=s&&(n=t),r>=i&&r<=s?o=r:s>=t&&s<=r&&(o=s),n==null||o==null||isNaN(n)||isNaN(o)?Er.empty:new Er({start:n===-1/0?null:new Date(n),end:o===1/0?null:new Date(o)})}offset(e,t,r=Hi){if(this.isEmpty||this.isAllTime)return this.clone();const i=new Er,{start:s,end:n}=this;return s!=null&&(i.start=Jm(s,e,t,r)),n!=null&&(i.end=Jm(n,e,t,r)),i}toArray(){var e,t;return this.isEmpty?[void 0,void 0]:[((e=this.start)==null?void 0:e.getTime())??null,((t=this.end)==null?void 0:t.getTime())??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return h2.clone();const t=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new Er({start:t,end:r})}};u([d({type:Date,json:{write:{allowNull:!0}}})],ur.prototype,"end",void 0),u([ve("end")],ur.prototype,"readEnd",null),u([pe("end")],ur.prototype,"writeEnd",null),u([d({readOnly:!0,json:{read:!1}})],ur.prototype,"isAllTime",null),u([d({readOnly:!0,json:{read:!1}})],ur.prototype,"isEmpty",null),u([d({type:Date,json:{write:{allowNull:!0}}})],ur.prototype,"start",void 0),u([ve("start")],ur.prototype,"readStart",null),u([pe("start")],ur.prototype,"writeStart",null),ur=Er=u([$("esri.time.TimeExtent")],ur);const l_=ur,h2=new ur,m9=new ur({start:void 0,end:void 0});let y9=0,Ye=class extends Ln.EventedMixin(Yv(En)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Be(-180,-90,180,90,de.WGS84),this.id=Date.now().toString(16)+"-layer-"+y9++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=de.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(t){const r=typeof t=="string"?{url:t}:t;return(await j(async()=>{const{fromUrl:i}=await import("./arcgisLayers-DEOHuHE_.js");return{fromUrl:i}},__vite__mapDeps([21,18,19]),import.meta.url)).fromUrl(r)}static fromPortalItem(t){return Q6(t)}initialize(){this.when().catch(t=>{vr(t)||V.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}destroy(){const t=this.parent;if(t){const r=this;"layers"in t&&t.layers.includes(r)?t.layers.remove(r):"tables"in t&&t.tables.includes(r)?t.tables.remove(r):"baseLayers"in t&&t.baseLayers.includes(r)?t.baseLayers.remove(r):"referenceLayers"in t&&t.referenceLayers.includes(r)&&t.referenceLayers.remove(r),this._set("parent",null)}}get effectiveVisible(){let t=this.visible;const r=this.parent;return t&&r&&"effectiveVisible"in r&&t&&(t=r.effectiveVisible),t}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return Ht(this.url)}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t)return(await st(t,{query:{f:"json"},responseType:"json"})).data;throw new k("layer:no-attribution-data","Layer does not have attribution data")}};u([d({type:String})],Ye.prototype,"attributionDataUrl",void 0),u([d({readOnly:!0})],Ye.prototype,"effectiveVisible",null),u([d({type:Be})],Ye.prototype,"fullExtent",void 0),u([d({readOnly:!0})],Ye.prototype,"hasAttributionData",null),u([d({type:String,clonable:!1})],Ye.prototype,"id",void 0),u([d({type:Boolean,nonNullable:!0})],Ye.prototype,"legendEnabled",void 0),u([d({type:["show","hide","hide-children"]})],Ye.prototype,"listMode",void 0),u([d({type:Number,range:{min:0,max:1},nonNullable:!0})],Ye.prototype,"opacity",void 0),u([d({clonable:!1})],Ye.prototype,"parent",void 0),u([d({readOnly:!0})],Ye.prototype,"parsedUrl",null),u([d({type:Boolean,readOnly:!0})],Ye.prototype,"persistenceEnabled",void 0),u([d({type:Boolean})],Ye.prototype,"popupEnabled",void 0),u([d({type:Boolean})],Ye.prototype,"attributionVisible",void 0),u([d({type:de})],Ye.prototype,"spatialReference",void 0),u([d({type:String})],Ye.prototype,"title",void 0),u([d({readOnly:!0,json:{read:!1}})],Ye.prototype,"type",void 0),u([d()],Ye.prototype,"url",void 0),u([d({type:l_})],Ye.prototype,"visibilityTimeExtent",void 0),u([d({type:Boolean,nonNullable:!0})],Ye.prototype,"visible",void 0),Ye=u([$("esri.layers.Layer")],Ye);const Vx=Ye;function D0(e,t,r){let i,s;if(e)for(let n=0,o=e.length;n<o;n++){if(i=e.at(n),(i==null?void 0:i[t])===r)return i;if((i==null?void 0:i.type)==="group"&&(s=D0(i.layers,t,r),s))return s}}const g9=e=>{let t=class extends e{constructor(...r){super(...r),this.layers=new K;const i=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},s=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||V.getLogger(this).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},n=o=>{o.parent=null,this.layerRemoved(o)};this.addHandles([this.layers.on("before-add",o=>{if(o.item===this)return o.preventDefault(),void V.getLogger(this).error("#add()","Cannot add layer to itself.");i(o.item)}),this.layers.on("after-add",o=>s(o.item)),this.layers.on("after-remove",o=>n(o.item))])}destroy(){const r=this.layers.toArray();for(const i of r)i.destroy();this.layers.destroy()}set layers(r){this._set("layers",Tn(r,this._get("layers")))}add(r,i){const s=this.layers;if(i=s.getNextIndex(i),r instanceof Vx){const n=r;n.parent===this?this.reorder(n,i):s.add(n,i)}else Zi(r)?r.then(n=>{this.destroyed||this.add(n,i)}):V.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(r,i){const s=this.layers;let n=s.getNextIndex(i);r.slice().forEach(o=>{o.parent!==this?(s.add(o,n),n+=1):this.reorder(o,n)})}findLayerById(r){return D0(this.layers,"id",r)}findLayerByUid(r){return D0(this.layers,"uid",r)}remove(r){return this.layers.remove(r)}removeMany(r){return this.layers.removeMany(r)}removeAll(){return this.layers.removeAll()}reorder(r,i){return this.layers.reorder(r,i)}layerAdded(r){}layerRemoved(r){}};return u([d()],t.prototype,"layers",null),t=u([$("esri.support.LayersMixin")],t),t};function F0(e,t,r){if(e)for(let i=0,s=e.length;i<s;i++){const n=e.at(i);if(n[t]===r)return n;if((n==null?void 0:n.type)==="group"){const o=F0(n.tables,t,r);if(o)return o}}}const v9=e=>{let t=class extends e{constructor(...r){super(...r),this.tables=new K,this.addHandles([this.tables.on("after-add",i=>{const s=i.item;s.parent&&s.parent!==this&&"tables"in s.parent&&s.parent.tables.remove(s),s.parent=this,s.type!=="feature"&&V.getLogger(this).error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",i=>{i.item.parent=null})])}destroy(){const r=this.tables.toArray();for(const i of r)i.destroy();this.tables.destroy()}set tables(r){this._set("tables",Tn(r,this._get("tables")))}findTableById(r){return F0(this.tables,"id",r)}findTableByUid(r){return F0(this.tables,"uid",r)}};return u([d()],t.prototype,"tables",null),t=u([$("esri.support.TablesMixin")],t),t};let Yr=class extends v9(g9(Ln.EventedMixin(Y))){constructor(t){super(t),this.allLayers=new xu({getCollections:()=>{var r,i,s;return[(r=this.basemap)==null?void 0:r.baseLayers,(i=this.ground)==null?void 0:i.layers,this.layers,(s=this.basemap)==null?void 0:s.referenceLayers]},getChildrenFunction:r=>"layers"in r?r.layers:null}),this.allTables=y6(this),this.basemap=null,this.editableLayers=new xu({getCollections:()=>[this.allLayers],itemFilterFunction:J4}),this.ground=new Up,this._basemapCache=p6()}destroy(){f6(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=Ve(this.basemap),Ve(this.ground),this._set("ground",null)}castBasemap(t){return m6(t,this._basemapCache)}castGround(t){return g6(t)??this._get("ground")}findLayerById(t){return this.allLayers.find(r=>r.id===t)}findTableById(t){return this.allTables.find(r=>r.id===t)}};u([d({readOnly:!0,dependsOn:[]})],Yr.prototype,"allLayers",void 0),u([d({readOnly:!0})],Yr.prototype,"allTables",void 0),u([d({type:iu,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Yr.prototype,"basemap",void 0),u([ct("basemap")],Yr.prototype,"castBasemap",null),u([d({readOnly:!0})],Yr.prototype,"editableLayers",void 0),u([d({type:Up,nonNullable:!0})],Yr.prototype,"ground",void 0),u([ct("ground")],Yr.prototype,"castGround",null),u([d()],Yr.prototype,"undoRedo",void 0),Yr=u([$("esri.Map")],Yr);const zx=Yr,Gr=e=>{let t=class extends e{clone(){var l;const r=$n(this);GT(r,"unable to clone instance of non-accessor class");const i=r.metadata,s=r.store,n={},o=new Map;for(const h in i){const p=i[h],f=s==null?void 0:s.originOf(h),m=p.clonable;if(p.readOnly||m===!1||f!==me.USER&&f!==me.DEFAULTS&&f!==me.WEB_MAP&&f!==me.WEB_SCENE)continue;const y=this[h];let v=null;v=typeof m=="function"?m(y):m==="reference"?y:Ny(y),y!=null&&v==null||(f===me.DEFAULTS?o.set(h,v):n[h]=v)}const a=new(Object.getPrototypeOf(this)).constructor(n);if(o.size){const h=(l=$n(a))==null?void 0:l.store;if(h)for(const[p,f]of o)h.set(p,f,me.DEFAULTS)}return a}};return t=u([$("esri.core.Clonable")],t),t};let U0=class extends Gr(Y){};U0=u([$("esri.core.Clonable")],U0);let to=class extends U0{constructor(t){super(t),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(t){return t!=null&&this.row===t.row&&this.rows===t.rows&&this.column===t.column&&this.columns===t.columns}};u([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],to.prototype,"row",void 0),u([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],to.prototype,"column",void 0),u([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],to.prototype,"rows",void 0),u([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],to.prototype,"columns",void 0),to=u([$("esri.CameraLayout")],to);const Bx=to;let _9=class{constructor(t,r){this.min=t,this.max=r,this.range=r-t}normalize(t,r=0,i=!1){return d2(this.range,this.min,this.max,t,r,i)}clamp(t,r=0){return di(t-r,this.min,this.max)+r}monotonic(t,r,i){return t<r?r:r+j0(this.range,t-r,i)}minimalMonotonic(t,r,i){return d2(this.range,t,t+this.range,r,i)}center(t,r,i){return r=this.monotonic(t,r,i),this.normalize((t+r)/2,i)}diff(t,r,i){return this.monotonic(t,r,i)-t}shortestSignedDiff(t,r){t=this.normalize(t);const i=(r=this.normalize(r))-t,s=r<t?this.minimalMonotonic(t,r)-t:r-this.minimalMonotonic(r,t);return Math.abs(i)<Math.abs(s)?i:s}contains(t,r,i){return r=this.minimalMonotonic(t,r),(i=this.minimalMonotonic(t,i))>t&&i<r}};function d2(e,t,r,i,s=0,n=!1){return(i-=s)<t?i+=j0(e,t-i):i>r&&(i-=j0(e,i-r)),n&&i===r&&(i=t),i+s}function j0(e,t,r=0){return Math.ceil((t-r)/e)*e+r}const w9=new _9(0,360);let bi=class extends Gr(W){constructor(...t){super(...t),this.position=new ae([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new Bx}normalizeCtorArgs(t,r,i,s){if(t&&typeof t=="object"&&("x"in t||Array.isArray(t))){const n={position:t};return r!=null&&(n.heading=r),i!=null&&(n.tilt=i),s!=null&&(n.fov=s),n}return t}writePosition(t,r,i,s){const n=t.clone();n.x=pr(t.x||0),n.y=pr(t.y||0),n.z=t.hasZ?pr(t.z||0):t.z,r[i]=n.write({},s)}readPosition(t,r){const i=new ae;return i.read(t,r),i.x=pr(i.x||0),i.y=pr(i.y||0),i.z=i.hasZ?pr(i.z||0):i.z,i}equals(t){return t!=null&&this.tilt===t.tilt&&this.heading===t.heading&&this.fov===t.fov&&this.position.equals(t.position)&&this.layout.equals(t.layout)}};u([d({type:ae,json:{write:{isRequired:!0}}})],bi.prototype,"position",void 0),u([pe("position")],bi.prototype,"writePosition",null),u([ve("position")],bi.prototype,"readPosition",null),u([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),ct(e=>w9.normalize(pr(e)))],bi.prototype,"heading",void 0),u([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),ct(e=>di(pr(e),-180,180))],bi.prototype,"tilt",void 0),u([d({type:Number,nonNullable:!0,json:{default:55,write:!0}}),ct(e=>di(pr(e,55),1,170))],bi.prototype,"fov",void 0),u([d({type:Bx,nonNullable:!0,json:{read:!1,write:!1}})],bi.prototype,"layout",void 0),bi=u([$("esri.Camera")],bi);const b9=bi;var G0;let Hs=G0=class extends W{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new G0({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};u([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Xm}}}}})],Hs.prototype,"rotation",void 0),u([ct("rotation")],Hs.prototype,"castRotation",null),u([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Xm}}}}})],Hs.prototype,"scale",void 0),u([d({types:zf,json:{read:_l,write:!0,origins:{"web-scene":{read:_l,write:{overridePolicy:Xm}}}}})],Hs.prototype,"targetGeometry",void 0),u([d({type:b9,json:{write:!0}})],Hs.prototype,"camera",void 0),Hs=G0=u([$("esri.Viewpoint")],Hs);const li=Hs;function Xm(){return{enabled:!this.camera}}let Hp=class{constructor(t=r=>r.values().next().value){this._peeker=t,this._observable=new eh,this._items=new Set}get length(){return J(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let t;for(t of this._items);return t}peek(){if(this.length!==0)return this._peeker(this._items)}push(t){this.contains(t)||(this._items.add(t),this._observable.notify())}contains(t){return J(this._observable),this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),this._observable.notify(),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),this._observable.notify(),t}remove(t){this.contains(t)&&(this._items.delete(t),this._observable.notify())}filter(t){const r=this.length;return this._items.forEach(i=>{t(i)||this._items.delete(i)}),r!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){J(this._observable),yield*this._items}};const Hx=new FinalizationRegistry(e=>{e.close()});function S9(e,t){Hx.register(e,t,t)}function $9(e){Hx.unregister(e)}function Wx(e,t){return new Proxy({},{get:(r,i,s)=>(...n)=>{let o,a;const l=n[n.length-1];return T9(l)&&(o=l.signal,a=l.transferList,n.pop()),e.apply(t?`${t}.${i.toString()}`:i.toString(),n,{transferList:a,signal:o})}})}function T9(e){return typeof e=="object"&&!Array.isArray(e)&&e!=null&&("signal"in e||"transferList"in e||Object.keys(e).length===0)}const E9={statsWorker:()=>j(()=>import("./statsWorker-BxPlzQyV.js"),__vite__mapDeps([22,23,24,25,26,27,28,29,30]),import.meta.url),geometryEngineWorker:()=>j(()=>import("./geometryEngineWorker-BiqU-FdE.js"),__vite__mapDeps([31,32,33,3,34]),import.meta.url),CSVSourceWorker:()=>j(()=>import("./CSVSourceWorker-Bk3iR8qy.js"),__vite__mapDeps([35,36,34,37,38,39,40,41,42,43,44,45,46,10,47,48,49,50,24,23,25,26,27,28,29,30,51,52,53,54,55]),import.meta.url),EdgeProcessingWorker:()=>j(()=>import("./EdgeProcessingWorker-Bo8B3OpA.js"),__vite__mapDeps([56,57,58,26,59,60,27,61,62,63,64,65,66]),import.meta.url),ElevationSamplerWorker:()=>j(()=>import("./ElevationSamplerWorker-B5kOkSEw.js"),__vite__mapDeps([67,42,68,69,70,71,72,73,74,75,76,58,26,77]),import.meta.url),FeatureServiceSnappingSourceWorker:()=>j(()=>import("./FeatureServiceSnappingSourceWorker-FtUyxiTu.js"),__vite__mapDeps([78,38,39,37,40,41,42,43,44,34,45,46,10,47,48,49,50,24,23,25,26,27,28,29,30,51,79,80,81,82,9]),import.meta.url),GeoJSONSourceWorker:()=>j(()=>import("./GeoJSONSourceWorker-BTBQmWAF.js"),__vite__mapDeps([83,39,37,40,38,41,42,43,44,34,45,46,10,47,48,49,50,24,23,25,26,27,28,29,30,51,84,36,53,54,55,85]),import.meta.url),LercWorker:()=>j(()=>import("./LercWorker-Cnb8bf1N.js"),[],import.meta.url),MemorySourceWorker:()=>j(()=>import("./MemorySourceWorker-rSyVxR9G.js"),__vite__mapDeps([86,39,37,40,87,38,41,42,43,44,34,45,46,10,47,48,49,50,24,23,25,26,27,28,29,30,51,53,54,55,85,36]),import.meta.url),PBFDecoderWorker:()=>j(()=>import("./PBFDecoderWorker-DURL5EdV.js"),__vite__mapDeps([88,39,37,40,79,80]),import.meta.url),FeaturePipelineWorker:()=>j(()=>import("./FeaturePipelineWorker-Bd8DC2ij.js"),__vite__mapDeps([89,90,91,92,93,94,95,66,48,49,96,97,37,98,99,100,101,55,102,60,26,27,43,39,40,44,34,103,51,104,105,106,107,108,109,45,46,10,47,50,24,23,25,28,29,30,81,79,80,82,110,84,36,53,54,85,111,112]),import.meta.url),PointCloudWorker:()=>j(()=>import("./PointCloudWorker-DL5W3l01.js"),__vite__mapDeps([113,114,70,115,26,116,117,118,119,64,120,71,27,72,73,121]),import.meta.url),RasterWorker:()=>j(()=>import("./RasterWorker-D6ecAU5L.js"),__vite__mapDeps([122,123,124,3,125,26,27,126,127,128]),import.meta.url),SceneLayerSnappingSourceWorker:()=>j(()=>import("./SceneLayerSnappingSourceWorker-ClMiaWF8.js"),__vite__mapDeps([129,130,131,26,27,70,121,71,115,132,60,61,62,63,57,58,59,64,65,66]),import.meta.url),SceneLayerWorker:()=>j(()=>import("./SceneLayerWorker-B_sO5P6r.js"),__vite__mapDeps([133,68,76,27,131,26,70,121,71,115,134,135,74,119,64,136,137,138,102,120,114,72,73]),import.meta.url),WFSSourceWorker:()=>j(()=>import("./WFSSourceWorker-DsdU_RWi.js"),__vite__mapDeps([139,39,37,40,38,41,42,43,44,34,45,46,10,47,48,49,50,24,23,25,26,27,28,29,30,51,84,36,85,140,141]),import.meta.url),WorkerTileHandler:()=>j(()=>import("./WorkerTileHandler-Delf4Osj.js"),__vite__mapDeps([142,143,98,100,144,145,93,80,106,146,147,66,125,26,27,107,97]),import.meta.url),Lyr3DWorker:()=>j(()=>import("./Lyr3DWorker-zck_4KB9.js"),[],import.meta.url),Feature3DPipelineWorker:()=>j(()=>import("./HUDMaterial.glsl-B09z2H0q.js").then(e=>e.F),__vite__mapDeps([148,46,39,37,40,10,47,48,49,43,44,34,50,24,23,25,26,27,28,29,30,51,42,81,79,80,82,63,149,150,151,60,57,58,59,137,138,64,102,152,153,131,70,121,71,115,130,154,120,114,72,73,155,65,66,156,132,157,95,158,136,135,74,68,116,159]),import.meta.url)},qx="worker:port-closed";var gt;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(gt||(gt={}));let M9=0;function Zx(){return M9++}function x9(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function Ou(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function c_(e,t,r,i){if(t.type===gt.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==gt.INVOKE&&t.type!==gt.RESPONSE)return void e.postMessage(t);let s;if(x9(r)?(s=p2(r.transferList),t.data=r.result):(s=p2(i),t.data=r),s){if(I("ff")){for(const n of s)if("byteLength"in n&&n.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case gt.INVOKE:throw o;case gt.RESPONSE:return void c_(e,{type:gt.RESPONSE,jobId:t.jobId,error:Ou(o)})}}}e.postMessage(t,s)}else e.postMessage(t)}function Pu(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function p2(e){if(!(e!=null&&e.length))return null;if(I("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(r=>!A9(r));return t.length?t:null}function A9(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="ArrayBuffer"}async function Kee(e){try{return await e}catch(t){const r=(t==null?void 0:t.name)===qx;if(!(vr(t)||r))throw t;return}}const{CLOSE:f2,ABORT:m2,INVOKE:y2,RESPONSE:ql,OPEN_PORT:g2,ON:I9}=gt,O9=2;let P9=class{constructor(t){this._invoke=t,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(t){t.type===gt.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},Pn=class ba{static connect(t,r){const i=new MessageChannel;let s;s=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const n=new ba(i.port1,{channel:i,client:s,schedule:r});return typeof s=="object"&&"remoteClient"in s&&(s.remoteClient=n),ba.clients.set(n,s),i.port2}static loadWorker(t){const r=E9[t];return r?r():Promise.resolve(null)}constructor(t,r,i){this._port=t,this._jobQueue=i,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new P9(s=>this._onInvokeMessage(s)),this._client=r.client,this._onMessage=this._onMessage.bind(this),this._channel=r.channel,this._schedule=r.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:f2}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,r,i){return this.apply(t,[r],i)}apply(t,r,i){const s=i==null?void 0:i.signal,n=i==null?void 0:i.transferList;if(!this._port)return Promise.reject(new k(qx,`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:r}));const o=Zx();return new Promise((a,l)=>{if(hi(s))return this._processWork(),void l(je());const h=Fr(s,()=>{const f=this._outJobs.get(o);f&&(this._outJobs.delete(o),this._processWork(),Ue(f.abortHandle),this._post({type:m2,jobId:o}),l(je()))}),p={resolve:a,reject:l,abortHandle:h,debugInfo:t};this._outJobs.set(o,p),this._post({type:y2,jobId:o,methodName:t,abortable:s!=null},r,n)})}createInvokeProxy(t){return Wx(this,t)}on(t,r){const i=new MessageChannel;function s(n){r(n.data)}return this._port.postMessage({type:gt.ON,eventType:t,port:i.port2},[i.port2]),i.port1.addEventListener("message",s),i.port1.start(),_e(()=>{i.port1.postMessage({type:gt.CLOSE}),i.port1.close(),i.port1.removeEventListener("message",s)})}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:g2,port:t.port2}),t.port1}_processWork(){var o;if(this._outJobs.size>=O9)return;const t=(o=this._jobQueue)==null?void 0:o.pop();if(!t)return;const{methodName:r,data:i,invokeOptions:s,resolver:n}=t;this.apply(r,i,s).then(a=>n.resolve(a)).catch(a=>n.reject(a))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{Ue(t.abortHandle),t.reject(je(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(t){this._schedule!=null?this._schedule(()=>this._processMessage(t,!0)):this._processMessage(t,!1)}_processMessage(t,r){const i=Pu(t);if(i)switch(i.type){case ql:this._onResponseMessage(i);break;case y2:r?this._onInvokeMessage(i):this._invokeQueue.push(i);break;case m2:this._onAbortMessage(i);break;case f2:this._onCloseMessage();break;case g2:this._onOpenPortMessage(i);break;case I9:this._onOnMessage(i)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,s=r.get(i);this._invokeQueue.push(t),s&&(s.controller&&s.controller.abort(),r.delete(i))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&ba.clients.get(this)===t&&t.destroy(),ba.clients.delete(this),t!=null&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:r,jobId:i,data:s=[],abortable:n}=t,o=n?new AbortController:null,a=this._inJobs;let l,h=this._client,p=h[r];try{if(!p&&r&&r.includes(".")){const f=r.split(".");for(let m=0;m<f.length-1;m++)h=h[f[m]],p=h[f[m+1]]}if(typeof p!="function")throw new TypeError(`${r} is not a function`);s.push({client:this,signal:o?o.signal:null}),l=p.apply(h,s)}catch(f){return void this._post({type:ql,jobId:i,error:Ou(f)})}Zi(l)?(a.set(i,{controller:o,promise:l}),l.then(f=>{a.has(i)&&(a.delete(i),this._post({type:ql,jobId:i},f))},f=>{a.has(i)&&(a.delete(i),vr(f)||this._post({type:ql,jobId:i,error:Ou(f||{message:`Error encountered at method ${r}`})}))})):this._post({type:ql,jobId:i},l)}_onOpenPortMessage(t){new ba(t.port,{client:this._client})}_onOnMessage(t){const{port:r}=t,i=this._client.on(t.eventType,n=>{r.postMessage(n)}),s=Ju(t.port,"message",n=>{const o=Pu(n);(o==null?void 0:o.type)===gt.CLOSE&&(s.remove(),i.remove(),r.close())})}_onResponseMessage(t){const{jobId:r,error:i,data:s}=t,n=this._outJobs;if(!n.has(r))return;const o=n.get(r);n.delete(r),this._processWork(),Ue(o.abortHandle),i?o.reject(k.fromJSON(JSON.parse(i))):o.resolve(s)}_post(t,r,i){return c_(this._port,t,r,i)}};Pn.kernelInfo={buildDate:VE,fullVersion:bv,revision:zE},Pn.clients=new Map;let R9=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new Hp}destroy(){this.close()}get closed(){var t;return!((t=this._clients)!=null&&t.length)}open(t,r){return new Promise((i,s)=>{let n=!0;const o=a=>{Qe(r.signal),n&&(n=!1,a())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let a=0;a<t.length;++a){const l=t[a];Zi(l)?this._clientPromises[a]=l.then(h=>(this._clients[a]=new Pn(h,r,this._ongoingJobsQueue),o(i),this._clients[a]),()=>(o(s),null)):(this._clients[a]=new Pn(l,r,this._ongoingJobsQueue),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(i))}})}broadcast(t,r,i){const s=new Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){const o=this._clientPromises[n];s[n]=o.then(a=>a==null?void 0:a.invoke(t,r,i))}return s}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.resolver.reject(je(`Worker closing, aborting job calling '${t.methodName}'`));for(const r of this._clientPromises)r.then(i=>i==null?void 0:i.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,$9(this)}invoke(t,r,i){return this.apply(t,[r],i)}apply(t,r,i){const s=jr();this._ongoingJobsQueue.push({methodName:t,data:r,invokeOptions:i,resolver:s});for(let n=0;n<this._clientPromises.length;n++){const o=this._clients[n];o?o.jobAdded():this._clientPromises[n].then(a=>a==null?void 0:a.jobAdded())}return s.promise}createInvokeProxy(t){return Wx(this,t)}on(t,r){return Promise.all(this._clientPromises).then(()=>qu(this._clients.map(i=>i.on(t,r))))}openPorts(){return new Promise(t=>{const r=new Array(this._clientPromises.length);let i=r.length;for(let s=0;s<this._clientPromises.length;++s)this._clientPromises[s].then(n=>{n&&(r[s]=n.openPort()),--i==0&&t(r)})})}get test(){}};const C9={async request(e,t){var o,a;const r=e.options,i=r.responseType;r.signal=t==null?void 0:t.signal,r.responseType=i==="native"||i==="native-request-init"?"native-request-init":i&&["blob","json","text"].includes(i)&&((o=Qy(e.url))!=null&&o.after)?i:"array-buffer";const s=await st(e.url,r),n={data:s.data,httpStatus:s.httpStatus,ssl:s.ssl};switch((a=s.requestOptions)==null?void 0:a.responseType){case"native-request-init":return delete n.data.signal,n;case"blob":n.data=await n.data.arrayBuffer();break;case"json":n.data=new TextEncoder().encode(JSON.stringify(n.data)).buffer;break;case"text":n.data=new TextEncoder().encode(n.data).buffer}return{result:n,transferList:[n.data]}}},k9={ar:"ar-u-nu-latn"};let Id=new WeakMap,Yx={};function V0(e){const t=e||Yx;if(!Id.has(t)){const r=rr(),i=k9[rr()]||r;Id.set(t,new Intl.NumberFormat(i,e))}return Id.get(t)}function tte(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function rte(e,t){return Object.is(e,-0)&&(e=0),V0(t).format(e)}function ite(e,t=rr()){var i,s;if(!e)return null;let r=v2.get(t);if(!r){const n=V0().formatToParts(12345.6),o=[...V0({useGrouping:!1}).format(9876543210)].reverse(),a=new Map(o.map((y,v)=>[y,v])),l=new RegExp(`[${(i=n.find(y=>y.type==="group"))==null?void 0:i.value}]`,"g"),h=new RegExp(`[${(s=n.find(y=>y.type==="decimal"))==null?void 0:s.value}]`),p=new RegExp(`[${o.join("")}]`,"g"),f=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,m=/[-\u2212\u2013\u2014\u2015]/g;r=y=>{if((y=y.trim().replaceAll(l,"").replace(h,".").replace(p,_=>String(a.get(_))).replaceAll(f,"").replaceAll(m,"-"))==="")return null;const v=Number(y);return isNaN(v)?null:v},v2.set(t,r)}return r(e)}Cv(()=>{Id=new WeakMap,Yx={}});const v2=new Map;async function N9(e,t,r,i){const s=t.exec(r);if(!s)throw new k("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${t}"`);const n=s[1]?`${s[1]}/`:"",o=s[2],a=w4(i),l=`${n}${o}.json`,h=a?`${n}${o}_${a}.json`:l;let p;try{p=await _2(e(h))}catch(f){if(h===l)throw new k("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:f});try{p=await _2(e(l))}catch(m){throw new k("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:m})}}return p}async function _2(e){if(w2.fetchBundleAsset!=null)return w2.fetchBundleAsset(e);const t=await st(e,{responseType:"text"});return JSON.parse(t.data)}let L9=class{constructor({base:t="",pattern:r,location:i=new URL(window.location.href)}){let s;s=typeof i=="string"?n=>new URL(n,new URL(i,window.location.href)).href:i instanceof URL?n=>new URL(n,i).href:i,this.pattern=typeof r=="string"?new RegExp(`^${r}`):r,this.getAssetUrl=s,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(t,r){return N9(this.getAssetUrl,this.matcher,t,r)}};function D9(e){return new L9(e)}const w2={};_4(D9({pattern:"esri/",location:be}));const b2={};function F9(e){var r;const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:((r=e.packages)==null?void 0:r.slice())||[],paths:{...b2.paths,...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=b2.baseUrl),t}let U9=class{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(r=>{this[r]=(...i)=>t[r](...i)})}},Od=class{constructor(){this._dispatcher=new U9,this._workerPostMessage({type:gt.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){gp(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,r,i){this._dispatcher.addEventListener(t,r,i)}removeEventListener(t,r,i){this._dispatcher.removeEventListener(t,r,i)}_workerPostMessage(t){gp(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const r=Pu(t);if(r&&r.type===gt.OPEN){const{modulePath:i,jobId:s}=r;let n=await Pn.loadWorker(i);n||(n=await import(i));const o=Pn.connect(n);this._workerPostMessage({type:gt.OPENED,jobId:s,data:o})}}};const z0=()=>V.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:j9}=gt,G9='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let Uh,jh;const S2="Failed to create Worker. Fallback to execute module in main thread";async function V9(){if(!I("esri-workers"))return $2(new Od);if(!Uh&&!jh)try{const t=G9.split("{CONFIGURATION}").join(z9());Uh=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){jh=t||{}}let e;if(Uh)try{e=new Worker(Uh,{name:"esri-worker-"+B9++})}catch{z0().warn(S2,jh),e=new Od}else z0().warn(S2,jh),e=new Od;return $2(e)}async function $2(e){return new Promise(t=>{function r(s){const n=Pu(s);n&&n.type===j9&&(e.removeEventListener("message",r),e.removeEventListener("error",i),t(e))}function i(s){s.preventDefault(),e.removeEventListener("message",r),e.removeEventListener("error",i),z0().warn("Failed to create Worker. Fallback to execute module in main thread",s),(e=new Od).addEventListener("message",r),e.addEventListener("error",i)}e.addEventListener("message",r),e.addEventListener("error",i)})}function z9(){let e;if(Te.default!=null){const s={...Te};delete s.default,e=JSON.parse(JSON.stringify(s))}else e=JSON.parse(JSON.stringify(Te));e.assetsPath=Cr(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?Cr(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=rr(),e.has={"esri-csp-restrictions":I("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":I("esri-2d-update-debug"),"esri-2d-log-updating":I("esri-2d-log-updating"),"featurelayer-pbf":I("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":I("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":I("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":I("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":I("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":I("featurelayer-query-max-depth"),"featurelayer-query-pausing-enabled":I("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-enabled":I("featurelayer-snapshot-enabled"),"esri-atomics":I("esri-atomics"),"esri-shared-array-buffer":I("esri-shared-array-buffer"),"esri-tiles-debug":I("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":I("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":I("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=Cr(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=Cr(e.workers.workerPath):e.workers.workerPath=Cr(be("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=Te.workers.loaderConfig,r=F9({baseUrl:t==null?void 0:t.baseUrl,locale:rr(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t==null?void 0:t.has},map:{...t==null?void 0:t.map},paths:{...t==null?void 0:t.paths},packages:(t==null?void 0:t.packages)||[]});return JSON.stringify({esriConfig:e,loaderConfig:r,kernelInfo:{buildDate:VE,fullVersion:bv,revision:zE}})}let B9=0;const{ABORT:T2,INVOKE:H9,OPEN:W9,OPENED:q9,RESPONSE:Zl}=gt;let Z9=class Jx{static async create(t){const r=await V9();return new Jx(r,t)}constructor(t,r){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=r,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",i=>{i.preventDefault(),V.getLogger("esri.core.workers.WorkerOwner").error(i)})}terminate(){this.worker.terminate()}async open(t,r={}){const{signal:i}=r,s=Zx();return new Promise((n,o)=>{const a={resolve:n,reject:o,abortHandle:rv(i,()=>{this._outJobs.delete(s),this._post({type:T2,jobId:s})})};this._outJobs.set(s,a),this._post({type:W9,jobId:s,modulePath:t})})}_onMessage(t){const r=Pu(t);if(r)switch(r.type){case q9:this._onOpenedMessage(r);break;case Zl:this._onResponseMessage(r);break;case T2:this._onAbortMessage(r);break;case H9:this._onInvokeMessage(r)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,s=r.get(i);s&&(s.controller&&s.controller.abort(),r.delete(i))}_onInvokeMessage(t){const{methodName:r,jobId:i,data:s,abortable:n}=t,o=n?new AbortController:null,a=this._inJobs,l=C9[r];let h;try{if(typeof l!="function")throw new TypeError(`${r} is not a function`);h=l.call(null,s,{signal:o?o.signal:null})}catch(p){return void this._post({type:Zl,jobId:i,error:Ou(p)})}Zi(h)?(a.set(i,{controller:o,promise:h}),h.then(p=>{a.has(i)&&(a.delete(i),this._post({type:Zl,jobId:i},p))},p=>{a.has(i)&&(a.delete(i),p||(p={message:"Error encountered at method"+r}),vr(p)||this._post({type:Zl,jobId:i,error:Ou(p||{message:`Error encountered at method ${r}`})}))})):this._post({type:Zl,jobId:i},h)}_onOpenedMessage(t){const{jobId:r,data:i}=t,s=this._outJobs.get(r);s&&(this._outJobs.delete(r),Ue(s.abortHandle),s.resolve(i))}_onResponseMessage(t){const{jobId:r,error:i,data:s}=t,n=this._outJobs.get(r);n&&(this._outJobs.delete(r),Ue(n.abortHandle),i?n.reject(k.fromJSON(JSON.parse(i))):n.resolve(s))}_post(t,r,i){return c_(this.worker,t,r,i)}};const E2=I("host-browser")?Math.min(navigator.hardwareConcurrency-1,I("workers-pool-size")??8):0;let Ro=I("esri-mobile")?Math.min(E2,3):E2;Ro||(Ro=I("safari")&&I("mac")?7:2);let M2=0;const Pd=[];function Y9(){Xx()}async function Gh(e,t){const r=new R9,{registryTarget:i,...s}=t;return await r.open(e,s),i&&S9(i,r),r}async function ate(e,t={}){if(typeof e!="string")throw new k("workers:undefined-module","modulePath is missing");let r=t.strategy||"distributed";if(I("host-webworker")&&!I("esri-workers")&&(r="local"),r==="local"){let i=await Pn.loadWorker(e);i||(i=await import(e)),Qe(t.signal);const s=t.client||i;return Gh([Pn.connect(i,t.schedule)],{...t,client:s})}if(await Xx(),Qe(t.signal),r==="dedicated"){const i=M2++%Ro;return Gh([await Pd[i].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const i=Math.min(t.maxNumWorkers,Ro);if(i<Ro){const s=new Array(i);for(let n=0;n<i;++n){const o=M2++%Ro;s[n]=Pd[o].open(e,t)}return Gh(s,t)}}return Gh(Pd.map(i=>i.open(e,t)),t)}let Vh=null;async function Xx(){if(Vh)return Vh;new AbortController;const e=[];for(let t=0;t<Ro;t++){const r=Z9.create(t).then(i=>(Pd[t]=i,i));e.push(r)}return Vh=Promise.all(e),Vh}const lte=Math.PI/180,cte=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,Gs=We.radius,Wr=We.eccentricitySquared,J9={a1:Gs*Wr,a2:Gs*Wr*Gs*Wr,a3:Gs*Wr*Wr/2,a4:Gs*Wr*Gs*Wr*2.5,a5:Gs*Wr+Gs*Wr*Wr/2,a6:1-Wr},ute={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:We.radius,f:We.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:Mn.radius,f:Mn.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:Ui.radius,f:Ui.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:Ui.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var M;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=7]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=9]="GCSMOON2000",e[e.LON_LAT=10]="LON_LAT",e[e.PLATE_CARREE=11]="PLATE_CARREE"})(M||(M={}));const X9={[M.WGS84]:{[M.CGCS2000]:De,[M.GCSMARS2000]:null,[M.GCSMOON2000]:null,[M.LON_LAT]:De,[M.SPHERICAL_ECEF]:au,[M.SPHERICAL_MARS_PCPF]:null,[M.SPHERICAL_MOON_PCPF]:null,[M.UNKNOWN]:null,[M.WEB_MERCATOR]:tl,[M.PLATE_CARREE]:rl,[M.WGS84]:De,[M.WGS84_ECEF]:nl},[M.CGCS2000]:{[M.CGCS2000]:De,[M.GCSMARS2000]:null,[M.GCSMOON2000]:null,[M.LON_LAT]:De,[M.SPHERICAL_ECEF]:au,[M.SPHERICAL_MARS_PCPF]:null,[M.SPHERICAL_MOON_PCPF]:null,[M.UNKNOWN]:null,[M.WEB_MERCATOR]:tl,[M.PLATE_CARREE]:rl,[M.WGS84]:De,[M.WGS84_ECEF]:nl},[M.GCSMARS2000]:{[M.CGCS2000]:null,[M.GCSMARS2000]:De,[M.GCSMOON2000]:null,[M.LON_LAT]:De,[M.SPHERICAL_ECEF]:null,[M.SPHERICAL_MARS_PCPF]:I2,[M.SPHERICAL_MOON_PCPF]:null,[M.UNKNOWN]:null,[M.WEB_MERCATOR]:null,[M.PLATE_CARREE]:null,[M.WGS84]:null,[M.WGS84_ECEF]:null},[M.GCSMOON2000]:{[M.CGCS2000]:null,[M.GCSMARS2000]:null,[M.GCSMOON2000]:De,[M.LON_LAT]:De,[M.SPHERICAL_ECEF]:null,[M.SPHERICAL_MARS_PCPF]:null,[M.SPHERICAL_MOON_PCPF]:A2,[M.UNKNOWN]:null,[M.WEB_MERCATOR]:null,[M.PLATE_CARREE]:null,[M.WGS84]:null,[M.WGS84_ECEF]:null},[M.WEB_MERCATOR]:{[M.CGCS2000]:ou,[M.GCSMARS2000]:null,[M.GCSMOON2000]:null,[M.LON_LAT]:ou,[M.SPHERICAL_ECEF]:K9,[M.SPHERICAL_MARS_PCPF]:null,[M.SPHERICAL_MOON_PCPF]:null,[M.UNKNOWN]:null,[M.WEB_MERCATOR]:De,[M.PLATE_CARREE]:t7,[M.WGS84]:ou,[M.WGS84_ECEF]:Q9},[M.WGS84_ECEF]:{[M.CGCS2000]:ol,[M.GCSMARS2000]:null,[M.GCSMOON2000]:null,[M.LON_LAT]:ol,[M.SPHERICAL_ECEF]:u7,[M.SPHERICAL_MARS_PCPF]:null,[M.SPHERICAL_MOON_PCPF]:null,[M.UNKNOWN]:null,[M.WEB_MERCATOR]:h7,[M.PLATE_CARREE]:r7,[M.WGS84]:ol,[M.WGS84_ECEF]:De},[M.SPHERICAL_ECEF]:{[M.CGCS2000]:sl,[M.GCSMARS2000]:null,[M.GCSMOON2000]:null,[M.LON_LAT]:sl,[M.SPHERICAL_ECEF]:De,[M.SPHERICAL_MARS_PCPF]:null,[M.SPHERICAL_MOON_PCPF]:null,[M.UNKNOWN]:null,[M.WEB_MERCATOR]:a7,[M.PLATE_CARREE]:i7,[M.WGS84]:sl,[M.WGS84_ECEF]:l7},[M.SPHERICAL_MARS_PCPF]:{[M.CGCS2000]:null,[M.GCSMARS2000]:P2,[M.GCSMOON2000]:null,[M.LON_LAT]:P2,[M.SPHERICAL_ECEF]:null,[M.SPHERICAL_MARS_PCPF]:De,[M.SPHERICAL_MOON_PCPF]:null,[M.UNKNOWN]:null,[M.WEB_MERCATOR]:null,[M.PLATE_CARREE]:null,[M.WGS84]:null,[M.WGS84_ECEF]:null},[M.SPHERICAL_MOON_PCPF]:{[M.CGCS2000]:null,[M.GCSMARS2000]:null,[M.GCSMOON2000]:O2,[M.LON_LAT]:O2,[M.SPHERICAL_ECEF]:null,[M.SPHERICAL_MARS_PCPF]:null,[M.SPHERICAL_MOON_PCPF]:De,[M.UNKNOWN]:null,[M.WEB_MERCATOR]:null,[M.PLATE_CARREE]:null,[M.WGS84]:null,[M.WGS84_ECEF]:null},[M.UNKNOWN]:{[M.CGCS2000]:null,[M.GCSMARS2000]:null,[M.GCSMOON2000]:null,[M.LON_LAT]:null,[M.SPHERICAL_ECEF]:null,[M.SPHERICAL_MARS_PCPF]:null,[M.SPHERICAL_MOON_PCPF]:null,[M.UNKNOWN]:De,[M.WEB_MERCATOR]:null,[M.PLATE_CARREE]:null,[M.WGS84]:null,[M.WGS84_ECEF]:null},[M.LON_LAT]:{[M.CGCS2000]:De,[M.GCSMARS2000]:De,[M.GCSMOON2000]:De,[M.LON_LAT]:De,[M.SPHERICAL_ECEF]:au,[M.SPHERICAL_MARS_PCPF]:I2,[M.SPHERICAL_MOON_PCPF]:A2,[M.UNKNOWN]:null,[M.WEB_MERCATOR]:tl,[M.PLATE_CARREE]:rl,[M.WGS84]:De,[M.WGS84_ECEF]:nl},[M.PLATE_CARREE]:{[M.CGCS2000]:il,[M.GCSMARS2000]:null,[M.GCSMOON2000]:null,[M.LON_LAT]:il,[M.SPHERICAL_ECEF]:s7,[M.SPHERICAL_MARS_PCPF]:null,[M.SPHERICAL_MOON_PCPF]:null,[M.UNKNOWN]:null,[M.WEB_MERCATOR]:n7,[M.PLATE_CARREE]:De,[M.WGS84]:il,[M.WGS84_ECEF]:o7}};function Kx(e,t,r=Qx()){return e==null||t==null?null:d7(e,t,r).projector}function x2(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=Dn(e,1)),Np(e)?t.spatialReferenceId=M.SPHERICAL_ECEF:Bo(e)?t.spatialReferenceId=M.WGS84:Vi(e)?t.spatialReferenceId=M.WEB_MERCATOR:f5(e)?t.spatialReferenceId=M.PLATE_CARREE:e.wkt===v5.wkt?t.spatialReferenceId=M.WGS84_ECEF:e.wkid===zo.CGCS2000?t.spatialReferenceId=M.CGCS2000:e.wkt===Iv.wkt?t.spatialReferenceId=M.SPHERICAL_MARS_PCPF:e.wkt===Ov.wkt?t.spatialReferenceId=M.SPHERICAL_MOON_PCPF:l3(e)?t.spatialReferenceId=M.GCSMARS2000:c3(e)?t.spatialReferenceId=M.GCSMOON2000:t.spatialReferenceId=M.UNKNOWN):M.UNKNOWN}function De(e,t,r,i){e!==r&&(r[i++]=e[t++],r[i++]=e[t++],r[i]=e[t])}function ou(e,t,r,i){r[i]=Sl*(e[t]/Fo),r[i+1]=Sl*(tA-2*Math.atan(Math.exp(-e[t+1]/Fo))),r[i+2]=e[t+2]}function K9(e,t,r,i){const s=e[t]/Fo,n=tA-2*Math.atan(Math.exp(-e[t+1]/Fo)),o=Fo+e[t+2],a=Math.cos(n)*o;r[i]=Math.cos(s)*a,r[i+1]=Math.sin(s)*a,r[i+2]=Math.sin(n)*o}function Q9(e,t,r,i){ou(e,t,r,i),nl(r,i,r,i)}function e7(e,t,r,i,s){const n=.4999999*Jf,o=di(bl*e[t+1],-n,n),a=Math.sin(o);r[i++]=bl*e[t]*s.radius,r[i++]=s.halfSemiMajorAxis*Math.log((1+a)/(1-a)),r[i]=e[t+2]}function tl(e,t,r,i){e7(e,t,r,i,We)}function rl(e,t,r,i){r[i]=e[t]*R2,r[i+1]=e[t+1]*R2,r[i+2]=e[t+2]}function il(e,t,r,i){r[i]=e[t]*C2,r[i+1]=e[t+1]*C2,r[i+2]=e[t+2]}function t7(e,t,r,i){ou(e,t,r,i),rl(r,i,r,i)}function r7(e,t,r,i){ol(e,t,r,i),rl(r,i,r,i)}function i7(e,t,r,i){sl(e,t,r,i),rl(r,i,r,i)}function s7(e,t,r,i){il(e,t,r,i),au(r,i,r,i)}function n7(e,t,r,i){il(e,t,r,i),tl(r,i,r,i)}function o7(e,t,r,i){il(e,t,r,i),nl(r,i,r,i)}function u_(e,t,r,i,s){const n=s+e[t+2],o=bl*e[t+1],a=bl*e[t],l=Math.cos(o)*n;r[i]=Math.cos(a)*l,r[i+1]=Math.sin(a)*l,r[i+2]=Math.sin(o)*n}function A2(e,t,r,i){u_(e,t,r,i,Mn.radius)}function I2(e,t,r,i){u_(e,t,r,i,Ui.radius)}function au(e,t,r,i){u_(e,t,r,i,We.radius)}function h_(e,t,r,i,s){const n=e[t],o=e[t+1],a=e[t+2],l=Math.sqrt(n*n+o*o+a*a),h=z4(a/(l===0?1:l)),p=Math.atan2(o,n);r[i++]=Sl*p,r[i++]=Sl*h,r[i]=l-s}function O2(e,t,r,i){h_(e,t,r,i,Mn.radius)}function P2(e,t,r,i){h_(e,t,r,i,Ui.radius)}function sl(e,t,r,i){h_(e,t,r,i,We.radius)}function a7(e,t,r,i){sl(e,t,r,i),tl(r,i,r,i)}function l7(e,t,r,i){sl(e,t,r,i),nl(r,i,r,i)}function c7(e,t,r,i,s){const n=bl*e[t],o=bl*e[t+1],a=e[t+2],l=Math.sin(o),h=Math.cos(o),p=s.radius/Math.sqrt(1-s.eccentricitySquared*l*l);r[i++]=(p+a)*h*Math.cos(n),r[i++]=(p+a)*h*Math.sin(n),r[i++]=(p*(1-s.eccentricitySquared)+a)*l}function nl(e,t,r,i){c7(e,t,r,i,We)}function ol(e,t,r,i){const s=J9,n=e[t],o=e[t+1],a=e[t+2];let l,h,p,f,m,y,v,_,w,S,E,x,A,P,C,U,F,z,q,ee,ce;l=Math.abs(a),h=n*n+o*o,p=Math.sqrt(h),f=h+a*a,m=Math.sqrt(f),ee=Math.atan2(o,n),y=a*a/f,v=h/f,P=s.a2/m,C=s.a3-s.a4/m,v>.3?(_=l/m*(1+v*(s.a1+P+y*C)/m),q=Math.asin(_),S=_*_,w=Math.sqrt(1-S)):(w=p/m*(1-y*(s.a5-P-v*C)/m),q=Math.acos(w),S=1-w*w,_=Math.sqrt(S)),E=1-We.eccentricitySquared*S,x=We.radius/Math.sqrt(E),A=s.a6*x,P=p-x*w,C=l-A*_,F=w*P+_*C,U=w*C-_*P,z=U/(A/E+F),q+=z,ce=F+U*z/2,a<0&&(q=-q),r[i++]=Sl*ee,r[i++]=Sl*q,r[i]=ce}function u7(e,t,r,i){ol(e,t,r,i),au(r,i,r,i)}function h7(e,t,r,i){ol(e,t,r,i),tl(r,i,r,i)}function d7(e,t,r){if(e==null||t==null||r.source.spatialReference===e&&r.dest.spatialReference===t)return r;const i=x2(e,r.source),s=x2(t,r.dest);return i===M.UNKNOWN&&s===M.UNKNOWN?_t(e,t)?r.projector=De:r.projector=null:r.projector=X9[i][s],r}function Qx(){return{source:{spatialReference:null,spatialReferenceId:M.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:M.UNKNOWN,metersPerUnit:1},projector:De}}const hte={spatialReference:null,spatialReferenceId:M.UNKNOWN},dte={spatialReference:null,spatialReferenceId:M.UNKNOWN},eA=Qx(),bl=Uf(1),Sl=L3(1),Jf=Math.PI,tA=.5*Jf,Fo=We.radius,R2=Fo*Jf/180,C2=180/(Fo*Jf);function lh(e,t,r,i,s,n,o=Math.floor(e.length/3)){const a=Kx(t,s,eA);if(a==null)return!1;if(a===De){if(e===i&&r===n)return!0;const h=r+3*o;for(let p=r,f=n;p<h;p++,f++)i[f]=e[p];return!0}const l=r+3*o;for(let h=r,p=n;h<l;h+=3,p+=3)a(e,h,i,p);return!0}const pte=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:lh},Symbol.toStringTag,{value:"Module"}));function k2(e,t,r,i,s,n){return zh[0]=e,zh[1]=t,zh[2]=r,lh(zh,i,0,s,n,0)}const zh=Fn();let Bh=0,Km=class B0{static fromGE(t){const r=new B0;return r._wkt=t.wkt,r._wkid=t.wkid,r._isInverse=t.isInverse,r}constructor(t){this.uid=Bh++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=Bh++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=Bh++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=Bh++}getInverse(){const t=new B0;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}},Wp=class yc{static cacheKey(t,r){var i,s,n,o,a,l;return[((i=t.wkid)==null?void 0:i.toString())??"-1",((s=t.wkt)==null?void 0:s.toString())??"",((n=t.wkt2)==null?void 0:n.toString())??"",((o=r.wkid)==null?void 0:o.toString())??"-1",((a=r.wkt)==null?void 0:a.toString())??"",((l=r.wkt2)==null?void 0:l.toString())??""].join()}static fromGE(t){const r=new yc;let i="";for(const s of t.steps){const n=Km.fromGE(s);r.steps.push(n),i+=n.uid.toString()+","}return r._cachedProjection={},r._gtlistentry=null,r._chain=i,r}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t==null?void 0:t.steps)for(const r of t.steps)r instanceof Km?this.steps.push(r):this.steps.push(new Km({wkid:r.wkid,wkt:r.wkt,isInverse:r.isInverse}))}getInverse(){const t=new yc;t.steps=[];for(let r=this.steps.length-1;r>=0;r--){const i=this.steps[r];t.steps.push(i.getInverse())}return t}getGTListEntry(){let t="";for(const r of this.steps)t+=r.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,r,i){this._cachedProjection[yc.cacheKey(t,r)]=i}getCachedGeTransformation(t,r){let i="";for(const n of this.steps)i+=n.uid.toString()+",";i!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=i);const s=this._cachedProjection[yc.cacheKey(t,r)];return s===void 0?null:s}};function p7(e,t,r){if(t==null||r==null||r.vcsWkid||_t(t,r)||xn(t)||xn(r))return null;const i=cb(t)/cb(r);if(i===1)return null;switch(e){case"point":case"esriGeometryPoint":return s=>f7(s,i);case"polyline":case"esriGeometryPolyline":return s=>y7(s,i);case"polygon":case"esriGeometryPolygon":return s=>m7(s,i);case"multipoint":case"esriGeometryMultipoint":return s=>g7(s,i);case"extent":case"esriGeometryEnvelope":return s=>v7(s,i);default:return null}}function f7(e,t){(e==null?void 0:e.z)!=null&&(e.z*=t)}function m7(e,t){if(e)for(const r of e.rings)for(const i of r)i.length>2&&(i[2]*=t)}function y7(e,t){if(e)for(const r of e.paths)for(const i of r)i.length>2&&(i[2]*=t)}function g7(e,t){if(e)for(const r of e.points)r.length>2&&(r[2]*=t)}function v7(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}let ci=null,Rn=null,lu=null,Rd={};const d_=new eh;function Gn(){return!!ci&&xv()}function rA(){return!!Gn()||(J(d_),Cn(),!1)}function iA(e,t){return!e||!t||Wi(e,t)||rA()}function _7(e,t){return!Wi(e,t)&&!Gn()}function Cn(e){return lu==null&&(lu=Promise.all([t3(),j(()=>import("./geometryEngineBase-yFIvKOkM.js"),__vite__mapDeps([33,3]),import.meta.url).then(t=>t.g),j(()=>import("./hydrated-CUaNMSUx.js"),[],import.meta.url)])),lu.then(([,t,{hydratedAdapter:r}])=>{Qe(e),Rn=r,ci=t.default,ci._enableProjection(u5),d_.notify()})}function ra(e,t,r=null,i=null){return Array.isArray(e)?e.length===0?[]:H0(Rn,e,e[0].spatialReference,t,r,i):H0(Rn,[e],e.spatialReference,t,r,i)[0]}function H0(e,t,r,i,s=null,n=null){if(r==null||i==null)return t;if(Wi(r,i,s))return t.map(o=>Cd(o,r,i));if(s==null&&Np(r))return t.map(o=>Cd(o,r,de.WGS84)).map(o=>Ru(o,i));if(s==null&&Np(i))return t.map(o=>Ru(o,de.WGS84)).map(o=>Cd(o,de.WGS84,i));if(s==null){const o=Wp.cacheKey(r,i);Rd[o]!==void 0?s=Rd[o]:((s=nA(r,i,void 0))==null&&(s=new Wp),Rd[o]=s)}if(ci==null||e==null)throw new Xf;return n!=null?ci._project(e,t,r,i,s,n):ci._project(e,t,r,i,s)}function w7(e,t){const r=sA([e],t);return r.pending!=null?{pending:r.pending,geometry:null}:r.geometries!=null?{pending:null,geometry:r.geometries[0]}:{pending:null,geometry:null}}function sA(e,t){if(!Gn()){for(const r of e)if(r!=null&&!_t(r.spatialReference,t)&&fr(r.spatialReference)&&fr(t)&&!Wi(r.spatialReference,t))return J(d_),{pending:Cn(),geometries:null}}return{pending:null,geometries:e.map(r=>r==null?null:_t(r.spatialReference,t)?r:fr(r.spatialReference)&&fr(t)?Ru(r,t):null)}}function nA(e,t,r=null){if(e==null||t==null)return null;if(ci==null||Rn==null)throw new Xf;const i=ci._getTransformation(Rn,e,t,r,r==null?void 0:r.spatialReference);return i!==null?Wp.fromGE(i):null}function b7(e,t,r=null){if(ci==null||Rn==null)throw new Xf;const i=ci._getTransformationBySuitability(Rn,e,t,r,r==null?void 0:r.spatialReference);if(i!==null){const s=[];for(const n of i)s.push(Wp.fromGE(n));return s}return[]}let Xf=class extends k{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function S7(){ci=null,Rn=null,lu=null,Rd={}}const $7={get loadPromise(){return lu}};function Ru(e,t){try{const r=ra(e,t);if(r==null)return null;"xmin"in e&&"xmin"in r&&(r.zmin=e.zmin,r.zmax=e.zmax);const i=p7(r.type,e.spatialReference,t);return i!=null&&i(r),r}catch(r){if(!(r instanceof Xf))throw r;return null}}async function T7(e,t,r){const i=e.spatialReference;return i!=null&&t!=null&&await oA(i,t,null,r),Ru(e,t)}function Wi(e,t,r){return!r&&(!!_t(e,t)||fr(e)&&fr(t)&&!!Kx(e,t,eA))}function E7(e,t){if(_t(e,t))return!0;if(!fr(e)||!fr(t))return!1;const r=Bo(e)||Vi(e)||ab(e),i=Bo(t)||Vi(t)||ab(t);return r&&i}async function oA(e,t,r,i){if(Gn())return Fw(i);if(Array.isArray(e)){for(const{source:s,dest:n,geographicTransformation:o}of e)if(s&&n&&!Wi(s,n,o))return Cn(i)}else if(e&&t&&!Wi(e,t,r))return Cn(i);return Fw(i)}function Cd(e,t,r){return e?"x"in e?aA(e,t,new ae,r,0):"xmin"in e?hA(e,t,new Be,r,0):"rings"in e?uA(e,t,new Bi,r,0):"paths"in e?cA(e,t,new oi,r,0):"points"in e?lA(e,t,new Vf,r,0):null:null}function M7(e,t,r=t.spatialReference,i=0){return r!=null&&e.spatialReference!=null&&aA(e,e.spatialReference,t,r,i)!=null}function aA(e,t,r,i,s){Ot[0]=e.x,Ot[1]=e.y;const n=e.z;return Ot[2]=n!==void 0?n:s,lh(Ot,t,0,Ot,i,0)?(r.x=Ot[0],r.y=Ot[1],r.spatialReference=i,n!==void 0||xn(i)?(r.z=Ot[2],r.hasZ=!0):(r.z=void 0,r.hasZ=!1),e.m===void 0?(r.m=void 0,r.hasM=!1):(r.m=e.m,r.hasM=!0),r):null}function x7(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&lA(e,e.spatialReference,t,r,i)!=null}function lA(e,t,r,i,s){const{points:n,hasZ:o,hasM:a}=e,l=[],h=n.length,p=[];for(const m of n)p.push(m[0],m[1],o?m[2]:s);if(!lh(p,t,0,p,i,0,h))return null;const f=o||xn(i);for(let m=0;m<h;++m){const y=3*m,v=p[y],_=p[y+1];f&&a?l.push([v,_,p[y+2],n[m][3]]):f?l.push([v,_,p[y+2]]):a?l.push([v,_,n[m][2]]):l.push([v,_])}return r.points=l,r.spatialReference=i,r.hasZ=o,r.hasM=a,r}function A7(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&cA(e,e.spatialReference,t,r,i)!=null}function cA(e,t,r,i,s){const{paths:n,hasZ:o,hasM:a}=e,l=[];if(!dA(n,o??!1,a??!1,t,l,i,s))return null;const h=o||xn(i);return r.paths=l,r.spatialReference=i,r.hasZ=h,r.hasM=a,r}function I7(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&uA(e,e.spatialReference,t,r,i)!=null}function uA(e,t,r,i,s){const{rings:n,hasZ:o,hasM:a}=e,l=[];if(!dA(n,o??!1,a??!1,t,l,i,s))return null;const h=o||xn(i);return r.rings=l,r.spatialReference=i,r.hasZ=h,r.hasM=a,r}function O7(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&hA(e,e.spatialReference,t,r,i)!=null}function hA(e,t,r,i,s){const{xmin:n,ymin:o,xmax:a,ymax:l,hasZ:h,hasM:p}=e,f=h?e.zmin:s;if(!k2(n,o,f,t,Ot,i))return null;const m=h||xn(i);r.xmin=Ot[0],r.ymin=Ot[1],m&&(r.zmin=Ot[2]);const y=h?e.zmax:s;return k2(a,l,y,t,Ot,i)?(r.xmax=Ot[0],r.ymax=Ot[1],m&&(r.zmax=Ot[2]),p&&(r.mmin=e.mmin,r.mmax=e.mmax),r.spatialReference=i,r):null}function dA(e,t,r,i,s,n,o=0){const a=new Array;for(const p of e)for(const f of p)a.push(f[0],f[1],t?f[2]:o);if(!lh(a,i,0,a,n,0))return!1;let l=0;s.length=0;const h=t||xn(n);for(const p of e){const f=new Array;for(const m of p)h&&r?f.push([a[l++],a[l++],a[l++],m[3]]):h?f.push([a[l++],a[l++],a[l++]]):r?(f.push([a[l++],a[l++],m[2]]),l++):(f.push([a[l++],a[l++]]),l++);s.push(f)}return!0}const Ot=Fn(),mte=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:Wi,getTransformation:nA,getTransformations:b7,initializeProjection:oA,isEqualBaseGCS:E7,isLoaded:Gn,isLoadedOrLoad:rA,isLoadedOrLoadFor:iA,load:Cn,project:ra,projectExtent:O7,projectMany:H0,projectMultipoint:x7,projectOrLoad:w7,projectOrLoadMany:sA,projectPoint:M7,projectPolygon:I7,projectPolyline:A7,projectWithZConversion:T7,projectWithoutEngine:Cd,requiresLoad:_7,test:$7,tryProjectWithZConversion:Ru,unload:S7},Symbol.toStringTag,{value:"Module"}));var W0;let Si=W0=class extends W{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new W0({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};u([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Si.prototype,"cols",void 0),u([d({type:ke,json:{write:!0}})],Si.prototype,"level",void 0),u([d({type:String,json:{write:!0}})],Si.prototype,"levelValue",void 0),u([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Si.prototype,"origin",void 0),u([d({type:Number,json:{write:!0}})],Si.prototype,"resolution",void 0),u([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Si.prototype,"rows",void 0),u([d({type:Number,json:{write:!0}})],Si.prototype,"scale",void 0),Si=W0=u([$("esri.layers.support.LOD")],Si);const un=Si;let P7=class{constructor(t,r,i,s,n=void 0){this.id=t,this.level=r,this.row=i,this.col=s,this.extent=n}};var Ws;const N2=new ut({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let St=Ws=class extends W{static create(e={}){const{resolutionFactor:t=1,scales:r,size:i=256,spatialReference:s=de.WebMercator,numLODs:n=24}=e;if(!fr(s)){const f=[];if(r)for(let m=0;m<r.length;m++){const y=r[m];f.push(new un({level:m,scale:y,resolution:y}))}else{let m=5e-4;for(let y=n-1;y>=0;y--)f.unshift(new un({level:y,scale:m,resolution:m})),m*=2}return new Ws({dpi:96,lods:f,origin:new ae(0,0,s),size:[i,i],spatialReference:s})}const o=zt(s),a=e.origin?new ae({x:e.origin.x,y:e.origin.y,spatialReference:s}):new ae(o?{x:o.origin[0],y:o.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),l=96,h=1/(Dn(s)*39.37*l),p=[];if(r)for(let f=0;f<r.length;f++){const m=r[f],y=m*h;p.push(new un({level:f,scale:m,resolution:y}))}else{let f=Pf(s)?512/i*5916575275917094e-7:256/i*591657527591555e-6;const m=Math.ceil(n/t);p.push(new un({level:0,scale:f,resolution:f*h}));for(let y=1;y<m;y++){const v=f/2**t,_=v*h;p.push(new un({level:y,scale:v,resolution:_})),f=v}}return new Ws({dpi:l,lods:p,origin:a,size:[i,i],spatialReference:s})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const r=zt(e);return e.isWrappable&&!!r&&Math.abs(r.origin[0]-t.x)<=r.dx}return!1}readOrigin(e,t){return ae.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,r=0;const i=[],s=this._levelToLOD={};e&&(t=-1/0,r=1/0,e.forEach(n=>{i.push(n.scale),t=n.scale>t?n.scale:t,r=n.scale<r?n.scale:r,s[n.level]=n})),this._set("scales",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];const r=Math.floor(e),i=r+1;return t[r]/(t[r]/t[i])**(e-r)}scaleToZoom(e){const t=this.scales,r=t.length-1;let i=0;for(;i<r;i++){const s=t[i],n=t[i+1];if(s<=e)return i;if(n===e)return i+1;if(s>e&&n<e)return i+Math.log(s/e)/Math.log(s/n)}return i}tileAt(e,t,r,i){const s=this.lodAt(e);if(!s)return null;let n,o;if(typeof t=="number")n=t,o=r;else if(_t(t.spatialReference,this.spatialReference))n=t.x,o=t.y,i=r;else{const h=kf(t,this.spatialReference);if(h==null)return null;n=h.x,o=h.y,i=r}const a=s.resolution*this.size[0],l=s.resolution*this.size[1];return i||(i=new P7(null,0,0,0,er())),i.level=e,i.row=Math.floor((this.origin.y-o)/l+.001),i.col=Math.floor((n-this.origin.x)/a+.001),this.updateTileInfo(i),i}updateTileInfo(e,t=Ws.ExtrapolateOptions.NONE){let r=this.lodAt(e.level);if(!r&&t===Ws.ExtrapolateOptions.POWER_OF_TWO){const o=this.lods[this.lods.length-1];o.level<e.level&&(r=o)}if(!r)return;const i=e.level-r.level,s=r.resolution*this.size[0]/2**i,n=r.resolution*this.size[1]/2**i;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=er()),e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*n,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+n}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const r=this.lodAt(t.level);if(r==null)return null;const{resolution:i}=r,s=i*this.size[0],n=i*this.size[1];return e[0]=this.origin.x+t.col*s,e[1]=this.origin.y-(t.row+1)*n,e[2]=e[0]+s,e[3]=e[1]+n,e}lodAt(e){var t;return((t=this._levelToLOD)==null?void 0:t[e])??null}clone(){return Ws.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const t=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&t===0)return this;const r=[],i=this.lods.length-t;for(let s=0;s<i;s++){const n=s+t,{scale:o,resolution:a}=n>=0?this.lods[n]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};r.push(new un({level:s,scale:o,resolution:a}))}return new Ws({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:r})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let r=0;r<e.length;r++){const i=e[r];this._upsampleLevels[i.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/i.resolution:0},t=i}}};u([d({type:Number,json:{write:!0}})],St.prototype,"compressionQuality",void 0),u([d({type:Number,json:{write:!0}})],St.prototype,"dpi",void 0),u([d({type:String,json:{read:N2.read,write:N2.write,origins:{"web-scene":{read:!1,write:!1}}}})],St.prototype,"format",void 0),u([d({readOnly:!0})],St.prototype,"isWrappable",null),u([d({type:ae,json:{write:!0}})],St.prototype,"origin",void 0),u([ve("origin")],St.prototype,"readOrigin",null),u([d({type:[un],value:null,json:{write:!0}})],St.prototype,"lods",null),u([d({readOnly:!0})],St.prototype,"scales",void 0),u([d({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],St.prototype,"size",void 0),u([ve("size",["rows","cols"])],St.prototype,"readSize",null),u([pe("size",{cols:{type:ke},rows:{type:ke}})],St.prototype,"writeSize",null),u([d({type:de,json:{write:!0}})],St.prototype,"spatialReference",void 0),St=Ws=u([$("esri.layers.support.TileInfo")],St),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(St||(St={}));const R7=St,kd={widthBreakpoint:{getValue(e){const t=e.viewSize[0],r=e.breakpoints,i=this.values;return t<=r.xsmall?i.xsmall:t<=r.small?i.small:t<=r.medium?i.medium:t<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],r=e.breakpoints,i=this.values;return t<=r.xsmall?i.xsmall:t<=r.small?i.small:t<=r.medium?i.medium:t<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,r=t[0],i=t[1],s=this.values;return i>=r?s.portrait:s.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},Qm={xsmall:544,small:768,medium:992,large:1200};function C7(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function ey(e,t){return t?kd[e].valueToClassName[t].split(" "):[]}const k7=e=>{let t=class extends e{constructor(...r){super(...r),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=Qm}initialize(){this.addHandles(se(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),Nt))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(r){if(r!==this._get("breakpoints")){if(!C7(r)){const i=JSON.stringify(Qm,null,2);console.warn("provided breakpoints are not valid, using defaults:"+i),r=Qm}this._set("breakpoints",{...r})}}_updateClassNames(){if(!this.container)return;const r=Vt.acquire(),i=Vt.acquire();let s,n=!1;for(s in kd){const o=this[s],a=kd[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(n=!0,this[s]=a,ey(s,o).forEach(l=>i.push(l)),ey(s,a).forEach(l=>r.push(l)))}n&&(this._applyClassNameChanges(r,i),Vt.release(r),Vt.release(i))}_applyClassNameChanges(r,i){const s=this.container;s&&(i.forEach(n=>s.classList.remove(n)),r.forEach(n=>s.classList.add(n)))}_removeActiveClassNames(){const r=this.container;if(!r)return;let i;for(i in kd)ey(i,this[i]).forEach(s=>r.classList.remove(s))}};return u([d()],t.prototype,"breakpoints",null),u([d()],t.prototype,"orientation",void 0),u([d()],t.prototype,"widthBreakpoint",void 0),u([d()],t.prototype,"heightBreakpoint",void 0),t=u([$("esri.views.BreakpointsOwner")],t),t};function p_(e){return typeof e=="string"?document.getElementById(e):e??null}function L2(e,t){for(;;){const r=e.firstChild;if(!r)break;t.appendChild(r)}}let Uo=class extends Y{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(t,r,i={}){return this._installWatch(t,r,i,se)}addWhen(t,r,i={}){return this._installWatch(t,r,i,zi)}addOnCollectionChange(t,r,{initial:i=!1,final:s=!1}={}){const n=++this._handleId;return this.addHandles([Yo(t,"after-changes",this._createSyncUpdatingCallback(),In),Yo(t,"change",r,{onListenerAdd:i?o=>r({added:o.toArray(),removed:[]}):void 0,onListenerRemove:s?o=>r({added:[],removed:o.toArray()}):void 0})],n),_e(()=>this.removeHandles(n))}addPromise(t){if(t==null)return t;const r=++this._handleId;this.addHandles(_e(()=>{this._pendingPromises.delete(t)&&(this._pendingPromises.size!==0||this.hasHandles(Hh)||this._set("updating",!1))}),r),this._pendingPromises.add(t),this._set("updating",!0);const i=()=>this.removeHandles(r);return t.then(i,i),t}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(t,r,i={},s){const n=++this._handleId;i.sync||this._installSyncUpdatingWatch(t,n);const o=s(t,r,i);return this.addHandles(o,n),_e(()=>this.removeHandles(n))}_installSyncUpdatingWatch(t,r){const i=this._createSyncUpdatingCallback(),s=se(t,i,{sync:!0,equals:()=>!1});return this.addHandles(s,r),s}_createSyncUpdatingCallback(){return()=>{this.removeHandles(Hh),++this._scheduleHandleId;const t=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(Ku(()=>{t===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(Hh))}),Hh)}}};u([d({readOnly:!0})],Uo.prototype,"updating",void 0),Uo=u([$("esri.core.support.UpdatingHandles")],Uo);const Hh=-42;/*!
 * @esri/arcgis-html-sanitizer - v4.1.0 - Tue Dec 03 2024 09:13:28 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var qp=function(){return qp=Object.assign||function(t){for(var r,i=1,s=arguments.length;i<s;i++){r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qp.apply(this,arguments)},q0={exports:{}},qe={},Z0={exports:{}},ia={};function pA(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function N7(e,t,r){}function L7(e,t,r){}var D7=/javascript\s*\:/img;function F7(e,t){return D7.test(t)?"":t}ia.whiteList=pA();ia.getDefaultWhiteList=pA;ia.onAttr=N7;ia.onIgnoreAttr=L7;ia.safeAttrValue=F7;var U7={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,s;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,s=e.length;i<s;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},Yl=U7;function j7(e,t){e=Yl.trimRight(e),e[e.length-1]!==";"&&(e+=";");var r=e.length,i=!1,s=0,n=0,o="";function a(){if(!i){var p=Yl.trim(e.slice(s,n)),f=p.indexOf(":");if(f!==-1){var m=Yl.trim(p.slice(0,f)),y=Yl.trim(p.slice(f+1));if(m){var v=t(s,o.length,m,y,p);v&&(o+=v+"; ")}}}s=n+1}for(;n<r;n++){var l=e[n];if(l==="/"&&e[n+1]==="*"){var h=e.indexOf("*/",n+2);if(h===-1)break;n=h+1,s=n+1,i=!1}else l==="("?i=!0:l===")"?i=!1:l===";"?i||a():l===`
`&&a()}return Yl.trim(o)}var G7=j7,Wh=ia,V7=G7;function D2(e){return e==null}function z7(e){var t={};for(var r in e)t[r]=e[r];return t}function fA(e){e=z7(e||{}),e.whiteList=e.whiteList||Wh.whiteList,e.onAttr=e.onAttr||Wh.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Wh.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Wh.safeAttrValue,this.options=e}fA.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,i=r.whiteList,s=r.onAttr,n=r.onIgnoreAttr,o=r.safeAttrValue,a=V7(e,function(l,h,p,f,m){var y=i[p],v=!1;if(y===!0?v=y:typeof y=="function"?v=y(f):y instanceof RegExp&&(v=y.test(f)),v!==!0&&(v=!1),f=o(p,f),!!f){var _={position:h,sourcePosition:l,source:m,isWhite:v};if(v){var w=s(p,f,_);return D2(w)?p+":"+f:w}else{var w=n(p,f,_);if(!D2(w))return w}}});return a};var B7=fA;(function(e,t){var r=ia,i=B7;function s(o,a){var l=new i(a);return l.process(o)}t=e.exports=s,t.FilterCSS=i;for(var n in r)t[n]=r[n]})(Z0,Z0.exports);var f_=Z0.exports,m_={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,s;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,s=e.length;i<s;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,r=t.exec(e);return r?r.index:-1}},H7=f_.FilterCSS,W7=f_.getDefaultWhiteList,Zp=m_;function mA(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var yA=new H7;function q7(e,t,r){}function Z7(e,t,r){}function Y7(e,t,r){}function J7(e,t,r){}function gA(e){return e.replace(K7,"&lt;").replace(Q7,"&gt;")}function X7(e,t,r,i){if(r=$A(r),t==="href"||t==="src"){if(r=Zp.trim(r),r==="#")return"#";if(!(r.substr(0,7)==="http://"||r.substr(0,8)==="https://"||r.substr(0,7)==="mailto:"||r.substr(0,4)==="tel:"||r.substr(0,11)==="data:image/"||r.substr(0,6)==="ftp://"||r.substr(0,2)==="./"||r.substr(0,3)==="../"||r[0]==="#"||r[0]==="/"))return""}else if(t==="background"){if(qh.lastIndex=0,qh.test(r))return""}else if(t==="style"){if(F2.lastIndex=0,F2.test(r)||(U2.lastIndex=0,U2.test(r)&&(qh.lastIndex=0,qh.test(r))))return"";i!==!1&&(i=i||yA,r=i.process(r))}return r=TA(r),r}var K7=/</g,Q7=/>/g,eU=/"/g,tU=/&quot;/g,rU=/&#([a-zA-Z0-9]*);?/gim,iU=/&colon;?/gim,sU=/&newline;?/gim,qh=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,F2=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,U2=/u\s*r\s*l\s*\(.*/gi;function vA(e){return e.replace(eU,"&quot;")}function _A(e){return e.replace(tU,'"')}function wA(e){return e.replace(rU,function(r,i){return i[0]==="x"||i[0]==="X"?String.fromCharCode(parseInt(i.substr(1),16)):String.fromCharCode(parseInt(i,10))})}function bA(e){return e.replace(iU,":").replace(sU," ")}function SA(e){for(var t="",r=0,i=e.length;r<i;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return Zp.trim(t)}function $A(e){return e=_A(e),e=wA(e),e=bA(e),e=SA(e),e}function TA(e){return e=vA(e),e=gA(e),e}function nU(){return""}function oU(e,t){typeof t!="function"&&(t=function(){});var r=!Array.isArray(e);function i(o){return r?!0:Zp.indexOf(e,o)!==-1}var s=[],n=!1;return{onIgnoreTag:function(o,a,l){if(i(o))if(l.isClosing){var h="[/removed]",p=l.position+h.length;return s.push([n!==!1?n:l.position,p]),n=!1,h}else return n||(n=l.position),"[removed]";else return t(o,a,l)},remove:function(o){var a="",l=0;return Zp.forEach(s,function(h){a+=o.slice(l,h[0]),l=h[1]}),a+=o.slice(l),a}}}function aU(e){for(var t="",r=0;r<e.length;){var i=e.indexOf("<!--",r);if(i===-1){t+=e.slice(r);break}t+=e.slice(r,i);var s=e.indexOf("-->",i);if(s===-1)break;r=s+3}return t}function lU(e){var t=e.split("");return t=t.filter(function(r){var i=r.charCodeAt(0);return i===127?!1:i<=31?i===10||i===13:!0}),t.join("")}qe.whiteList=mA();qe.getDefaultWhiteList=mA;qe.onTag=q7;qe.onIgnoreTag=Z7;qe.onTagAttr=Y7;qe.onIgnoreTagAttr=J7;qe.safeAttrValue=X7;qe.escapeHtml=gA;qe.escapeQuote=vA;qe.unescapeQuote=_A;qe.escapeHtmlEntities=wA;qe.escapeDangerHtml5Entities=bA;qe.clearNonPrintableCharacter=SA;qe.friendlyAttrValue=$A;qe.escapeAttrValue=TA;qe.onIgnoreTagStripAll=nU;qe.StripTagBody=oU;qe.stripCommentTag=aU;qe.stripBlankChar=lU;qe.cssFilter=yA;qe.getDefaultCSSWhiteList=W7;var Kf={},hn=m_;function cU(e){var t=hn.spaceIndex(e),r;return t===-1?r=e.slice(1,-1):r=e.slice(1,t+1),r=hn.trim(r).toLowerCase(),r.slice(0,1)==="/"&&(r=r.slice(1)),r.slice(-1)==="/"&&(r=r.slice(0,-1)),r}function uU(e){return e.slice(0,2)==="</"}function hU(e,t,r){var i="",s=0,n=!1,o=!1,a=0,l=e.length,h="",p="";e:for(a=0;a<l;a++){var f=e.charAt(a);if(n===!1){if(f==="<"){n=a;continue}}else if(o===!1){if(f==="<"){i+=r(e.slice(s,a)),n=a,s=a;continue}if(f===">"){i+=r(e.slice(s,n)),p=e.slice(n,a+1),h=cU(p),i+=t(n,i.length,h,p,uU(p)),s=a+1,n=!1;continue}if(f==='"'||f==="'")for(var m=1,y=e.charAt(a-m);y.trim()===""||y==="=";){if(y==="="){o=f;continue e}y=e.charAt(a-++m)}}else if(f===o){o=!1;continue}}return s<e.length&&(i+=r(e.substr(s))),i}var dU=/[^a-zA-Z0-9\\_:.-]/gim;function pU(e,t){var r=0,i=0,s=[],n=!1,o=e.length;function a(m,y){if(m=hn.trim(m),m=m.replace(dU,"").toLowerCase(),!(m.length<1)){var v=t(m,y||"");v&&s.push(v)}}for(var l=0;l<o;l++){var h=e.charAt(l),p,f;if(n===!1&&h==="="){n=e.slice(r,l),r=l+1,i=e.charAt(r)==='"'||e.charAt(r)==="'"?r:mU(e,l+1);continue}if(n!==!1&&l===i){if(f=e.indexOf(h,l+1),f===-1)break;p=hn.trim(e.slice(i+1,f)),a(n,p),n=!1,l=f,r=l+1;continue}if(/\s|\n|\t/.test(h))if(e=e.replace(/\s|\n|\t/g," "),n===!1)if(f=fU(e,l),f===-1){p=hn.trim(e.slice(r,l)),a(p),n=!1,r=l+1;continue}else{l=f-1;continue}else if(f=yU(e,l-1),f===-1){p=hn.trim(e.slice(r,l)),p=j2(p),a(n,p),n=!1,r=l+1;continue}else continue}return r<e.length&&(n===!1?a(e.slice(r)):a(n,j2(hn.trim(e.slice(r))))),hn.trim(s.join(" "))}function fU(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="="?t:-1}}function mU(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="'"||r==='"'?t:-1}}function yU(e,t){for(;t>0;t--){var r=e[t];if(r!==" ")return r==="="?t:-1}}function gU(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function j2(e){return gU(e)?e.substr(1,e.length-2):e}Kf.parseTag=hU;Kf.parseAttr=pU;var vU=f_.FilterCSS,si=qe,EA=Kf,_U=EA.parseTag,wU=EA.parseAttr,Nd=m_;function Zh(e){return e==null}function bU(e){var t=Nd.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=Nd.trim(e.slice(t+1,-1));var r=e[e.length-1]==="/";return r&&(e=Nd.trim(e.slice(0,-1))),{html:e,closing:r}}function SU(e){var t={};for(var r in e)t[r]=e[r];return t}function $U(e){var t={};for(var r in e)Array.isArray(e[r])?t[r.toLowerCase()]=e[r].map(function(i){return i.toLowerCase()}):t[r.toLowerCase()]=e[r];return t}function MA(e){e=SU(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=si.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=$U(e.whiteList||e.allowList):e.whiteList=si.whiteList,e.onTag=e.onTag||si.onTag,e.onTagAttr=e.onTagAttr||si.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||si.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||si.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||si.safeAttrValue,e.escapeHtml=e.escapeHtml||si.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new vU(e.css))}MA.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,i=r.whiteList,s=r.onTag,n=r.onIgnoreTag,o=r.onTagAttr,a=r.onIgnoreTagAttr,l=r.safeAttrValue,h=r.escapeHtml,p=t.cssFilter;r.stripBlankChar&&(e=si.stripBlankChar(e)),r.allowCommentTag||(e=si.stripCommentTag(e));var f=!1;r.stripIgnoreTagBody&&(f=si.StripTagBody(r.stripIgnoreTagBody,n),n=f.onIgnoreTag);var m=_U(e,function(y,v,_,w,S){var E={sourcePosition:y,position:v,isClosing:S,isWhite:Object.prototype.hasOwnProperty.call(i,_)},x=s(_,w,E);if(!Zh(x))return x;if(E.isWhite){if(E.isClosing)return"</"+_+">";var A=bU(w),P=i[_],C=wU(A.html,function(U,F){var z=Nd.indexOf(P,U)!==-1,q=o(_,U,F,z);return Zh(q)?z?(F=l(_,U,F,p),F?U+'="'+F+'"':U):(q=a(_,U,F,z),Zh(q)?void 0:q):q});return w="<"+_,C&&(w+=" "+C),A.closing&&(w+=" /"),w+=">",w}else return x=n(_,w,E),Zh(x)?h(w):x},h);return f&&(m=f.remove(m)),m};var TU=MA;(function(e,t){var r=qe,i=Kf,s=TU;function n(a,l){var h=new s(l);return h.process(a)}t=e.exports=n,t.filterXSS=n,t.FilterXSS=s,function(){for(var a in r)t[a]=r[a];for(var l in i)t[l]=i[l]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=e.exports)})(q0,q0.exports);var ha=q0.exports,EU=function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},MU=function(){function e(t,r){var i=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=qp(qp({},ha.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(n,o,a,l){return n==="a"&&o==="href"||(n==="img"||n==="source")&&o==="src"?i.sanitizeUrl(a):ha.safeAttrValue(n,o,a,l)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var s;t&&!r?s=t:t&&r?(s=Object.create(this.arcgisFilterOptions),s.css={whiteList:this.arcgisCSSWhiteList},Object.keys(t).forEach(function(n){if(n==="whiteList")s.whiteList=i._extendObjectOfArrays([i.arcgisWhiteList,t.whiteList||{}]);else if(n==="css"){var o=t.css.whiteList;o!=null&&t.css instanceof Object&&Object.keys(o).forEach(function(a){return s.css.whiteList[a]=o[a]})}else s[n]=t[n]})):(s=Object.create(this.arcgisFilterOptions),s.whiteList=this.arcgisWhiteList,s.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=s,this._xssFilter=new ha.FilterXSS(s)}return e.prototype.sanitize=function(t,r){switch(r===void 0&&(r={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,r);default:return r.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,r){var i=(r??{}).isProtocolRequired,s=i===void 0?!0:i,n=this._trim(t.substring(0,t.indexOf(":"))),o=t==="/",a=/^#/.test(t),l=n&&this.allowedProtocols.indexOf(n.toLowerCase())>-1;return o||a||l?ha.escapeAttrValue(t):!n&&!s?ha.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,r,i,s){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,r,i,s):ha.safeAttrValue(t,r,i,s)},e.prototype.validate=function(t,r){r===void 0&&(r={});var i=this.sanitize(t,r);return{isValid:t===i,sanitized:i}},e.prototype.encodeHTML=function(t){var r=this;return String(t).replace(/[&<>"'\/]/g,function(i){return r._entityMap[i]})},e.prototype.encodeAttrValue=function(t){var r=/^[a-zA-Z0-9]$/;return String(t).replace(/[\x00-\xFF]/g,function(i,s){return r.test(i)?i:"&#x".concat(Number(t.charCodeAt(s)).toString(16),";")})},e.prototype._extendObjectOfArrays=function(t){var r={};return t.forEach(function(i){Object.keys(i).forEach(function(s){Array.isArray(i[s])&&Array.isArray(r[s])?r[s]=r[s].concat(i[s]):r[s]=i[s]})}),r},e.prototype._iterateOverObject=function(t,r){var i=this;r===void 0&&(r={});try{var s=!1,n=void 0;if(Array.isArray(t))n=t.reduce(function(a,l){var h=i.validate(l,r);return h.isValid?a.concat([l]):(s=!0,a.concat([h.sanitized]))},[]);else if(EU(t)){var o=Object.keys(t);n=o.reduce(function(a,l){var h=t[l],p=i.validate(h,r);return p.isValid?a[l]=h:(s=!0,a[l]=p.sanitized),a},{})}else return r.allowUndefined&&typeof t>"u"?void 0:null;return s?n:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const Qf=new Map;function xA(){Qf.clear()}function xU(e){return Qf.get(e)}function AU(e,t){Qf.set(e,t)}function ty(e){Qf.delete(e)}function IU(...e){const t=Vt.acquire();for(let i=0;i<e.length;i++){const s=e[i],n=typeof s;if(n==="string")t.push(s);else if(Array.isArray(s))t.push.apply(t,s);else if(n==="object")for(const o in s)s[o]&&t.push(o)}const r=t.join(" ");return Vt.release(t),r}(()=>{const e=new Map,t=new ResizeObserver(i=>{var s;xA();for(const n of i)(s=e.get(n.target))==null||s(n)}),r=(i,s,n)=>(e.set(i,s),t.observe(i,n),_e(()=>{t.unobserve(i),e.delete(i)}));return(i,s,n)=>{let o=null;return qu([se(()=>typeof i=="function"?i():i,a=>{o==null||o.remove(),a&&(o=r(a,s,n))},dr),_e(()=>o==null?void 0:o.remove())])}})();function OU(e){const t=e==null?void 0:e.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function vte(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function _te(e){const t="data-node-ref";this[e.getAttribute(t)]=e}const PU=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],RU=PU.reduce((e,t)=>(e[t]=[],e),{}),CU=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],AA=new MU({whiteList:RU,onTagAttr:(e,t,r)=>{const i=`${t}="${r}"`;if(CU.includes(t))return i},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function kU(e){return e==="Enter"||e===" "}async function NU(e,t){await Gk(Xu(t));const r=typeof e=="function"?e():e;r&&("setFocus"in r&&typeof r.setFocus=="function"?await r.setFocus():r instanceof HTMLElement&&r.focus())}const IA="http://www.w3.org/",em=`${IA}2000/svg`,OA=`${IA}1999/xlink`;let G2=[],y_=(e,t)=>{let r={};return Object.keys(e).forEach(i=>{r[i]=e[i]}),t&&Object.keys(t).forEach(i=>{r[i]=t[i]}),r},g_=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),PA=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},LU=(e,t,r)=>{if(t.vnodeSelector!==""){for(let i=r;i<e.length;i++)if(g_(e[i],t))return i}return-1},ry=(e,t,r,i)=>{let s=e[t];if(s.vnodeSelector==="")return;let n=s.properties;if(!(n&&(n.key===void 0?n.bind:n.key))){for(let o=0;o<e.length;o++)if(o!==t){let a=e[o];if(g_(a,s))throw new Error(`${r.vnodeSelector} had a ${s.vnodeSelector} child ${i==="added"?i:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},DU=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},Y0=[],J0=!1,RA=e=>{(e.children||[]).forEach(RA),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},V2=()=>{J0=!1,Y0.forEach(RA),Y0.length=0},z2=e=>{Y0.push(e),J0||(J0=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(V2,{timeout:16}):setTimeout(V2,16))},B2=e=>{let t=e.domNode;if(e.properties){let r=e.properties.exitAnimation;if(r)return t.style.pointerEvents="none",void r(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),z2(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),z2(e))},FU=(e,t,r)=>{if(!t)return;let i=r.eventHandlerInterceptor,s=Object.keys(t),n=s.length;for(let o=0;o<n;o++){let a=s[o],l=t[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")K0(e,l,!0);else if(a==="classes"){let h=Object.keys(l),p=h.length;for(let f=0;f<p;f++){let m=h[f];l[m]&&e.classList.add(m)}}else if(a==="styles"){let h=Object.keys(l),p=h.length;for(let f=0;f<p;f++){let m=h[f],y=l[m];y&&(PA(y),r.styleApplyer(e,m,y))}}else if(a!=="key"&&l!=null){let h=typeof l;h==="function"?(a.lastIndexOf("on",0)===0&&(i&&(l=i(a,l,e,t)),a==="oninput"&&function(){let p=l;l=function(f){p.apply(this,[f]),f.target["oninput-value"]=f.target.value}}()),e[a]=l):r.namespace===em?a==="href"?e.setAttributeNS(OA,a,l):e.setAttribute(a,l):h==="string"&&a!=="value"?a==="innerHTML"?e[a]=AA.sanitize(l):X0(e)&&a in e?e[a]=l:e.setAttribute(a,l):e[a]=l}}};function X0(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let Yp,UU=(e,t,r)=>{if(t)for(let i of t)Ba(i,e,void 0,r)},CA=(e,t,r)=>{UU(e,t.children,r),t.text&&(e.textContent=t.text),FU(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children])},Ba=(e,t,r,i)=>{let s,n=0,o=e.vnodeSelector,a=t.ownerDocument;if(o==="")s=e.domNode=a.createTextNode(e.text),r!==void 0?t.insertBefore(s,r):t.appendChild(s);else{for(let l=0;l<=o.length;++l){let h=o.charAt(l);if(l===o.length||h==="."||h==="#"){let p=o.charAt(n-1),f=o.slice(n,l);p==="."?s.classList.add(f):p==="#"?s.id=f:(f==="svg"&&(i=y_(i,{namespace:em})),i.namespace!==void 0?s=e.domNode=a.createElementNS(i.namespace,f):(s=e.domNode=e.domNode||a.createElement(f),f==="input"&&e.properties&&e.properties.type!==void 0&&s.setAttribute("type",e.properties.type)),r!==void 0?t.insertBefore(s,r):s.parentNode!==t&&t.appendChild(s)),n=l+1}}CA(s,e,i)}},K0=(e,t,r)=>{t&&t.split(" ").forEach(i=>{i&&e.classList.toggle(i,r)})},jU=(e,t,r,i)=>{if(!r)return;let s=!1,n=Object.keys(r),o=n.length;for(let a=0;a<o;a++){let l=n[a],h=r[l],p=t[l];if(l==="class")p!==h&&(K0(e,p,!1),K0(e,h,!0));else if(l==="classes"){let f=e.classList,m=Object.keys(h),y=m.length;for(let v=0;v<y;v++){let _=m[v],w=!!h[_];w!==!!p[_]&&(s=!0,w?f.add(_):f.remove(_))}}else if(l==="styles"){let f=Object.keys(h),m=f.length;for(let y=0;y<m;y++){let v=f[y],_=h[v];_!==p[v]&&(s=!0,_?(PA(_),i.styleApplyer(e,v,_)):i.styleApplyer(e,v,""))}}else if(h||typeof p!="string"||(h=""),l!=="value"||X0(e)){if(h!==p){let f=typeof h;f==="function"&&i.eventHandlerInterceptor||(i.namespace===em?l==="href"?e.setAttributeNS(OA,l,h):e.setAttribute(l,h):f==="string"?l==="innerHTML"?e[l]=AA.sanitize(h):l==="role"&&h===""?e.removeAttribute(l):X0(e)&&l in e?e[l]=h:e.setAttribute(l,h):e[l]!==h&&(e[l]=h),s=!0)}}else{let f=e[l];f!==h&&(e["oninput-value"]?f===e["oninput-value"]:h!==p)&&(e[l]=h,e["oninput-value"]=void 0),h!==p&&(s=!0)}}return s},GU=(e,t,r,i,s)=>{if(r===i)return!1;i=i||G2;let n,o=(r=r||G2).length,a=i.length,l=0,h=0,p=!1;for(;h<a;){let f=l<o?r[l]:void 0,m=i[h];if(f!==void 0&&g_(f,m))p=Yp(f,m,s)||p,l++;else{let y=LU(r,m,l+1);if(y>=0){for(n=l;n<y;n++)B2(r[n]),ry(r,n,e,"removed");p=Yp(r[y],m,s)||p,l=y+1}else Ba(m,t,l<o?r[l].domNode:void 0,s),DU(m),ry(i,h,e,"added")}h++}if(o>l)for(n=l;n<o;n++)B2(r[n]),ry(r,n,e,"removed");return p};Yp=(e,t,r)=>{let i=e.domNode,s=!1;if(e===t)return!1;let n=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let o=i.ownerDocument.createTextNode(t.text);return i.parentNode.replaceChild(o,i),t.domNode=o,s=!0,s}t.domNode=i}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(r=y_(r,{namespace:em})),e.text!==t.text&&(n=!0,t.text===void 0?i.removeChild(i.firstChild):i.textContent=t.text),t.domNode=i,n=GU(t,i,e.children,t.children,r)||n,n=jU(i,e.properties,t.properties,r)||n,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[i,r,t.vnodeSelector,t.properties,t.children]);return n&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(i,t.properties,e.properties),s};let Jl=(e,t)=>({getLastRender:()=>e,update:r=>{if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let i=e;e=r,Yp(i,r,t)},domNode:e.domNode});const VU={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}};let Sa=e=>y_(VU,e),vn={create:(e,t)=>(t=Sa(t),Ba(e,document.createElement("div"),void 0,t),Jl(e,t)),append:(e,t,r)=>(r=Sa(r),Ba(t,e,void 0,r),Jl(t,r)),insertBefore:(e,t,r)=>(r=Sa(r),Ba(t,e.parentNode,e,r),Jl(t,r)),merge:(e,t,r)=>(r=Sa(r),t.domNode=e,CA(e,t,r),Jl(t,r)),replace:(e,t,r)=>(r=Sa(r),Ba(t,e.parentNode,e,r),e.parentNode.removeChild(e),Jl(t,r))},kA,zU=(e,t)=>{let r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r};kA=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let BU=(e,t)=>{let r=e;return t.forEach(i=>{r=r&&r.children?kA(r.children,s=>s.domNode===i):void 0}),r},HU=(e,t,r)=>{let i=function(s){r("domEvent",s);let n=t(),o=zU(s.currentTarget,n.domNode);o.reverse();let a,l=BU(n.getLastRender(),o);return e.scheduleRender(),l&&(a=l.properties[`on${s.type}`].apply(l.properties.bind||this,arguments)),r("domEventProcessed",s),a};return(s,n,o,a)=>i},H2=e=>{let t,r,i=Sa(e),s=i.performanceLogger,n=!0,o=!1,a=[],l=[],h=(f,m,y)=>{let v,_=()=>v;i.eventHandlerInterceptor=HU(t,_,s),v=f(m,y(),i),a.push(v),l.push(y)},p=()=>{if(r=void 0,n){n=!1,s("renderStart",void 0);for(let f=0;f<a.length;f++){let m=l[f]();s("rendered",void 0),a[f].update(m),s("patched",void 0)}s("renderDone",void 0),n=!0}};return t={renderNow:p,scheduleRender:()=>{r||o||(r=requestAnimationFrame(p))},stop:()=>{r&&(cancelAnimationFrame(r),r=void 0),o=!0},resume:()=>{o=!1,n=!0,t.scheduleRender()},append:(f,m)=>{h(vn.append,f,m)},insertBefore:(f,m)=>{h(vn.insertBefore,f,m)},merge:(f,m)=>{h(vn.merge,f,m)},replace:(f,m)=>{h(vn.replace,f,m)},detach:f=>{for(let m=0;m<l.length;m++)if(l[m]===f)return l.splice(m,1),a.splice(m,1)[0];throw new Error("renderFunction was not found")}},t},qs=class extends Y{constructor(){super(...arguments),this.items=new K,this._watchUpdatingTracking=new Uo,this._callbacks=new Map,this._projector=H2(),this._hiddenProjector=H2()}get needsRender(){return this.items.length>0}get updating(){var t;return((t=this._watchUpdatingTracking)==null?void 0:t.updating)??!1}initialize(){const t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,r=>{for(const i of r.added){const s=()=>i.render();this._callbacks.set(i,s),this._projector.append(this.surface,s)}for(const i of r.removed){const s=this._projector.detach(this._callbacks.get(i));this.surface.removeChild(s.domNode),this._callbacks.delete(i)}})}addItem(t){this.items.add(t)}removeItem(t){this.items.remove(t)}destroy(){this.items.removeAll(),this._callbacks.forEach(t=>this._projector.detach(t)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(t){const r=this._hiddenSurface,i=this._hiddenProjector;let s;const n=()=>(s=t.render(),s);i.append(r,n),i.renderNow();const o={left:0,top:0,right:0,bottom:0};if(s!=null&&s.domNode){const a=s.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(i.detach(n);r.firstChild;)r.removeChild(r.firstChild);return o}overlaps(t,r){const i=this.computeBoundingRect(t),s=this.computeBoundingRect(r);return Math.max(i.left,s.left)<=Math.min(i.right,s.right)&&Math.max(i.top,s.top)<=Math.min(i.bottom,s.bottom)}get hasVisibleItems(){return this.items.some(t=>t.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(t,r){const i=!!(r!=null&&r.disableDecorations);if(!this.items.some(n=>n.visible&&!(i&&n.isDecoration)))return;const s=t.getContext("2d");s.save(),s.font=this._fontString(),this.items.forEach(n=>{i&&n.isDecoration||(s.save(),n.renderCanvas(s),s.restore())}),s.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};u([d({readOnly:!0})],qs.prototype,"surface",void 0),u([d({readOnly:!0})],qs.prototype,"items",void 0),u([d({readOnly:!0})],qs.prototype,"needsRender",null),u([d({readOnly:!0})],qs.prototype,"_watchUpdatingTracking",void 0),u([d({readOnly:!0})],qs.prototype,"updating",null),qs=u([$("esri.views.overlay.ViewOverlay")],qs);const W2=qs,iy=[0,0];function WU(e){const t=(e.ownerDocument||window.document).defaultView,r=e.getBoundingClientRect();return iy[0]=r.left+((t==null?void 0:t.pageXOffset)??0),iy[1]=r.top+((t==null?void 0:t.pageYOffset)??0),iy}function q2(e){e&&(e.textContent="",e.parentNode&&e.parentNode.removeChild(e))}function qU(e){const t=document.createElement("div");return e.appendChild(t),t}const Xl=16,Yh=750,ZU=512,YU=2,JU=e=>{let t=class extends e{constructor(...r){super(...r),this._freqInfo={freq:Xl,time:Yh},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([se(()=>this.cursor,i=>{const{surface:s}=this;s&&s.setAttribute("data-cursor",i)}),se(()=>this.navigating,i=>{const{surface:s}=this;s&&s.setAttribute("data-navigating",i.toString())})])}initialize(){this.addHandles([se(()=>this.ui,(r,i)=>this._handleUIChange(r,i),Nt),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=Ve(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(r){const i=this._get("container"),s=p_(r);if(s||typeof r!="string"||V.getLogger(this).error("#container",`element with id '${r}' not found`),i===s)return;if(this._stopMeasuring(),i&&(i.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(q2(this.root),this._set("root",null)),this.userContent&&(L2(this.userContent,i),q2(this.userContent),this._set("userContent",null))),!s)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);s.classList.add("esri-view");const n=document.createElement("div");n.className="esri-view-user-storage",L2(s,n),s.appendChild(n),this._set("userContent",n);const o=document.createElement("div");o.className="esri-view-root",s.insertBefore(o,s.firstChild),this._set("root",o);const a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,o.appendChild(a),this._set("surface",a);const l=new W2;o.appendChild(l.surface),this._set("overlay",l),this.addHandles(se(()=>l.needsRender,h=>{h&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=hl({render:()=>{var p;return(p=this.overlay)==null?void 0:p.render()}}):this._overlayRenderTaskHandle=Ue(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",s),this._startMeasuring()}get focused(){const r=document.activeElement===this.surface;return document.hasFocus()&&r}get size(){return[this.width,this.height]}blur(){var r;(r=this.surface)==null||r.blur()}focus(){var r;(r=this.surface)==null||r.focus()}pageToContainer(r,i,s){const n=this.position;return r-=n?n[0]:0,i-=n?n[1]:0,s?(s[0]=r,s[1]=i):s=[r,i],s}containerToPage(r,i,s){const n=this.position;return r+=n?n[0]:0,i+=n?n[1]:0,s?(s[0]=r,s[1]=i):s=[r,i],s}_handleUIChange(r,i){this.removeHandles("ui"),i&&i!==r&&i.destroy(),r&&(r.view=this,this.addHandles(se(()=>this.root,s=>{r.container=s?qU(s):null},Nt),"ui")),this._set("ui",r)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const r=this._freqInfo;r.freq=Xl,r.time=Yh,this.addHandles([Ju(window,"resize",()=>{r.freq=Xl,r.time=Yh}),hl({prepare:i=>{const s=this._measure(),n=this._freqInfo;if(n.time+=i.deltaTime,s&&(n.freq=Xl,this._get("resizing")||this._set("resizing",!0)),n.time<n.freq)return;n.time=0;const o=this._position();n.freq=o||s?Xl:Math.min(Yh,n.freq*YU),!s&&n.freq>=ZU&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const r=this.container,i=r?r.clientWidth:0,s=r?r.clientHeight:0;if(i===0||s===0)return this.suspended||this._set("suspended",!0),!1;const n=this.width,o=this.height;return i===n&&s===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",i),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:n,oldHeight:o,width:i,height:s}),!0)}_position(){const r=this.container,i=this.position,s=r&&WU(r);return!!s&&(!i||s[0]!==i[0]||s[1]!==i[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return u([d()],t.prototype,"container",null),u([d({readOnly:!0})],t.prototype,"focused",null),u([d({readOnly:!0})],t.prototype,"height",void 0),u([d()],t.prototype,"messagesCommon",void 0),u([d({type:W2})],t.prototype,"overlay",void 0),u([d({readOnly:!0})],t.prototype,"position",void 0),u([d({readOnly:!0})],t.prototype,"resizing",void 0),u([d({readOnly:!0})],t.prototype,"root",void 0),u([d({value:null,readOnly:!0})],t.prototype,"size",null),u([d({readOnly:!0})],t.prototype,"surface",void 0),u([d({readOnly:!0})],t.prototype,"suspended",void 0),u([d()],t.prototype,"ui",void 0),u([d({readOnly:!0})],t.prototype,"userContent",void 0),u([d({readOnly:!0})],t.prototype,"width",void 0),u([d()],t.prototype,"widthBreakpoint",void 0),t=u([$("esri.views.DOMContainer")],t),t},XU=I("mac")?"Meta":"Control",KU=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),QU=e=>KU.has(e);let ej=class{constructor(t,r=[]){this.eventType=t,this.keyModifiers=r}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const r=t.modifiers;for(const i of this.keyModifiers)if(!r.has(i))return!1;return!0}},ht=class{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const r=this._incoming[t];for(const i of r)this._incomingEventMatches.push(i.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager||(t.setEventCallback(r=>this._handleEvent(r)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,r,i){let s;typeof r=="function"?(i=r,s=[]):s=r||[];const n=typeof t=="string"?new ej(t,s):t,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=p=>{const f=this._incoming[p.match.eventType];if(f){const m=f.indexOf(p);f.splice(m,1),o(),this._manager&&this._manager.updateDependencies()}},l=new tj(n,i,{onPause:a,onRemove:a,onResume:p=>{const f=this._incoming[p.match.eventType];f&&!f.includes(p)&&(f.push(p),o(),this._manager&&this._manager.updateDependencies())}});let h=this._incoming[n.eventType];return h||(h=[],this._incoming[n.eventType]=h),h.push(l),o(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(t){if(this._outgoing[t])throw new Error("There is already a callback registered for this outgoing InputEvent: "+t);const r=new rj(t,{onEmit:(i,s,n,o)=>{var a;(a=this._manager)==null||a.emit(i.eventType,s,n,o)},onRemove:i=>{var s;delete this._outgoing[i.eventType],(s=this._manager)==null||s.updateDependencies()}});return this._outgoing[t]=r,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),r}startCapturingPointer(t){var r;(r=this._manager)==null||r.setPointerCapture(t,!0)}stopCapturingPointer(t){var r;(r=this._manager)==null||r.setPointerCapture(t,!1)}refreshHasPendingInputs(){var t;(t=this._manager)==null||t.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(t){var i;const r=this._incoming[t.type];if(r){for(const s of r)if(s.match.matches(t)&&((i=s.callback)==null||i.call(s,t),t.shouldStopPropagation()))break}}},tj=class{constructor(t,r,i){this.match=t,this._callback=r,this._handler=i}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},rj=class{constructor(t,r){this.eventType=t,this._removed=!1,this._handler=r}emit(t,r,i){this._removed||this._handler.onEmit(this,t,r,i)}remove(){this._removed=!0,this._handler.onRemove(this)}},ij=class extends ht{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",r=>this._update(r.data))}_update(t){const r=t.native.pointerType==="touch"?"touch":"mouse",{x:i,y:s}=t;r===this._value&&this._x===i&&this._y===s||(this._value=r,this._x=i,this._y=s,this._onChange(r,i,s))}},sj=class{constructor(t,r){this._observable=new eh,this._value=t,this._equalityFunction=r}get value(){return J(this._observable),this._value}set value(t){this._equalityFunction(t,this._value)||(this._value=t,this._observable.notify())}mutate(t){t(this._value),this._observable.notify()}};function Cu(e,t=CT){return new sj(e,t)}let nj=class extends ht{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=Cu(!1),this._onPointerAdd=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.add(t.native.pointerId),this._update())},this._onPointerRemove=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.delete(t.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},oj=class{constructor(t,r){this._owner=r,this._properties={},this._afterDispatchHandle=null;for(const i in t){const s=t[i],n=new eE(s,void 0,void 0,2,2);this._properties[i]={pool:n,acquired:[]}}this._afterDispatchHandle=tN(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const t in this._properties){const r=this._properties[t];for(const i of r.acquired)Gw(i)||r.pool.release(i);r.pool.destroy(),r.pool=null,r.acquired=null}this._properties=null,this._owner=null}get(t){const r=this._owner._get(t),i=this._properties[t];let s=i.pool.acquire();for(i.acquired.push(s);s===r;)i.acquired.push(s),s=i.pool.acquire();return s}_release(){for(const t in this._properties){const r=this._properties[t];let i=0;for(const s of r.acquired)Gw(s)?r.acquired[i++]=s:r.pool.release(s);r.acquired.length=i}}},Mr=class extends Y{constructor(t){super(t),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=XU,this._latestPointerType="mouse",this._propertiesPool=new oj({latestPointerLocation:cj},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const t=Object.keys(this._nameToGroup);for(const r of t)this.uninstallHandlers(r);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(t=>t.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(t,r,i=bn.INTERNAL){if(this._nameToGroup[t]||r.length===0)return;const s={name:t,handlers:r.map(n=>({handler:n,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[t]=s;for(let n=s.handlers.length-1;n>=0;n--){const o=s.handlers[n];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,l,h,p,f)=>{this._emitInputEvent(o.priorityIndex+1,a,l,h,f,p)},setPointerCapture:(a,l)=>{this._setPointerCapture(s,o,a,l)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(t){const r=this._nameToGroup[t];r?(r.handlers.forEach(i=>{var s;i.removed=!0,(s=i.uninstallCallback)==null||s.call(i)}),delete this._nameToGroup[t],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):V.getLogger(this).error("There is no InputHandler group registered under the name `"+t+"`")}hasHandlers(t){return this._nameToGroup[t]!==void 0}isModifierKeyDown(t){return this._activeKeyModifiers.has(t)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const t=new Set,r=new Set;this._handlersPriority=[];for(let i=this._handlers.length-1;i>=0;i--){const s=this._handlers[i];s.priorityIndex=i,this._handlersPriority.push(s)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){const s=this._handlersPriority[i];s.priorityIndex=i;let n=s.handler.hasSideEffects;if(!n){for(const o of s.handler.outgoingEventTypes)if(t.has(o)){n=!0;break}}if(n)for(const o of s.handler.incomingEventMatches){t.add(o.eventType);for(const a of o.keyModifiers)QU(a)||r.add(a)}s.active=n}this._sourceEvents=t,this._keyModifiers=r,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(t,r,i){this._latestPointerType=t;const s=this._get("latestPointerLocation");if(s==null||s.x!==r||s.y!==i){const n=this._propertiesPool.get("latestPointerLocation");n.x=r,n.y=i,this._set("latestPointerLocation",n)}}_onEventReceived(t,r){if(t==="pointer-capture-lost"){const n=r;this._pointerCaptures.delete(n.native.pointerId)}this._updateKeyModifiers(t,r);const i=this.test.timestamp!=null?this.test.timestamp:r.native?r.native.timestamp:void 0,s=r.native?r.native.cancelable:void 0;this._emitInputEventFromSource(t,r,i,s)}_updateKeyModifiers(t,r){if(!r)return;let i=!1;const s=()=>{i||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),i=!0)},n=(a,l)=>{l&&!this._activeKeyModifiers.has(a)?(s(),this._activeKeyModifiers.add(a)):!l&&this._activeKeyModifiers.has(a)&&(s(),this._activeKeyModifiers.delete(a))};if(t==="key-down"||t==="key-up"){const a=r.key;this._keyModifiers.has(a)&&n(a,t==="key-down")}const o=r.native;n("Alt",!!(o!=null&&o.altKey)),n("Control",!!(o!=null&&o.ctrlKey)),n("Ctrl",!!(o!=null&&o.ctrlKey)),n("Shift",!!(o!=null&&o.shiftKey)),n("Meta",!!(o!=null&&o.metaKey)),n("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new ij((t,r,i)=>this._setLatestPointer(t,r,i)),this._multiTouchHandler=new nj,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],bn.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,bn.INTERNAL)}_setPointerCapture(t,r,i,s){const n=t.name+"-"+r.priorityIndex,o=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,o),s?(o.add(n),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):o.has(n)&&(o.delete(n),o.size===0&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(t=>!t.removed),this.updateDependencies()}_emitInputEventFromSource(t,r,i,s){this._emitInputEvent(0,t,r,i,s)}_emitInputEvent(t,r,i,s,n,o){const a=s!==void 0?s:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),l=n!==void 0&&n,h={event:new aj(r,i,a,o||this._activeKeyModifiers,l),priorityIndex:t};this._currentPropagation?this._currentPropagation.events.push(h):this._doNewPropagation(h)}_doNewPropagation(t){this._currentPropagation={events:new Hp,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:t.event.timestamp},this._currentPropagation.events.push(t),this._continuePropagation()}_continuePropagation(){var r,i,s;this._paused=!1;const t=this._currentPropagation;if(t){for(;t.events.length>0;){const{event:n,priorityIndex:o}=t.events.pop(),a=(r=n.data)==null?void 0:r.eventId;if(!(a!=null&&this._stoppedPropagationEventIds.has(a)))for(t.currentHandler=this._handlersPriority[o];t.currentHandler;){if(t.currentHandler.removed)t.needsHandlerGarbageCollect=!0;else{if(t.currentHandler.active&&!n.shouldStopPropagation()&&((s=(i=t.currentHandler).eventCallback)==null||s.call(i,n)),n.shouldStopPropagation()){a!=null&&this._stoppedPropagationEventIds.add(a);break}if(n.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:n,priorityIndex:t.currentHandler.priorityIndex+1})}t.currentHandler=this._handlersPriority[t.currentHandler.priorityIndex+1]}}t.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(t){const r=new Hp;r.push(t);const i=this._currentPropagation;if(i){for(;i.events.length;)r.push(i.events.pop());i.events=r,i.currentHandler=null,this._paused=!0}}_compareHandlerPriority(t,r){if(t.handler.hasSideEffects!==r.handler.hasSideEffects)return t.handler.hasSideEffects?1:-1;if(t.groupPriority!==r.groupPriority)return t.groupPriority>r.groupPriority?-1:1;for(const i of t.handler.incomingEventMatches)for(const s of r.handler.incomingEventMatches){if(i.eventType!==s.eventType)continue;const n=i.keyModifiers.filter(o=>s.keyModifiers.includes(o));if(n.length===i.keyModifiers.length!=(n.length===s.keyModifiers.length))return i.keyModifiers.length>s.keyModifiers.length?-1:1}return t.priorityIndex>r.priorityIndex?-1:1}_sortHandlersPriority(t){const r=[];for(const i of t){let s=0;for(;s<r.length&&this._compareHandlerPriority(i,r[s])>=0;)s++;r.splice(s,0,i)}return r}get debug(){const t=r=>{const i=this._setPointerCapture;this._setPointerCapture=()=>{},r(),this._setPointerCapture=i};return{injectEvent:(r,i)=>{t(()=>this._onEventReceived(r,i))},disablePointerCapture:t}}};u([d({readOnly:!0})],Mr.prototype,"hasPendingInputs",null),u([d({constructOnly:!0})],Mr.prototype,"eventSource",void 0),u([d({constructOnly:!0})],Mr.prototype,"recognizers",void 0),u([d()],Mr.prototype,"_latestPointerType",void 0),u([d()],Mr.prototype,"latestPointerType",null),u([d()],Mr.prototype,"multiTouchActive",null),u([d({readOnly:!0})],Mr.prototype,"latestPointerLocation",void 0),u([d()],Mr.prototype,"_paused",void 0),u([d({readOnly:!0})],Mr.prototype,"updating",null),Mr=u([$("esri.views.input.InputManager")],Mr);let aj=class{constructor(t,r,i,s,n){this.type=t,this.data=r,this.timestamp=i,this.modifiers=s,this.cancelable=n,this._propagationState=dn.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=dn.STOPPED}shouldStopPropagation(){return!!(this._propagationState&dn.STOPPED)}async(t){this._propagationState|=dn.PAUSED;const r=(i,s)=>{this._propagationState&=~dn.PAUSED;const n=this._resumeCallback;if(this._resumeCallback=null,n&&n(),s)throw i;return i};return(typeof t=="function"?t():t).then(i=>r(i,!1),i=>r(i,!0))}shouldPausePropagation(t){return!!(this._propagationState&dn.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}};var dn;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(dn||(dn={}));const bn={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let lj=class{};const cj=lj;function Vs(e){return e!=null&&"open"in e&&"declaredClass"in e}function Z2(e){return e!=null&&"declaredClass"in e&&"dockOptions"in e}const uj=e=>{let t=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([se(()=>[this.ui,this.popup],([r,i],s)=>{const n="popup",o="manual";if(s){const[a,l]=s;a&&Vs(l)&&(l.view=null,Z2(l)&&a.remove(l,n))}r&&Vs(i)&&(i.view=this,Z2(i)&&r.add(i,{key:n,position:o,internal:!0}))},Nt),this.on("click",r=>{this.popup&&this.popupEnabled&&(r.pointerType!=="mouse"||r.button===0)&&(Vs(this.popup)?this.popup.viewModel.handleViewClick(r):r.async(async()=>{await this.setupPopup(),Vs(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(r)}))},bn.WIDGET)]),Fv(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{j(()=>import("./Popup-CGnzxbZB.js"),__vite__mapDeps([160,1,161,9,162,163,164,165,118,90,128,166,167,168,101,55,169,10,51,49,170,125,26,27,99,93,24,25,28,171,172,173,81,79,80,37,40,82,174,175,48,176,5,13,177,178,179,180,181,182,11,183,184,185,186,187,188,189,103,190,12,191,192,14,15,193,194,195,196,197,198,199,20,200,152,201,202]),import.meta.url)})}destroy(){this.destroyed||this.closePopup()}async openPopup(r){if(Vs(this.popup))return this.popup.open(r);try{if(await this.setupPopup(),!this.popup)return void V.getLogger(this).error(new k("view:null-popup","Popup is null and can't be opened"));this.popup.open(r)}catch{}}closePopup(){var r;(r=this._popupSetupTask)==null||r.abort(),Vs(this.popup)&&this.popup.close()}async fetchPopupFeatures(r,i){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(r,i),i)}async setupPopup(){var r;if((r=this._popupSetupTask)==null||r.abort(),this.popup&&!Vs(this.popup))return this._popupSetupTask=Ev(async i=>{const{default:s}=await j(()=>import("./Popup-CGnzxbZB.js"),__vite__mapDeps([160,1,161,9,162,163,164,165,118,90,128,166,167,168,101,55,169,10,51,49,170,125,26,27,99,93,24,25,28,171,172,173,81,79,80,37,40,82,174,175,48,176,5,13,177,178,179,180,181,182,11,183,184,185,186,187,188,189,103,190,12,191,192,14,15,193,194,195,196,197,198,199,20,200,152,201,202]),import.meta.url);if(Qe(i),!this.popup||Vs(this.popup))return;const n=this.popup;delete n.open,delete n.close,this.popup=new s(n)}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:r,hits:i},s){const n=[],o=[];let a=!1;const l=Ok(s,I("popup-view-fetch-timeout")??dj),h=m=>{const y=new hj(m);return o.push(y),n.push(y.promise),y},p=m=>{const y=o.at(-1);return y&&y.layerView===m&&!a?y:h(m)};for(const m of i)"graphic"in m?(p(m.layerView).graphics.push(m.graphic),a=!1):(n.push(m.layerView.fetchPopupFeaturesAtLocation(m.mapPoint,l)),a=!0);o.map(m=>m.resolve(l));const f=Ik(n).then(m=>m.filter(y=>!!y).flat());return{pendingFeatures:n,allGraphicsPromise:f,location:r}}async _getPopupHits(r,i){const{hits:s,location:n}=await this.popupHitTest(r);Qe(i);const o=[];for(const a of s)if("graphic"in a){if(this._isValidPopupGraphic(a.graphic,i)){const l=this._isValidPopupGraphicsLayerView(a.layerView)?a.layerView:void 0;o.push({graphic:a.graphic,layerView:l})}}else this._isValidPopupLocationLayerView(a.layerView)&&o.push({mapPoint:a.mapPoint,layerView:a.layerView});return{hits:o,location:n}}_isValidPopupGraphic(r,i){return r&&!!r.getEffectivePopupTemplate(i==null?void 0:i.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(r){return!r||(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesFromGraphics"in r}_isValidPopupLocationLayerView(r){return(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesAtLocation"in r}};return u([d()],t.prototype,"popup",void 0),u([d()],t.prototype,"popupEnabled",void 0),t=u([$("esri.views.PopupView")],t),t};let hj=class{constructor(t){this.layerView=t,this._resolver=jr(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(t){const{layerView:r,graphics:i,_resolver:s}=this;if(!r)return s.resolve(i),s.promise;let n;return r.fetchPopupFeaturesFromGraphics(i,t).catch(o=>(n=o,null)).then(o=>{o?s.resolve(o):s.reject(n)}),s.promise}};const dj=5e3;let cu=class extends K{constructor(t){super(t),this.addHandles([this.on("before-add",r=>{r.item==null&&r.preventDefault()}),this.on("after-add",r=>this._own(r.item)),this.on("after-remove",r=>this._release(r.item))])}get owner(){return this._get("owner")}set owner(t){t!==this._get("owner")&&(this._releaseAll(),this._set("owner",t),this._ownAll())}_ownAll(){for(const t of this.items)this._own(t)}_releaseAll(){for(const t of this.items)this._release(t)}_createNewInstance(t){return this.itemType?new(K.ofType(this.itemType.Type))(t):new K(t)}};function Q0(e,t){return{type:e,cast:XE,set(r){const i=Tn(r,this._get(t),e);i.owner=this,this._set(t,i)}}}u([d()],cu.prototype,"owner",null),cu=u([$("esri.core.support.OwningCollection")],cu);var gc;const Jp=Wt()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),NA=Jp.jsonValues.slice();CC(NA,"orthometric");const uu=Wt()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Jr=gc=class extends W{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return Jp.write(e,t,r)}readHeightModel(e,t,r){return Jp.read(e)||(r!=null&&r.messages&&r.messages.push(pj(e,{context:r})),null)}readHeightUnit(e,t,r){return uu.read(e)||(r!=null&&r.messages&&r.messages.push(Y2(e,{context:r})),null)}readHeightUnitService(e,t,r){return m3(e)||uu.read(e)||(r!=null&&r.messages&&r.messages.push(Y2(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new gc({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=y3(t);return new gc({heightModel:e.heightModel,heightUnit:r??void 0,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new gc;return t.read(e,{origin:"web-scene"}),t}};function Y2(e,t){return new Os("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function pj(e,t){return new Os("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}u([d({type:Jp.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:NA,default:"ellipsoidal"}}}})],Jr.prototype,"heightModel",void 0),u([pe("web-scene","heightModel")],Jr.prototype,"writeHeightModel",null),u([ve(["web-scene","service"],"heightModel")],Jr.prototype,"readHeightModel",null),u([d({type:uu.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:uu.jsonValues,write:uu.write}}}})],Jr.prototype,"heightUnit",void 0),u([ve("web-scene","heightUnit")],Jr.prototype,"readHeightUnit",null),u([ve("service","heightUnit")],Jr.prototype,"readHeightUnitService",null),u([d({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Jr.prototype,"vertCRS",void 0),u([ve("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Jr.prototype,"readVertCRS",null),Jr=gc=u([$("esri.geometry.HeightModelInfo")],Jr);const v_=Jr;let Xp=class extends cu{constructor(t){super(t),this.addHandles(this.on("before-add",r=>{r.item!=null&&r.item.parent===this.owner&&(V.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),r.preventDefault())}))}_own(t){t.parent=this.owner}_release(t){t.parent=null}};Xp=u([$("esri.support.AnalysesCollection")],Xp);async function fj(e,t){const{WhereClause:r}=await j(()=>import("./WhereClause-CdjqOpWH.js").then(i=>i.W),__vite__mapDeps([47,48,49]),import.meta.url);return r.create(e,{fieldsIndex:t})}function Nte(e,t){return e==="1=1"?t??e:t==="1=1"?e??t:e!=null&&e!==""?t!=null&&t!==""?`(${e}) AND (${t})`:e:t}function __(e){return typeof e=="string"||e instanceof String}var al;(function(e){e.HM="HH:mm",e.HMS="HH:mm:ss",e.HMS_MS="HH:mm:ss.SSS"})(al||(al={}));const mj=[al.HMS_MS,al.HMS,al.HM,"TT"],yj="yyyy-MM-dd";al.HMS;function J2(e){if(!e||!__(e))return null;const t=te.fromFormat(e,yj);return t.isValid?t:null}function X2(e){return e&&__(e)?QC(mj,t=>{const r=te.fromFormat(e,t);return r.isValid?r:null})??null:null}function K2(e){if(!e||!__(e))return null;const t=te.fromISO(e);return t.isValid?t:null}var $l;(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})($l||($l={}));const gj=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function vj(e){return e!=null&&gj.has(e.type)}function LA(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function DA(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function FA(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function _j(e,t,r){const i=e==null?void 0:e.domain;if(!i)return null;switch(i.type){case"range":{const{min:s,max:n}=wj(e);if(s!=null&&+t<s||n!=null&&+t>n)return $l.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(i.codedValues==null||i.codedValues.every(s=>s==null||s.code!==t))return $l.INVALID_CODED_VALUE}return null}function wj(e,t){const r=e==null?void 0:e.domain;if(!r||r.type!=="range")return;const i="range"in r?r.range[0]:r.minValue,s="range"in r?r.range[1]:r.maxValue,n=vj(e);return LA(e)||FA(e)||DA(e)?{...bj(e,s,i),isInteger:n}:{min:i!=null&&typeof i=="number"?i:null,max:s!=null&&typeof s=="number"?s:null,rawMin:i,rawMax:s,isInteger:n}}function bj(e,t,r){var i,s,n,o,a,l;return LA(e)?{min:(i=J2(r))==null?void 0:i.toMillis(),max:(s=J2(t))==null?void 0:s.toMillis(),rawMin:r,rawMax:t}:FA(e)?{min:(n=X2(r))==null?void 0:n.toMillis(),max:(o=X2(t))==null?void 0:o.toMillis(),rawMin:r,rawMax:t}:DA(e)?{min:(a=K2(r))==null?void 0:a.toMillis(),max:(l=K2(t))==null?void 0:l.toMillis(),rawMin:r,rawMax:t}:{max:null,min:null}}const Sj=()=>V.getLogger("esri.support.arcadeOnDemand");let sy;function UA(){return sy||(sy=(async()=>{const e=await j(()=>import("./arcadeUtils-en8esx6j.js").then(t=>t.i),__vite__mapDeps([203,204,48,49,205,175,52,39,37,40,51]),import.meta.url);return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),sy}const Lte=(e,t,r)=>jA.create(e,t,r,null,["$feature","$view"],[]),Dte=(e,t,r,i)=>jA.create(e,t,r,i,["$feature","$view"],[]);let jA=class GA{constructor(t,r,i,s,n,o,a){this.services=null,this.script=t,this.evaluate=s;const l=Array.isArray(o)?o:o==null?void 0:o.fields;this.fields=l??[],this._syntaxTree=i,this._arcade=r,this._arcadeFeature=n,this._spatialReference=a,this._referencesGeometry=r.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,r,i,s,n,o){const{arcade:a,Feature:l,Dictionary:h}=await UA(),p=r instanceof de?r:de.fromJSON(r);let f;try{f=a.parseScript(t,o)}catch(F){return Sj().error(new k("arcade-bad-expression","Failed to parse arcade script",{script:t,error:F})),null}const m=n.reduce((F,z)=>({...F,[z]:null}),{});let y=null;s!=null&&(y=new h(s),y.immutable=!0,m.$config=null);const v=a.scriptUsesGeometryEngine(f),_=v&&a.enableGeometrySupport(),w=a.scriptUsesFeatureSet(f)&&a.enableFeatureSetSupport(),S=a.scriptIsAsync(f),E=S&&a.enableAsyncSupport(),x={vars:m,spatialReference:p,useAsync:!!E};await Promise.all([_,w,E]);const A=new Set;await a.loadDependentModules(A,f,null,S,v);const P=new h;P.immutable=!1,P.setField("scale",0);const C=a.compileScript(f,x),U=(F,z)=>{var ee;const q=(ee=F.$view)==null?void 0:ee.timeZone;return"$view"in F&&F.$view&&(P.setField("scale",typeof F.$view=="object"&&"scale"in F.$view?F.$view.scale:void 0),F.$view=P),y&&(F.$config=y),C({vars:F,spatialReference:p,services:z,timeZone:q})};return new GA(t,a,f,U,new l,i,p)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const $j=/^([0-9_])/,Tj=/[^a-z0-9_\u0080-\uffff]+/gi;function Fte(e){return e==null?null:e.trim().replaceAll(Tj,"_").replace($j,"F$1")||null}const Ej=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],Mj=["field","normalizationField"];function Ute(e,t){if(e!=null&&t!=null){for(const r of Array.isArray(e)?e:[e])if(Q2(Ej,r,t),"visualVariables"in r&&r.visualVariables)for(const i of r.visualVariables)Q2(Mj,i,t)}}function Q2(e,t,r){if(e)for(const i of e){const s=Sf(i,t),n=s&&typeof s!="function"&&r.get(s);n&&Ko(i,n.name,t)}}function jte(e,t){var r;if(e!=null&&((r=t==null?void 0:t.fields)!=null&&r.length))if("startField"in e){const i=t.get(e.startField),s=t.get(e.endField);e.startField=(i==null?void 0:i.name)??null,e.endField=(s==null?void 0:s.name)??null}else{const i=t.get(e.startTimeField),s=t.get(e.endTimeField);e.startTimeField=(i==null?void 0:i.name)??null,e.endTimeField=(s==null?void 0:s.name)??null}}const ny=new Set;function w_(e,t){return e&&t?(ny.clear(),ku(ny,e,t),Array.from(ny).sort()):[]}function ku(e,t,r){var i;if(r)if((i=t==null?void 0:t.fields)!=null&&i.length)if(r.includes("*"))for(const{name:s}of t.fields)e.add(s);else for(const s of r)tm(e,t,s);else{if(r.includes("*"))return e.clear(),void e.add("*");for(const s of r)s!=null&&e.add(s)}}function tm(e,t,r){if(typeof r=="string")if(t){const i=t.get(r);i&&e.add(i.name)}else e.add(r)}function Gte(e,t){return t==null||e==null?[]:t.includes("*")?(e.fields??[]).map(r=>r.name):t}function Vte(e,t,r=1){if(!t||!e)return[];if(t.includes("*"))return["*"];const i=w_(e,t);return i.length/e.fields.length>=r?["*"]:i}async function kn(e,t,r){var n;if(!r)return;const{arcadeUtils:i}=await UA(),s=i.extractFieldNames(r,(n=t==null?void 0:t.fields)==null?void 0:n.map(o=>o.name));for(const o of s)tm(e,t,o)}async function VA(e,t,r){if(r&&r!=="1=1"){const i=await fj(r,t);if(!i.isStandardized)throw new k("fieldUtils:collectFilterFields","Where clause is not standardized",{where:r});ku(e,t,i.fieldNames)}}function zte({displayField:e,fields:t}){return e||(t!=null&&t.length?oy(t,"name-or-title")||oy(t,"unique-identifier")||oy(t,"type-or-category")||xj(t):null)}function xj(e){for(const t of e){if(!(t!=null&&t.name))continue;const r=t.name.toLowerCase();if(r.includes("name")||r.includes("title"))return t.name}return null}function oy(e,t){for(const r of e)if(r!=null&&r.valueType&&r.valueType===t)return r.name;return null}async function Bte(e,t){var i;if(!t)return;const r=(i=t.elevationInfo)==null?void 0:i.featureExpressionInfo;return r?r.collectRequiredFields(e,t.fieldsIndex):void 0}function Aj(e,t,r){r.onStatisticExpression?kn(e,t,r.onStatisticExpression.expression):e.add(r.onStatisticField)}async function Hte(e,t,r){if(!t||!r||!("fields"in r))return;const i=[],s=r.popupTemplate;i.push(Ij(e,t,s)),r.fields&&i.push(...r.fields.map(async n=>Aj(e,t.fieldsIndex,n))),await Promise.all(i)}async function Ij(e,t,r){const i=[];r!=null&&r.expressionInfos&&i.push(...r.expressionInfos.map(n=>kn(e,t.fieldsIndex,n.expression)));const s=r==null?void 0:r.content;if(Array.isArray(s))for(const n of s)n.type==="expression"&&n.expressionInfo&&i.push(kn(e,t.fieldsIndex,n.expressionInfo.expression));await Promise.all(i)}async function Wte(e,t,r){t&&(t.timeInfo&&(r!=null&&r.timeExtent)&&ku(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&ku(e,t.fieldsIndex,[t.floorInfo.floorField]),(r==null?void 0:r.where)!=null&&await VA(e,t.fieldsIndex,r.where))}async function qte(e,t,r){t&&r&&await Promise.all(r.map(i=>Oj(e,t,i)))}async function Oj(e,t,r){t&&r&&(r.valueExpression?await kn(e,t.fieldsIndex,r.valueExpression):r.field&&tm(e,t.fieldsIndex,r.field))}function Zte(e){return e?w_(e.fieldsIndex,zA(e)):[]}function Pj(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?w_(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}const Rj=new Set(["oid","global-id","guid"]),Cj=new Set(["oid","global-id"]),kj=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/perimeter/i,/objectid/i,/_i$/i];function Nj(e){const t=new Set;BA(e).forEach(i=>t.add(i)),Pj(e).forEach(i=>t.add(i.toLowerCase()));const r=e&&"infoFor3D"in e?e.infoFor3D:void 0;return r&&(Object.values(r.assetMapFieldRoles).forEach(i=>t.add(i.toLowerCase())),Object.values(r.transformFieldRoles).forEach(i=>t.add(i.toLowerCase()))),Array.from(t)}function zA(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;if(!t)return[];const{creationDateField:r,creatorField:i,editDateField:s,editorField:n}=t;return[r,i,s,n].filter(Boolean)}function BA(e){return zA(e).map(t=>t.toLowerCase())}function Yte(e,t){var r;return e.editable&&!Rj.has(e.type)&&!BA(t).includes(((r=e.name)==null?void 0:r.toLowerCase())??"")}function Jte(e,t){var i;const r=((i=e.name)==null?void 0:i.toLowerCase())??"";return!((t==null?void 0:t.objectIdField)!=null&&r===t.objectIdField.toLowerCase()||(t==null?void 0:t.globalIdField)!=null&&r===t.globalIdField.toLowerCase()||Nj(t).includes(r)||Cj.has(e.type)||kj.some(s=>s.test(r)))}async function Xte(e,t){const{labelingInfo:r,fieldsIndex:i}=t;r!=null&&r.length&&await Promise.all(r.map(s=>Lj(e,i,s)))}async function Lj(e,t,r){if(!r)return;const i=r.getLabelExpression(),s=r.where;if(i.type==="arcade")await kn(e,t,i.expression);else{const n=i.expression.match(/{[^}]*}/g);n&&n.forEach(o=>{tm(e,t,o.slice(1,-1))})}await VA(e,t,s)}function Kte(e){const t=e.defaultValue;return t!==void 0&&qA(e,t)?t:e.nullable?null:void 0}function Qte(e){const t=typeof e=="string"?{type:e}:e;return Zj(t)?255:t.type==="esriFieldTypeDate"||t.type==="date"?8:void 0}function HA(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function Dj(e){return e===null||HA(e)}function Fj(e){return e===null||Number.isInteger(e)}function WA(e){return e!=null&&typeof e=="string"}function Uj(e){return e===null||WA(e)}function jj(){return!0}function qA(e,t){let r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":r=e.nullable?Fj:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?Dj:HA;break;case"string":case"esriFieldTypeString":r=e.nullable?Uj:WA;break;default:r=jj}return arguments.length===1?r:r(t)}const Gj=["integer","small-integer","big-integer"],Vj=["single","double"],zj=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],Bj=["esriFieldTypeSingle","esriFieldTypeDouble"],ZA=new Set([...Gj,...zj]),Hj=new Set([...Vj,...Bj]),Wj=lE(ZA,Hj);function ere(e){return e!=null&&ZA.has(e.type)}function qj(e){return e!=null&&Wj.has(e.type)}function Zj(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function tre(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}function rre(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function ire(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function sre(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function nre(e){return e!=null&&(e.type==="oid"||e.type==="esriFieldTypeOID")}function ore(e){return e!=null&&(e.type==="global-id"||e.type==="esriFieldTypeGlobalID")}function are(e,t){return Yj(e,t)===null}var Kp,Qp;function lre(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function Yj(e,t){return e==null||e.nullable&&t===null?null:qj(e)&&!Jj(e.type,Number(t))?Kp.OUT_OF_RANGE:qA(e,t)?e.domain?_j(e,t):null:Qp.INVALID_TYPE}function Jj(e,t){const r=typeof e=="string"?YA(e):e;if(!r)return!1;const i=r.min,s=r.max;return r.isInteger?Number.isInteger(t)&&t>=i&&t<=s:t>=i&&t<=s}function YA(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return Xj;case"esriFieldTypeInteger":case"integer":return Kj;case"esriFieldTypeBigInteger":case"big-integer":return Qj;case"esriFieldTypeSingle":case"single":return eG;case"esriFieldTypeDouble":case"double":return tG}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(Kp||(Kp={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(Qp||(Qp={}));const Xj={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},Kj={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},Qj={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},eG={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},tG={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function cre(e,t,r){switch(e){case $l.INVALID_CODED_VALUE:return`Value ${r} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case $l.VALUE_OUT_OF_RANGE:return`Value ${r} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Qp.INVALID_TYPE:return`Value ${r} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case Kp.OUT_OF_RANGE:{const{min:i,max:s}=YA(t.type);return`Value ${r} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${i} to ${s}`}}}function ure(e,t){return!rG(e,t,null)}function rG(e,t,r){if(!(t!=null&&t.attributes)||!e)return!0;const i=new Set(Object.keys(t.attributes));let s=!1;for(const n of e)if(!i.has(n)&&(s=!0,r==null))break;return s}function hre(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}function iG(e){const t=e==null?void 0:e.match(/{[^}]+}/g);return t?t.map(r=>r.slice(1,-1).split(":")[0].trim()):[]}let Ld=class extends W{constructor(t){super(t),this.type=null}};u([d({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],Ld.prototype,"type",void 0),Ld=u([$("esri.popup.content.Content")],Ld);const Rs=Ld;var eg;let ro=eg=class extends Rs{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new eg({description:this.description,displayType:this.displayType,title:this.title})}};u([d({type:String,json:{write:!0}})],ro.prototype,"description",void 0),u([d({type:["auto","preview","list"],json:{write:!0}})],ro.prototype,"displayType",void 0),u([d({type:String,json:{write:!0}})],ro.prototype,"title",void 0),u([d({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],ro.prototype,"type",void 0),ro=eg=u([$("esri.popup.content.AttachmentsContent")],ro);const Nu=ro;var tg;let io=tg=class extends Rs{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new tg({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?N(this.outFields):null})}};u([d()],io.prototype,"creator",void 0),u([d()],io.prototype,"destroyer",void 0),u([d()],io.prototype,"outFields",void 0),u([d({type:["custom"],readOnly:!0})],io.prototype,"type",void 0),io=tg=u([$("esri.popup.content.CustomContent")],io);const sG=io;var rg;let $a=rg=class extends W{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new rg({title:this.title,expression:this.expression})}};u([d({type:String,json:{write:!0}})],$a.prototype,"title",void 0),u([d({type:String,json:{write:!0}})],$a.prototype,"expression",void 0),u([d({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],$a.prototype,"returnType",void 0),$a=rg=u([$("esri.popup.ElementExpressionInfo")],$a);const nG=$a;var ig;let vc=ig=class extends Rs{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new ig({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};u([d({type:nG,json:{write:!0}})],vc.prototype,"expressionInfo",void 0),u([d({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],vc.prototype,"type",void 0),vc=ig=u([$("esri.popup.content.ExpressionContent")],vc);const rm=vc;let Ta=class extends Gr(W){constructor(t){super(t),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};u([re(d9)],Ta.prototype,"dateFormat",void 0),u([d({type:Boolean,json:{write:!0}})],Ta.prototype,"digitSeparator",void 0),u([d({type:ke,json:{write:!0}})],Ta.prototype,"places",void 0),Ta=u([$("esri.popup.support.FieldInfoFormat")],Ta);const oG=Ta;var sg;let Xr=sg=class extends W{constructor(e){super(e),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){var e;return new sg({fieldName:this.fieldName,format:(e=this.format)==null?void 0:e.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};u([d({type:String,json:{write:!0}})],Xr.prototype,"fieldName",void 0),u([d({type:oG,json:{write:!0}})],Xr.prototype,"format",void 0),u([d({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],Xr.prototype,"isEditable",void 0),u([d({type:String,json:{write:!0}})],Xr.prototype,"label",void 0),u([re(new ut({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Xr.prototype,"stringFieldOption",void 0),u([d({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Xr.prototype,"statisticType",void 0),u([d({type:String,json:{write:!0}})],Xr.prototype,"tooltip",void 0),u([d({type:Boolean,json:{write:!0}})],Xr.prototype,"visible",void 0),Xr=sg=u([$("esri.popup.FieldInfo")],Xr);const JA=Xr;var ng;let os=ng=class extends Rs{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(r=>r.toJSON())}clone(){return new ng(N({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};u([d({type:Object,json:{write:!0}})],os.prototype,"attributes",void 0),u([d({type:String,json:{write:!0}})],os.prototype,"description",void 0),u([d({type:[JA]})],os.prototype,"fieldInfos",void 0),u([pe("fieldInfos")],os.prototype,"writeFieldInfos",null),u([d({type:String,json:{write:!0}})],os.prototype,"title",void 0),u([d({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],os.prototype,"type",void 0),os=ng=u([$("esri.popup.content.FieldsContent")],os);const Lu=os;let so=class extends W{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null}};u([d({type:String,json:{write:!0}})],so.prototype,"altText",void 0),u([d({type:String,json:{write:!0}})],so.prototype,"caption",void 0),u([d({type:String,json:{write:!0}})],so.prototype,"title",void 0),u([d({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],so.prototype,"type",void 0),so=u([$("esri.popup.content.mixins.MediaInfo")],so);const b_=so;var og;let no=og=class extends Y{constructor(e){super(e),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){var e;return new og({color:(e=this.color)==null?void 0:e.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};u([d()],no.prototype,"color",void 0),u([d()],no.prototype,"fieldName",void 0),u([d()],no.prototype,"tooltip",void 0),u([d()],no.prototype,"value",void 0),no=og=u([$("esri.popup.content.support.ChartMediaInfoValueSeries")],no);const aG=no;var ag;let Zs=ag=class extends W{constructor(e){super(e),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new ag({colors:N(this.colors),fields:N(this.fields),normalizeField:this.normalizeField,series:N(this.series),tooltipField:this.tooltipField})}};u([d({type:[fe],json:{type:[[ke]],write:!0}})],Zs.prototype,"colors",void 0),u([d({type:[String],json:{write:!0}})],Zs.prototype,"fields",void 0),u([d({type:String,json:{write:!0}})],Zs.prototype,"normalizeField",void 0),u([d({type:[aG],json:{read:!1}})],Zs.prototype,"series",void 0),u([d({type:String,json:{write:!0}})],Zs.prototype,"tooltipField",void 0),Zs=ag=u([$("esri.popup.content.support.ChartMediaInfoValue")],Zs);const lG=Zs;let _c=class extends b_{constructor(t){super(t),this.type=null,this.value=void 0}};u([d({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],_c.prototype,"type",void 0),u([d({type:lG,json:{write:!0}})],_c.prototype,"value",void 0),_c=u([$("esri.popup.content.mixins.ChartMediaInfo")],_c);const im=_c,sm=Wt()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var lg;let Dd=lg=class extends im{constructor(e){super(e),this.type="bar-chart"}clone(){var e;return new lg({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};u([d({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:sm.write}})],Dd.prototype,"type",void 0),Dd=lg=u([$("esri.popup.content.BarChartMediaInfo")],Dd);const XA=Dd;var cg;let Fd=cg=class extends im{constructor(e){super(e),this.type="column-chart"}clone(){var e;return new cg({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};u([d({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:sm.write}})],Fd.prototype,"type",void 0),Fd=cg=u([$("esri.popup.content.ColumnChartMediaInfo")],Fd);const KA=Fd;var ug;let wc=ug=class extends W{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new ug({linkURL:this.linkURL,sourceURL:this.sourceURL})}};u([d({type:String,json:{write:!0}})],wc.prototype,"linkURL",void 0),u([d({type:String,json:{write:!0}})],wc.prototype,"sourceURL",void 0),wc=ug=u([$("esri.popup.content.support.ImageMediaInfoValue")],wc);const cG=wc;var hg;let Ea=hg=class extends b_{constructor(e){super(e),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){var e;return new hg({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:(e=this.value)==null?void 0:e.clone()})}};u([d({type:Number,json:{write:!0}})],Ea.prototype,"refreshInterval",void 0),u([d({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],Ea.prototype,"type",void 0),u([d({type:cG,json:{write:!0}})],Ea.prototype,"value",void 0),Ea=hg=u([$("esri.popup.content.ImageMediaInfo")],Ea);const QA=Ea;var dg;let Ud=dg=class extends im{constructor(e){super(e),this.type="line-chart"}clone(){var e;return new dg({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};u([d({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:sm.write}})],Ud.prototype,"type",void 0),Ud=dg=u([$("esri.popup.content.LineChartMediaInfo")],Ud);const eI=Ud;var pg;let jd=pg=class extends im{constructor(e){super(e),this.type="pie-chart"}clone(){var e;return new pg({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};u([d({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:sm.write}})],jd.prototype,"type",void 0),jd=pg=u([$("esri.popup.content.PieChartMediaInfo")],jd);const tI=jd,fg={base:b_,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":XA,"column-chart":KA,"line-chart":eI,"pie-chart":tI,image:QA}};var mg;let Kr=mg=class extends Rs{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?QA.fromJSON(t):t.type==="barchart"?XA.fromJSON(t):t.type==="columnchart"?KA.fromJSON(t):t.type==="linechart"?eI.fromJSON(t):t.type==="piechart"?tI.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(r=>r.toJSON())}clone(){return new mg(N({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};u([d()],Kr.prototype,"activeMediaInfoIndex",void 0),u([d({type:Object,json:{write:!0}})],Kr.prototype,"attributes",void 0),u([d({type:String,json:{write:!0}})],Kr.prototype,"description",void 0),u([d({types:[fg]})],Kr.prototype,"mediaInfos",void 0),u([ve("mediaInfos")],Kr.prototype,"readMediaInfos",null),u([pe("mediaInfos")],Kr.prototype,"writeMediaInfos",null),u([d({type:String,json:{write:!0}})],Kr.prototype,"title",void 0),u([d({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],Kr.prototype,"type",void 0),Kr=mg=u([$("esri.popup.content.MediaContent")],Kr);const Du=Kr;var yg;let bc=yg=class extends W{constructor(e){super(e),this.field=null,this.order=null}clone(){return new yg({field:this.field,order:this.order})}};u([d({type:String,json:{write:!0}})],bc.prototype,"field",void 0),u([d({type:["asc","desc"],json:{write:!0}})],bc.prototype,"order",void 0),bc=yg=u([$("esri.popup.support.RelatedRecordsInfoFieldOrder")],bc);const rI=bc;let $i=class extends Gr(Rs){constructor(t){super(t),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};u([d({type:String,json:{write:!0}})],$i.prototype,"description",void 0),u([d({type:Number,json:{type:ke,write:!0}})],$i.prototype,"displayCount",void 0),u([d({type:["list"],json:{write:!0}})],$i.prototype,"displayType",void 0),u([d({type:[rI],json:{write:!0}})],$i.prototype,"orderByFields",void 0),u([d({type:Number,json:{type:ke,write:!0}})],$i.prototype,"relationshipId",void 0),u([d({type:String,json:{write:!0}})],$i.prototype,"title",void 0),u([d({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],$i.prototype,"type",void 0),$i=u([$("esri.popup.content.RelationshipContent")],$i);const Fu=$i;var gg;let Sc=gg=class extends Rs{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new gg({text:this.text})}};u([d({type:String,json:{write:!0}})],Sc.prototype,"text",void 0),u([d({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Sc.prototype,"type",void 0),Sc=gg=u([$("esri.popup.content.TextContent")],Sc);const Uu=Sc;let Ti=class extends Gr(W){constructor(t){super(t),this.title=null,this.description=null,this.type=null,this.open=!1,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};u([d({type:String,json:{write:!0}})],Ti.prototype,"title",void 0),u([d({type:String,json:{write:!0}})],Ti.prototype,"description",void 0),u([d({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],Ti.prototype,"type",void 0),u([d({type:Boolean,json:{read:!1}})],Ti.prototype,"open",void 0),u([d({type:Number,json:{type:ke,write:!0}})],Ti.prototype,"associatedNetworkSourceId",void 0),u([d({type:Number,json:{type:ke,write:!0}})],Ti.prototype,"associatedAssetGroup",void 0),u([d({type:Number,json:{type:ke,write:!0}})],Ti.prototype,"associatedAssetType",void 0),Ti=u([$("esri.popup.support.UtilityNetworkAssociationType")],Ti);const uG=Ti;let oo=class extends Gr(Rs){constructor(t){super(t),this.description=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};u([d({type:String,json:{write:!0}})],oo.prototype,"description",void 0),u([d({type:String,json:{write:!0}})],oo.prototype,"title",void 0),u([d({type:[uG],json:{write:!0}})],oo.prototype,"associationTypes",void 0),u([re({utilityNetworkAssociations:"utility-network-associations"})],oo.prototype,"type",void 0),oo=u([$("esri.popup.content.UtilityNetworkAssociationsContent")],oo);const S_=oo,hG={base:null,key:"type",typeMap:{attachment:Nu,media:Du,text:Uu,expression:rm,field:Lu,relationship:Fu,utilityNetworkAssociations:S_}},dG={base:null,key:"type",typeMap:{attachment:Nu,media:Du,text:Uu,expression:rm,field:Lu,relationship:Fu}};var vg;let ao=vg=class extends W{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new vg({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};u([d({type:String,json:{write:!0}})],ao.prototype,"name",void 0),u([d({type:String,json:{write:!0}})],ao.prototype,"title",void 0),u([d({type:String,json:{write:!0}})],ao.prototype,"expression",void 0),u([d({type:["string","number"],json:{write:!0}})],ao.prototype,"returnType",void 0),ao=vg=u([$("esri.popup.ExpressionInfo")],ao);const pG=ao;var _g;let $c=_g=class extends W{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new _g({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};u([d({type:Boolean,json:{write:!0}})],$c.prototype,"returnTopmostRaster",void 0),u([d({type:Boolean,json:{write:!0}})],$c.prototype,"showNoDataRecords",void 0),$c=_g=u([$("esri.popup.LayerOptions")],$c);const fG=$c;var wg;let Tc=wg=class extends W{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new wg({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?N(this.orderByFields):null})}};u([d({type:Boolean,json:{write:!0}})],Tc.prototype,"showRelatedRecords",void 0),u([d({type:[rI],json:{write:!0}})],Tc.prototype,"orderByFields",void 0),Tc=wg=u([$("esri.popup.RelatedRecordsInfo")],Tc);const eS=Tc;var bg;let xr=bg=class extends Yv(Y){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new bg({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};u([d()],xr.prototype,"active",void 0),u([d()],xr.prototype,"className",void 0),u([d()],xr.prototype,"disabled",void 0),u([d()],xr.prototype,"icon",void 0),u([d()],xr.prototype,"id",void 0),u([d()],xr.prototype,"indicator",void 0),u([d()],xr.prototype,"title",void 0),u([d()],xr.prototype,"type",void 0),u([d()],xr.prototype,"visible",void 0),xr=bg=u([$("esri.support.actions.ActionBase")],xr);const $_=xr;var Sg;let Gd=Sg=class extends $_{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new Sg({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};u([d()],Gd.prototype,"image",void 0),Gd=Sg=u([$("esri.support.actions.ActionButton")],Gd);const mG=Gd;var $g;let Ec=$g=class extends $_{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new $g({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};u([d()],Ec.prototype,"image",void 0),u([d()],Ec.prototype,"value",void 0),Ec=$g=u([$("esri.support.actions.ActionToggle")],Ec);const yG=Ec,Kl="relationships/",tS="expression/",gG=K.ofType({key:"type",defaultKeyValue:"button",base:$_,typeMap:{button:mG,toggle:yG}}),vG={base:Rs,key:"type",typeMap:{media:Du,custom:sG,text:Uu,attachments:Nu,fields:Lu,expression:rm,relationship:Fu,utilityNetworkAssociations:S_}},iI=new Set(["attachments","fields","media","text","expression","relationship"]),_G=new Set([...iI,"utility-network-associations"]);let tt=class extends Gr(W){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(t){return Array.isArray(t)?t.map(r=>Is(vG,r)):typeof t=="string"||typeof t=="function"||t instanceof HTMLElement||Zi(t)?t:(V.getLogger(this).error("content error","unsupported content value",{value:t}),null)}readContent(t,r){const{popupElements:i}=r;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(r.description,r.mediaInfos,i):this._readPopupInfo(r)}writeWebSceneContent(t,r,i,s){this._writePopupTemplateContent(t,r,s)}writeWebMapContent(t,r,i,s){this._writePopupTemplateContent(t,r,s)}writeFieldInfos(t,r,i,s){const{content:n}=this,o=Array.isArray(n)?n:null;if(t){const a=o?o.filter(h=>h.type==="fields"):[],l=a.length&&a.every(h=>{var p;return(p=h.fieldInfos)==null?void 0:p.length});r.fieldInfos=t.filter(Boolean).map(h=>{const p=h.toJSON(s);return l&&(p.visible=!1),p})}if(o)for(const a of o)a.type==="fields"&&this._writeFieldsContent(a,r)}writeLayerOptions(t,r,i,s){r[i]=!t||t.showNoDataRecords===null&&t.returnTopmostRaster===null?null:t.toJSON(s)}writeTitle(t,r){r.title=t||""}async collectRequiredFields(t,r){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(t,r,[...i,...this._getContentExpressionInfos(this.content,i)]),ku(t,r,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(t){const r=new Set;return await this.collectRequiredFields(r,t),[...r].sort()}_writePopupTemplateContent(t,r,i){typeof t!="string"?Array.isArray(t)&&(r.popupElements=t.filter(s=>(i==null?void 0:i.origin)==="web-scene"?iI.has(s.type):_G.has(s.type)).map(s=>s==null?void 0:s.toJSON(i)),r.popupElements.forEach(s=>{s.type==="attachments"?this._writeAttachmentContent(r):s.type==="media"?this._writeMediaContent(s,r):s.type==="text"?this._writeTextContent(s,r):s.type==="relationship"&&this._writeRelationshipContent(s,r)})):r.description=t}_writeFieldsContent(t,r){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;const i=N(t.fieldInfos);Array.isArray(r.fieldInfos)?i.forEach(s=>{const n=r.fieldInfos.find(o=>{var a,l;return((a=o.fieldName)==null?void 0:a.toLowerCase())===((l=s.fieldName)==null?void 0:l.toLowerCase())});n?n.visible=!0:r.fieldInfos.push(s)}):r.fieldInfos=i}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0)}_writeRelationshipContent(t,r){var n,o;const i=((n=t.orderByFields)==null?void 0:n.map(a=>this._toFieldOrderJSON(a,t.relationshipId)))||[],s=[...((o=r.relatedRecordsInfo)==null?void 0:o.orderByFields)||[],...i];r.relatedRecordsInfo={showRelatedRecords:!0,...(s==null?void 0:s.length)&&{orderByFields:s}}}_writeTextContent(t,r){!r.description&&t.text&&(r.description=t.text)}_writeMediaContent(t,r){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;const i=N(t.mediaInfos);Array.isArray(r.mediaInfos)?r.mediaInfos=[...r.mediaInfos,...i]:r.mediaInfos=i}_readPopupInfoElements(t,r,i){const s={description:!1,mediaInfos:!1};return i.map(n=>n.type==="media"?(n.mediaInfos||!r||s.mediaInfos||(n.mediaInfos=r,s.mediaInfos=!0),Du.fromJSON(n)):n.type==="text"?(n.text||!t||s.description||(n.text=t,s.description=!0),Uu.fromJSON(n)):n.type==="attachments"?Nu.fromJSON(n):n.type==="fields"?Lu.fromJSON(n):n.type==="expression"?rm.fromJSON(n):n.type==="relationship"?Fu.fromJSON(n):n.type==="utilityNetworkAssociations"?S_.fromJSON(n):void 0).filter(Boolean)}_toRelationshipContent(t){const{field:r,order:i}=t;if(!(r!=null&&r.startsWith(Kl)))return null;const s=r.replace(Kl,"").split("/");if(s.length!==2)return null;const n=parseInt(s[0],10),o=s[1];return typeof n=="number"&&o?Fu.fromJSON({relationshipId:n,orderByFields:[{field:o,order:i}]}):null}_toFieldOrderJSON(t,r){const{order:i,field:s}=t;return{field:`${Kl}${r}/${s}`,order:i}}_readPopupInfo({description:t,mediaInfos:r,showAttachments:i,relatedRecordsInfo:s={showRelatedRecords:!1}}){const n=[];t?n.push(new Uu({text:t})):n.push(new Lu),Array.isArray(r)&&r.length&&n.push(Du.fromJSON({mediaInfos:r})),i&&n.push(Nu.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=s;return o&&(a!=null&&a.length)&&a.forEach(l=>{const h=this._toRelationshipContent(l);h&&n.push(h)}),n.length?n:t}_getContentElementFields(t){const r=t==null?void 0:t.type;if(r==="attachments")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)];if(r==="custom")return t.outFields||[];if(r==="fields")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...this._getFieldInfoFields(t.fieldInfos??this.fieldInfos)];if(r==="media"){const i=t.mediaInfos||[];return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...i.reduce((s,n)=>[...s,...this._getMediaInfoFields(n)],[])]}return r==="text"?this._extractFieldNames(t.text):r==="relationship"||r==="utility-network-associations"?[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)]:[]}_getMediaInfoFields(t){const{caption:r,title:i,value:s}=t,n=s||{},{fields:o,normalizeField:a,tooltipField:l,sourceURL:h,linkURL:p}=n,f=[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(h),...this._extractFieldNames(p),...o??[]];return a&&f.push(a),l&&f.push(l),f}_getContentExpressionInfos(t,r){return Array.isArray(t)?t.reduce((i,s)=>[...i,...s.type==="expression"&&s.expressionInfo?[s.expressionInfo]:[]],r):[]}_getContentFields(t){return typeof t=="string"?this._extractFieldNames(t):Array.isArray(t)?t.reduce((r,i)=>[...r,...this._getContentElementFields(i)],[]):[]}async _collectExpressionInfoFields(t,r,i){i&&await Promise.all(i.map(s=>kn(t,r,s.expression)))}_getFieldInfoFields(t){return t?t.filter(({fieldName:r,visible:i})=>!(i!==void 0&&!i||!r||r.startsWith(Kl)||r.startsWith(tS))).map(r=>r.fieldName):[]}_getActionsFields(t){return t?t.toArray().reduce((r,i)=>[...r,...this._getActionFields(i)],[]):[]}_getActionFields(t){const{className:r,title:i,type:s}=t,n=s==="button"||s==="toggle"?t.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(n)]}_getTitleFields(t){return typeof t=="string"?this._extractFieldNames(t):[]}_extractFieldNames(t){return iG(t).filter(r=>!(r.indexOf(Kl)===0||r.indexOf(tS)===0))}};u([d({type:gG})],tt.prototype,"actions",void 0),u([d()],tt.prototype,"content",void 0),u([ct("content")],tt.prototype,"castContent",null),u([ve("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],tt.prototype,"readContent",null),u([pe("web-scene","content",{popupElements:{type:K.ofType(dG)},showAttachments:{type:Boolean},mediaInfos:{type:K.ofType(fg)},description:{type:String},relatedRecordsInfo:{type:eS}})],tt.prototype,"writeWebSceneContent",null),u([pe("content",{popupElements:{type:K.ofType(hG)},showAttachments:{type:Boolean},mediaInfos:{type:K.ofType(fg)},description:{type:String},relatedRecordsInfo:{type:eS}})],tt.prototype,"writeWebMapContent",null),u([d({type:[pG],json:{write:!0}})],tt.prototype,"expressionInfos",void 0),u([d({type:[JA]})],tt.prototype,"fieldInfos",void 0),u([pe("fieldInfos")],tt.prototype,"writeFieldInfos",null),u([d({type:fG})],tt.prototype,"layerOptions",void 0),u([pe("layerOptions")],tt.prototype,"writeLayerOptions",null),u([d({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],tt.prototype,"lastEditInfoEnabled",void 0),u([d()],tt.prototype,"outFields",void 0),u([d()],tt.prototype,"overwriteActions",void 0),u([d()],tt.prototype,"returnGeometry",void 0),u([d({json:{type:String}})],tt.prototype,"title",void 0),u([pe("title")],tt.prototype,"writeTitle",null),tt=u([$("esri.PopupTemplate")],tt);const wG=tt,rS=new ut({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let bG=0,Ma=class extends W{constructor(t){super(t),this.id="sym"+bG++,this.type=null,this.color=new fe([0,0,0,1])}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}async collectRequiredFields(t,r){}hash(){return JSON.stringify(this.toJSON())}clone(){}};u([d({type:rS.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:rS.write}}})],Ma.prototype,"type",void 0),u([d({type:fe,json:{write:{allowNull:!0}}})],Ma.prototype,"color",void 0),u([ve("color")],Ma.prototype,"readColor",null),Ma=u([$("esri.symbols.Symbol")],Ma);const Lt=Ma;var Tg;let Ys=Tg=class extends Lt{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){var r;if(((r=this.data)==null?void 0:r.type)==="CIMSymbolReference"){const i=this.data.primitiveOverrides;if(i){const s=i.map(n=>{const o=n.valueExpressionInfo;return o?kn(e,t,o.expression):null});await Promise.all(s)}}}clone(){return new Tg({data:N(this.data)})}hash(){return DT(JSON.stringify(this.data)).toString()}};u([d({json:{write:!1}})],Ys.prototype,"color",void 0),u([d({json:{write:!0}})],Ys.prototype,"data",void 0),u([ve("data",["symbol"])],Ys.prototype,"readData",null),u([pe("data",{})],Ys.prototype,"writeData",null),u([re({CIMSymbolReference:"cim"},{readOnly:!0})],Ys.prototype,"type",void 0),Ys=Tg=u([$("esri.symbols.CIMSymbol")],Ys);const sa=Ys;let xa=class extends W{constructor(t){super(t),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(t,r,i){t||(r[i]=t)}};u([d({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],xa.prototype,"enabled",void 0),u([pe("enabled")],xa.prototype,"writeEnabled",null),u([d({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],xa.prototype,"type",void 0),xa=u([$("esri.symbols.Symbol3DLayer")],xa);const Yi=xa;function SG(e,t){const r=t.transparency!=null?j3(t.transparency):1,i=t.color;return i&&Array.isArray(i)?new fe([i[0]||0,i[1]||0,i[2]||0,r]):null}function $G(e,t){t.color=e.toJSON().slice(0,3);const r=U3(e.a);r!==0&&(t.transparency=r)}const Vn={type:fe,json:{type:[ke],default:null,read:{source:["color","transparency"],reader:SG},write:{target:{color:{type:[ke]},transparency:{type:ke}},writer:$G}}},qi={type:Number,cast:ze,json:{write:!0}};let lo=class extends W{constructor(t){super(t),this.color=new fe([0,0,0,1]),this.extensionLength=0,this.size=On(1)}clone(){}cloneProperties(){return{color:N(this.color),size:this.size,extensionLength:this.extensionLength}}};u([d({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],lo.prototype,"type",void 0),u([d(Vn)],lo.prototype,"color",void 0),u([d({...qi,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],lo.prototype,"extensionLength",void 0),u([d(qi)],lo.prototype,"size",void 0),lo=u([$("esri.symbols.edges.Edges3D")],lo);const T_=lo;var Eg;let Vd=Eg=class extends T_{constructor(e){super(e),this.type="sketch"}clone(){return new Eg(this.cloneProperties())}};u([re({sketch:"sketch"},{readOnly:!0})],Vd.prototype,"type",void 0),Vd=Eg=u([$("esri.symbols.edges.SketchEdges3D")],Vd);const TG=Vd;var Mg;let zd=Mg=class extends T_{constructor(e){super(e),this.type="solid"}clone(){return new Mg(this.cloneProperties())}};u([re({solid:"solid"},{readOnly:!0})],zd.prototype,"type",void 0),zd=Mg=u([$("esri.symbols.edges.SolidEdges3D")],zd);const EG=zd,sI={types:{key:"type",base:T_,typeMap:{solid:EG,sketch:TG}},json:{write:!0}};var xg;let mr=xg=class extends W{constructor(e){super(e),this.color=null,this.emissiveFactor=null}clone(){var t;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissiveFactor:this.emissiveFactor?Uv(this.emissiveFactor):null};return new xg(e)}};u([d(Vn)],mr.prototype,"color",void 0),u([d({type:[Number],json:{write:!1}})],mr.prototype,"emissiveFactor",void 0),mr=xg=u([$("esri.symbols.support.Symbol3DMaterial")],mr);var Ag;let Js=Ag=class extends Yi{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){var e,t;return new Ag({edges:(e=this.edges)==null?void 0:e.clone(),enabled:this.enabled,material:(t=this.material)==null?void 0:t.clone(),castShadows:this.castShadows,size:this.size})}};u([re({Extrude:"extrude"},{readOnly:!0})],Js.prototype,"type",void 0),u([d({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Js.prototype,"size",void 0),u([d({type:mr,json:{write:!0}})],Js.prototype,"material",void 0),u([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Js.prototype,"castShadows",void 0),u([d(sI)],Js.prototype,"edges",void 0),Js=Ag=u([$("esri.symbols.ExtrudeSymbol3DLayer")],Js);const nI=Js;let Mc=class extends Lt{constructor(t){super(t),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};u([re({esriSLS:"simple-line"},{readOnly:!0})],Mc.prototype,"type",void 0),u([d({type:Number,cast:ze,json:{write:!0}})],Mc.prototype,"width",void 0),Mc=u([$("esri.symbols.LineSymbol")],Mc);const MG=Mc,xG=["begin","end","begin-end"],oI=["arrow","circle","square","diamond","cross","x"];var Ig;let Ei=Ig=class extends W{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,r,i){t[r]=(i==null?void 0:i.origin)==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,r,i){(i==null?void 0:i.origin)==="web-map"||(t[r]=e)}clone(){return new Ig({color:N(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};u([d({type:["begin","end","begin-end"],json:{write:!0}})],Ei.prototype,"placement",void 0),u([re({"line-marker":"line-marker"},{readOnly:!0}),d({json:{origins:{"web-map":{write:!1}}}})],Ei.prototype,"type",void 0),u([d({type:oI})],Ei.prototype,"style",void 0),u([pe("style")],Ei.prototype,"writeStyle",null),u([d({type:fe,value:null,json:{write:{allowNull:!0}}})],Ei.prototype,"color",null),u([ve("color")],Ei.prototype,"readColor",null),u([pe("color")],Ei.prototype,"writeColor",null),Ei=Ig=u([$("esri.symbols.LineSymbolMarker")],Ei);const AG=Ei;var Og;const ay=new ut({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let as=Og=class extends MG{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,r,i,s,n){if(e&&typeof e!="string")return e;const o={};return e!=null&&(o.style=e),t!=null&&(o.color=t),r!=null&&(o.width=ze(r)),i!=null&&(o.cap=i),s!=null&&(o.join=s),n!=null&&(o.miterLimit=ze(n)),o}clone(){var e;return new Og({color:N(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};u([re({esriSLS:"simple-line"},{readOnly:!0})],as.prototype,"type",void 0),u([d({type:ay.apiValues,json:{read:ay.read,write:ay.write}})],as.prototype,"style",void 0),u([d({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null?void 0:r.origin)==null})}}})],as.prototype,"cap",void 0),u([d({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null?void 0:r.origin)==null})}}})],as.prototype,"join",void 0),u([d({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":AG}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],as.prototype,"marker",void 0),u([d({type:Number,json:{read:!1,write:!1}})],as.prototype,"miterLimit",void 0),as=Og=u([$("esri.symbols.SimpleLineSymbol")],as);const na=as;let xc=class extends Lt{constructor(t){super(t),this.outline=null,this.type=null}hash(){var t;return`${this.type}.${(t=this.outline)==null?void 0:t.hash()}`}};u([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":na}},json:{default:null,write:!0}})],xc.prototype,"outline",void 0),u([d({type:["simple-fill","picture-fill"],readOnly:!0})],xc.prototype,"type",void 0),xc=u([$("esri.symbols.FillSymbol")],xc);const aI=xc;let Bd=class extends W{constructor(t){super(t)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};u([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Bd.prototype,"type",void 0),Bd=u([$("esri.symbols.patterns.LinePattern3D")],Bd);const lI=Bd,IG=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var Pg;const OG=Wt()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Ac=Pg=class extends lI{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new Pg(e)}};u([d({type:["style"]})],Ac.prototype,"type",void 0),u([re(OG),d({type:IG})],Ac.prototype,"style",void 0),Ac=Pg=u([$("esri.symbols.patterns.LineStylePattern3D")],Ac);const E_=Ac;let Hd=class extends W{constructor(t){super(t),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};u([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Hd.prototype,"type",void 0),Hd=u([$("esri.symbols.patterns.Pattern3D")],Hd);const cI=Hd,PG=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var Rg;let Ic=Rg=class extends cI{constructor(e){super(e),this.type="style",this.style="solid"}clone(){return new Rg({style:this.style})}};u([d({type:["style"]})],Ic.prototype,"type",void 0),u([d({type:PG,json:{read:!0,write:!0}})],Ic.prototype,"style",void 0),Ic=Rg=u([$("esri.symbols.patterns.StylePattern3D")],Ic);const uI=Ic,RG={types:{key:"type",base:cI,typeMap:{style:uI}},json:{write:!0}},hI={types:{key:"type",base:lI,typeMap:{style:E_}},json:{write:!0}},hu=new fe("white");new fe("black");const CG=new fe([255,255,255,0]);function kG(e){return e.r===0&&e.g===0&&e.b===0}var Cg;let du=Cg=class extends mr{constructor(e){super(e),this.colorMixMode=null}clone(){var t;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissiveFactor:this.emissiveFactor?Uv(this.emissiveFactor):null,colorMixMode:this.colorMixMode};return new Cg(e)}};u([re({multiply:"multiply",replace:"replace",tint:"tint"})],du.prototype,"colorMixMode",void 0),du=Cg=u([$("esri.symbols.support.Symbol3DFillMaterial")],du);function NG(e,t=!1){return e<=IT?t?new Array(e).fill(0):new Array(e):new Float64Array(e)}function xre(e){return(AT(e)?e.length:e.byteLength/8)<=IT?Array.from(e):new Float64Array(e)}function Are(e,t,r){return Array.isArray(e)?e.slice(t,t+r):e.subarray(t,t+r)}function ch(e=FG){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function M_(e,t,r,i,s,n,o=ch()){return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o[4]=s,o[5]=n,o}function Ire(e,t=ch()){return LG(e,0,e.length/3,t)}function LG(e,t,r,i=ch()){return dI(i,kg),DG(i,e,t,r),i}function Ore(e,t=NG(24)){const[r,i,s,n,o,a]=e;return t[0]=r,t[1]=i,t[2]=s,t[3]=r,t[4]=i,t[5]=a,t[6]=r,t[7]=o,t[8]=s,t[9]=r,t[10]=o,t[11]=a,t[12]=n,t[13]=i,t[14]=s,t[15]=n,t[16]=i,t[17]=a,t[18]=n,t[19]=o,t[20]=s,t[21]=n,t[22]=o,t[23]=a,t}function Pre(e,t){const r=isFinite(e[2])||isFinite(e[5]);return new Be(r?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function Rre(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function Cre(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function DG(e,t,r=0,i=t.length/3){let s=e[0],n=e[1],o=e[2],a=e[3],l=e[4],h=e[5];for(let p=0;p<i;p++)s=Math.min(s,t[r+3*p]),n=Math.min(n,t[r+3*p+1]),o=Math.min(o,t[r+3*p+2]),a=Math.max(a,t[r+3*p]),l=Math.max(l,t[r+3*p+1]),h=Math.max(h,t[r+3*p+2]);e[0]=s,e[1]=n,e[2]=o,e[3]=a,e[4]=l,e[5]=h}function x_(e){return e[0]>=e[3]?0:e[3]-e[0]}function A_(e){return e[1]>=e[4]?0:e[4]-e[1]}function I_(e){return e[2]>=e[5]?0:e[5]-e[2]}function kre(e){const t=x_(e),r=I_(e),i=A_(e);return Math.sqrt(t*t+r*r+i*i)}function Nre(e,t=[0,0,0]){return t[0]=e[0]+x_(e)/2,t[1]=e[1]+A_(e)/2,t[2]=e[2]+I_(e)/2,t}function Lre(e,t=[0,0,0]){return t[0]=x_(e),t[1]=A_(e),t[2]=I_(e),t}function Dre(e,t,r=e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r}function Fre(e,t,r=e){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e}function dI(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Ure(e){return e?dI(e,kg):ch(kg)}function jre(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function Gre(e,t,r,i,s){return e[0]=t,e[1]=r,e[2]=Number.NEGATIVE_INFINITY,e[3]=i,e[4]=s,e[5]=Number.POSITIVE_INFINITY,e}function iS(e){return e.length===6}function Vre(e,t,r){if(e==null||t==null)return e===t;if(!iS(e)||!iS(t))return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}const kg=[1/0,1/0,1/0,-1/0,-1/0,-1/0],FG=[0,0,0,0,0,0];ch();function zre(e,{isPrimitive:t,width:r,depth:i,height:s}){const n=t?10:1;if(r==null&&s==null&&i==null)return[n*e[0],n*e[1],n*e[2]];const o=Il(r,i,s);let a;for(let l=0;l<3;l++){const h=o[l];if(h!=null){a=h/e[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=e[l]*a);return o}const UG=M_(-.5,-.5,-.5,.5,.5,.5),jG=M_(-.5,-.5,0,.5,.5,1),GG=M_(-.5,-.5,0,.5,.5,.5);function Bre(e){switch(e){case"sphere":case"cube":case"diamond":return UG;case"cylinder":case"cone":case"inverted-cone":return jG;case"tetrahedron":return GG;default:return}}const O_=["butt","square","round"],VG=[...O_,"none"],pI=["miter","bevel","round"];var Ng;let co=Ng=class extends W{constructor(e){super(e),this.color=new fe([0,0,0,1]),this.size=On(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new Ng(e)}};u([d(Vn)],co.prototype,"color",void 0),u([d(qi)],co.prototype,"size",void 0),u([d(hI)],co.prototype,"pattern",void 0),u([d({type:O_,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],co.prototype,"patternCap",void 0),co=Ng=u([$("esri.symbols.support.Symbol3DOutline")],co);var Wd;let ls=Wd=class extends Yi{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new Wd(e)}static fromSimpleFillSymbol(e){var i,s,n;const t=e.outline&&e.outline.style&&e.outline.style!=="solid"?new E_({style:e.outline.style}):null,r={size:((i=e.outline)==null?void 0:i.width)??0,color:(((s=e.outline)==null?void 0:s.color)??hu).clone(),pattern:t};return t&&((n=e.outline)!=null&&n.cap)&&(r.patternCap=e.outline.cap),new Wd({material:new du({color:(e.color??CG).clone()}),pattern:e.style&&e.style!=="solid"?new uI({style:e.style}):null,outline:r})}};u([re({Fill:"fill"},{readOnly:!0})],ls.prototype,"type",void 0),u([d({type:du,json:{write:!0}})],ls.prototype,"material",void 0),u([d(RG)],ls.prototype,"pattern",void 0),u([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ls.prototype,"castShadows",void 0),u([d({type:co,json:{write:!0}})],ls.prototype,"outline",void 0),u([d(sI)],ls.prototype,"edges",void 0),ls=Wd=u([$("esri.symbols.FillSymbol3DLayer")],ls);const uh=ls,zG=["none","underline","line-through"],BG=["normal","italic","oblique"],HG=["normal","lighter","bold","bolder"],fI={type:Number,cast:e=>{const t=pr(e);return t===0?1:di(t,.1,4)},nonNullable:!0},WG=["left","right","center"],qG=["baseline","top","middle","bottom"],mI={type:WG,nonNullable:!0},yI={type:qG,nonNullable:!0},Hre=8;var Lg;let cs=Lg=class extends W{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return ze(e)}clone(){return new Lg({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};u([d({type:zG,json:{default:"none",write:!0}})],cs.prototype,"decoration",void 0),u([d({type:String,json:{write:!0}})],cs.prototype,"family",void 0),u([d({type:Number,json:{write:{overridePolicy:(e,t,r)=>({enabled:!r||!r.textSymbol3D})}}})],cs.prototype,"size",void 0),u([ct("size")],cs.prototype,"castSize",null),u([d({type:BG,json:{default:"normal",write:!0}})],cs.prototype,"style",void 0),u([d({type:HG,json:{default:"normal",write:!0}})],cs.prototype,"weight",void 0),cs=Lg=u([$("esri.symbols.Font")],cs);const nm=cs;var Dg;const ZG=Wt()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let uo=Dg=class extends W{constructor(e){super(e)}readHref(e,t,r){return e?ih(e,r):t.dataURI}writeHref(e,t,r,i){e&&(ea(e)?t.dataURI=e:(t.href=Lf(e,i),yr(t.href)&&(t.href=_n(t.href))))}clone(){return new Dg({href:this.href,primitive:this.primitive})}};u([d({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],uo.prototype,"href",void 0),u([ve("href")],uo.prototype,"readHref",null),u([pe("href",{href:{type:String},dataURI:{type:String}})],uo.prototype,"writeHref",null),u([re(ZG)],uo.prototype,"primitive",void 0),uo=Dg=u([$("esri.symbols.support.IconSymbol3DLayerResource")],uo);var Fg;let Ha=Fg=class extends Y{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new Fg({x:this.x,y:this.y})}};u([d({type:Number})],Ha.prototype,"x",void 0),u([d({type:Number})],Ha.prototype,"y",void 0),Ha=Fg=u([$("esri.symbols.support.Symbol3DAnchorPosition2D")],Ha);var Ug;let Oc=Ug=class extends W{constructor(e){super(e),this.color=new fe([0,0,0,1]),this.size=On(1)}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size};return new Ug(e)}};u([d(Vn)],Oc.prototype,"color",void 0),u([d(qi)],Oc.prototype,"size",void 0),Oc=Ug=u([$("esri.symbols.support.Symbol3DIconOutline")],Oc);var Aa;const gI="esri.symbols.IconSymbol3DLayer";let Qr=Aa=class extends Yi{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new Aa({anchor:this.anchor,anchorPosition:N(this.anchorPosition),enabled:this.enabled,material:N(this.material),outline:N(this.outline),resource:N(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||hu,r=sS(e),i=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||hu).clone()}:null;return new Aa({size:e.size,angle:e.angle,resource:{primitive:JG(e.style)},material:{color:t},outline:i,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const t=!e.color||kG(e.color)?hu:e.color,r=sS(e);return new Aa({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:t.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new Aa({resource:{href:FE({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};u([d({type:mr,json:{write:!0}})],Qr.prototype,"material",void 0),u([d({type:uo,json:{write:!0}})],Qr.prototype,"resource",void 0),u([re({Icon:"icon"},{readOnly:!0})],Qr.prototype,"type",void 0),u([d(qi)],Qr.prototype,"size",void 0),u([re({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],Qr.prototype,"anchor",void 0),u([d({type:Ha,json:{type:[Number],read:{reader:e=>new Ha({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Qr.prototype,"anchorPosition",void 0),u([d({type:Oc,json:{write:!0}})],Qr.prototype,"outline",void 0),u([d({type:Number,json:{write:!0,default:0}})],Qr.prototype,"angle",void 0),Qr=Aa=u([$(gI)],Qr);const Co=Qr;function sS(e){const t="width"in e?e.width:e.size,r="height"in e?e.height:e.size,i=nS(e.xoffset),s=nS(e.yoffset);return(i||s)&&t&&r?{x:-i/t,y:s/r}:null}function nS(e){return isFinite(e)?e:0}const YG={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function JG(e){return YG[e]||(V.getLogger(gI).warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}let ho=class extends Gr(W){constructor(t){super(t),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(t){return t!=null&&t.placement===this.placement&&t.style===this.style&&(this.color==null&&t.color==null||this.color!=null&&t.color!=null&&this.color.toJSON()===t.color.toJSON())}};u([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],ho.prototype,"type",void 0),u([d({type:xG,json:{default:"begin-end",write:!0}})],ho.prototype,"placement",void 0),u([d({type:oI,json:{default:"arrow",write:!0}})],ho.prototype,"style",void 0),u([d({type:fe,json:{type:[ke],default:null,write:!0}})],ho.prototype,"color",void 0),ho=u([$("esri.symbols.LineStyleMarker3D")],ho);const jg=ho;var qd;let Mi=qd=class extends Yi{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=On(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new qd(e)}static fromSimpleLineSymbol(e){var r;const t={enabled:!0,size:e.width??On(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new E_({style:e.style}):null,material:new mr({color:(e.color||hu).clone()}),marker:e.marker?new jg({placement:e.marker.placement,style:e.marker.style,color:((r=e.marker.color)==null?void 0:r.clone())??null}):null};return new qd(t)}};u([d({type:mr,json:{write:!0}})],Mi.prototype,"material",void 0),u([re({Line:"line"},{readOnly:!0})],Mi.prototype,"type",void 0),u([d({type:pI,json:{write:!0,default:"miter"}})],Mi.prototype,"join",void 0),u([d({type:O_,json:{write:!0,default:"butt"}})],Mi.prototype,"cap",void 0),u([d(qi)],Mi.prototype,"size",void 0),u([d(hI)],Mi.prototype,"pattern",void 0),u([d({types:{key:"type",base:jg,typeMap:{style:jg}},json:{write:!0}})],Mi.prototype,"marker",void 0),Mi=qd=u([$("esri.symbols.LineSymbol3DLayer")],Mi);const hh=Mi;var Gg;const XG=Wt()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Pc=Gg=class extends W{clone(){return new Gg({href:this.href,primitive:this.primitive})}};u([d({type:String,json:{read:kv,write:yl}})],Pc.prototype,"href",void 0),u([re(XG)],Pc.prototype,"primitive",void 0),Pc=Gg=u([$("esri.symbols.support.ObjectSymbol3DLayerResource")],Pc);var Vg;let Ao=Vg=class extends Y{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new Vg({x:this.x,y:this.y,z:this.z})}};u([d({type:Number})],Ao.prototype,"x",void 0),u([d({type:Number})],Ao.prototype,"y",void 0),u([d({type:Number})],Ao.prototype,"z",void 0),Ao=Vg=u([$("esri.symbols.support.Symbol3DAnchorPosition3D")],Ao);var zg;let Et=zg=class extends Yi{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var e,t,r;return new zg({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(e=this.anchorPosition)==null?void 0:e.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((t=this.material)==null?void 0:t.clone())??null,castShadows:this.castShadows,resource:(r=this.resource)==null?void 0:r.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};u([d({type:mr,json:{write:!0}})],Et.prototype,"material",void 0),u([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Et.prototype,"castShadows",void 0),u([d({type:Pc,json:{write:!0}})],Et.prototype,"resource",void 0),u([re({Object:"object"},{readOnly:!0})],Et.prototype,"type",void 0),u([d({type:Number,json:{write:!0}})],Et.prototype,"width",void 0),u([d({type:Number,json:{write:!0}})],Et.prototype,"height",void 0),u([d({type:Number,json:{write:!0}})],Et.prototype,"depth",void 0),u([re({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],Et.prototype,"anchor",void 0),u([d({type:Ao,json:{type:[Number],read:{reader:e=>new Ao({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Et.prototype,"anchorPosition",void 0),u([d({type:Number,json:{write:!0}})],Et.prototype,"heading",void 0),u([d({type:Number,json:{write:!0}})],Et.prototype,"tilt",void 0),u([d({type:Number,json:{write:!0}})],Et.prototype,"roll",void 0),u([d({readOnly:!0})],Et.prototype,"isPrimitive",null),Et=zg=u([$("esri.symbols.ObjectSymbol3DLayer")],Et);const P_=Et;var Bg;let Ut=Bg=class extends Yi{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e??(t.height==null&&t.size!=null?t.size:void 0)}readHeight(e,t){return e??(t.width==null&&t.size!=null?t.size:void 0)}clone(){return new Bg({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};u([d({type:mr,json:{write:!0}})],Ut.prototype,"material",void 0),u([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ut.prototype,"castShadows",void 0),u([re({Path:"path"},{readOnly:!0})],Ut.prototype,"type",void 0),u([d({type:["circle","quad"],json:{write:!0,default:"circle"}})],Ut.prototype,"profile",void 0),u([d({type:pI,json:{write:!0,default:"miter"}})],Ut.prototype,"join",void 0),u([d({type:VG,json:{write:!0,default:"butt"}})],Ut.prototype,"cap",void 0),u([d({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Ut.prototype,"width",void 0),u([ve("width",["width","size","height"])],Ut.prototype,"readWidth",null),u([d({type:Number,json:{write:!0}})],Ut.prototype,"height",void 0),u([ve("height",["height","size","width"])],Ut.prototype,"readHeight",null),u([d({type:["center","bottom","top"],json:{write:!0,default:"center"}})],Ut.prototype,"anchor",void 0),u([d({type:["heading","all"],json:{write:!0,default:"all"}})],Ut.prototype,"profileRotation",void 0),Ut=Bg=u([$("esri.symbols.PathSymbol3DLayer")],Ut);const R_=Ut;var Hg;let Wa=Hg=class extends W{constructor(){super(...arguments),this.color=new fe([0,0,0,1]),this.size=0}clone(){const e={color:N(this.color),size:this.size};return new Hg(e)}};u([d(Vn)],Wa.prototype,"color",void 0),u([d(qi)],Wa.prototype,"size",void 0),Wa=Hg=u([$("esri.symbols.support.Symbol3DHalo")],Wa);let pu=class extends Gr(W){constructor(t){super(t),this.color=null}};u([d(Vn)],pu.prototype,"color",void 0),pu=u([$("esri.symbols.support.Symbol3DTextBackground")],pu);var Zd;let Yt=Zd=class extends Yi{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,r,i){const s={...i,textSymbol3D:!0};t.font=e.write({},s),delete t.font.size}get size(){var e;return this._userSize!=null?this._userSize:((e=this.font)==null?void 0:e.size)!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new Zd({enabled:this.enabled,font:this.font&&N(this.font),halo:this.halo&&N(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:N(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new Zd({font:e.font!=null?e.font.clone():new nm,halo:KG(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new mr({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new pu({color:e.backgroundColor.clone()}):null})}};function KG(e,t){return e&&t!=null&&t>0?new Wa({color:N(e),size:t}):null}u([d({type:nm,json:{write:!0}})],Yt.prototype,"font",null),u([pe("font")],Yt.prototype,"writeFont",null),u([d({type:Wa,json:{write:!0}})],Yt.prototype,"halo",void 0),u([d({...mI,json:{default:"center",write:!0}})],Yt.prototype,"horizontalAlignment",void 0),u([d({...fI,json:{default:1,write:!0}})],Yt.prototype,"lineHeight",void 0),u([d({type:mr,json:{write:!0}})],Yt.prototype,"material",void 0),u([d({type:pu,json:{write:!0}})],Yt.prototype,"background",void 0),u([d(qi)],Yt.prototype,"size",null),u([d({type:String,json:{write:!0}})],Yt.prototype,"text",void 0),u([re({Text:"text"},{readOnly:!0})],Yt.prototype,"type",void 0),u([d({...yI,json:{default:"baseline",write:!0}})],Yt.prototype,"verticalAlignment",void 0),Yt=Zd=u([$("esri.symbols.TextSymbol3DLayer")],Yt);const kl=Yt;var Wg;let Xs=Wg=class extends Yi{constructor(e){super(e),this.color=qg.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new Wg({color:N(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};u([d({type:fe,nonNullable:!0,json:{type:[ke],write:(e,t,r)=>t[r]=e.toArray(fe.AlphaMode.UNLESS_OPAQUE),default:()=>qg.clone(),defaultEquals:e=>e.toCss(!0)===qg.toCss(!0)}})],Xs.prototype,"color",void 0),u([re({Water:"water"},{readOnly:!0})],Xs.prototype,"type",void 0),u([d({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Xs.prototype,"waterbodySize",void 0),u([d({type:Number,json:{write:!0,default:null}})],Xs.prototype,"waveDirection",void 0),u([d({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Xs.prototype,"waveStrength",void 0),Xs=Wg=u([$("esri.symbols.WaterSymbol3DLayer")],Xs);const vI=Xs,qg=new fe([0,119,190]);var Zg;let po=Zg=class extends Y{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new Zg({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};u([d({type:String})],po.prototype,"name",void 0),u([d({type:String})],po.prototype,"styleUrl",void 0),u([d({type:String})],po.prototype,"styleName",void 0),u([d({type:An})],po.prototype,"portal",void 0),po=Zg=u([$("esri.symbols.support.StyleOrigin")],po);const Yg=po;var Jg;let fu=Jg=class extends Y{constructor(){super(...arguments),this.url=""}clone(){return new Jg({url:this.url})}};u([d({type:String})],fu.prototype,"url",void 0),fu=Jg=u([$("esri.symbols.support.Thumbnail")],fu);const _I={icon:Co,object:P_,line:hh,path:R_,fill:uh,extrude:nI,text:kl,water:vI},QG=K.ofType({base:Yi,key:"type",typeMap:_I,errorContext:"symbol-layer"});let xi=class extends Lt{constructor(t){super(t),this.styleOrigin=null,this.thumbnail=null,this.type=null;const r=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,i=r==null?void 0:r.type,s=i||K;this._set("symbolLayers",new s)}get color(){return null}set color(t){this.constructed&&V.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(t){Tn(t,this._get("symbolLayers"))}readStyleOrigin(t,r,i){if(t.styleUrl&&t.name){const s=ih(t.styleUrl,i);return new Yg({styleUrl:s,name:t.name})}if(t.styleName&&t.name)return new Yg({portal:(i==null?void 0:i.portal)||An.getDefault(),styleName:t.styleName,name:t.name});i!=null&&i.messages&&i.messages.push(new Os("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:t}))}writeStyleOrigin(t,r,i,s){if(t.styleUrl&&t.name){let n=Lf(t.styleUrl,s);yr(n)&&(n=_n(n)),r.styleOrigin={styleUrl:n,name:t.name}}else t.styleName&&t.name&&(t.portal&&(s!=null&&s.portal)&&!mL(t.portal.restUrl,s.portal.restUrl)?s!=null&&s.messages&&s.messages.push(new Os("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):r.styleOrigin={styleName:t.styleName,name:t.name})}normalizeCtorArgs(t){return t instanceof Yi||t&&_I[t.type]?{symbolLayers:[t]}:Array.isArray(t)?{symbolLayers:t}:t}};u([d({json:{read:!1,write:!1}})],xi.prototype,"color",null),u([d({type:QG,nonNullable:!0,json:{write:!0}}),ct(XE)],xi.prototype,"symbolLayers",null),u([d({type:Yg})],xi.prototype,"styleOrigin",void 0),u([ve("styleOrigin")],xi.prototype,"readStyleOrigin",null),u([pe("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],xi.prototype,"writeStyleOrigin",null),u([d({type:fu,json:{read:!1}})],xi.prototype,"thumbnail",void 0),u([d({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],xi.prototype,"type",void 0),xi=u([$("esri.symbols.Symbol3D")],xi);const dh=xi;let Rc=class extends W{constructor(t){super(t),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};u([d({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],Rc.prototype,"type",void 0),u([d({readOnly:!0})],Rc.prototype,"visible",void 0),Rc=u([$("esri.symbols.callouts.Callout3D")],Rc);const wI=Rc;var Xg;let Yd=Xg=class extends W{constructor(e){super(e),this.color=new fe("white")}clone(){return new Xg({color:N(this.color)})}};u([d(Vn)],Yd.prototype,"color",void 0),Yd=Xg=u([$("esri.symbols.callouts.LineCallout3DBorder")],Yd);const eV=Yd;var Kg;let Ks=Kg=class extends wI{constructor(e){super(e),this.type="line",this.color=new fe([0,0,0,1]),this.size=On(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new Kg({color:N(this.color),size:this.size,border:N(this.border)})}};u([re({line:"line"})],Ks.prototype,"type",void 0),u([d(Vn)],Ks.prototype,"color",void 0),u([d(qi)],Ks.prototype,"size",void 0),u([d({type:eV,json:{write:!0}})],Ks.prototype,"border",void 0),u([d({readOnly:!0})],Ks.prototype,"visible",null),Ks=Kg=u([$("esri.symbols.callouts.LineCallout3D")],Ks);const bI=Ks;function C_(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength!=null&&t.maxWorldLength<=0)}function SI(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!C_(e)}const $I={types:{key:"type",base:wI,typeMap:{line:bI}},json:{write:!0}};var Qg;let Ia=Qg=class extends W{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new Qg({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};u([d(qi)],Ia.prototype,"screenLength",void 0),u([d({type:Number,nonNullable:!0,json:{write:!0,default:0}})],Ia.prototype,"minWorldLength",void 0),u([d({type:Number,json:{write:!0}})],Ia.prototype,"maxWorldLength",void 0),Ia=Qg=u([$("esri.symbols.support.Symbol3DVerticalOffset")],Ia);const k_=Ia;var Jd;const TI=K.ofType({base:null,key:"type",typeMap:{text:kl}});let Qs=Jd=class extends dh{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new TI,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return SI(this)}hasVisibleVerticalOffset(){return C_(this)}clone(){return new Jd({styleOrigin:N(this.styleOrigin),symbolLayers:N(this.symbolLayers),thumbnail:N(this.thumbnail),callout:N(this.callout),verticalOffset:N(this.verticalOffset)})}static fromTextSymbol(e){return new Jd({symbolLayers:new K([kl.fromTextSymbol(e)])})}};u([d({type:k_,json:{write:!0}})],Qs.prototype,"verticalOffset",void 0),u([d($I)],Qs.prototype,"callout",void 0),u([d({json:{read:!1,write:!1}})],Qs.prototype,"styleOrigin",void 0),u([d({type:TI})],Qs.prototype,"symbolLayers",void 0),u([re({LabelSymbol3D:"label-3d"},{readOnly:!0})],Qs.prototype,"type",void 0),Qs=Jd=u([$("esri.symbols.LabelSymbol3D")],Qs);const N_=Qs;var Xd;const EI=K.ofType({base:null,key:"type",typeMap:{line:hh,path:R_}}),tV=K.ofType({base:null,key:"type",typeMap:{line:hh,path:R_}});let Cc=Xd=class extends dh{constructor(e){super(e),this.symbolLayers=new EI,this.type="line-3d"}clone(){return new Xd({styleOrigin:N(this.styleOrigin),symbolLayers:N(this.symbolLayers),thumbnail:N(this.thumbnail)})}static fromSimpleLineSymbol(e){return new Xd({symbolLayers:new K([hh.fromSimpleLineSymbol(e)])})}};u([d({type:EI,json:{type:tV}})],Cc.prototype,"symbolLayers",void 0),u([re({LineSymbol3D:"line-3d"},{readOnly:!0})],Cc.prototype,"type",void 0),Cc=Xd=u([$("esri.symbols.LineSymbol3D")],Cc);const om=Cc;let en=class extends Lt{constructor(t){super(t),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};u([d({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],en.prototype,"angle",void 0),u([d({type:["simple-marker","picture-marker"],readOnly:!0})],en.prototype,"type",void 0),u([d({type:Number,cast:ze,json:{write:!0}})],en.prototype,"xoffset",void 0),u([d({type:Number,cast:ze,json:{write:!0}})],en.prototype,"yoffset",void 0),u([d({cast:e=>e==="auto"?e:pr(ze(e)),json:{write:!0}})],en.prototype,"size",void 0),en=u([$("esri.symbols.MarkerSymbol")],en);const MI=en;var Kd;const xI=K.ofType({base:null,key:"type",typeMap:{fill:uh}});let kc=Kd=class extends dh{constructor(e){super(e),this.symbolLayers=new xI,this.type="mesh-3d"}clone(){return new Kd({styleOrigin:N(this.styleOrigin),symbolLayers:N(this.symbolLayers),thumbnail:N(this.thumbnail)})}static fromSimpleFillSymbol(e){return new Kd({symbolLayers:new K([uh.fromSimpleFillSymbol(e)])})}};u([d({type:xI})],kc.prototype,"symbolLayers",void 0),u([re({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],kc.prototype,"type",void 0),kc=Kd=u([$("esri.symbols.MeshSymbol3D")],kc);const L_=kc;function rV(e,t,r){return t.imageData?FE({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):AI(t.url,r)}function AI(e,t){if(!yr(e)){const r=sV(t);if(r)return Of(r,"images",e)}return ih(e,t)}function iV(e,t,r,i){if(ea(e)){const s=pl(e);if(!s)return;t.contentType=s.mediaType,t.imageData=s.data,r&&r.imageData===t.imageData&&r.url&&yl(r.url,t,"url",i)}else yl(e,t,"url",i)}const II={json:{read:{source:["imageData","url"],reader:rV},write:{writer(e,t,r,i){iV(e,t,this.source,i)}}}},OI={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,r){const i={};return t.imageData&&(i.imageData=t.imageData),t.contentType&&(i.contentType=t.contentType),t.url&&(i.url=AI(t.url,r)),i}}}};function sV(e){var s,n;if(!e)return null;const{origin:t,layer:r}=e;if(t!=="service"&&t!=="portal-item")return null;const i=r==null?void 0:r.type;return i==="feature"||i==="stream"?(s=r.parsedUrl)==null?void 0:s.path:i==="map-image"||i==="tile"?(n=e.url)==null?void 0:n.path:null}var e1;let Ar=e1=class extends aI{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const s={};return e&&(s.url=e),t&&(s.outline=t),r!=null&&(s.width=ze(r)),i!=null&&(s.height=ze(i)),s}clone(){const e=new e1({color:N(this.color),height:this.height,outline:N(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",N(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};u([re({esriPFS:"picture-fill"},{readOnly:!0})],Ar.prototype,"type",void 0),u([d(II)],Ar.prototype,"url",void 0),u([d({type:Number,json:{write:!0}})],Ar.prototype,"xscale",void 0),u([d({type:Number,json:{write:!0}})],Ar.prototype,"yscale",void 0),u([d({type:Number,cast:ze,json:{write:!0}})],Ar.prototype,"width",void 0),u([d({type:Number,cast:ze,json:{write:!0}})],Ar.prototype,"height",void 0),u([d({type:Number,cast:ze,json:{write:!0}})],Ar.prototype,"xoffset",void 0),u([d({type:Number,cast:ze,json:{write:!0}})],Ar.prototype,"yoffset",void 0),u([d(OI)],Ar.prototype,"source",void 0),Ar=e1=u([$("esri.symbols.PictureFillSymbol")],Ar);const D_=Ar;var t1;let ei=t1=class extends MI{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const i={};return e&&(i.url=e),t!=null&&(i.width=ze(t)),r!=null&&(i.height=ze(r)),i}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new t1({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",N(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};u([d({json:{write:!1}})],ei.prototype,"color",void 0),u([re({esriPMS:"picture-marker"},{readOnly:!0})],ei.prototype,"type",void 0),u([d(II)],ei.prototype,"url",void 0),u([d(OI)],ei.prototype,"source",void 0),u([d({type:Number,cast:ze,json:{write:!0}})],ei.prototype,"height",void 0),u([ve("height",["height","size"])],ei.prototype,"readHeight",null),u([d({type:Number,cast:ze,json:{write:!0}})],ei.prototype,"width",void 0),u([d({json:{write:!1}})],ei.prototype,"size",void 0),ei=t1=u([$("esri.symbols.PictureMarkerSymbol")],ei);const am=ei;var fo;const PI=K.ofType({base:null,key:"type",typeMap:{icon:Co,object:P_,text:kl}});let mo=fo=class extends dh{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new PI,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return SI(this)}hasVisibleVerticalOffset(){return C_(this)}clone(){return new fo({verticalOffset:N(this.verticalOffset),callout:N(this.callout),styleOrigin:N(this.styleOrigin),symbolLayers:N(this.symbolLayers),thumbnail:N(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new fo({symbolLayers:new K([Co.fromSimpleMarkerSymbol(e)])})}static fromPictureMarkerSymbol(e){return new fo({symbolLayers:new K([Co.fromPictureMarkerSymbol(e)])})}static fromCIMSymbol(e){var i,s;if(((s=(i=e.data)==null?void 0:i.symbol)==null?void 0:s.type)!=="CIMPointSymbol")return null;const r=e.data.symbol;return new fo(r!=null&&r.callout?{symbolLayers:new K([Co.fromCIMSymbol(e)]),callout:new bI({size:.5,color:new fe([0,0,0])}),verticalOffset:new k_({screenLength:40})}:{symbolLayers:new K([Co.fromCIMSymbol(e)])})}static fromTextSymbol(e){return new fo({symbolLayers:new K([kl.fromTextSymbol(e)])})}};u([d({type:k_,json:{write:!0}})],mo.prototype,"verticalOffset",void 0),u([d($I)],mo.prototype,"callout",void 0),u([d({type:PI,json:{origins:{"web-scene":{write:!0}}}})],mo.prototype,"symbolLayers",void 0),u([re({PointSymbol3D:"point-3d"},{readOnly:!0})],mo.prototype,"type",void 0),mo=fo=u([$("esri.symbols.PointSymbol3D")],mo);const lm=mo;var Nc;const RI=K.ofType({base:null,key:"type",typeMap:{extrude:nI,fill:uh,icon:Co,line:hh,object:P_,text:kl,water:vI}});let Lc=Nc=class extends dh{constructor(e){super(e),this.symbolLayers=new RI,this.type="polygon-3d"}initialize(){const e=t=>{t.type==="line"&&vu(V.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),t.type==="text"&&vu(V.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const t of this.symbolLayers)e(t);this.addHandles(Yo(()=>this.symbolLayers,"after-add",({item:t})=>e(t),In))}clone(){return new Nc({styleOrigin:N(this.styleOrigin),symbolLayers:N(this.symbolLayers),thumbnail:N(this.thumbnail)})}static fromJSON(e){var r;const t=new Nc;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.at(0).type==="fill"&&t.symbolLayers.at(1).type==="line"){const i=t.symbolLayers.at(0),s=t.symbolLayers.at(1);!s.enabled||(r=e.symbolLayers)!=null&&r[1]&&e.symbolLayers[1].enable===!1||(i.outline={size:s.size,color:s.material!=null?s.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new Nc({symbolLayers:new K([uh.fromSimpleFillSymbol(e)])})}};u([d({type:RI,json:{write:!0}})],Lc.prototype,"symbolLayers",void 0),u([re({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Lc.prototype,"type",void 0),Lc=Nc=u([$("esri.symbols.PolygonSymbol3D")],Lc);const cm=Lc;var r1;const ly=new ut({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let yo=r1=class extends aI{constructor(...e){super(...e),this.color=new fe([0,0,0,.25]),this.outline=new na,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.style=e),t&&(i.outline=t),r&&(i.color=r),i}clone(){return new r1({color:N(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};u([d()],yo.prototype,"color",void 0),u([d()],yo.prototype,"outline",void 0),u([re({esriSFS:"simple-fill"},{readOnly:!0})],yo.prototype,"type",void 0),u([d({type:ly.apiValues,json:{read:ly.read,write:ly.write}})],yo.prototype,"style",void 0),yo=r1=u([$("esri.symbols.SimpleFillSymbol")],yo);const F_=yo;var i1;const cy=new ut({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Ai=i1=class extends MI{constructor(...e){super(...e),this.color=new fe([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new na}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string")return e;const s={};return e&&(s.style=e),t!=null&&(s.size=ze(t)),r&&(s.outline=r),i&&(s.color=i),s}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new i1({angle:this.angle,color:N(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};u([d()],Ai.prototype,"color",void 0),u([pe("color")],Ai.prototype,"writeColor",null),u([re({esriSMS:"simple-marker"},{readOnly:!0})],Ai.prototype,"type",void 0),u([d()],Ai.prototype,"size",void 0),u([d({type:cy.apiValues,json:{read:cy.read,write:cy.write}})],Ai.prototype,"style",void 0),u([d({type:String,json:{write:!0}})],Ai.prototype,"path",null),u([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":na}},json:{default:null,write:!0}})],Ai.prototype,"outline",void 0),Ai=i1=u([$("esri.symbols.SimpleMarkerSymbol")],Ai);const ph=Ai;var s1;let Le=s1=class extends Lt{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new nm,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.text=e),t&&(i.font=t),r&&(i.color=r),i}writeLineWidth(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}castLineWidth(e){return ze(e)}writeLineHeight(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}clone(){return new s1({angle:this.angle,backgroundColor:N(this.backgroundColor),borderLineColor:N(this.borderLineColor),borderLineSize:this.borderLineSize,color:N(this.color),font:this.font&&this.font.clone(),haloColor:N(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e,t,r;return`${(e=this.backgroundColor)==null?void 0:e.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(t=this.color)==null?void 0:t.hash()}.${this.font&&this.font.hash()}.${(r=this.haloColor)==null?void 0:r.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};u([d({type:fe,json:{write:!0}})],Le.prototype,"backgroundColor",void 0),u([d({type:fe,json:{write:!0}})],Le.prototype,"borderLineColor",void 0),u([d({type:Number,json:{write:!0},cast:ze})],Le.prototype,"borderLineSize",void 0),u([d({type:nm,json:{write:!0}})],Le.prototype,"font",void 0),u([d({...mI,json:{write:!0}})],Le.prototype,"horizontalAlignment",void 0),u([d({type:Boolean,json:{write:!0}})],Le.prototype,"kerning",void 0),u([d({type:fe,json:{write:!0}})],Le.prototype,"haloColor",void 0),u([d({type:Number,cast:ze,json:{write:!0}})],Le.prototype,"haloSize",void 0),u([d({type:Boolean,json:{write:!0}})],Le.prototype,"rightToLeft",void 0),u([d({type:Boolean,json:{write:!0}})],Le.prototype,"rotated",void 0),u([d({type:String,json:{write:!0}})],Le.prototype,"text",void 0),u([re({esriTS:"text"},{readOnly:!0})],Le.prototype,"type",void 0),u([d({...yI,json:{write:!0}})],Le.prototype,"verticalAlignment",void 0),u([d({type:Number,cast:ze,json:{write:!0}})],Le.prototype,"xoffset",void 0),u([d({type:Number,cast:ze,json:{write:!0}})],Le.prototype,"yoffset",void 0),u([d({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Le.prototype,"angle",void 0),u([d({type:Number,json:{write:!0}})],Le.prototype,"width",void 0),u([d({type:Number})],Le.prototype,"lineWidth",void 0),u([pe("lineWidth")],Le.prototype,"writeLineWidth",null),u([ct("lineWidth")],Le.prototype,"castLineWidth",null),u([d(fI)],Le.prototype,"lineHeight",void 0),u([pe("lineHeight")],Le.prototype,"writeLineHeight",null),Le=s1=u([$("esri.symbols.TextSymbol")],Le);const um=Le;var n1;let ti=n1=class extends Lt{constructor(e){super(e),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=this.portal!=null?this.portal:An.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t==null?void 0:t.portal,super.read(e,t)}clone(){return new n1({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const r=t!=null?t.cache:null,i=r?this._fetchCacheKey:null;if(r!=null){const a=i&&r.get(i);if(a)return a.clone()}const{resolveWebStyleSymbol:s}=await j(()=>import("./webStyleSymbolUtils-BIjToMlr.js"),__vite__mapDeps([206,207,168,101,55,169]),import.meta.url);Qe(t);const n=s(this,{portal:this.portal},e,t);n.catch(a=>{V.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",a)});const o=await n;return e==="webRef"&&o.type==="point-3d"||e==="cimRef"&&o.type==="cim"?(r!=null&&r.set(i,o.clone()),o):null}};u([d({json:{write:!1}})],ti.prototype,"color",void 0),u([d({type:String,json:{write:!0}})],ti.prototype,"styleName",void 0),u([d({type:An,json:{write:!1}})],ti.prototype,"portal",void 0),u([d({type:String,json:{read:kv,write:yl}})],ti.prototype,"styleUrl",void 0),u([d({type:fu,json:{read:!1}})],ti.prototype,"thumbnail",void 0),u([d({type:String,json:{write:!0}})],ti.prototype,"name",void 0),u([re({styleSymbolReference:"web-style"},{readOnly:!0})],ti.prototype,"type",void 0),u([d()],ti.prototype,"_fetchCacheKey",null),ti=n1=u([$("esri.symbols.WebStyleSymbol")],ti);const hm=ti;function Xre(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function Kre(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const U_={base:Lt,key:"type",typeMap:{"simple-fill":F_,"picture-fill":D_,"picture-marker":am,"simple-line":na,"simple-marker":ph,text:um,"label-3d":N_,"line-3d":om,"mesh-3d":L_,"point-3d":lm,"polygon-3d":cm,"web-style":hm,cim:sa},errorContext:"symbol"},Qre={base:Lt,key:"type",typeMap:{"picture-marker":am,"simple-marker":ph,"point-3d":lm,cim:sa},errorContext:"symbol"},eie={base:Lt,key:"type",typeMap:{"simple-line":na,"line-3d":om,cim:sa},errorContext:"symbol"},tie={base:Lt,key:"type",typeMap:{"simple-fill":F_,"picture-fill":D_,"polygon-3d":cm,cim:sa},errorContext:"symbol"},rie={base:Lt,key:"type",typeMap:{"picture-marker":am,"simple-marker":ph,text:um,"web-style":hm,cim:sa},errorContext:"symbol"},iie=lv({types:U_}),sie={base:Lt,key:"type",typeMap:{"simple-fill":F_,"picture-fill":D_,"picture-marker":am,"simple-line":na,"simple-marker":ph,text:um,"line-3d":om,"mesh-3d":L_,"point-3d":lm,"polygon-3d":cm,"web-style":hm,cim:sa},errorContext:"symbol"},nie={base:Lt,key:"type",typeMap:{text:um,"label-3d":N_},errorContext:"symbol"},oie={base:Lt,key:"type",typeMap:{"line-3d":om,"mesh-3d":L_,"point-3d":lm,"polygon-3d":cm,"web-style":hm,cim:sa},errorContext:"symbol"},aie={base:Lt,key:"type",typeMap:{"label-3d":N_},errorContext:"symbol"},lie=Is(U_);var o1;function nV(e){if(!e)return null;const t={};for(const r in e){const i=_l(e[r]);i&&(t[r]=i)}return Object.keys(t).length!==0?t:null}function oV(e){if(e==null)return null;const t={};for(const r in e){const i=e[r];i&&(t[r]=i.toJSON())}return Object.keys(t).length!==0?t:null}let Jt=o1=class extends Gr(W){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.popupTemplate=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:pd(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&JC(V.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),(e==null?void 0:e.type)!=="mesh"&&this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}get version(){return this._version}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}cloneShallow(){return new o1({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const t=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const r of[t,this.sourceLayer,this.layer])if(r){if("popupTemplate"in r&&r.popupTemplate)return r.popupTemplate;if(e&&"defaultPopupTemplate"in r&&r.defaultPopupTemplate!=null)return r.defaultPopupTemplate}return null}getAttribute(e){var t;return(t=this.attributes)==null?void 0:t[e]}setAttribute(e,t){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",r,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){var e;return{aggregateGeometries:oV(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:Ky(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((e=this.popupTemplate)==null?void 0:e.toJSON())??null}}notifyMeshTransformChanged(e={}){const{geometry:t}=this;if((t==null?void 0:t.type)==="mesh"){const r={origin:t.origin,transform:t.transform};this._notifyLayer("origin-transform",r,r,e.action)}}_notifyLayer(e,t,r,i){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:e,oldValue:t,newValue:r};e==="origin-transform"&&(s.action=i),e==="attributes"&&(s.attributeName=i),this.layer.graphicChanged(s)}_watchMeshGeometryChanges(){this.addHandles([zi(()=>{var e,t;return((e=this.geometry)==null?void 0:e.type)==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:(t=this.geometry.transform)==null?void 0:t.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0},({localMatrix:e,origin:t})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===t||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=t,this.notifyMeshTransformChanged())}),zi(()=>{var e;return((e=this.geometry)==null?void 0:e.type)==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0},()=>{var t;const e=this.geometry;(e==null?void 0:e.type)==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=(t=e.transform)==null?void 0:t.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,t)=>e===t,sync:!0})])}};u([d({value:null,json:{read:nV}})],Jt.prototype,"aggregateGeometries",null),u([d({value:null})],Jt.prototype,"attributes",null),u([d({value:null,types:zf,json:{read:_l}})],Jt.prototype,"geometry",null),u([d({type:Boolean})],Jt.prototype,"isAggregate",void 0),u([d({clonable:"reference"})],Jt.prototype,"layer",void 0),u([d({clonable:"reference"})],Jt.prototype,"origin",void 0),u([d({type:wG})],Jt.prototype,"popupTemplate",void 0),u([d({clonable:"reference"})],Jt.prototype,"sourceLayer",void 0),u([d({value:null,types:U_})],Jt.prototype,"symbol",null),u([d({clonable:!1,json:{read:!1,write:!1}})],Jt.prototype,"_version",void 0),u([d({type:Boolean,value:!0})],Jt.prototype,"visible",null),Jt=o1=u([$("esri.Graphic")],Jt);const ef=Jt;let jo=class extends cu{_own(t){t.layer&&"remove"in t.layer&&t.layer!==this.owner&&t.layer.remove(t),t.layer=this.owner}_release(t){t.layer===this.owner&&(t.layer=null)}};u([YE({Type:ef,ensureType:Bt(ef)})],jo.prototype,"itemType",void 0),jo=u([$("esri.support.GraphicsCollection")],jo);let tn=class extends Y{constructor(t){super(t),this.view=null,this.baseLayerViews=new K,this.referenceLayerViews=new K,this._loadingHandle=se(()=>{var r,i;return(i=(r=this.view)==null?void 0:r.map)==null?void 0:i.basemap},r=>{r&&r.load().catch(()=>{})},Nt)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const t of this.baseLayerViews)t.destroy();this.baseLayerViews.length=0;for(const t of this.referenceLayerViews)t.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){var r,i,s;if((r=this.view)!=null&&r.suspended)return!1;const t=(s=(i=this.view)==null?void 0:i.map)==null?void 0:s.basemap;return!!t&&!!t.loaded&&(this.baseLayerViews.some(n=>n.updating)||this.referenceLayerViews.some(n=>n.updating))}};u([d({constructOnly:!0})],tn.prototype,"view",void 0),u([d({readOnly:!0})],tn.prototype,"baseLayerViews",void 0),u([d({readOnly:!0})],tn.prototype,"referenceLayerViews",void 0),u([d({readOnly:!0})],tn.prototype,"suspended",null),u([d({type:Boolean,readOnly:!0})],tn.prototype,"updating",null),tn=u([$("esri.views.BasemapView")],tn);const aV=tn;function lV(e){return"tryRecycleWith"in e}function cV(e){return e!=null&&typeof e=="object"&&"layerViews"in e}let uV=class{constructor(t,r,i){this.layer=t,this.view=r,this.layerViewImporter=i,this._controller=new AbortController,this._deferred=jr(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,Fr(this._controller.signal,()=>{const s=new k("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(s)})}tryRecycle(t){if(!this.done||!this.layerView||!lV(this.layerView))return null;const r=this.layer.type,i=this._controller.signal;for(let s=0;s<t.length;s++){const n=t[s];if(n.type!==r)continue;const o=this.layerView.tryRecycleWith(n,{signal:i});if(o){t.splice(s,1),this.layer=n;const a=this.layerView,l=a.view;return this.promise=Promise.race([o.then(()=>(Qe(this._controller.signal),n.emit("layerview-destroy",{view:l,layerView:a}),l.emit("layerview-destroy",{view:l,layerView:a}),n.emit("layerview-create",{view:l,layerView:a}),l.emit("layerview-create",{view:l,layerView:a}),a)),new Promise((h,p)=>Fr(this._controller.signal,()=>p(je())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:t}=this;if(t){const{layer:r,view:i}=this;r.emit("layerview-destroy",{view:i,layerView:t}),i.emit("layerview-destroy",{layer:r,layerView:t})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){var s,n;if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:r,view:i}=this;this._map=i.map;try{let o,a;if(await r.load({signal:t}),r.prefetchResources&&await r.prefetchResources({signal:t}),dV(r))o=await r.createLayerView(i,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(r))throw new k("layer:view-not-supported","No layerview implementation was found");const p=await this.layerViewImporter.importLayerView(r);Qe(t),o="default"in p?new p.default({layer:r,view:i}):new p({layer:r,view:i})}const l=()=>{a=Ue(a),o.destroyed||o.destroy(),o.layer=null,o.parent=null,o.view=null,this.done=!0};a=Fr(t,l),Qe(t);try{await o.when()}catch(p){throw l(),p}if(!((n=(s=this._map)==null?void 0:s.allLayers)==null?void 0:n.includes(r)))return l(),void this._deferred.reject(new k("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}));this.layerView=o,r.emit("layerview-create",{view:i,layerView:o}),i.emit("layerview-create",{layer:r,layerView:o}),this.done=!0,this._deferred.resolve(o)}catch(o){r.emit("layerview-create-error",{view:i,error:o}),i.emit("layerview-create-error",{layer:r,error:o}),this.done=!0,this._deferred.reject(new k("layerview:create-error","layerview creation failed",{layer:r,error:o}))}}},Ir=class extends Y{constructor(t){super(t),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new Uo,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var i;const r=(i=this.view.map)==null?void 0:i.allLayers;if(r)for(const s of r)this.layerViewImporter.hasLayerViewModule(s)&&this.layerViewImporter.importLayerView(s)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=jr(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(Ku(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var l,h,p;if(this.destroyed)return;const r=this.view.map;if(this._map!==r&&(this.clear(),this._map=r),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const i=new Set,s=[],n=this.view.ready,o=f=>{if(f!=null){for(const m of f)if(m){i.add(m);const y=this._layerLayerViewInfoMap.get(m);y&&n?y.start():y||this._recyclingInfoMap.has(m)||s.push(m),"layers"in m&&m.layers&&o(m.layers)}}};for(const f of this._rootCollectionNames)o(Di(this,f));for(const[f,m]of this._layerLayerViewInfoMap)if(!i.has(f)){this._layerLayerViewInfoMap.delete(m.layer);const y=m.tryRecycle(s);y?(this.notifyChange("updating"),this._recyclingInfoMap.set(m.layer,m),y.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),this._layerLayerViewInfoMap.set(m.layer,m),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),m.destroy(),this._reschedule()})):m.destroy()}for(const[f,m]of this._recyclingInfoMap)i.has(f)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),m.destroy());for(const f of s)this._createLayerView(f);this._refreshCollections();const a=[(l=r==null?void 0:r.ground)==null?void 0:l.layers,(h=r==null?void 0:r.basemap)==null?void 0:h.baseLayers,(p=r==null?void 0:r.basemap)==null?void 0:p.referenceLayers,r==null?void 0:r.layers].filter(f=>!!f);i.forEach(f=>"layers"in f&&a.push(f.layers)),this.addHandles(a.map(f=>this._watchUpdatingTracking.addOnCollectionChange(()=>f,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([Yo(()=>{var t,r;return(r=(t=this.view)==null?void 0:t.map)==null?void 0:r.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),se(()=>{const t=this.view,r=t==null?void 0:t.map;return[r==null?void 0:r.basemap,r==null?void 0:r.ground,r==null?void 0:r.layers,t==null?void 0:t.ready]},()=>this._reschedule(),dr)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),Gm(this._recyclingInfoMap),Gm(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(je()),this._workPromise=null)}get _layersToLayerViews(){const t=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&t.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(t)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||lN(this._layerLayerViewInfoMap,t=>!t.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let t=0;for(const r of this._layerLayerViewInfoMap.values())r.done||++t;return t}clear(){this.destroyed||(Gm(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(t){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(t)){if(this._recyclingInfoMap.has(t))return this._recyclingInfoMap.get(t).promise;throw new k("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:t})}return this._layerLayerViewInfoMap.get(t).promise}isCreatingLayerViewsForLayer(t,r){var n;this.commitProperty("updatingRemaining");const i=this._layerLayerViewInfoMap.get(t);if(!(i!=null&&i.done))return!0;const s=i.layerView;return!(!s||!r||s.parent===r)||!!(i.done&&s&&"layers"in t&&((n=t.layers)!=null&&n.length))&&t.layers.some(o=>this.isCreatingLayerViewsForLayer(o,s))}_refreshCollections(){for(const[t,r]of this._layersToLayerViews)this._populateLayerViewsOwners(Di(this,t),Di(this,r),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(t,r,i){if(!t||!r)return void(r&&r.removeAll());let s=0;for(const n of t){const o=this._layerLayerViewInfoMap.get(n);if(!(o!=null&&o.layerView))continue;const a=o.layerView;a.layer=n,a.parent=i,r.at(s)!==a&&r.splice(s,0,a),"layers"in n&&cV(a)&&this._populateLayerViewsOwners(n.layers,a.layerViews,a),s+=1}s<r.length&&r.splice(s,r.length)}_createLayerView(t){t.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(t)&&this.layerViewImporter.importLayerView(t);const r=new uV(t,this.view,this.layerViewImporter);r.promise.then(()=>this._refreshCollections(),i=>{i&&(vr(i)||i.name==="cancelled:layerview-create")||V.getLogger(this).error(`Failed to create layerview for layer title:'${t.title??"no title"}', id:'${t.id??"no id"}' of type '${t.type}'.`,{layer:t,error:i}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(t,r),this.view.ready&&r.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};u([d()],Ir.prototype,"_workPromise",void 0),u([d({readOnly:!0})],Ir.prototype,"_watchUpdatingTracking",void 0),u([d({readOnly:!0})],Ir.prototype,"_layersToLayerViews",null),u([d({readOnly:!0})],Ir.prototype,"_rootCollectionNames",null),u([d()],Ir.prototype,"layerViewImporter",void 0),u([d()],Ir.prototype,"supportsGround",void 0),u([d({readOnly:!0})],Ir.prototype,"updating",null),u([d({readOnly:!0})],Ir.prototype,"updatingRemaining",null),u([d({constructOnly:!0})],Ir.prototype,"view",void 0),Ir=u([$("esri.views.LayerViewManager")],Ir);const hV=Ir;function dV(e){return"createLayerView"in e&&e.createLayerView!=null}let lr=class extends Y{constructor(t){super(t),this.factor=1.5,this.offset=vt(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};u([d({type:Number})],lr.prototype,"factor",void 0),u([d({nonNullable:!0})],lr.prototype,"offset",void 0),u([d()],lr.prototype,"position",void 0),u([d({type:Number,range:{min:0}})],lr.prototype,"size",void 0),u([d()],lr.prototype,"maskUrl",void 0),u([d()],lr.prototype,"maskEnabled",void 0),u([d()],lr.prototype,"overlayUrl",void 0),u([d()],lr.prototype,"overlayEnabled",void 0),u([d({readOnly:!0})],lr.prototype,"version",null),u([d({type:Boolean})],lr.prototype,"visible",void 0),lr=u([$("esri.views.Magnifier")],lr);const CI=lr;let Qd=class{constructor(t){this._observable=new eh,this._map=new Map(t)}get size(){return J(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(t){const r=this._map.delete(t);return r&&this._observable.notify(),r}entries(){return J(this._observable),this._map.entries()}forEach(t,r){J(this._observable),this._map.forEach((i,s)=>t.call(r,i,s,this),r)}get(t){return J(this._observable),this._map.get(t)}has(t){return J(this._observable),this._map.has(t)}keys(){return J(this._observable),this._map.keys()}set(t,r){return this._map.set(t,r),this._observable.notify(),this}values(){return J(this._observable),this._map.values()}[Symbol.iterator](){return J(this._observable),this._map[Symbol.iterator]()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var a1;let Dc=a1=class extends W{constructor(e){super(e),this.name=null,this.code=null}clone(){return new a1({name:this.name,code:this.code})}};u([d({type:String,json:{write:!0}})],Dc.prototype,"name",void 0),u([d({type:[String,Number],json:{write:!0}})],Dc.prototype,"code",void 0),Dc=a1=u([$("esri.layers.support.CodedValue")],Dc);const pV=new ut({inherited:"inherited",codedValue:"coded-value",range:"range"});let Fc=class extends W{constructor(t){super(t),this.name=null,this.type=null}};u([d({type:String,json:{write:!0}})],Fc.prototype,"name",void 0),u([re(pV)],Fc.prototype,"type",void 0),Fc=u([$("esri.layers.support.Domain")],Fc);const dm=Fc;var l1;let Uc=l1=class extends dm{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const r=String(e);this.codedValues.some(i=>(String(i.code)===r&&(t=i.name),!!t))}return t}clone(){return new l1({codedValues:N(this.codedValues),name:this.name})}};u([d({type:[Dc],json:{write:!0}})],Uc.prototype,"codedValues",void 0),u([re({codedValue:"coded-value"})],Uc.prototype,"type",void 0),Uc=l1=u([$("esri.layers.support.CodedValueDomain")],Uc);const kI=Uc;var c1;let ep=c1=class extends dm{constructor(e){super(e),this.type="inherited"}clone(){return new c1}};u([re({inherited:"inherited"})],ep.prototype,"type",void 0),ep=c1=u([$("esri.layers.support.InheritedDomain")],ep);const NI=ep;var u1;let Oa=u1=class extends dm{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new u1({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};u([d({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var r;return(r=t.range)==null?void 0:r[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]}}}})],Oa.prototype,"maxValue",void 0),u([d({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var r;return(r=t.range)==null?void 0:r[0]}},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]}}}})],Oa.prototype,"minValue",void 0),u([re({range:"range"})],Oa.prototype,"type",void 0),Oa=u1=u([$("esri.layers.support.RangeDomain")],Oa);const LI=Oa,fV={key:"type",base:dm,typeMap:{range:LI,"coded-value":kI,inherited:NI}};function mV(e){if(!(e!=null&&e.type))return null;switch(e.type){case"range":return LI.fromJSON(e);case"codedValue":return kI.fromJSON(e);case"inherited":return NI.fromJSON(e)}return null}const yV=new ut({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var h1;const gV=new ut({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let Mt=h1=class extends W{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch{}return(r==null?void 0:r.value)??null}readValueType(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch{}return r?gV.fromJSON(r.fieldValueType):null}clone(){var e;return new h1({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:((e=this.domain)==null?void 0:e.clone())??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};u([d({type:String,json:{write:!0}})],Mt.prototype,"alias",void 0),u([d({type:[String,Number],json:{write:{allowNull:!0}}})],Mt.prototype,"defaultValue",void 0),u([d()],Mt.prototype,"description",void 0),u([ve("description")],Mt.prototype,"readDescription",null),u([d({types:fV,json:{read:{reader:mV},write:!0}})],Mt.prototype,"domain",void 0),u([d({type:Boolean,json:{write:!0}})],Mt.prototype,"editable",void 0),u([d({type:ke,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],Mt.prototype,"length",void 0),u([d({type:String,json:{write:!0}})],Mt.prototype,"name",void 0),u([d({type:Boolean,json:{write:!0}})],Mt.prototype,"nullable",void 0),u([re(yV)],Mt.prototype,"type",void 0),u([d()],Mt.prototype,"valueType",void 0),u([ve("valueType",["description"])],Mt.prototype,"readValueType",null),u([d({type:Boolean,json:{read:!1}})],Mt.prototype,"visible",void 0),Mt=h1=u([$("esri.layers.support.Field")],Mt);const vV=Mt;var d1;let Pa=d1=class extends W{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new d1({mapLayerId:e,gdbVersion:t})}};u([re({mapLayer:"map-layer"})],Pa.prototype,"type",void 0),u([d({type:ke,json:{write:!0}})],Pa.prototype,"mapLayerId",void 0),u([d({type:String,json:{write:!0}})],Pa.prototype,"gdbVersion",void 0),Pa=d1=u([$("esri.layers.support.source.MapLayerSource")],Pa);var p1;let us=p1=class extends W{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:t,oidFields:r,spatialReference:i,geometryType:s}=this,n={workspaceId:e,query:t,oidFields:r,spatialReference:(i==null?void 0:i.clone())??void 0,geometryType:s};return new p1(n)}};u([re({queryTable:"query-table"})],us.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],us.prototype,"workspaceId",void 0),u([d({type:String,json:{write:!0}})],us.prototype,"query",void 0),u([d({type:String,json:{write:!0}})],us.prototype,"oidFields",void 0),u([d({type:de,json:{write:!0}})],us.prototype,"spatialReference",void 0),u([re(J6)],us.prototype,"geometryType",void 0),us=p1=u([$("esri.layers.support.source.QueryTableDataSource")],us);var f1;let Ra=f1=class extends W{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new f1({workspaceId:e,dataSourceName:t})}};u([re({raster:"raster"})],Ra.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],Ra.prototype,"dataSourceName",void 0),u([d({type:String,json:{write:!0}})],Ra.prototype,"workspaceId",void 0),Ra=f1=u([$("esri.layers.support.source.RasterDataSource")],Ra);var m1;let go=m1=class extends W{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:r}=this;return new m1({workspaceId:e,gdbVersion:t,dataSourceName:r})}};u([re({table:"table"})],go.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],go.prototype,"workspaceId",void 0),u([d({type:String,json:{write:!0}})],go.prototype,"gdbVersion",void 0),u([d({type:String,json:{write:!0}})],go.prototype,"dataSourceName",void 0),go=m1=u([$("esri.layers.support.source.TableDataSource")],go);var y1,g1;const _V=Wt()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let cr=y1=class extends W{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,r){return oS()(e,t,r)}castLeftTableSource(e){return Is(v1(),e)}readRightTableSource(e,t,r){return oS()(e,t,r)}castRightTableSource(e){return Is(v1(),e)}clone(){const{leftTableKey:e,rightTableKey:t,leftTableSource:r,rightTableSource:i,joinType:s}=this,n={leftTableKey:e,rightTableKey:t,leftTableSource:(r==null?void 0:r.clone())??void 0,rightTableSource:(i==null?void 0:i.clone())??void 0,joinType:s};return new y1(n)}};u([re({joinTable:"join-table"})],cr.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],cr.prototype,"leftTableKey",void 0),u([d({type:String,json:{write:!0}})],cr.prototype,"rightTableKey",void 0),u([d({json:{write:!0}})],cr.prototype,"leftTableSource",void 0),u([ve("leftTableSource")],cr.prototype,"readLeftTableSource",null),u([ct("leftTableSource")],cr.prototype,"castLeftTableSource",null),u([d({json:{write:!0}})],cr.prototype,"rightTableSource",void 0),u([ve("rightTableSource")],cr.prototype,"readRightTableSource",null),u([ct("rightTableSource")],cr.prototype,"castRightTableSource",null),u([re(_V)],cr.prototype,"joinType",void 0),cr=y1=u([$("esri.layers.support.source.JoinTableDataSource")],cr);let uy=null;function oS(){return uy||(uy=lv({types:v1()})),uy}let hy=null;function v1(){return hy||(hy={key:"type",base:null,typeMap:{"data-layer":ws,"map-layer":Pa}}),hy}const wV={key:"type",base:null,typeMap:{"join-table":cr,"query-table":us,raster:Ra,table:go}};let ws=g1=class extends W{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new g1({fields:e,dataSource:t})}};u([re({dataLayer:"data-layer"})],ws.prototype,"type",void 0),u([d({type:[vV],json:{write:!0}})],ws.prototype,"fields",void 0),u([d({types:wV,json:{write:!0}})],ws.prototype,"dataSource",void 0),ws=g1=u([$("esri.layers.support.source.DataLayerSource")],ws),ws.from=Bt(ws);let vo=class extends Gr(W){constructor(t){super(t),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};u([d({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],vo.prototype,"onFields",void 0),u([d({type:String,json:{write:!0}})],vo.prototype,"operator",void 0),u([d({type:String,json:{write:!0}})],vo.prototype,"searchTerm",void 0),u([d({type:String,json:{write:!0}})],vo.prototype,"searchType",void 0),vo=u([$("esri.rest.support.FullTextSearch")],vo);const bV=vo;var _1;const aS=new ut({upperLeft:"upper-left",lowerLeft:"lower-left"});let _o=_1=class extends W{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new _1(N({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};u([d({type:Be,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],_o.prototype,"extent",void 0),u([d({type:["view","edit"],json:{write:!0}})],_o.prototype,"mode",void 0),u([d({type:String,json:{read:aS.read,write:aS.write}})],_o.prototype,"originPosition",void 0),u([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],_o.prototype,"tolerance",void 0),_o=_1=u([$("esri.rest.support.QuantizationParameters")],_o);const DI=_o,SV=new ut({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var w1;const lS=new ut({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let ri=w1=class extends W{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=N(e))}clone(){return new w1({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:N(this.statisticParameters)})}};u([d({type:Number,json:{write:!0}})],ri.prototype,"maxPointCount",void 0),u([d({type:Number,json:{write:!0}})],ri.prototype,"maxRecordCount",void 0),u([d({type:Number,json:{write:!0}})],ri.prototype,"maxVertexCount",void 0),u([d({type:String,json:{write:!0}})],ri.prototype,"onStatisticField",void 0),u([d({type:String,json:{write:!0}})],ri.prototype,"outStatisticFieldName",void 0),u([d({type:String,json:{read:{source:"statisticType",reader:lS.read},write:{target:"statisticType",writer:lS.write}}})],ri.prototype,"statisticType",void 0),u([d({type:Object})],ri.prototype,"statisticParameters",void 0),u([pe("statisticParameters")],ri.prototype,"writeStatisticParameters",null),ri=w1=u([$("esri.rest.support.StatisticDefinition")],ri);const $V=ri;var tp;const TV=new ut({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let X=tp=class extends W{static from(e){return xf(tp,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const r={};for(const i in e){const s=e[i];Array.isArray(s)?r[i]=s.map(n=>n instanceof Date?n.getTime():n):s instanceof Date?r[i]=s.getTime():r[i]=s}t.parameterValues=r}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new tp(N({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};X.MAX_MAX_RECORD_COUNT_FACTOR=5,u([d({json:{write:!0}})],X.prototype,"aggregateIds",void 0),u([d({type:Boolean,json:{write:!0}})],X.prototype,"cacheHint",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],X.prototype,"compactGeometryEnabled",void 0),u([d({json:{write:!0}})],X.prototype,"datumTransformation",void 0),u([ct("datumTransformation")],X.prototype,"castDatumTransformation",null),u([d({type:Boolean,json:{default:!1,write:!0}})],X.prototype,"defaultSpatialReferenceEnabled",void 0),u([d({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],X.prototype,"distance",void 0),u([d({type:ws,json:{write:!0}})],X.prototype,"dynamicDataSource",void 0),u([d({type:String,json:{write:!0}})],X.prototype,"formatOf3DObjects",void 0),u([d({type:[bV],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],X.prototype,"fullText",void 0),u([d({type:String,json:{write:!0}})],X.prototype,"gdbVersion",void 0),u([d({types:zf,json:{read:_l,write:!0}})],X.prototype,"geometry",void 0),u([d({type:Number,json:{write:!0}})],X.prototype,"geometryPrecision",void 0),u([d({type:[String],json:{write:!0}})],X.prototype,"groupByFieldsForStatistics",void 0),u([d({type:String,json:{write:!0}})],X.prototype,"having",void 0),u([d({type:Date})],X.prototype,"historicMoment",void 0),u([pe("historicMoment")],X.prototype,"writeHistoricMoment",null),u([d({type:Number,json:{write:!0}})],X.prototype,"maxAllowableOffset",void 0),u([d({type:Number,cast:e=>e<1?1:e>X.MAX_MAX_RECORD_COUNT_FACTOR?X.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],X.prototype,"maxRecordCountFactor",void 0),u([d({type:["xyFootprint"],json:{write:!0}})],X.prototype,"multipatchOption",void 0),u([d({type:Number,json:{read:{source:"resultRecordCount"}}})],X.prototype,"num",void 0),u([d({json:{write:!0}})],X.prototype,"objectIds",void 0),u([d({type:[String],json:{write:!0}})],X.prototype,"orderByFields",void 0),u([d({type:[String],json:{write:!0}})],X.prototype,"outFields",void 0),u([d({type:de,json:{name:"outSR",write:!0}})],X.prototype,"outSpatialReference",void 0),u([d({type:[$V],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],X.prototype,"outStatistics",void 0),u([d({json:{write:!0}})],X.prototype,"parameterValues",void 0),u([pe("parameterValues")],X.prototype,"writeParameterValues",null),u([d({type:ae,json:{write:!0}})],X.prototype,"pixelSize",void 0),u([d({type:DI,json:{write:!0}})],X.prototype,"quantizationParameters",void 0),u([d({type:[Object],json:{write:!0}})],X.prototype,"rangeValues",void 0),u([d({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],X.prototype,"relationParameter",void 0),u([d({type:String,json:{write:!0}})],X.prototype,"resultType",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],X.prototype,"returnCentroid",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],X.prototype,"returnDistinctValues",void 0),u([d({type:Boolean,json:{default:!0,write:!0}})],X.prototype,"returnExceededLimitFeatures",void 0),u([d({type:Boolean,json:{write:!0}})],X.prototype,"returnGeometry",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],X.prototype,"returnQueryGeometry",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],X.prototype,"returnM",void 0),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],X.prototype,"returnZ",void 0),u([d({type:de,json:{write:!0}})],X.prototype,"sourceSpatialReference",void 0),u([re(SV,{ignoreUnknown:!1,name:"spatialRel"})],X.prototype,"spatialRelationship",void 0),u([d({type:Number,json:{read:{source:"resultOffset"}}})],X.prototype,"start",void 0),u([pe("start"),pe("num")],X.prototype,"writeStart",null),u([d({type:String,json:{write:!0}})],X.prototype,"sqlFormat",void 0),u([d({type:String,json:{write:!0}})],X.prototype,"text",void 0),u([d({type:l_,json:{write:!0}})],X.prototype,"timeExtent",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],X.prototype,"timeReferenceUnknownClient",void 0),u([re(TV,{ignoreUnknown:!1}),d({json:{write:{overridePolicy(e){return{enabled:!!e&&this.distance!=null&&this.distance>0}}}}})],X.prototype,"units",void 0),u([d({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start!=null&&this.start>0}}}}})],X.prototype,"where",void 0),u([pe("where")],X.prototype,"writeWhere",null),X=tp=u([$("esri.rest.support.Query")],X);const cS=X;function Jh(e){return!!(e!=null&&typeof e=="object"&&"createQuery"in e&&e.createQuery&&"on"in e&&e.on)}let hs=class extends Ln.EventedAccessor{constructor(t){super(t),this._selectionMap=new Qd,this._sources=new K,this._trashCan=[],this._layerEditHandles=new K,this._vizTaskId=0,this.showHighlight=!0}initialize(){this.addHandles([se(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),Yo(()=>this.sources,"change",r=>{const i=this._selectionMap;for(const s of r.removed)i.delete(s);this._refreshListeners(),this._refreshVisualization()},{onListenerAdd:()=>this._refreshListeners()})]);const t=new K;this.view.when().then(()=>{this.view.map&&(this.view.map.allLayers.flatten(r=>"sublayers"in r&&r.sublayers?r.sublayers:null).forEach(r=>{(Jh(r)&&!M4(r)||Qn(r))&&t.add(r)}),this.sources=t)})}destroy(){this._layerEditHandles.drain(Ue)}get selections(){return Array.from(this._selectionMap.entries()).map(t=>{const[r,i]=t;return{layer:r,selection:[...i.selection]}})}get count(){let t=0;for(const r of this._selectionMap.values())t+=r.selection.length;return t}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(t){Tn(t,this._sources)}async getSelectedFeatures(t,r={},i="layerView"){const{view:s,selections:n}=this,o=(t!==void 0?n.filter(a=>t.includes(a.layer)):n).filter(a=>a.selection.length>0).map(async a=>{const{layer:l,selection:h}=a,p=Qn(l)?l.parent:l;if(p==null||!hS(p))return null;if(i==="layer")return dS(p,h,r);if(uS(p))return null;const f=await s.whenLayerView(p).catch(()=>null);return f?dS(f,h,r):null});return(await Promise.all(o)).filter(a=>a!=null)}updateSelection(t){const r=new Map;for(const[n,o]of this._selectionMap)r.set(n,[...o.selection]);let i=!1;const s=t.current.concat(t.added);for(const n of s){const o=n.sourceLayer,a=n.getObjectId();if(this.sources.includes(o)&&(Jh(o)||Qn(o))&&a!==null){const l=nv(r,o,()=>[]);l.includes(a)||(l.push(a),i=!0)}}for(const n of t.removed){const o=n.sourceLayer,a=n.getObjectId();if(this.sources.includes(o)&&(Jh(o)||Qn(o))&&a!==null){const l=r.get(o),h=l==null?void 0:l.indexOf(a);h!==void 0&&h>=0&&(l==null||l.splice(h,1),i=!0)}}if(i){const{_selectionMap:n,_trashCan:o}=this,a=[];for(const[l,h]of r){const p=n.get(l);p!==void 0&&o.push(p),n.set(l,{selection:h}),a.push({layer:l,selection:h,...vw(p!==void 0?p.selection:[],h)})}this._onSelectionChange(a)}}setSelection(t,r){this._setSelection(t,r)}getSelection(t){const r=this._selectionMap.get(t);return r==null?void 0:r.selection}appendToSelection(t,r){const i=this._selectionMap.get(t),s=i!==void 0?[...i.selection]:[];for(const n of r)s.includes(n)||s.push(n);this._setSelection(t,s)}removeFromSelection(t,r){const i=this._selectionMap.get(t);if(!i)return;const s=[];for(const n of i.selection)r.includes(n)||s.push(n);this._setSelection(t,s)}toggleInSelection(t,r){const i=this._selectionMap.get(t);if(!i||i.selection.length===0)return void this._setSelection(t,r);const s=new Set(i.selection),n=new Set(r),o=Wk(s,n);this._setSelection(t,Array.from(o))}clear(){const t=this._selectionMap.values();this._trashCan.push(...t);const r=[];for(const[i,s]of this._selectionMap.entries())r.push({layer:i,added:[],removed:[...s.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(r)}_onSelectionChange(t){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:t})}_refreshVisualization(){var o;if(this.view==null||this.sources==null)return;for(this._vizTaskId++;this._trashCan.length>0;){const a=this._trashCan.pop();(o=a==null?void 0:a.highlightHandle)==null||o.remove()}const{sources:t,view:r,_selectionMap:i,showHighlight:s}=this,n=this._vizTaskId;for(const a of t){const l=i.get(a),h=Qn(a)?a.parent:a;if(h!=null&&hS(h)){if(uS(h))continue;r.whenLayerView(h).then(p=>{var f;(f=l==null?void 0:l.highlightHandle)==null||f.remove(),l!=null&&s&&n===this._vizTaskId&&"highlight"in p&&typeof p.highlight=="function"&&l.selection.length>0&&(l.highlightHandle=p.highlight(l.selection,"selection"))}).catch(()=>{var p;(p=l==null?void 0:l.highlightHandle)==null||p.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(Ue);for(const t of this.sources){const r=Qn(t)?t.parent:t;if(r!=null&&Jh(r)){const i=r.on("edits",s=>{this._handleEditChanges(s,t)});this._layerEditHandles.push(i)}}}_handleEditChanges(t,r){if(t.deletedFeatures!==void 0&&t.deletedFeatures.length>0&&this._selectionMap.has(r)){const i=t.deletedFeatures.filter(s=>s.error==null).map(s=>s.objectId).filter(gu);this.removeFromSelection(r,i)}}_setSelection(t,r){if(!this.sources.includes(t))throw new Error(`Cannot set selection on layer ${t.title} because it is not in 'sources'`);const i=this._selectionMap.get(t);if(i===void 0||!MV(i,{selection:r})){i!==void 0&&this._trashCan.push(i),this._selectionMap.set(t,{selection:[...r]});const s={layer:t,selection:[...r],...vw(i!==void 0?i.selection:[],r)};this._onSelectionChange([s])}}};u([d({readOnly:!0,nonNullable:!0})],hs.prototype,"selections",null),u([d({readOnly:!0,nonNullable:!0})],hs.prototype,"count",null),u([d({constructOnly:!0,nonNullable:!0})],hs.prototype,"view",void 0),u([d({readOnly:!0,nonNullable:!0})],hs.prototype,"hasSelection",null),u([d()],hs.prototype,"showHighlight",void 0),u([d()],hs.prototype,"sources",null),hs=u([$("esri.views.SelectionManager")],hs);const uS=e=>{var t;return Qn(e)?((t=e.parent)==null?void 0:t.isTable)===!0:e.isTable},EV=e=>e.layer!==void 0,hS=e=>(e==null?void 0:e.when)!==void 0,MV=(e,t)=>{if(e==null&&t==null)return!0;if(e!=null&&t==null||e==null&&t!=null)return!1;if(e!=null&&t!=null&&e.selection!=null&&t.selection!=null){const r=[...e.selection],i=[...t.selection];if(r.length!==i.length)return!1;r.sort(),i.sort();for(let s=0;s<r.length;s++)if(r[s]!==i[s])return!1}return!0},dS=async(e,t,r={})=>{let i;if(EV(e)){const s=e;i=s===void 0?null:await s.queryFeatures(new cS({...r,objectIds:t})).then(n=>({data:n,layer:e.layer}))}else{const s=e;i=s===void 0?null:await s.queryFeatures(new cS({...r,objectIds:t})).then(n=>({data:n,layer:s}))}return i},xV=hs;let jc=class extends Gr(Y){constructor(t){super(t),this.accentColor=new fe([255,127,0]),this.textColor=new fe([255,255,255])}};u([d({type:fe,nonNullable:!0})],jc.prototype,"accentColor",void 0),u([d({type:fe,nonNullable:!0})],jc.prototype,"textColor",void 0),jc=u([$("esri.views.Theme")],jc);const b1=jc;var pS;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(pS||(pS={}));const FI=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],UI={};function jI(e){return!!UI[e]}function AV(e){for(const t of e)if(!jI(t))return!1;return!0}FI.forEach(e=>{UI[e]=!0});let IV=class{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach(({handler:r,priority:i},s)=>{var n;return(n=this.inputManager)==null?void 0:n.installHandlers(s,[r],i)})}disconnect(){this.inputManager&&this._handlers.forEach((t,r)=>{var i;return(i=this.inputManager)==null?void 0:i.uninstallHandlers(r)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,r,i,s){const n=Array.isArray(t)?t:t.split(",");if(!AV(n))return n.some(jI)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(r)?a=r:(o=r,a=[]),typeof i=="function"?o=i:s=i,s=s??bn.DEFAULT;const l=this._createUniqueGroupName(),h=new OV(this.view,n,a,o);this._handlers.set(l,{handler:h,priority:s});for(const p of n){const f=this._handlerCounts.get(p)||0;this._handlerCounts.set(p,f+1)}return this.inputManager&&this.inputManager.installHandlers(l,[h],s),_e(()=>this._removeHandler(l,n))}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,r){if(this._handlers.has(t)){this._handlers.delete(t);for(const i of r){const s=this._handlerCounts.get(i);s===void 0||(s===1?this._handlerCounts.delete(i):this._handlerCounts.set(i,s-1))}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},OV=class extends ht{constructor(t,r,i,s){super(!0),this._latestDragStart=void 0,this.view=t;for(const n of r)switch(n){case"click":this.registerIncoming("click",i,o=>s(CV(t,o)));break;case"double-click":this.registerIncoming("double-click",i,o=>s(kV(t,o)));break;case"immediate-click":this.registerIncoming("immediate-click",i,o=>s(NV(t,o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",i,o=>s(LV(t,o)));break;case"hold":this.registerIncoming("hold",i,o=>s(DV(t,o)));break;case"drag":this.registerIncoming("drag",i,o=>{const a=this._wrapDrag(o);a&&s(a)});break;case"key-down":this.registerIncoming("key-down",i,o=>s(FV(o)));break;case"key-up":this.registerIncoming("key-up",i,o=>s(UV(o)));break;case"pointer-down":this.registerIncoming("pointer-down",i,o=>s(Ql(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",i,o=>s(Ql(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",i,o=>s(Ql(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",i,o=>s(jV(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",i,o=>s(GV(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",i,o=>s(Ql(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",i,o=>s(Ql(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",i,o=>{s(VV(o))});break;case"focus":this.registerIncoming("focus",i,o=>{s(PV(o))});break;case"blur":this.registerIncoming("blur",i,o=>{s(RV(o))})}}_wrapDrag(t){const r=t.data,{x:i,y:s}=r.center,{action:n,pointerType:o,button:a}=r;if(n==="start"&&(this._latestDragStart=r),!this._latestDragStart)return;const l=r.pointer.native,h=r.buttons,{cancelable:p,timestamp:f}=t,m={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return n==="end"&&(this._latestDragStart=void 0),{type:"drag",action:n,x:i,y:s,origin:m,pointerType:o,button:a,buttons:h,radius:r.radius,angle:L3(r.angle),native:l,timestamp:f,cancelable:p,stopPropagation:()=>t.stopPropagation(),async:y=>t.async(y),preventDefault:()=>t.preventDefault()}}};function PV(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function RV(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function CV(e,t){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:a,eventId:l}=t.data,{cancelable:h,timestamp:p}=t;return{type:"click",pointerType:r,button:i,buttons:s,x:n,y:o,native:a,timestamp:p,screenPoint:vt(n,o),mapPoint:fh(e,n,o),eventId:l,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}function kV(e,t){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:a,eventId:l}=t.data,{cancelable:h,timestamp:p}=t;return{type:"double-click",pointerType:r,button:i,buttons:s,x:n,y:o,native:a,timestamp:p,mapPoint:fh(e,n,o),eventId:l,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}function NV(e,t){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:a,eventId:l}=t.data,h=a.pointerId,{cancelable:p,timestamp:f}=t;return{type:"immediate-click",pointerId:h,pointerType:r,button:i,buttons:s,x:n,y:o,native:a,timestamp:f,mapPoint:fh(e,n,o),eventId:l,cancelable:p,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}function LV(e,t){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:a,eventId:l}=t.data,h=a.pointerId,{cancelable:p,timestamp:f}=t;return{type:"immediate-double-click",pointerId:h,pointerType:r,button:i,buttons:s,x:n,y:o,native:a,timestamp:f,mapPoint:fh(e,n,o),eventId:l,cancelable:p,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}function DV(e,t){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:a}=t.data,{cancelable:l,timestamp:h}=t;return{type:"hold",pointerType:r,button:i,buttons:s,x:n,y:o,native:a,timestamp:h,mapPoint:fh(e,n,o),cancelable:l,stopPropagation:()=>t.stopPropagation(),async:p=>t.async(p),preventDefault:()=>t.preventDefault()}}function fh(e,t,r){return e.toMap(vt(t,r),{exclude:[]})}function FV(e){const{key:t,repeat:r,native:i}=e.data,{cancelable:s,timestamp:n}=e;return{type:"key-down",key:t,repeat:r,native:i,timestamp:n,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:o=>e.async(o),preventDefault:()=>e.preventDefault()}}function UV(e){const{key:t,native:r}=e.data,{cancelable:i,timestamp:s}=e;return{type:"key-up",key:t,native:r,timestamp:s,cancelable:i,stopPropagation:()=>e.stopPropagation(),async:n=>e.async(n),preventDefault:()=>e.preventDefault()}}function Ql(e,t){const{x:r,y:i,button:s,buttons:n,native:o,eventId:a}=e.data,l=o.pointerId,h=o.pointerType,{cancelable:p,timestamp:f}=e;return{type:t,x:r,y:i,pointerId:l,pointerType:h,button:s,buttons:n,native:o,timestamp:f,eventId:a,cancelable:p,stopPropagation:()=>e.stopPropagation(),async:m=>e.async(m),preventDefault:()=>e.preventDefault()}}function jV(e){const{x:t,y:r,buttons:i,native:s,eventId:n}=e.data.currentEvent,{button:o}=e.data.startEvent,a=e.data.startEvent.native.pointerId,l=e.data.startEvent.native.pointerType,h=e.data.action,p={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:f,timestamp:m}=e;return{type:"pointer-drag",x:t,y:r,pointerId:a,pointerType:l,button:o,buttons:i,action:h,origin:p,native:s,timestamp:m,eventId:n,cancelable:f,stopPropagation:()=>e.stopPropagation(),async:y=>e.async(y),preventDefault:()=>e.preventDefault()}}function GV(e){const{cancelable:t,data:r,timestamp:i}=e,{x:s,y:n,deltaY:o,native:a}=r;return{type:"mouse-wheel",x:s,y:n,deltaY:o,native:a,timestamp:i,cancelable:t,stopPropagation:()=>e.stopPropagation(),async:l=>e.async(l),preventDefault:()=>e.preventDefault()}}function VV(e){const{action:t,state:r,device:i}=e.data,{cancelable:s,timestamp:n}=e,{buttons:o,axes:a}=r;return{type:"gamepad",device:i,timestamp:n,action:t,buttons:o,axes:a,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:l=>e.async(l),preventDefault:()=>e.preventDefault()}}var ju,fS,mS;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(ju||(ju={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(fS||(fS={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(mS||(mS={}));function zV(e){return[e.on("before-add",t=>{const r=t.item;if(r==null||e.includes(r))return V.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();r.onAdd()}),e.on("after-remove",t=>{const r=t.item;r.active&&(r.view.activeTool=null),r.destroy()})]}function S1(e){return e.visible&&e.getEditableFlag!=null&&e.getEditableFlag(ju.USER)&&e.getEditableFlag(ju.MANAGER)}function Ii(e){return vt(e.x,e.y)}function GI(e,t){var i;const r=(i=e instanceof HTMLElement?e:e.surface)==null?void 0:i.getBoundingClientRect();return r?vt(t.clientX-r.left,t.clientY-r.top):vt(0,0)}function VI(e,t){return t instanceof Event?GI(e,t):Ii(t)}function zI(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let BV=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(t,r){const i=()=>t.stopPropagation();switch(t.type){case"pointer-move":gS(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:t.action==="start"?this._externallyDragging=!0:t.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(i(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!vS(t))break;const s=Ii(t),n=da(s,t.pointerType,r.forEachTool);if(n==null)break;const o=n.manipulator,a=n.tool;o==null||a==null||!o.interactive||o.grabbable&&o.grabbableForEvent(t)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,t,r),o!=null&&a!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(t)&&!o.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:o,tool:a,start:s,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&r.activeTool==null&&(this._revertToNullActiveTool=!0,r.setActiveTool(n.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:s}),i());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,r);break;case"pointer-drag":{if(!vS(t))break;const s=this._grabbedManipulators.get(t.pointerId),n=s==null?void 0:s.manipulator,o=s==null?void 0:s.tool;if(n==null||o==null)break;const a=Ii(t);a.x=di(a.x,0,r.view.width),a.y=di(a.y,0,r.view.height);const l=s.start,h=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(n.dragging=!0,h?n.events.emit("drag",{action:"update",start:l,screenPoint:a}):n.events.emit("drag",{action:"start",start:l,screenPoint:a,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:o,manipulator:n,start:l}));break;case"end":n.dragging=!1,h&&n.events.emit("drag",{action:"end",start:l,screenPoint:a}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,r)}i();break}case"immediate-click":{const s=Ii(t),n=da(s,t.pointerType,r.forEachTool);if(HV(t)||r.forEachTool(h=>{if((n==null||n.tool!==h||h.automaticManipulatorSelection)&&h.manipulators){let p=!1;h.manipulators.forEach(({manipulator:f})=>{f.selected&&(f.selected=!1,p=!0)}),p&&h.onManipulatorSelectionChanged&&h.onManipulatorSelectionChanged()}}),n==null)break;const{manipulator:o,tool:a}=n;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const l=t.native.shiftKey;o.events.emit("immediate-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:l,stopPropagation:i}),dy(o,i);break}case"click":{const s=Ii(t),n=da(s,t.pointerType,r.forEachTool),o=n==null?void 0:n.manipulator;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit(t.type,{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:a}),i();break}case"double-click":{const s=Ii(t),n=da(s,t.pointerType,r.forEachTool),o=n!=null?n.manipulator:null;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("double-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i}),dy(o,i);break}case"immediate-double-click":{const s=Ii(t),n=da(s,t.pointerType,r.forEachTool),o=n!=null?n.manipulator:null;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i}),t.pointerType==="mouse"&&dy(o,i);break}}this._onFocusChange(r.forEachTool)}_releaseManipulatorBeforeDragging(t,r,i){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:r.pointerType,screenPoint:Ii(r)}),this._grabbedManipulators.forEach(({manipulator:s},n)=>{s===t&&this._grabbedManipulators.delete(n)}),this._afterManipulatorRelease(i.setActiveTool)}_handlePointerEnd(t,r){var s;const i=(s=this._grabbedManipulators.get(t.pointerId))==null?void 0:s.manipulator;i!=null&&i.grabbing&&(i.grabbing=!1,i.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:Ii(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorRelease(r.setActiveTool))}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=yS(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=yS(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const r=new Set,i=new Set;this._grabbedManipulators.forEach(({tool:s})=>{r.add(s)}),this._hoveredManipulators.forEach(({tool:s})=>{i.add(s)}),t(s=>{s.hasGrabbedManipulators=r.has(s),s.hasHoveredManipulators=i.has(s);const n=this._grabbedManipulators.values(),o=XC(n,({tool:a})=>a===s);s.firstGrabbedManipulator=o!=null?o.manipulator:null})}clearPointers(t,{forEachTool:r,setActiveTool:i},s=!0,n){const o=(a,l)=>a===t&&(n==null||n===l);this._grabbedManipulators.forEach(({tool:a,manipulator:l,pointerType:h},p)=>{o(a,l)&&(this._grabbedManipulators.delete(p),l.grabbing=!1,l.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:h}))}),this._draggedManipulators.forEach(({tool:a,manipulator:l},h)=>{o(a,l)&&(this._draggedManipulators.delete(h),l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}),s&&this._hoveredManipulators.forEach(({tool:a,manipulator:l},h)=>{o(a,l)&&(this._hoveredManipulators.delete(h),l.hovering=!1)}),this._afterManipulatorRelease(i),this._onFocusChange(r)}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((r,i)=>{this._updateHoveredStateForPointerAtScreenPosition(vt(r.x,r.y),i,r.pointerType,t)})}handleHoverEvent(t,r){const i=t.type;i!=="pointer-up"&&i!=="immediate-click"&&i!=="pointer-move"||!gS(t.pointerType)||(i!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(t.pointerId):this._updateHoveredStateForPointerAtScreenPosition(Ii(t),t.pointerId,t.pointerType,r))}_updateHoveredStateForPointerAtScreenPosition(t,r,i,s){var a;let n=da(t,i,s);const o=(a=this._hoveredManipulators.get(r))==null?void 0:a.manipulator;n==null||n.manipulator.interactive||(n=null),n!=null&&o===n.manipulator||(o!=null&&(o.hovering=!1),n!=null?(n.manipulator.hovering=!0,this._hoveredManipulators.set(r,n)):this._hoveredManipulators.delete(r),this._onFocusChange(s))}_afterManipulatorRelease(t){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(t){this._hoveredManipulators.forEach(({manipulator:r},i)=>{t===i&&(this._hoveredManipulators.delete(t),r.hovering=!1)})}};function yS(e){for(const{manipulator:t}of e.values())if(t!=null&&t.interactive){if(t.grabbing&&t.grabCursor)return t.grabCursor;if(t.cursor)return t.cursor}return null}function da(e,t,r){let i=null;return r(s=>{if(s.manipulators==null||!S1(s))return!1;const n=s.manipulators.intersect(e,t);return n!=null&&(i={tool:s,manipulator:n},!0)}),i}function gS(e){return e==="mouse"}function vS(e){return e.pointerType!=="mouse"||e.button===0}function HV(e){return!!e.native.shiftKey}function dy(e,t){e!=null&&e.consumesClicks&&t()}const _S="attached",py="tools",WV=1e3;let Oi=class extends Y{constructor(t){super(t),this._updatingHandles=new Uo,this._clock=xl,this._manipulatorState=new BV,this.tools=new K,this.cursor=null,this._interacting=!1,this._interactingTimeout=WV,this._interactingTimeoutHandle=null,this._forEachTool=r=>{for(const i of this.tools.items)if(r(i))return}}initialize(){this.addHandles([this.view.on(FI,t=>{this._handleInputEvent(t)},bn.TOOL),...zV(this.tools),this.tools.on("before-add",({item:t})=>{this._updateToolEditableFlag(t)}),this.tools.on("before-remove",({item:t})=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(t=>t.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:t=>{this.activeTool=t},view:this.view}}set activeTool(t){if(t!=null&&!this.view.ready)return void V.getLogger(this).error("Cannot set active tool while view is not ready.");if(t===this.activeTool)return;const r=this.activeTool;this._set("activeTool",t),r!=null&&r.deactivate(),t!=null&&t.activate(),this._removeIncompleteTools(t);for(const i of this.tools){this._updateToolEditableFlag(i);const s=S1(i);this.activeTool!=null&&s||this._manipulatorState.clearPointers(i,this._manipulatorStateEventArgs,!s)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(t=>t.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=Ue(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){var t;this.view.type==="3d"?this.addHandles([se(()=>{const{state:r}=this.view;return"camera"in r&&r.camera},()=>this._forEachManipulator(r=>r.onViewChange())),(t=this.view.elevationProvider)==null?void 0:t.on("elevation-change",r=>this._forEachManipulator(i=>i.onElevationChange(r)))],_S):this.addHandles(se(()=>this.view.extent,()=>this._forEachManipulator(r=>r.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(_S),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(t){this._forEachTool(r=>{r.manipulators&&r.manipulators.forEach(({manipulator:i})=>t(i,r))})}_handleInputEvent(t){let r=!1;const i={...t,stopPropagation:()=>{r=!0,t.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i):this._forEachTool(s=>{!r&&s.visible&&s.handleInputEvent(i)}),!r&&t.type==="key-down"&&t.key==="Escape"&&this.activeTool&&(t.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,this._manipulatorStateEventArgs),r||this.activeTool==null||this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this._forEachTool),this._updateCursor(),t.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(py),this._forEachTool(t=>{if(t instanceof Y){const r=se(()=>[t.cursor,t.visible,t.editable],()=>{S1(t)||this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(r,py)}t.manipulators&&this.addHandles([t.manipulators.on("after-remove",r=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs,!0,r.item.manipulator)}),t.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],py)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(t){var r;(r=t.setEditableFlag)==null||r.call(t,ju.MANAGER,this.activeTool==null||t===this.activeTool)}_updateCursor(){let t=this._manipulatorState.cursor;t==null&&this._forEachTool(r=>!(r.cursor==null||!r.visible)&&(t=r.cursor,!0)),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(t){this.tools.filter(r=>(t==null||r!==t)&&!r.created&&r.removeIncompleteOnCancel).forEach(r=>{this.tools.remove(r)})}get test(){}};u([d({constructOnly:!0,nonNullable:!0})],Oi.prototype,"view",void 0),u([d({value:null})],Oi.prototype,"activeTool",null),u([d({readOnly:!0,type:K})],Oi.prototype,"tools",void 0),u([d({readOnly:!0})],Oi.prototype,"cursor",void 0),u([d({readOnly:!0})],Oi.prototype,"updating",null),u([d()],Oi.prototype,"_interacting",void 0),u([d({readOnly:!0})],Oi.prototype,"interacting",null),Oi=u([$("esri.views.ToolViewManager")],Oi);let Ca=class extends Y{constructor(t){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",t.mapping==="standard"?this._detectedDeviceType="standard":qV.test(t.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=t.index}get native(){const t=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<t.length?t[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return ZV[this.deviceType]}};u([d({nonNullable:!0,readOnly:!0})],Ca.prototype,"nativeIndex",void 0),u([d({type:String,readOnly:!0})],Ca.prototype,"deviceType",null),u([d({type:Number,readOnly:!0})],Ca.prototype,"axisThreshold",null),Ca=u([$("esri.views.input.gamepad.GamepadInputDevice")],Ca);const j_=Ca,qV=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),ZV={standard:.15,spacemouse:.025,unknown:0};let Gc=class extends Y{constructor(...t){super(...t),this.devices=new K,this.enabledFocusMode="document"}};u([d({type:K.ofType(j_),readOnly:!0})],Gc.prototype,"devices",void 0),u([d({type:["document","view","none"]})],Gc.prototype,"enabledFocusMode",void 0),Gc=u([$("esri.views.input.gamepad.GamepadSettings")],Gc);const YV=Gc;let rp=class extends Y{constructor(){super(...arguments),this.gamepad=new YV}};u([d({readOnly:!0})],rp.prototype,"gamepad",void 0),rp=u([$("esri.views.input.Input")],rp);const JV=rp,BI=()=>Te.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;let rn=class extends Y{constructor(t){super(t),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};u([d({type:Boolean,nonNullable:!0})],rn.prototype,"enabled",void 0),u([d({type:j_})],rn.prototype,"device",void 0),u([d({type:["pan","zoom"],nonNullable:!0})],rn.prototype,"mode",void 0),u([d({type:["forward-down","forward-up"],nonNullable:!0})],rn.prototype,"tiltDirection",void 0),u([d({type:Number,nonNullable:!0})],rn.prototype,"velocityFactor",void 0),rn=u([$("esri.views.navigation.gamepad.GamepadSettings")],rn);const HI=rn;let wo=class extends Y{constructor(t){super(t),this.browserTouchPanEnabled=!0,this.gamepad=new HI,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!BI()}};u([d({type:Boolean})],wo.prototype,"browserTouchPanEnabled",void 0),u([d({type:HI,nonNullable:!0})],wo.prototype,"gamepad",void 0),u([d({type:Boolean})],wo.prototype,"momentumEnabled",void 0),u([d({type:Boolean})],wo.prototype,"mouseWheelZoomEnabled",void 0),wo=u([$("esri.views.navigation.Navigation")],wo);const WI=wo,qI={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},ZI=Object.values(qI),YI=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${ZI.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),XV=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${ZI.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),KV=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function Aie(e){return YI.test(e)}function G_(e){if(e==null)return null;const t=Ht(e),r=(t==null?void 0:t.path.match(YI))||(t==null?void 0:t.path.match(XV));if(!r)return null;const[,i,s,n,o]=r,a=s.indexOf("/");return{title:JI(a!==-1?s.slice(a+1):s),serverType:qI[n.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:i}}}function QV(e){const t=Ht(e).path.match(KV);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function JI(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function Iie(e,t){const r=[];if(e){const i=G_(e);i!=null&&i.title&&r.push(i.title)}if(t){const i=JI(t);r.push(i)}if(r.length===2){if(r[0].toLowerCase().includes(r[1].toLowerCase()))return r[0];if(r[1].toLowerCase().includes(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function Oie(e){let t=Ur(e,!0);return!!t&&(t=t.toLowerCase(),t.endsWith(".arcgis.com")&&(t.startsWith("services")||t.startsWith("tiles")||t.startsWith("features")))}function Pie(e,t){return e&&UE(jE(e,t))}function Rie(e){let{url:t}=e;if(!t)return{url:t};t=jE(t,e.logger);const r=Ht(t),i=G_(r.path);let s;if(i!=null)i.sublayer!=null&&e.layer.layerId==null&&(s=i.sublayer),t=i.url.path;else if(e.nonStandardUrlAllowed){const n=QV(r.path);n!=null&&(t=n.serviceUrl,s=n.sublayerId)}return{url:UE(t),layerId:s}}function Cie(e,t,r,i,s){yl(t,i,"url",s),i.url&&e.layerId!=null&&(i.url=Of(i.url,r,e.layerId.toString()))}function kie(e){if(!e)return!1;const t=e.toLowerCase(),r=t.includes("/services/"),i=t.includes("/mapserver/wmsserver"),s=t.includes("/imageserver/wmsserver"),n=t.includes("/wmsserver");return r&&(i||s||n)}var wS;function ez(e){var i;if(e.type==="integrated-mesh-3dtiles")return null;const t=e.url?G_(e.url):void 0;return!(((i=e.spatialReference)==null?void 0:i.vcsWkid)==null&&t!=null&&t.serverType==="ImageServer")&&XI(e)&&e.heightModelInfo?e.heightModelInfo:tz(e)?v_.deriveUnitFromSR(iz,e.spatialReference):null}function XI(e){return"heightModelInfo"in e}function KI(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function tz(e){return KI(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):QI(e)}function rz(e){return e.layers!=null||QI(e)||KI(e)||XI(e)}function QI(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"focusArea":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(wS||(wS={}));const iz=new v_({heightModel:"gravity-related-height"});var tf;(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(tf||(tf={}));let $1,fy=null;async function sz(e){fy||(fy=j(()=>import("./geometryServiceUtils-NKgKNJc-.js"),__vite__mapDeps([208,209]),import.meta.url).then(t=>$1=t)),await fy,Qe(e)}async function eO(e,t,r,i){if(!e)return null;const s=e.spatialReference;return Gn()||Wi(s,t)?ra(e,t):$1?$1.projectGeometry(e,t,r,i):(await Promise.race([sz(i),Cn(i)]),eO(e,t,r,i))}let Ie=class extends Y{constructor(t){super(t),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=_u(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var i,s,n,o;const t=(i=this.map)==null?void 0:i.call(this),r=[];return this.priorityCollection!=null&&r.push(this.priorityCollection),r.push({parent:t==null?void 0:t.basemap,layers:(s=t==null?void 0:t.basemap)==null?void 0:s.baseLayers},{layers:t==null?void 0:t.layers},{parent:t==null?void 0:t.ground,layers:(n=t==null?void 0:t.ground)==null?void 0:n.layers},{parent:t==null?void 0:t.basemap,layers:(o=t==null?void 0:t.basemap)==null?void 0:o.referenceLayers}),r}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let t;if(this._collectLayers(this.mapCollections,i=>{const s=this._getSupportedSpatialReferences(i);if(s.length>0){const n=this._narrowDownSpatialReferenceCandidates(t,s);n!=null&&(t=n)}return(t==null?void 0:t.length)===1})&&(t==null?void 0:t.length)!==1)return{updating:!0};const r=this._pickSpatialReferenceCandidate(t);return{spatialReference:(r==null?void 0:r.spatialReference)??null,viewingMode:(r==null?void 0:r.viewingMode)??null,updating:!1}}get _tileInfoTask(){var n,o;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const t=(n=this.map)==null?void 0:n.call(this),r=this.spatialReference;if(!r)return{updating:this._spatialReferenceTask.updating};let i;const s=this._collectLayers([{parent:t==null?void 0:t.basemap,layers:(o=t==null?void 0:t.basemap)==null?void 0:o.baseLayers},{layers:t==null?void 0:t.layers}],a=>{var l;return!(!("tileInfo"in a)||!((l=a.tileInfo)!=null&&l.spatialReference.equals(r)))&&(i=a,!0)},a=>"tileInfo"in a);return i?{tileInfo:i.tileInfo,updating:!1}:{updating:s}}get _heightModelInfoTask(){var i;if(!this.required.heightModelInfo||this.suspended&&((i=this._get("_heightModelInfoTask"))!=null&&i.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};let t={};const r=this._collectLayers(this.mapCollections,s=>{var o,a;const n=ez(s);return!!n&&(t={heightModelInfo:n,vcsWkid:(o=s.spatialReference)==null?void 0:o.vcsWkid,latestVcsWkid:(a=s.spatialReference)==null?void 0:a.latestVcsWkid},!0)},s=>rz(s));return{...t,updating:r}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const t=[],r=this._collectLayers(this.mapCollections,i=>{const s="fullExtents"in i&&i.fullExtents||(i.fullExtent!=null?[i.fullExtent]:[]),n=this.requiresExtentInSpatialReference?null:s[0],o=s.find(a=>a.spatialReference.equals(this.spatialReference))??n;if(o)return t.push({extent:o,layer:i}),!0;if(this._getSupportedSpatialReferences(i).length>0)for(const a of s)t.push({extent:a,layer:i});return!1});return{candidates:t,updating:r}}get _extentTask(){const{candidates:t,updating:r}=this._extentCandidatesTask;if(r)return{updating:r};if(t==null||t.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(t),s=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&s.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=_u(this._projectExtentTask.task)),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:s.clone(),task:Ev(async n=>{try{const o=await eO(i.extent,s,"portalItem"in i.layer?i.layer.portalItem:void 0,n);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(hi(n))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(t,r){if(t==null)return r;const i=new Array;for(const s of t)for(const n of r){if(!s.spatialReference.equals(n.spatialReference))continue;const o=oz(s.viewingMode,n.viewingMode);if(o!==!1){i.push({spatialReference:s.spatialReference,viewingMode:o});break}}return i.length>0?i:null}_pickSpatialReferenceCandidate(t){const r=this.defaultSpatialReference;return t==null||t.length<1?r?{spatialReference:r,viewingMode:null}:null:(r!=null&&t.length>1&&t.some(({spatialReference:i})=>i.equals(r))&&(t=t.filter(({spatialReference:i})=>i.equals(r))),t.length>1&&t.some(({viewingMode:i})=>i!==tf.Local)&&(t=t.filter(({viewingMode:i})=>i!==tf.Local)),t[0])}_getSupportedSpatialReferences(t){const r="supportedSpatialReferences"in t&&t.supportedSpatialReferences||(t.spatialReference?[t.spatialReference]:[]);if(r.length===0)return[];const i=[];for(const s of r){const n=this.getSpatialReferenceSupport(s,t);if(n!=null){const o=n.constraints??[{spatialReference:s,viewingMode:null}];for(const{spatialReference:a,viewingMode:l}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!a.equals(this.userSpatialReference)||i.push({spatialReference:a,viewingMode:l})}}return i}_pickExtentCandidate(t){const r=this.spatialReference;return t.find(({extent:i})=>r.equals(i.spatialReference))||t[0]}_collectLayers(t,r,i=()=>!0){var n;if(this._loadMaybe((n=this.map)==null?void 0:n.call(this))!=="loaded")return!0;const s=new nz(i,r);for(const o of t)if(this._collectCollection(o,s),s.done||s.preloading===this.sourcePreloadCount)break;return s.updating}_collectCollection(t,r){if(t.layers){switch(this._loadMaybe(t.parent)){case"loading":return r.updating=!0,void++r.preloading;case"failed":return}for(const i of t.layers)if(r.layerFilter(i)){switch(this._loadMaybe(i)){case"failed":continue;case"loading":r.updating=!0,++r.preloading;break;case"loaded":if(r.updating||(r.done=r.pushLayer(i)),r.done||r.preloading===this.sourcePreloadCount)break;"layers"in i&&this._collectCollection({layers:i.layers},r)}if(r.done||r.preloading===this.sourcePreloadCount)break}}}_loadMaybe(t){return t&&"loadStatus"in t&&t.loadStatus!=null?t.loadStatus==="not-loaded"?(t.load().catch(r=>{vr(r)}),"loading"):t.loadStatus:"loaded"}};u([d()],Ie.prototype,"required",void 0),u([d({constructOnly:!0})],Ie.prototype,"map",void 0),u([d({constructOnly:!0})],Ie.prototype,"getSpatialReferenceSupport",void 0),u([d()],Ie.prototype,"defaultSpatialReference",void 0),u([d()],Ie.prototype,"userSpatialReference",void 0),u([d()],Ie.prototype,"sourcePreloadCount",void 0),u([d()],Ie.prototype,"priorityCollection",void 0),u([d()],Ie.prototype,"requiresExtentInSpatialReference",void 0),u([d()],Ie.prototype,"suspended",void 0),u([d({readOnly:!0})],Ie.prototype,"ready",null),u([d({readOnly:!0})],Ie.prototype,"heightModelInfoReady",null),u([d({readOnly:!0})],Ie.prototype,"spatialReference",null),u([d({readOnly:!0})],Ie.prototype,"extent",null),u([d({readOnly:!0})],Ie.prototype,"heightModelInfo",null),u([d({readOnly:!0})],Ie.prototype,"vcsWkid",null),u([d({readOnly:!0})],Ie.prototype,"latestVcsWkid",null),u([d({readOnly:!0})],Ie.prototype,"viewingMode",null),u([d({readOnly:!0})],Ie.prototype,"tileInfo",null),u([d({readOnly:!0})],Ie.prototype,"mapCollections",null),u([d({readOnly:!0})],Ie.prototype,"_spatialReferenceTask",null),u([d({readOnly:!0})],Ie.prototype,"_tileInfoTask",null),u([d({readOnly:!0})],Ie.prototype,"_heightModelInfoTask",null),u([d({readOnly:!0})],Ie.prototype,"_extentCandidatesTask",null),u([d()],Ie.prototype,"_extentTask",null),u([d()],Ie.prototype,"_projectExtentTask",void 0),Ie=u([$("esri.views.support.DefaultsFromMap")],Ie);let nz=class{constructor(t,r){this.layerFilter=t,this.pushLayer=r,this.preloading=-1,this.updating=!1,this.done=!1}};function oz(e,t){return e!=null?t!=null?e===t&&e:e:t}var Vc;let H=Vc=class extends Ln.EventedMixin(Sv(Y)){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.handles=new Ml,this.updatingHandles=new Uo,this.allLayerViews=new xu({getCollections:()=>{var t,r,i;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,(r=this.groundView)==null?void 0:r.layerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:lz}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new jo,this.analyses=new Xp,this.typeSpecificPreconditionsReady=!0,this.layerViews=new K,this.magnifier=new CI,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new JV,this.navigation=new WI,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new IV(this),this.persistableViewModels=new K,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(se(()=>this.preconditionsReady,t=>{var i,s;const r=this.ready;if(t?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,Vc.views.add(this)):(this._lockedSpatialReference=null,Vc.views.remove(this)),this.notifyChange("spatialReference"),!t&&r)(i=this.toolViewManager)==null||i.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(s=this.layerViewManager)==null||s.clear(),this._teardown();else if(t&&!r){try{this._startup()}catch(n){return void queueMicrotask(()=>{this.fatalError=new k("startup-error",null,n)})}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}},In))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,Fv(()=>this.ready)))),this.basemapView=new aV({view:this}),this.layerViewManager=new hV({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new Oi({view:this}),this._setupSpatialReferenceLogger(),this.selectionManager=new xV({view:this}),this.addHandles([se(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},dr),se(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},In),se(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},dr)])}_setupSpatialReferenceLogger(){let e=null;this.addHandles([se(()=>{var t;return(t=this.defaultsFromMap)==null?void 0:t.ready},t=>{var i;const r=((i=this.map)==null?void 0:i.allLayers.length)>0;if(t&&!this.spatialReference&&r){if(e!=null)return;const s=_e(()=>e=_u(e));e=Ev(async n=>{try{await sE(this.spatialReferenceWarningDelay,null,n)}catch{return}finally{e=null}V.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.addHandles(s,"spatial-reference-logger-task")}else this.removeHandles("spatial-reference-logger-task")},{sync:!0})])}destroy(){var e,t;this.destroyed||(Vc.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Ve(this.graphics),this.analyses=Ve(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),Ve(this.analysisViewManager),this.toolViewManager=Ve(this.toolViewManager),this.layerViewManager=Ve(this.layerViewManager),this.selectionManager=Ve(this.selectionManager),this.basemapView=Ve(this.basemapView),(e=this.groundView)==null||e.destroy(),(t=this.layerViews)==null||t.forEach(r=>r.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=Ve(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return V.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var e;return(e=this.toolViewManager)==null?void 0:e.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Ie({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,t)=>this.getSpatialReferenceSupport(e,t),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||En.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(V.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),En.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get spatialReference(){var t,r;const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&((r=(t=this.defaultsFromMap)==null?void 0:t.required)!=null&&r.heightModelInfo)){const i=e.clone();return i.vcsWkid=this.defaultsFromMap.vcsWkid,i.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,i}return e}set spatialReference(e){const t=!_t(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??Hi}set timeZone(e){this._userTimeZone=e,c9(e)||V.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){var e;return(e=this.toolViewManager)==null?void 0:e.tools}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){var e;return((e=this.toolViewManager)==null?void 0:e.cursor)??this._cursor??"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new b1}whenLayerView(e){var t;return((t=this.layerViewManager)==null?void 0:t.whenLayerView(e))??Promise.reject()}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}importLayerView(e){throw new k("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,t){return this.isResolved()&&!this.ready&&V.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(zi(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};H.views=new K,u([d()],H.prototype,"_userSpatialReference",void 0),u([d()],H.prototype,"activeTool",null),u([d({readOnly:!0})],H.prototype,"allLayerViews",void 0),u([d()],H.prototype,"groundView",void 0),u([d()],H.prototype,"animation",null),u([d()],H.prototype,"basemapView",void 0),u([d()],H.prototype,"center",null),u([d()],H.prototype,"defaultsFromMapSettings",null),u([d()],H.prototype,"defaultsFromMap",null),u([d()],H.prototype,"fatalError",void 0),u([d({type:Be})],H.prototype,"extent",null),u([d(Q0(jo,"graphics"))],H.prototype,"graphics",void 0),u([d(Q0(Xp,"analyses"))],H.prototype,"analyses",void 0),u([d({readOnly:!0,type:v_})],H.prototype,"heightModelInfo",null),u([d({readOnly:!0})],H.prototype,"interacting",null),u([d({readOnly:!0})],H.prototype,"navigating",null),u([d({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],H.prototype,"preconditionsReady",null),u([d({readOnly:!0})],H.prototype,"typeSpecificPreconditionsReady",void 0),u([d({type:K,readOnly:!0})],H.prototype,"layerViews",void 0),u([d()],H.prototype,"resolution",null),u([d({type:CI})],H.prototype,"magnifier",void 0),u([d({value:null,type:zx})],H.prototype,"map",null),u([d()],H.prototype,"padding",void 0),u([d({readOnly:!0})],H.prototype,"ready",void 0),u([d({type:de})],H.prototype,"spatialReference",null),u([d()],H.prototype,"spatialReferenceWarningDelay",void 0),u([d()],H.prototype,"stationary",null),u([d({readOnly:!0})],H.prototype,"supportsGround",void 0),u([d({type:l_})],H.prototype,"timeExtent",null),u([d({type:String,nonNullable:!0})],H.prototype,"timeZone",null),u([d()],H.prototype,"tools",null),u([d()],H.prototype,"toolViewManager",void 0),u([d({readOnly:!0})],H.prototype,"type",void 0),u([d({type:Number})],H.prototype,"scale",void 0),u([d({readOnly:!0})],H.prototype,"updating",void 0),u([d({readOnly:!0})],H.prototype,"initialExtentRequired",void 0),u([d({readOnly:!0})],H.prototype,"initialExtent",null),u([d()],H.prototype,"cursor",null),u([d({readOnly:!0})],H.prototype,"input",void 0),u([d({type:WI,nonNullable:!0})],H.prototype,"navigation",void 0),u([d()],H.prototype,"layerViewManager",void 0),u([d()],H.prototype,"analysisViewManager",void 0),u([d()],H.prototype,"selectionManager",void 0),u([d()],H.prototype,"width",void 0),u([d()],H.prototype,"height",void 0),u([d({readOnly:!0})],H.prototype,"resizing",void 0),u([d({value:null,readOnly:!0})],H.prototype,"size",null),u([d({readOnly:!0})],H.prototype,"suspended",void 0),u([d({readOnly:!0})],H.prototype,"viewEvents",void 0),u([d({readOnly:!0})],H.prototype,"persistableViewModels",void 0),u([d()],H.prototype,"_isValid",void 0),u([d()],H.prototype,"_readyCycleForced",void 0),u([d()],H.prototype,"_lockedSpatialReference",void 0),u([d()],H.prototype,"_userTimeZone",void 0),u([d()],H.prototype,"_lockedTimeZone",void 0),u([d()],H.prototype,"_userTimeExtent",void 0),u([d()],H.prototype,"_lockedTimeExtent",void 0),u([d({type:b1})],H.prototype,"theme",void 0),u([d({readOnly:!0,type:b1})],H.prototype,"effectiveTheme",null),H=Vc=u([$("esri.views.View")],H);const my=globalThis.$arcgis;my&&!my.views&&Object.defineProperty(my,"views",{configurable:!1,enumerable:!0,writable:!1,value:H.views});const az=H;function lz(e){return e.layerViews}function He(){return[0,0]}function cz(e){return[e[0],e[1]]}function mh(e,t){return[e,t]}function uz(e,t=He()){const r=Math.min(2,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function hz(e,t){return new Float64Array(e,t,2)}function tO(){return He()}function rO(){return mh(1,1)}function iO(){return mh(1,0)}function sO(){return mh(0,1)}const dz=tO(),pz=rO(),fz=iO(),mz=sO();Object.freeze(Object.defineProperty({__proto__:null,ONES:pz,UNIT_X:fz,UNIT_Y:mz,ZEROS:dz,clone:cz,create:He,createView:hz,fromArray:uz,fromValues:mh,ones:rO,unitX:iO,unitY:sO,zeros:tO},Symbol.toStringTag,{value:"Module"}));let sn=class extends Op{constructor(t){super(t),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=jr(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(t=this._resolver)==null||t.reject(new k("ViewAnimation stopped")))}finish(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(t=this._resolver)==null||t.resolve())}update(t,r){r||(r=Zi(t)?"waiting-for-target":"running"),this._set("target",t),this._set("state",r)}};u([d({readOnly:!0})],sn.prototype,"done",null),u([d({readOnly:!0,type:String})],sn.prototype,"state",void 0),u([d()],sn.prototype,"target",void 0),sn=u([$("esri.views.ViewAnimation")],sn),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(sn||(sn={}));const T1=sn;function ll(e,t){return e[0]=t[0],e[1]=t[1],e}function yt(e,t,r){return e[0]=t,e[1]=r,e}function nO(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function Gu(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function oO(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function aO(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function yz(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function gz(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function vz(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function _z(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}function wz(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function yh(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function bz(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e}function pm(e,t){const r=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(r*r+i*i)}function rf(e,t){const r=t[0]-e[0],i=t[1]-e[1];return r*r+i*i}function sf(e){const t=e[0],r=e[1];return Math.sqrt(t*t+r*r)}function lO(e){const t=e[0],r=e[1];return t*t+r*r}function cO(e,t){return e[0]=-t[0],e[1]=-t[1],e}function Sz(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function E1(e,t){const r=t[0],i=t[1];let s=r*r+i*i;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s),e}function uO(e,t){return e[0]*t[0]+e[1]*t[1]}function hO(e,t,r){const i=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=i,e}function $z(e,t,r,i){const s=t[0],n=t[1];return e[0]=s+i*(r[0]-s),e[1]=n+i*(r[1]-n),e}function Tz(e,t=1){const r=2*Gv()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e}function Ez(e,t,r){const i=t[0],s=t[1];return e[0]=r[0]*i+r[2]*s,e[1]=r[1]*i+r[3]*s,e}function Ni(e,t,r){const i=t[0],s=t[1];return e[0]=r[0]*i+r[2]*s+r[4],e[1]=r[1]*i+r[3]*s+r[5],e}function Mz(e,t,r){const i=t[0],s=t[1];return e[0]=r[0]*i+r[3]*s+r[6],e[1]=r[1]*i+r[4]*s+r[7],e}function xz(e,t,r){const i=t[0],s=t[1];return e[0]=r[0]*i+r[4]*s+r[12],e[1]=r[1]*i+r[5]*s+r[13],e}function Az(e,t,r,i){const s=t[0]-r[0],n=t[1]-r[1],o=Math.sin(i),a=Math.cos(i);return e[0]=s*a-n*o+r[0],e[1]=s*o+n*a+r[1],e}function Iz(e,t){const r=e[0],i=e[1],s=t[0],n=t[1];let o=r*r+i*i;o>0&&(o=1/Math.sqrt(o));let a=s*s+n*n;a>0&&(a=1/Math.sqrt(a));const l=(r*s+i*n)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function Oz(e){return"vec2("+e[0]+", "+e[1]+")"}function Pz(e,t){return e[0]===t[0]&&e[1]===t[1]}function Rz(e,t){const r=e[0],i=e[1],s=t[0],n=t[1],o=ir();return Math.abs(r-s)<=o*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-n)<=o*Math.max(1,Math.abs(i),Math.abs(n))}function Cz(e,t,r,i,s){let n=t[0]-r[0],o=t[1]-r[1];const a=(i[0]*n+i[1]*o)*(s-1);return n=i[0]*a,o=i[1]*a,e[0]=t[0]+n,e[1]=t[1]+o,e}const kz=sf,V_=Gu,Nz=oO,Lz=aO,Dz=pm,Fz=rf,Uz=lO;Object.freeze(Object.defineProperty({__proto__:null,add:nO,angle:Iz,ceil:yz,copy:ll,cross:hO,dist:Dz,distance:pm,div:Lz,divide:aO,dot:uO,equals:Rz,exactEquals:Pz,floor:gz,inverse:Sz,len:kz,length:sf,lerp:$z,max:_z,min:vz,mul:Nz,multiply:oO,negate:cO,normalize:E1,projectAndScale:Cz,random:Tz,rotate:Az,round:wz,scale:yh,scaleAndAdd:bz,set:yt,sqrDist:Fz,sqrLen:Uz,squaredDistance:rf,squaredLength:lO,str:Oz,sub:V_,subtract:Gu,transformMat2:Ez,transformMat2d:Ni,transformMat3:Mz,transformMat4:xz},Symbol.toStringTag,{value:"Module"}));function jz(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Gz(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function Vz(e,t,r,i,s,n,o){return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e[4]=n,e[5]=o,e}function z_(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5];let l=r*n-i*s;return l?(l=1/l,e[0]=n*l,e[1]=-i*l,e[2]=-s*l,e[3]=r*l,e[4]=(s*a-n*o)*l,e[5]=(i*o-r*a)*l,e):null}function zz(e){return e[0]*e[3]-e[1]*e[2]}function dO(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],h=r[0],p=r[1],f=r[2],m=r[3],y=r[4],v=r[5];return e[0]=i*h+n*p,e[1]=s*h+o*p,e[2]=i*f+n*m,e[3]=s*f+o*m,e[4]=i*y+n*v+a,e[5]=s*y+o*v+l,e}function fm(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],h=Math.sin(r),p=Math.cos(r);return e[0]=i*p+n*h,e[1]=s*p+o*h,e[2]=i*-h+n*p,e[3]=s*-h+o*p,e[4]=a,e[5]=l,e}function B_(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],h=r[0],p=r[1];return e[0]=i*h,e[1]=s*h,e[2]=n*p,e[3]=o*p,e[4]=a,e[5]=l,e}function Vu(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],h=r[0],p=r[1];return e[0]=i,e[1]=s,e[2]=n,e[3]=o,e[4]=i*h+n*p+a,e[5]=s*h+o*p+l,e}function pO(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=-r,e[3]=i,e[4]=0,e[5]=0,e}function fO(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function H_(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function Bz(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function Hz(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function Wz(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e}function mO(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e}function qz(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e}function Zz(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e}function Yz(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function Jz(e,t){const r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=t[0],h=t[1],p=t[2],f=t[3],m=t[4],y=t[5],v=ir();return Math.abs(r-l)<=v*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(i-h)<=v*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(s-p)<=v*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(n-f)<=v*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(o-m)<=v*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-y)<=v*Math.max(1,Math.abs(a),Math.abs(y))}const Xz=dO,Kz=mO;Object.freeze(Object.defineProperty({__proto__:null,add:Wz,copy:jz,determinant:zz,equals:Jz,exactEquals:Yz,frob:Hz,fromRotation:pO,fromScaling:fO,fromTranslation:H_,identity:Gz,invert:z_,mul:Xz,multiply:dO,multiplyScalar:qz,multiplyScalarAndAdd:Zz,rotate:fm,scale:B_,set:Vz,str:Bz,sub:Kz,subtract:mO,translate:Vu},Symbol.toStringTag,{value:"Module"}));function Ms(){return[1,0,0,1,0,0]}function Qz(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function eB(e,t,r,i,s,n){return[e,t,r,i,s,n]}function tB(e,t){return new Float64Array(e,t,6)}const rB=Ms();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:rB,clone:Qz,create:Ms,createView:tB,fromValues:eB},Symbol.toStringTag,{value:"Module"}));const Xh={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new oi({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:de.WebMercator}),minus180Line:new oi({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:de.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new oi({paths:[[[180,-180],[180,180]]],spatialReference:de.WGS84}),minus180Line:new oi({paths:[[[-180,-180],[-180,180]]],spatialReference:de.WGS84})}};function ko(e,t){return Math.ceil((e-t)/(2*t))}function yO(e,t){const r=mu(e);for(const i of r)for(const s of i)s[0]+=t;return e}function mu(e){return qv(e)?e.rings:e.paths}function Fie(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function iB(e){return typeof e=="string"?Ht(e):N(e)}function sB(e,t,r){const i={};for(const s in e){if(s==="declaredClass")continue;const n=e[s];if(n!=null&&typeof n!="function")if(Array.isArray(n))i[s]=n.map(o=>sB(o));else if(typeof n=="object")if(n.toJSON){const o=n.toJSON(r==null?void 0:r[s]);i[s]=JSON.stringify(o)}else i[s]=JSON.stringify(n);else i[s]=n}return i}async function nB(e,t,r,i){const s=iB(e),n=t[0].spatialReference,o={...i,responseType:"json",query:{...s.query,f:"json",sr:a3(n),target:JSON.stringify({geometryType:Zv(t[0]),geometries:t}),cutter:JSON.stringify(r)}},a=await st(s.path+"/cut",o),{cutIndexes:l,geometries:h=[]}=a.data;return{cutIndexes:l,geometries:h.map(p=>{const f=_l(p);return f.spatialReference=n,f})}}function oB(e){return{geometryType:Zv(e[0]),geometries:e.map(t=>t.toJSON())}}function aB(e,t,r){const i=K6(t);return e.map(s=>{const n=i.fromJSON(s);return n.spatialReference=r,n})}async function lB(e,t,r){const i=typeof e=="string"?Ht(e):e,s=t[0].spatialReference,n=Zv(t[0]),o={...r,query:{...i.query,f:"json",sr:a3(s),geometries:JSON.stringify(oB(t))}},{data:a}=await st(i.path+"/simplify",o);return aB(a.geometries,n,s)}const gO=()=>V.getLogger("esri.geometry.support.normalizeUtils");function cB(e){return e.type==="polygon"}function uB(e){return e[0].type==="polygon"}function hB(e){return e[0].type==="polyline"}function bS(e){const t=[];let r=0,i=0;for(let s=0;s<e.length;s++){const n=e[s];let o=null;for(let a=0;a<n.length;a++)o=n[a],t.push(o),a===0?(r=o[0],i=r):(r=Math.min(r,o[0]),i=Math.max(i,o[0]));o&&t.push([(r+i)/2,0])}return t}function dB(e,t){if(!(e instanceof oi||e instanceof Bi)){const s="straightLineDensify: the input geometry is neither polyline nor polygon";throw gO().error(s),new k(s)}const r=mu(e),i=[];for(const s of r){const n=[];i.push(n),n.push([s[0][0],s[0][1]]);for(let o=0;o<s.length-1;o++){const a=s[o][0],l=s[o][1],h=s[o+1][0],p=s[o+1][1],f=Math.sqrt((h-a)*(h-a)+(p-l)*(p-l)),m=(p-l)/f,y=(h-a)/f,v=f/t;if(v>1){for(let E=1;E<=v-1;E++){const x=E*t,A=y*x+a,P=m*x+l;n.push([A,P])}const _=(f+Math.floor(v-1)*t)/2,w=y*_+a,S=m*_+l;n.push([w,S])}n.push([h,p])}}return cB(e)?new Bi({rings:i,spatialReference:e.spatialReference}):new oi({paths:i,spatialReference:e.spatialReference})}function SS(e,t,r){if(t){const i=dB(e,1e6);e=cc(i,!0)}return r&&(e=yO(e,r)),e}function $S(e,t,r){if(Array.isArray(e)){const i=e[0];if(i>t){const s=ko(i,t);e[0]=i+s*(-2*t)}else if(i<r){const s=ko(i,r);e[0]=i+s*(-2*r)}}else{const i=e.x;if(i>t){const s=ko(i,t);e=e.clone().offset(s*(-2*t),0)}else if(i<r){const s=ko(i,r);e=e.clone().offset(s*(-2*r),0)}}return e}function pB(e,t){let r=-1;for(let i=0;i<t.cutIndexes.length;i++){const s=t.cutIndexes[i],n=t.geometries[i],o=mu(n);for(let a=0;a<o.length;a++){const l=o[a];l.some(h=>{if(h[0]<180)return!0;{let p=0;for(let m=0;m<l.length;m++){const y=l[m][0];p=y>p?y:p}p=Number(p.toFixed(9));const f=-360*ko(p,180);for(let m=0;m<l.length;m++){const y=n.getPoint(a,m);n.setPoint(a,m,y.clone().offset(f,0))}return!0}})}if(s===r){if(uB(e))for(const a of mu(n))e[s]=e[s].addRing(a);else if(hB(e))for(const a of mu(n))e[s]=e[s].addPath(a)}else r=s,e[s]=n}return e}async function fB(e,t,r){if(!Array.isArray(e))return fB([e],t);t&&typeof t!="string"&&gO().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const i=typeof t=="string"?t:(t==null?void 0:t.url)??Te.geometryServiceUrl;let s,n,o,a,l,h,p,f,m=0;const y=[],v=[];for(const A of e)if(A!=null)if(s||(s=A.spatialReference,n=zt(s),o=s.isWebMercator,h=o?102100:4326,a=Xh[h].maxX,l=Xh[h].minX,p=Xh[h].plus180Line,f=Xh[h].minus180Line),n)if(A.type==="mesh")v.push(A);else if(A.type==="point")v.push($S(A.clone(),a,l));else if(A.type==="multipoint"){const P=A.clone();P.points=P.points.map(C=>$S(C,a,l)),v.push(P)}else if(A.type==="extent"){const P=A.clone()._normalize(!1,!1,n);v.push(P.rings?new Bi(P):P)}else if(A.extent){const P=A.extent,C=ko(P.xmin,l)*(2*a);let U=C===0?A.clone():yO(A.clone(),C);P.offset(C,0);let{xmin:F,xmax:z}=P;F=Number(F.toFixed(9)),z=Number(z.toFixed(9)),P.intersects(p)&&z!==a?(m=z>m?z:m,U=SS(U,o),y.push(U),v.push("cut")):P.intersects(f)&&F!==l?(m=z*(2*a)>m?z*(2*a):m,U=SS(U,o,360),y.push(U),v.push("cut")):v.push(U)}else v.push(A.clone());else v.push(A);else v.push(A);let _=ko(m,a),w=-90;const S=_,E=new oi;for(;_>0;){const A=360*_-180;E.addPath([[A,w],[A,-1*w]]),w*=-1,_--}if(y.length>0&&S>0){const A=pB(y,await nB(i,y,E,r)),P=[],C=[];for(let z=0;z<v.length;z++){const q=v[z];if(q!=="cut")C.push(q);else{const ee=A.shift(),ce=e[z];ce!=null&&ce.type==="polygon"&&ce.rings&&ce.rings.length>1&&ee.rings.length>=ce.rings.length?(P.push(ee),C.push("simplify")):C.push(o?Do(ee):ee)}}if(!P.length)return C;const U=await lB(i,P,r),F=[];for(let z=0;z<C.length;z++){const q=C[z];q!=="simplify"?F.push(q):F.push(o?Do(U.shift()):U.shift())}return F}const x=[];for(let A=0;A<v.length;A++){const P=v[A];if(P!=="cut")x.push(P);else{const C=y.shift();x.push(o===!0?Do(C):C)}}return x}function mB(e){if(!e)return null;const t=e.extent;if(!t)return null;const r=e.spatialReference&&zt(e.spatialReference);if(!r)return t;const[i,s]=r.valid,n=2*s,{width:o}=t;let a,{xmin:l,xmax:h}=t;if([l,h]=[h,l],e.type==="extent"||o===0||o<=s||o>n||l<i||h>s)return t;switch(e.type){case"polygon":if(!(e.rings.length>1))return t;a=bS(e.rings);break;case"polyline":if(!(e.paths.length>1))return t;a=bS(e.paths);break;case"multipoint":a=e.points}const p=t.clone();for(let f=0;f<a.length;f++){let m=a[f][0];m<0?(m+=s,h=Math.max(m,h)):(m-=s,l=Math.min(m,l))}return p.xmin=l,p.xmax=h,p.width<o?(p.xmin-=s,p.xmax-=s,p):t}function W_(e,t,r){const i=zt(r);if(i==null)return e;const[s,n]=i.valid,o=2*n;let a=0,l=0;t>n?a=Math.ceil(Math.abs(t-n)/o):t<s&&(a=-Math.ceil(Math.abs(t-s)/o)),e>n?l=Math.ceil(Math.abs(e-n)/o):e<s&&(l=-Math.ceil(Math.abs(e-s)/o));let h=e+(a-l)*o;const p=h-t;return p>n?h-=o:p<s&&(h+=o),h}function Uie(e,t){const r=zt(t);if(r){const[i,s]=r.valid,n=s-i;if(e<i)for(;e<i;)e+=n;if(e>s)for(;e>s;)e-=n}return e}const vO=96,_O=39.37,yB=180/Math.PI;function wO(e){return e.wkid?e:e.spatialReference||de.WGS84}function q_(e,t){return t.type?yt(e,t.x,t.y):ll(e,t)}function bO(e){return Dn(e)}function mm(e,t,r=0){let i=e.width,s=e.height;if(r!==0){const a=Uf(r),l=Math.abs(Math.cos(a)),h=Math.abs(Math.sin(a));i=e.width*l+e.height*h,s=e.width*h+e.height*l}const n=Math.max(1,t[0]),o=Math.max(1,t[1]);return Math.max(i/n,s/o)*TB(e.spatialReference)}async function zc(e,t,r,i){var a,l;let s,n;if(!e||Array.isArray(e)&&!e.length)return null;if(K.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const h=e.every(m=>"attributes"in m),p=e.some(m=>!m.geometry);let f=e;if(h&&p&&t&&t.allLayerViews){const m=new Map;for(const w of e){const S=w.layer,E=m.get(S)||[],x=w.attributes[S.objectIdField];x!=null&&E.push(x),m.set(S,E)}const y=[];m.forEach((w,S)=>{const E=t.allLayerViews.find(x=>x.layer.id===S.id);if(E&&"queryFeatures"in E){const x=S.createQuery();x.objectIds=w,x.returnGeometry=!0,y.push(E.queryFeatures(x))}});const v=await Promise.all(y),_=[];for(const w of v)if(w&&w.features&&w.features.length)for(const S of w.features)S.geometry!=null&&_.push(S.geometry);f=_}for(const m of f)i=await zc(m,t,r,i);return i}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")s=new ae(e);else if(e instanceof Ps)s=e;else if("geometry"in e){if(e.geometry)s=e.geometry;else if(e.layer){const h=e.layer,p=t.allLayerViews.find(f=>f.layer.id===h.id);if(p&&"queryFeatures"in p){const f=h.createQuery();f.objectIds=[e.attributes[h.objectIdField]],f.returnGeometry=!0;const m=await p.queryFeatures(f);s=(l=(a=m==null?void 0:m.features)==null?void 0:a[0])==null?void 0:l.geometry}}}if(s==null)return null;switch(s.type){case"point":n=new Be({xmin:s.x,ymin:s.y,xmax:s.x,ymax:s.y,spatialReference:s.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":n=mB(s);break;default:n=s.extent}if(!n)return null;Gn()||Wi(n.spatialReference,r)||await Cn();const o=ra(n,r);if(!o)return null;if(i){const h=o.center,p=h.clone();p.x=W_(h.x,i.center.x,r),p.x!==h.x&&o.centerAt(p),i=i.union(o)}else i=o;return i}function gB(e){var t;if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&((t=e.layer)==null?void 0:t.minScale)!=null&&e.layer.maxScale!=null){const r=e.layer;return{min:r.minScale,max:r.maxScale}}if(Array.isArray(e)&&e.length&&e.every(r=>"layer"in r)){let r=0,i=0;for(const s of e){const n=s.layer;n!=null&&n.minScale&&n.maxScale&&(r=n.minScale<r?n.minScale:r,i=n.maxScale>i?n.maxScale:i)}return r&&i?{min:r,max:i}:null}}}function TS(e,t){const r=wO(e);return _t(r,t)||r.imageCoordinateSystem||t.imageCoordinateSystem?e:ra(e,t)}async function vB(e,t){var w;if(!e||!t)return new li({targetGeometry:new ae,scale:0,rotation:0});let r=t.spatialReference;const{constraints:i,padding:s,viewpoint:n,size:o}=t,a=[s?o[0]-s.left-s.right:o[0],s?o[1]-s.top-s.bottom:o[1]];let l=null;e instanceof li?l=e:e.viewpoint?l=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(l=e.target);let h=null;l!=null&&l.targetGeometry?h=l.targetGeometry:e instanceof Be?h=e:e instanceof Ps?h=await zc(e,t,r):e&&(h=await zc(e.center,t,r)||await zc(e.target,t,r)||await zc(e,t,r)),!h&&(n!=null&&n.targetGeometry)?h=n.targetGeometry:!h&&t.extent&&(h=t.extent),r||(r=wO(t.spatialReference||t.extent||h)),Gn()||_t(h.spatialReference,r)||Wi(h.spatialReference,r)||await Cn();const p=TS(h,r),f="center"in p?p.center:p;t.pickClosestTarget!==!1&&f.type==="point"&&((w=n.targetGeometry)==null?void 0:w.type)==="point"&&(f.x=W_(f.x,n.targetGeometry.x,f.spatialReference));let m=0;l?m=l.rotation:e.hasOwnProperty("rotation")?m=e.rotation:n&&(m=n.rotation);let y=0;y=(l==null?void 0:l.targetGeometry)!=null&&l.targetGeometry.type==="point"?l.scale:"scale"in e&&e.scale?e.scale:"zoom"in e&&e.zoom!==-1&&i&&i.effectiveLODs?i.zoomToScale(e.zoom):Array.isArray(h)||h.type==="point"||h.type==="extent"&&h.width===0&&h.height===0?n.scale:mm(TS(h.extent,r),a,m);const v=gB(e.target??e);v&&(v.min&&v.min<y?y=v.min:v.max&&v.max>y&&(y=v.max));let _=new li({targetGeometry:f,scale:y,rotation:m});return i&&(_=i.fit(_),i.constrainByGeometry(_),i.rotationEnabled||(_.rotation=n.rotation)),_}function kt(e,t){const r=e.targetGeometry,i=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function _B(e,t,r){return r?yt(e,.5*(t[0]-r.right+r.left),.5*(t[1]-r.bottom+r.top)):yh(e,t,.5)}const wB=function(){const e=He();return function(t,r,i){const s=r.targetGeometry;q_(e,s);const n=.5*Nl(r);return t.xmin=e[0]-n*i[0],t.ymin=e[1]-n*i[1],t.xmax=e[0]+n*i[0],t.ymax=e[1]+n*i[1],t.spatialReference=s.spatialReference,t}}();function bB(e,t,r,i,s){var n;return M1(e,t,r.center),e.scale=mm(r,i),(n=s==null?void 0:s.constraints)==null||n.constrain(e),e}function SB(e,t,r,i){return J_(e,t,r,i),z_(e,e)}const SO=function(){const e=He();return function(t,r,i){return V_(t,EB(t,r),_B(e,r,i))}}(),$B=function(){const e=Ms(),t=He();return function(r,i,s,n){const o=Nl(i),a=Z_(i);return yt(t,o,o),fO(e,t),fm(e,e,a),Vu(e,e,SO(t,s,n)),Vu(e,e,[0,n.top-n.bottom]),yt(r,e[4],e[5])}}();function Nl(e){var t;return e.scale*$O((t=e.targetGeometry)==null?void 0:t.spatialReference)}function $O(e){return e!=null&&fr(e)?1/(bO(e)*_O*vO):1}function Z_(e){return Vv(e.rotation)||0}function TB(e){return fr(e)?bO(e)*_O*vO:1}function EB(e,t){return yh(e,t,.5)}const Y_=function(){const e=He(),t=He(),r=He();return function(i,s,n,o,a,l){return cO(e,s),yh(t,n,.5*l),yt(r,1/o*l,-1/o*l),H_(i,t),a&&fm(i,i,a),B_(i,i,r),Vu(i,i,e),i}}(),J_=function(){const e=He();return function(t,r,i,s){const n=Nl(r),o=Z_(r);return q_(e,r.targetGeometry),Y_(t,e,i,n,o,s)}}(),MB=function(){const e=He();return function(t,r,i,s){const n=Nl(r);return q_(e,r.targetGeometry),Y_(t,e,i,n,0,s)}}();function TO(e){const t=zt(e);return t?t.valid[1]-t.valid[0]:0}function xB(e,t){return Math.round(TO(e)/t)}const AB=function(){const e=He(),t=He(),r=[0,0,0];return function(i,s,n){Gu(e,i,s),E1(e,e),Gu(t,i,n),E1(t,t),hO(r,e,t);let o=Math.acos(uO(e,t)/(sf(e)*sf(t)))*yB;return r[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),IB=function(){const e=He();return function(t,r,i,s){const n=t.targetGeometry;return kt(t,r),$B(e,r,i,s),n.x+=e[0],n.y+=e[1],t}}(),M1=function(e,t,r){kt(e,t);const i=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e},OB=function(){const e=He();return function(t,r,i,s,n){n||(n="center"),V_(e,i,s),yh(e,e,.5);const o=e[0],a=e[1];switch(n){case"center":yt(e,0,0);break;case"left":yt(e,-o,0);break;case"top":yt(e,0,a);break;case"right":yt(e,o,0);break;case"bottom":yt(e,0,-a);break;case"top-left":yt(e,-o,a);break;case"bottom-left":yt(e,-o,-a);break;case"top-right":yt(e,o,a);break;case"bottom-right":yt(e,o,-a)}return ym(t,r,e),t}}();function jie(e,t,r){return kt(e,t),e.rotation+=r,e}function PB(e,t,r){return kt(e,t),e.rotation=r,e}const RB=function(){const e=He();return function(t,r,i,s,n){return kt(t,r),isNaN(i)||i===0||(MO(e,s,r,n),t.scale=r.scale*i,xO(e,e,t,n),ym(t,t,yt(e,e[0]-s[0],s[1]-e[1]))),t}}();function ES(e,t,r){return kt(e,t),e.scale=r,e}const EO=function(){const e=He();return function(t,r,i,s,n,o){return kt(t,r),isNaN(i)||i===0||(MO(e,n,r,o),t.scale=r.scale*i,t.rotation+=s,xO(e,e,t,o),ym(t,t,yt(e,e[0]-n[0],n[1]-e[1]))),t}}(),Gie=function(){const e=He(),t=He();return function(r,i,s,n,o,a,l){return SO(t,a,l),nO(e,o,t),n?EO(r,i,s,n,e,a):RB(r,i,s,e,a)}}(),MO=function(){const e=Ms();return function(t,r,i,s){return Ni(t,r,SB(e,i,s,1))}}(),xO=function(){const e=Ms();return function(t,r,i,s){return Ni(t,r,J_(e,i,s,1))}}(),ym=function(){const e=He(),t=Ms();return function(r,i,s){kt(r,i);const n=Nl(i),o=r.targetGeometry;return pO(t,Z_(i)),B_(t,t,mh(n,n)),Ni(e,s,t),o.x+=e[0],o.y+=e[1],r}}();function AO(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function CB(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function kB(e,t,r,i,s,n){const o=new Float32Array(6);return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o[4]=s,o[5]=n,o}function NB(e,t){return new Float32Array(e,t,6)}function IO(e,t,r,i){const s=t[i],n=t[i+1];e[i]=r[0]*s+r[2]*n+r[4],e[i+1]=r[1]*s+r[3]*n+r[5]}function LB(e,t,r,i=0,s=0,n=2){const o=s||t.length/n;for(let a=i;a<o;a++)IO(e,t,r,a*n)}Object.freeze(Object.defineProperty({__proto__:null,clone:CB,create:AO,createView:NB,fromValues:kB,transform:IO,transformMany:LB},Symbol.toStringTag,{value:"Module"}));function DB(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function FB(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function OO(e,t,r,i,s,n,o,a,l,h){return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e[4]=n,e[5]=o,e[6]=a,e[7]=l,e[8]=h,e}function PO(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function UB(e,t){if(e===t){const r=t[1],i=t[2],s=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=i,e[7]=s}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function jB(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],h=t[7],p=t[8],f=p*o-a*h,m=-p*n+a*l,y=h*n-o*l;let v=r*f+i*m+s*y;return v?(v=1/v,e[0]=f*v,e[1]=(-p*i+s*h)*v,e[2]=(a*i-s*o)*v,e[3]=m*v,e[4]=(p*r-s*l)*v,e[5]=(-a*r+s*n)*v,e[6]=y*v,e[7]=(-h*r+i*l)*v,e[8]=(o*r-i*n)*v,e):null}function GB(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],h=t[7],p=t[8];return e[0]=o*p-a*h,e[1]=s*h-i*p,e[2]=i*a-s*o,e[3]=a*l-n*p,e[4]=r*p-s*l,e[5]=s*n-r*a,e[6]=n*h-o*l,e[7]=i*l-r*h,e[8]=r*o-i*n,e}function VB(e){const t=e[0],r=e[1],i=e[2],s=e[3],n=e[4],o=e[5],a=e[6],l=e[7],h=e[8];return t*(h*n-o*l)+r*(-h*s+o*a)+i*(l*s-n*a)}function X_(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],h=t[6],p=t[7],f=t[8],m=r[0],y=r[1],v=r[2],_=r[3],w=r[4],S=r[5],E=r[6],x=r[7],A=r[8];return e[0]=m*i+y*o+v*h,e[1]=m*s+y*a+v*p,e[2]=m*n+y*l+v*f,e[3]=_*i+w*o+S*h,e[4]=_*s+w*a+S*p,e[5]=_*n+w*l+S*f,e[6]=E*i+x*o+A*h,e[7]=E*s+x*a+A*p,e[8]=E*n+x*l+A*f,e}function x1(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],h=t[6],p=t[7],f=t[8],m=r[0],y=r[1];return e[0]=i,e[1]=s,e[2]=n,e[3]=o,e[4]=a,e[5]=l,e[6]=m*i+y*o+h,e[7]=m*s+y*a+p,e[8]=m*n+y*l+f,e}function RO(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],h=t[6],p=t[7],f=t[8],m=Math.sin(r),y=Math.cos(r);return e[0]=y*i+m*o,e[1]=y*s+m*a,e[2]=y*n+m*l,e[3]=y*o-m*i,e[4]=y*a-m*s,e[5]=y*l-m*n,e[6]=h,e[7]=p,e[8]=f,e}function zB(e,t,r){const i=r[0],s=r[1],n=r[2];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e[6]=n*t[6],e[7]=n*t[7],e[8]=n*t[8],e}function BB(e,t,r){const i=r[0],s=r[1];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e}function HB(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function WB(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=-r,e[4]=i,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function qB(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function ZB(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function YB(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=r+r,a=i+i,l=s+s,h=r*o,p=i*o,f=i*a,m=s*o,y=s*a,v=s*l,_=n*o,w=n*a,S=n*l;return e[0]=1-f-v,e[3]=p-S,e[6]=m+w,e[1]=p+S,e[4]=1-h-v,e[7]=y-_,e[2]=m-w,e[5]=y+_,e[8]=1-h-f,e}function JB(e,t){const r=t[0],i=t[1],s=t[2],n=t[4],o=t[5],a=t[6],l=t[8],h=t[9],p=t[10],f=p*o-a*h,m=-p*n+a*l,y=h*n-o*l,v=r*f+i*m+s*y;if(!v)return null;const _=1/v;return e[0]=f*_,e[1]=(-p*i+s*h)*_,e[2]=(a*i-s*o)*_,e[3]=m*_,e[4]=(p*r-s*l)*_,e[5]=(-a*r+s*n)*_,e[6]=y*_,e[7]=(-h*r+i*l)*_,e[8]=(o*r-i*n)*_,e}function XB(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],h=t[7],p=t[8],f=t[9],m=t[10],y=t[11],v=t[12],_=t[13],w=t[14],S=t[15],E=r*a-i*o,x=r*l-s*o,A=r*h-n*o,P=i*l-s*a,C=i*h-n*a,U=s*h-n*l,F=p*_-f*v,z=p*w-m*v,q=p*S-y*v,ee=f*w-m*_,ce=f*S-y*_,ye=m*S-y*w;let ne=E*ye-x*ce+A*ee+P*q-C*z+U*F;return ne?(ne=1/ne,e[0]=(a*ye-l*ce+h*ee)*ne,e[1]=(l*q-o*ye-h*z)*ne,e[2]=(o*ce-a*q+h*F)*ne,e[3]=(s*ce-i*ye-n*ee)*ne,e[4]=(r*ye-s*q+n*z)*ne,e[5]=(i*q-r*ce-n*F)*ne,e[6]=(_*U-w*C+S*P)*ne,e[7]=(w*A-v*U-S*x)*ne,e[8]=(v*C-_*A+S*E)*ne,e):null}function KB(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function QB(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function eH(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function tH(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e}function CO(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e}function rH(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e}function iH(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e}function sH(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function nH(e,t){const r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],h=e[7],p=e[8],f=t[0],m=t[1],y=t[2],v=t[3],_=t[4],w=t[5],S=t[6],E=t[7],x=t[8],A=ir();return Math.abs(r-f)<=A*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(i-m)<=A*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(s-y)<=A*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(n-v)<=A*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(o-_)<=A*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(a-w)<=A*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(l-S)<=A*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(h-E)<=A*Math.max(1,Math.abs(h),Math.abs(E))&&Math.abs(p-x)<=A*Math.max(1,Math.abs(p),Math.abs(x))}function oH(e){const t=ir(),r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],h=e[7],p=e[8];return Math.abs(1-(r*r+n*n+l*l))<=t&&Math.abs(1-(i*i+o*o+h*h))<=t&&Math.abs(1-(s*s+a*a+p*p))<=t}const aH=X_,lH=CO;Object.freeze(Object.defineProperty({__proto__:null,add:tH,adjoint:GB,copy:FB,determinant:VB,equals:nH,exactEquals:sH,frob:eH,fromMat2d:ZB,fromMat4:DB,fromQuat:YB,fromRotation:WB,fromScaling:qB,fromTranslation:HB,identity:PO,invert:jB,isOrthoNormal:oH,mul:aH,multiply:X_,multiplyScalar:rH,multiplyScalarAndAdd:iH,normalFromMat4:XB,normalFromMat4Legacy:JB,projection:KB,rotate:RO,scale:zB,scaleByVec2:BB,set:OO,str:QB,sub:lH,subtract:CO,translate:x1,transpose:UB},Symbol.toStringTag,{value:"Module"}));function ip(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function cH(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function uH(e,t,r,i,s,n,o,a,l){const h=new Float32Array(9);return h[0]=e,h[1]=t,h[2]=r,h[3]=i,h[4]=s,h[5]=n,h[6]=o,h[7]=a,h[8]=l,h}function hH(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:cH,create:ip,createView:hH,fromValues:uH},Symbol.toStringTag,{value:"Module"}));function kO(){return new Float32Array(2)}function dH(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function Tl(e,t){const r=new Float32Array(2);return r[0]=e,r[1]=t,r}function pH(e,t){return new Float32Array(e,t,2)}function NO(){return kO()}function LO(){return Tl(1,1)}function DO(){return Tl(1,0)}function FO(){return Tl(0,1)}const fH=NO(),mH=LO(),yH=DO(),gH=FO();Object.freeze(Object.defineProperty({__proto__:null,ONES:mH,UNIT_X:yH,UNIT_Y:gH,ZEROS:fH,clone:dH,create:kO,createView:pH,fromValues:Tl,ones:LO,unitX:DO,unitY:FO,zeros:NO},Symbol.toStringTag,{value:"Module"}));function vH(e){return e instanceof Float32Array&&e.length>=2}function _H(e){return Array.isArray(e)&&e.length>=2}function yy(e){return vH(e)||_H(e)}var A1;const Xi=[0,0];let ds=A1=class extends W{constructor(e){super(e),this._viewpoint2D={center:He(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Be,this.id=0,this.inverseTransform=Ms(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Ms(),this.transformNoRotation=Ms(),this.displayMat3=ip(),this.displayViewMat3=ip(),this.viewMat3=ip(),this.viewMat2d=AO(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,r=e.targetGeometry;t.center[0]=r.x,t.center[1]=r.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=r.spatialReference}this._update()}get visibleArea(){const[e,t]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,t),this.toMap([0,0],e,t),this.toMap([0,0],e,0)]}copy(e){const t=this.size,r=this.viewpoint;return r&&t?(this.viewpoint=kt(r,e.viewpoint),this._set("size",ll(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new A1({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,r){return yy(t)?Ni(e,t,this.inverseTransform):(Xi[0]=t,Xi[1]=r,Ni(e,Xi,this.inverseTransform))}toScreen(e,t,r){return yy(t)?Ni(e,t,this.transform):(Xi[0]=t,Xi[1]=r,Ni(e,Xi,this.transform))}toScreenNoRotation(e,t,r){return yy(t)?Ni(e,t,this.transformNoRotation):(Xi[0]=t,Xi[1]=r,Ni(e,Xi,this.transformNoRotation))}wrapMapCoordinate(e,t){ll(e,t);const[r]=t,[i]=this.center,{extent:s,spatialReference:n}=this;let{xmin:o,xmax:a}=s;if(n.isWrappable){const l=TO(n)/2;o=Math.max(o,i-l),a=Math.min(a,i+l)}return(r<o||r>a)&&(e[0]=W_(r,i,n)),e}getScreenTransform(e,t){const{center:r}=this._viewpoint2D,i=this._get("pixelRatio")||1,s=this._get("size");return Y_(e,r,s,t,0,i),e}_update(){const{center:e,spatialReference:t,scale:r,rotation:i}=this._viewpoint2D,s=this._get("pixelRatio")||1,n=this._get("size"),o=new li({targetGeometry:new ae(e[0],e[1],t),scale:r,rotation:i});if(this._set("viewpoint",o),!n||!t||!r)return;this.resolution=Nl(o),this.rotation=i,this.scale=r,this.spatialReference=t,ll(this.center,e);const a=n[0]!==0?2/n[0]:0,l=n[1]!==0?-2/n[1]:0;OO(this.displayMat3,a,0,0,0,l,0,-1,1,1);const h=PO(this.viewMat3),p=Tl(n[0]/2,n[1]/2),f=Tl(-n[0]/2,-n[1]/2),m=Vv(i);x1(h,h,p),RO(h,h,m),x1(h,h,f),X_(this.displayViewMat3,this.displayMat3,h);const y=H_(this.viewMat2d,p);return fm(y,y,m),Vu(y,y,f),wB(this.extent,o,n),J_(this.transform,o,n,s),z_(this.inverseTransform,this.transform),MB(this.transformNoRotation,o,n,s),this.worldScreenWidth=xB(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};u([d({readOnly:!0})],ds.prototype,"id",void 0),u([d({value:1,json:{write:!0}})],ds.prototype,"pixelRatio",null),u([d({json:{write:!0}})],ds.prototype,"size",null),u([d()],ds.prototype,"spatialReference",void 0),u([d({type:li,json:{write:!0}})],ds.prototype,"viewpoint",null),u([d({readOnly:!0})],ds.prototype,"visibleArea",null),ds=A1=u([$("esri.views.2d.ViewState")],ds);const MS=ds;var I1,O1;let $s=I1=class extends Y{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new I1({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};u([d()],$s.prototype,"left",void 0),u([d()],$s.prototype,"top",void 0),u([d()],$s.prototype,"right",void 0),u([d()],$s.prototype,"bottom",void 0),$s=I1=u([$("esri.views.2d.PaddedViewState.Padding")],$s);let ka=O1=class extends MS{constructor(...e){super(...e),this.paddedViewState=new MS,this._updateContent=(()=>{const t=He();return()=>{const r=this._get("size"),i=this._get("padding");if(!r||!i)return;const s=this.paddedViewState;yt(t,i.left+i.right,i.top+i.bottom),Gu(t,r,t),ll(s.size,t);const n=s.viewpoint;n&&(this.viewpoint=n)}})(),this.addHandles(se(()=>[this.size,this.padding],()=>this._updateContent(),In)),this.padding=new $s,this.size=[0,0]}set padding(e){this._set("padding",e||new $s)}set viewpoint(e){if(e){this.paddedViewState.viewpoint=e;let t=e;const r=this._get("padding");r&&(t=IB(e.clone(),e,this._get("size"),r));const{targetGeometry:i,rotation:s,scale:n}=t,{x:o,y:a,spatialReference:l}=i,h=this._viewpoint2D;h.center[0]=o,h.center[1]=a,h.rotation=s,h.scale=n,h.spatialReference=l,this._update()}}clone(){return new O1({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};u([d()],ka.prototype,"paddedViewState",void 0),u([d({type:$s})],ka.prototype,"padding",null),u([d()],ka.prototype,"viewpoint",null),ka=O1=u([$("esri.views.2d.PaddedViewState")],ka);const K_=ka;function Io(e,t,r,i){const s=3*e,n=3*(r-e)-s,o=1-s-n,a=3*t,l=3*(i-t)-a,h=1-a-l;function p(v){return((o*v+n)*v+s)*v}function f(v){return((h*v+l)*v+a)*v}function m(v){return(3*o*v+2*n)*v+s}function y(v,_){let w,S,E,x,A,P;for(E=v,P=0;P<8;P++){if(x=p(E)-v,Math.abs(x)<_)return E;if(A=m(E),Math.abs(A)<1e-6)break;E-=x/A}if(w=0,S=1,E=v,E<w)return w;if(E>S)return S;for(;w<S;){if(x=p(E),Math.abs(x-v)<_)return E;v>x?w=E:S=E,E=.5*(S-w)+w}return E}return function(v,_=1e-6){return f(y(v,_))}}const wH=/^cubic-bezier\((.*)\)/,Ci={};function bH(e){let t=Ci[e]||null;if(!t){const r=wH.exec(e);if(r){const i=r[1].split(",").map(s=>parseFloat(s.trim()));i.length!==4||i.some(s=>isNaN(s))||(t=Io.apply(Io,i))}}return t}Ci.ease=Io(.25,.1,.25,1),Ci.linear=Io(0,0,1,1),Ci.easeIn=Ci["ease-in"]=Io(.42,0,1,1),Ci.easeOut=Ci["ease-out"]=Io(0,0,.58,1),Ci.easeInOut=Ci["ease-in-out"]=Io(.42,0,.58,1);let xS=class{constructor(t){this._view=t,this.viewpoint=new li({targetGeometry:new ae,scale:0,rotation:0})}get view(){return this._view}get size(){const[t,r]=this._view.size;return Math.sqrt(t*t+r*r)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return $O(this.center.spatialReference)}pixelsPerPanAtZoom(t){return 1/(t*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(t){return 1/(t*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(t,r){r.pan=w3(this.center,t.center);let i=Math.abs(t.rotation-this.rotation);i=i>=180?360-i:i,r.rotate=Uf(i),r.sourceZoom=this.scale,r.targetZoom=t.scale}interpolate(t,r,i){const{pan:s,rotate:n,zoom:o,zoomOffset:a}=i,{center:l}=this;l.spatialReference=t.center.spatialReference,l.x=pc(t.center.x,r.center.x,s),l.y=pc(t.center.y,r.center.y,s),this.viewpoint.scale=pc(t.scale,r.scale+a,o);let h=t.rotation;const p=r.rotation;Math.abs(p-h)>=180&&(h+=360*(h<p?1:-1)),this.viewpoint.rotation=pc(h,p,n)}copyFrom(t){kt(this.viewpoint,t.viewpoint),this._view=t.view}};const UO=e=>e*e,SH=e=>1-UO(1-e),$H=e=>2**(10*(e-1)),TH=e=>1-$H(1-e);function EH(e){const t=2*(e-Math.sqrt((e-1)*e)),r=t/2/e;return i=>i<r?e*i*i:t*i-t+1}function MH(e,t){return(r,i)=>r<t?t*e(r/t,i):1-e((1-r)/(1-t),i)*(1-t)}const AS=MH(EH(1),.5);let xH=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const zu={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},jO={...zu,maxDuration:4e3};let AH=class GO{constructor(t){this._createCamera=t,this.compared=new xH,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:zu.desiredScreenFlow},this.source=t(),this.target=t()}clone(){const t=new GO(this._createCamera);return t.copyFrom(this),t}copyFrom(t){this.update(t.source,t.target,t.settings)}update(t,r,i){this.source!==t&&this.source.copyFrom(t),this.target!==r&&this.target.copyFrom(r),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=i.desiredScreenFlow??zu.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(t){const r=this.target.pixelsPerPanAtZoom(t);return this.halfWindowSize/r}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>ir()}get hasFov(){return Math.abs(this.compared.fov)>ir()}get hasRotate(){return this.compared.rotate>ir()}},IH=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},OH=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((t,r)=>t+r.time,0)}interpolateComponentsAt(t,r){t=Math.min(Math.max(t,0),1),t*=this.time;let i=0,s=0;const n=this.definition,o=this.segments.reduce((a,l)=>a||l.definition.hasZoom,!1);for(let a=0;a<this.segments.length;a++){const l=this.segments[a],h=l.definition;if(t<=l.time||a===this.segments.length-1){if(this.segmentInterpolateComponentsAt(l,l.time===0?0:t/l.time,r),n.hasPan&&!isNaN(r.pan)&&isFinite(n.compared.pan)?r.pan=(i+h.compared.pan*r.pan)/n.compared.pan:r.pan=1,n.hasRotate&&!isNaN(r.rotate)&&isFinite(n.compared.rotate)?r.rotate=(s+h.compared.rotate*r.rotate)/n.compared.rotate:r.rotate=1,o&&!isNaN(r.zoom)&&isFinite(h.compared.targetZoom)){const{sourceZoom:p,targetZoom:f}=h.compared,m=r.zoom*(f-p)+p,y=this.segments[0].definition.compared.sourceZoom,v=this.segments[this.segments.length-1].definition.compared.targetZoom,_=Math.abs(f-y)>Math.abs(p-y)?f:p;r.zoomOffset=_-v,r.zoom=(m-y)/(_-y)}else r.zoom=1;return r}t-=l.time,i+=h.compared.pan,s+=h.compared.rotate}}segmentInterpolateComponentsAt(t,r,i){t.interpolateComponentsAt(r,i)}},gy=class{get time(){return this._time}constructor(t){t&&this.update(t)}update(t){t&&(this.definition?this.definition.copyFrom(t):this.definition=t.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const t=this.definition,r=t.compared,i=r.sourceZoom,s=r.targetZoom;this._zoomSign=i>s?1:-1,this._panPixelsAtSource=r.pan*t.source.pixelsPerPanAtZoom(i);const n=(t.source.pixelsPerRotate()+t.target.pixelsPerRotate())/2;this._rotatePixels=r.rotate*n}_updatePixelFlow(){const t=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom,{hasZoom:i,hasPan:s,hasRotate:n}=this.definition;let o=0,a=0;i&&(s&&(o=(r/t-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),n&&(a=this._zoomSign*(Math.log(t/r)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const l=this.definition.desiredPixelFlow;if(i&&s&&n){const h=o+a+o*a;this._zoomPixelFlow=o*a/h*l,this._panPixelFlow=a/h*l,this._rotatePixelFlow=o/h*l}else if(i&&s){const h=1+o;this._zoomPixelFlow=o/h*l,this._panPixelFlow=1/h*l}else if(i&&n){const h=1+a;this._zoomPixelFlow=a/h*l,this._rotatePixelFlow=1/h*l}else if(s&&n){const h=this._panPixelsAtSource/this._rotatePixels,p=1+h;this._panPixelFlow=h/p*l,this._rotatePixelFlow=1/p*l}else s?this._panPixelFlow=l:i?this._zoomPixelFlow=l:n&&(this._rotatePixelFlow=l);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const h=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=h,this._panPixelFlow/=h,this._rotatePixelFlow/=h}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/PH:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const t=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,r=t*this._panPixelsAtSource;return Math.log(r*(this._zoomPixelFlow/this._panPixelFlow)+1)/(t*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(t){if(t===0||t===1)return t;if(this.definition.hasZoom){const r=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom;return(r*(r/i)**-t-r)/(i-r)}return t}_interpolateComponentsFov(t){if(t===0)return this.definition.segmentStart;if(t===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:r,segmentEnd:i}=this.definition;return r+t*(i-r)}return this.definition.segmentStart}_interpolateComponentsPan(t){if(t===0||t===1)return t;if(this.definition.hasPan&&this.definition.hasZoom){const r=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(r*t*this._time)-1))/(r*Math.LN2)}return t}_interpolateComponentsRotate(t){return t}interpolateComponentsAt(t,r){t=Math.min(Math.max(t,0),1),r.zoom=this._interpolateComponentsZoom(t),r.pan=this._interpolateComponentsPan(t),r.rotate=this._interpolateComponentsRotate(t),r.zoomOffset=0,r.fov=this._interpolateComponentsFov(t)}};const PH=Uf(45);function RH(e,t,r){const i=t-e.compared.sourceZoom,s=e.halfWindowPanAtZoom(i);return-e.halfWindowSize*(r.ascensionFactor*Math.LN2*e.compared.pan+s)*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2*s)}function CH(e,t,r){const i=1/t,s=Math.log(e.compared.sourceZoom*i),n=1/e.desiredPixelFlow,o=1/Math.LN2,a=t-e.compared.sourceZoom,l=1/a,h=(r.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(a))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*i*n*o*l*h-e.halfWindowSize*s*n*o*l+e.halfWindowSize*s*n*o*h/(a*a)}function kH(e,t,r){const i=t-e.compared.sourceZoom,s=1/i,n=1/t,o=Math.log(e.compared.sourceZoom*n),a=(r.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(i))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*s*(-2*s*n*a+2*s*o+2*n-2*o*a/(i*i)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function NH(e,t){return-e.halfWindowSize*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2)}function LH(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function DH(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function FH(e,t,r){return-e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t))}function UH(e,t,r){return e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t))}function jH(e,t,r){return-2*e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t*t))}function GH(e,t,r){return e.halfWindowSize*(-e.halfWindowPanAtZoom(t)-r.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*e.halfWindowPanAtZoom(-t+e.compared.targetZoom))}function VH(e,t,r){const i=Math.log(t/e.compared.targetZoom),s=1/e.desiredPixelFlow,n=1/Math.LN2,o=-t+e.compared.targetZoom,a=1/o,l=(-e.halfWindowPanAtZoom(t)-r.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return-e.halfWindowSize*i*s*n*a+e.halfWindowSize*i*s*n*l/(o*o)+e.halfWindowSize*s*n*a*l/t}function zH(e,t,r){const i=t-e.compared.targetZoom,s=1/i,n=1/t,o=Math.log(t/e.compared.targetZoom),a=(e.halfWindowPanAtZoom(t)+r.descensionFactor*Math.LN2*e.compared.pan-e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*s*(-2*s*n*a-2*s*o+2*n+2*o*a/(i*i)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function BH(e,t){return e.halfWindowSize*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2)}function HH(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function WH(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function qH(e){const t=e.compared.sourceZoom-e.compared.targetZoom;if(t===0)return e.compared.pan*e.halfWindowSize/(e.desiredPixelFlow*e.halfWindowPanAtZoom(e.compared.sourceZoom));const r=Math.LN2*e.compared.pan,i=t,s=e.halfWindowPanAtZoom(i),n=e.halfWindowSize*Math.log(e.compared.sourceZoom/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*s);return e.compared.sourceZoom<=e.compared.targetZoom?n*(r-s):n*(r+s)}function ZH(e,t){let r=YH(e,t);const i={ascensionFactor:t.ascensionFactor!=null?t.ascensionFactor:.5,descensionFactor:t.descensionFactor!=null?t.descensionFactor:.5},s=i.ascensionFactor===0,n=i.descensionFactor===0,o=s?NH:RH,a=s?LH:CH,l=s?DH:kH,h=n?BH:GH,p=n?HH:VH,f=n?WH:zH,m=A=>o(e,A,i)+FH(e,A,i)+h(e,A,i),y=A=>a(e,A,i)+UH(e,A,i)+p(e,A,i),v=A=>l(e,A,i)+jH(e,A,i)+f(e,A,i);let _=m(r);const w=qH(e);let S;const E=t.maximumIterations||20,x=t.maximumDistance!=null?t.maximumDistance:1/0;for(S=0;S<E;S++){const A=t.desiredSlope??1e-6;let P=y(r);Math.abs(P)>A&&(P+=A);const C=P/v(r);if(isNaN(C)||r>=x&&C<0){if(!isFinite(x))return null;r=x,_=m(r);break}if(r-=C,r<e.compared.sourceZoom||r<e.compared.targetZoom)return null;const U=m(r);if(Math.abs(U-_)/_<=.005)break;_=U}return _>w*(1-.3)||r<e.compared.sourceZoom||r<e.compared.targetZoom?null:r}function YH(e,t){const r=Math.max(e.compared.sourceZoom,e.compared.targetZoom),i=e.source.zoomAtPixelsPerPan(e.desiredPixelFlow/e.compared.pan)/2;return i<r?t.maximumDistance!=null?r+(t.maximumDistance-r)/2:1.5*r:t.maximumDistance?Math.min(t.maximumDistance,i):i}let JH=class extends OH{constructor(t,r){super(),this._preallocSegments=[new gy,new gy,new gy],this._ascensionSegment=null,this._descensionSegment=null,this.update(t,r)}update(t,r){if(!t)return;this.definition?this.definition.copyFrom(t):this.definition=t.clone();const i=r!=null&&r.apex?ZH(t,r.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,i?this._updateWithApex(i,r==null?void 0:r.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(t,r,i){t.interpolateComponentsAt(r,i),t===this._ascensionSegment?i.zoom=SH(i.zoom):t===this._descensionSegment&&(i.zoom=UO(i.zoom))}_updateWithApex(t,r){const[i,s,n]=this._preallocSegments,o=(r==null?void 0:r.ascensionFactor)??.5,a=Math.min(1-o,(r==null?void 0:r.ascensionFactor)!=null&&r.descensionFactor!=null?r.descensionFactor:.5),l=1-o-a;i.definition?i.definition.copyFrom(this.definition):i.definition=this.definition.clone(),i.definition.compared.targetZoom=t,i.definition.compared.pan=this.definition.compared.pan*o,i.definition.compared.rotate=this.definition.compared.rotate*o,i.definition.segmentEnd=o,i.update(),this._ascensionSegment=i,this.segments.push(i),l>0&&(s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.copyFrom(this.definition),s.definition.compared.sourceZoom=t,s.definition.compared.targetZoom=t,s.definition.compared.pan=this.definition.compared.pan*l,s.definition.compared.rotate=this.definition.compared.rotate*l,s.definition.segmentStart=i.definition.segmentEnd,s.definition.segmentEnd=i.definition.segmentEnd+l,s.update(),this.segments.push(s)),n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.compared.sourceZoom=t,n.definition.compared.pan=this.definition.compared.pan*a,n.definition.compared.rotate=this.definition.compared.rotate*a,n.definition.segmentStart=o+l,n.update(),this._descensionSegment=n,this.segments.push(n)}_updateWithoutApex(){const[t]=this._preallocSegments;t.update(this.definition),this.segments.push(t)}};const XH=new IH;let KH=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(t){this._time=0,this._easing=AS,this.definition=new AH(t),this.path=new JH}update(t,r,i){this.definition.update(t,r,i),this.path.update(this.definition,i),this._time=this._applyTimeSettings(Rk(isFinite(this.path.time)?this.path.time:0),i),this._easing=i.easing??(this._time>=1e3?AS:TH)}cameraAt(t,r){t=Math.min(Math.max(0,t),1),t=this._normalizedEasing(t);const i=this.path.interpolateComponentsAt(t,XH);r.interpolate(this.definition.source,this.definition.target,i)}_normalizedEasing(t){const r=this._easing(0,this._time),i=this._easing(1,this._time);return(this._easing(t,this._time)-r)/(i-r)}_applyTimeSettings(t,r){const i=r.speedFactor!=null?r.speedFactor:1,s=r.minDuration??zu.minDuration/i,n=r.maxDuration??zu.maxDuration/i;return t=r.duration!=null?r.duration:Math.min(Math.max(t/i,s),n)}};const IS=2e3,QH=64;let eW=class{constructor(t){this._view=t,this._animation=new KH(()=>new xS(this._view)),this._current=new xS(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(t,r,i={}){kt(this._current.viewpoint,t),kt(this._source.viewpoint,t),kt(this._target.viewpoint,r),this._animation.update(this._source,this._target,i)}applyRatio(t,r){this._animation.cameraAt(r,this._current),kt(t,this._current.viewpoint)}},Na=class extends Y{constructor(t){super(t),this._animation=null,this._destinationViewState=new K_,this.updateFunction=null,this.easing=Ci.ease,this.viewpoint=new li({targetGeometry:new ae,scale:0,rotation:0}),this._updateTask=hl({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new eW(t.view)}destroy(){this._updateTask=Ue(this._updateTask)}get animation(){return this._animation}set animation(t){this._animation=t,this.view.animation=t}animate(t,r,i){this.stop();const s=this.viewpoint;kt(s,r);const n=(typeof(i==null?void 0:i.easing)=="string"?bH(i.easing):i==null?void 0:i.easing)||this.easing,o=t.target;this._transition.update(this.viewpoint,o,{apex:{maximumDistance:Math.min(Math.min(r.scale,o.scale)*QH,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:i==null?void 0:i.duration,maxDuration:(i==null?void 0:i.animationMode)==="auto"?1/0:(i==null?void 0:i.maxDuration)??jO.maxDuration,speedFactor:i==null?void 0:i.speedFactor,easing:typeof n=="function"?l=>n(l):void 0}),(i==null?void 0:i.animationMode)==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=o,tW(this._transition.animation,i,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,o,{duration:0}));const a=()=>{this.animation===t&&this._updateTask&&(t.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(a,a),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinuous(t,r){this.stop(),this.updateFunction=r,this.viewpoint=t;const i=new T1({target:t.clone()}),s=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){var i,s;const r=this.animation;if(r&&r.state!==T1.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime),(i=this.animation)==null||i.update(this.viewpoint);else{const n=performance.now()-this._startTime,o=this._transition.duration,a=o>0?n/o:1,l=a>=1;this._transition.applyRatio(this.viewpoint,a),l&&((s=this.animation)==null||s.finish())}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function tW(e,t,r,i){if((t==null?void 0:t.duration)!=null)return!0;const{time:s,isLinear:n}=e,o=(t==null?void 0:t.speedFactor)||1,a=(t==null?void 0:t.maxDuration)??jO.maxDuration/o;if(I("esri-goto-debug")&&(console.log("speed factor:",o),console.log("adjusted duration:		",s),console.log("adjusted max duration:	",a),console.log("is linear:",n)),s>a)return I("esri-goto-debug")&&console.warn(`failed "auto" heuristic: animations must be shorter than ${a/1e3}s`),!1;if(n){const h=He(),p=vt(...i.toScreen(h,...r.center)),f=vt(...r.toScreen(h,...i.center)),m=f!=null&&f.x>-(1.5-.5)*r.size[0]&&f.x<(1.5+.5)*r.size[0]&&f.y>-(1.5-.5)*r.size[1]&&f.y<(1.5+.5)*r.size[1],y=p!=null&&p.x>-(1.5-.5)*i.size[0]&&p.x<(1.5+.5)*i.size[0]&&p.y>-(1.5-.5)*i.size[1]&&p.y<(1.5+.5)*i.size[1];if(I("esri-goto-debug")&&(console.log(`dest is within ${1.5} screens at start view:`,m),console.log(`start is within ${1.5} screens at dest view:`,y)),s>IS/o&&!m&&!y)return I("esri-goto-debug")&&console.warn(`failed "auto" heuristic: linear animations must be...
  - shorter than ${IS/1e3/o}s, or
  - shorter than ${a/1e3}s and the destination is close enough to the starting screen, or
  - shorter than ${a/1e3}s and the start point is close enough to the destination screen`),!1}return!0}u([d()],Na.prototype,"easing",void 0),u([d()],Na.prototype,"view",void 0),u([d()],Na.prototype,"viewpoint",void 0),Na=u([$("esri.views.2d.AnimationManager")],Na);const rW=Na;var At;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(At||(At={}));const VO=Symbol("Yield");let iW=class{constructor(){this._tasks=new Array,this._runningTasks=Cu(0)}get length(){return this._tasks.length}get running(){return this._runningTasks.value>0}destroy(){this.cancelAll()}runTask(t){if(this.length===0)return VO;for(;!t.done&&this._process(t);)t.madeProgress()}push(t,r,i){return++this._runningTasks.value,new Promise((s,n)=>this._tasks.push(new OS(s,n,t,r,i))).finally(()=>--this._runningTasks.value)}unshift(t,r,i){return++this._runningTasks.value,new Promise((s,n)=>this._tasks.unshift(new OS(s,n,t,r,i))).finally(()=>--this._runningTasks.value)}_process(t){var i;if(this._tasks.length===0)return!1;const r=this._tasks.shift();try{const s=hi(r.signal);if(s&&!r.abortCallback)r.reject(je());else{const n=s?(i=r.abortCallback)==null?void 0:i.call(r,je()):r.callback(t);Zi(n)?n.then(r.resolve,r.reject):r.resolve(n)}}catch(s){r.reject(s)}return!0}cancelAll(){const t=je();for(const r of this._tasks)if(r.abortCallback){const i=r.abortCallback(t);r.resolve(i)}else r.reject(t);this._tasks.length=0}},OS=class{constructor(t,r,i,s=void 0,n=void 0){this.resolve=t,this.reject=r,this.callback=i,this.signal=s,this.abortCallback=n}},Bc=class extends Y{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};u([d()],Bc.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),u([d()],Bc.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),Bc=u([$("esri.views.support.debugFlags")],Bc);const sW=new Bc;function nW(){return new nf.Scheduler}var he;(function(e){e.RESOURCE_CONTROLLER_IMMEDIATE="immediate",e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.LOD_RENDERER="LoD renderer",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="clouds generator",e.MAPVIEW_FETCH_QUEUE="mapview fetch queue",e.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update",e.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue",e[e.NONE=0]="NONE",e[e.TEST_PRIO=1]="TEST_PRIO"})(he||(he={}));const Pr=0,PS=new Map([[he.RESOURCE_CONTROLLER_IMMEDIATE,Pr],[he.RESOURCE_CONTROLLER,4],[he.SLIDE,Pr],[he.STREAM_DATA_LOADER,Pr],[he.ELEVATION_QUERY,Pr],[he.TERRAIN_SURFACE,1],[he.SURFACE_GEOMETRY_UPDATES,1],[he.LOD_RENDERER,2],[he.GRAPHICS_CORE,2],[he.I3S_CONTROLLER,2],[he.POINT_CLOUD_LAYER,2],[he.FEATURE_TILE_FETCHER,2],[he.CLOUDS_GENERATOR,2],[he.OVERLAY,4],[he.STAGE,4],[he.GRAPHICS_DECONFLICTOR,4],[he.FILTER_VISIBILITY,4],[he.SCALE_VISIBILITY,4],[he.FRUSTUM_VISIBILITY,4],[he.POINT_OF_INTEREST_FREQUENT,6],[he.POINT_OF_INTEREST_INFREQUENT,30],[he.LABELER,8],[he.FEATURE_QUERY_ENGINE,8],[he.FEATURE_TILE_TREE,16],[he.FEATURE_TILE_TREE_ACTIVE,Pr],[he.ELEVATION_ALIGNMENT,12],[he.ELEVATION_ALIGNMENT_SCENE,14],[he.TEXT_TEXTURE_ATLAS,12],[he.TEXTURE_UNLOAD,12],[he.LINE_OF_SIGHT_TOOL,16],[he.LINE_OF_SIGHT_TOOL_INTERACTIVE,Pr],[he.SNAPPING,Pr],[he.SHADOW_ACCUMULATOR,30],[he.MAPVIEW_FETCH_QUEUE,Pr],[he.MAPVIEW_LAYERVIEW_UPDATE,2],[he.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,Pr]]);function RS(e){return PS.has(e)?PS.get(e):typeof e=="number"?e:1}const oW=6.5,CS=1,aW=30,lW=1e3/30,cW=100,kS=.9;var nf,Hn;(function(e){class t{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(n=>n.needsUpdate)}constructor(){this._updating=Cu(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new Kc("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new i,this._state=At.INTERACTING,this._tasks=new Qc,this._runQueue=new Qc,this._load=0,this._idleStateCallbacks=new Qc,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=se(()=>sW.SCHEDULER_LOG_SLOW_TASKS,n=>this._debug=n,Nt);for(const n of Object.keys(he))this.performanceInfo.tasks.set(he[n],new Kc(he[n]))}destroy(){this._tasks.toArray().forEach(n=>n.remove()),this._tasks.clear(),Ue(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(n){this._updatingChanged(),n&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())}))}registerTask(n,o){const a=new r(this,n,o);return this._tasks.push(a),this._updatingChanged(),this.performanceInfo.tasks.has(n)||this.performanceInfo.tasks.set(n,new Kc(n)),a}registerIdleStateCallbacks(n,o){const a={idleBegin:n,idleEnd:o};this._idleStateCallbacks.push(a),this.state===At.IDLE&&this._idleUpdatesStartFired&&a.idleBegin();const l=this;return{remove:()=>this._removeIdleStateCallbacks(a),set idleBegin(h){l._idleUpdatesStartFired&&(a.idleEnd(),l._state===At.IDLE&&h()),a.idleBegin=h},set idleEnd(h){a.idleEnd=h}}}get load(){return this._load}set state(n){this._state!==n&&(this._state=n,this.state!==At.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(o=>o.idleEnd())))}get state(){return this._state}updateBudget(n){this._test&&(this._test.usedBudget=0),++this._frameNumber;let o=oW,a=n.frameDuration,l=CS;switch(this.state){case At.IDLE:o=0,a=Math.max(cW,n.frameDuration),l=aW;break;case At.INTERACTING:a=Math.max(lW,n.frameDuration);case At.ANIMATING:}return a=a-n.elapsedFrameTime-o,this.state!==At.IDLE&&a<CS&&!this._forceTask?(this._forceTask=!0,!1):(a=Math.max(a,l),this._budget.reset(a,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case At.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(n=>n.idleBegin())),this._runIdle();break;case At.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(n){this._idleUpdatesStartFired&&n.idleEnd(),this._idleStateCallbacks.removeUnordered(n)}removeTask(n){this._tasks.removeUnordered(n),this._runQueue.removeUnordered(n),this._updatingChanged()}_updateTask(n){this._tasks.forAll(o=>{o.name===n&&o.setPriority(n)})}_getState(n){if(this._runQueue.some(a=>a.name===n))return Hn.SCHEDULED;let o=Hn.IDLE;return this._tasks.forAll(a=>{a.name===n&&a.needsUpdate&&(a.schedulePriority<=1?o=Hn.READY:o!==Hn.READY&&(o=Hn.WAITING))}),o}_getRuntime(n){let o=0;return this._tasks.forAll(a=>{a.name===n&&(o+=a.runtime)}),o}_resetRuntimes(){this._tasks.forAll(n=>n.runtime=0)}_getRunning(){const n=new Map;if(this._tasks.forAll(a=>{a.needsUpdate&&n.set(a.name,(n.get(a.name)||0)+1)}),n.size===0)return null;let o="";return n.forEach((a,l)=>{o+=a>1?` ${a}x ${l}`:` ${l}`}),o}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const n=this._tasks.reduce((o,a)=>a.needsUpdate?++o:o,0);this._load=this._load*kS+n*(1-kS)}_schedule(){for(this._runQueue.filterInPlace(n=>!!n.needsUpdate||(n.schedulePriority=n.basePriority,!1)),this._tasks.forAll(n=>{n.basePriority===Pr&&n.needsUpdate&&!this._runQueue.includes(n)&&n.blockFrame!==this._frameNumber&&this._runQueue.unshift(n)});this._runQueue.length===0;){let n=!1,o=0;if(this._tasks.forAll(a=>{a.needsUpdate&&a.schedulePriority!==0&&a.basePriority!==Pr&&a.blockFrame!==this._frameNumber&&(n=!0,o=Math.max(o,a.basePriority),a.schedulePriority===1?(a.schedulePriority=0,this._runQueue.push(a)):--a.schedulePriority)}),!n)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const n=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const o=this._budget.now(),a=this._runQueue.pop();this._budget.resetProgress();try{a.task.runTask(this._budget)===VO&&(a.blockFrame=this._frameNumber)}catch(h){V.getLogger("esri.views.support.Scheduler").error(`Exception in task "${a.name}"`,h),a.blockFrame=this._frameNumber}!this._budget.hasProgressed&&a.blockFrame!==this._frameNumber&&a.needsUpdate&&(a.name,he.I3S_CONTROLLER,a.blockFrame=this._frameNumber),a.schedulePriority=a.basePriority;const l=this._budget.now()-o;if(a.runtime+=l,this._frameTaskTimes.set(a.priority,this._frameTaskTimes.get(a.priority)+l),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-n)}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-n)}_startFrameTaskTimes(){for(const n of Object.keys(he))this._frameTaskTimes.set(he[n],0)}_recordFrameTaskTimes(n){this._frameTaskTimes.forEach((o,a)=>this.performanceInfo.tasks.get(a).push(o)),this.performanceInfo.total.push(n)}get test(){return this._test}}e.Scheduler=t;class r{get task(){return this._task.value}get updating(){return this._queue.running}constructor(n,o,a){this._scheduler=n,this.name=o,this.blockFrame=0,this.runtime=0,this._queue=new iW,this._handles=new Ml,this._basePriority=RS(o),this.schedulePriority=this._basePriority,this._task=Cu(a??this._queue),this._handles.add(zi(()=>this.task.running,l=>n.taskRunningChanged(l)))}remove(){this.processQueue(zO),this._scheduler.removeTask(this),this.schedule=NS.schedule,this.reschedule=NS.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(n){if(this.name===n)return;this.name=n;const o=RS(n);this._basePriority!==Pr&&this.schedulePriority===0||(this.schedulePriority=o),this._basePriority=o}get priority(){return this.name}set priority(n){this.setPriority(n)}get needsUpdate(){return this.updating||this.task.running}schedule(n,o,a){return this._queue.push(n,o,a)}reschedule(n,o,a){return this._queue.unshift(n,o,a)}processQueue(n){return this._queue.runTask(n)}}class i{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=At.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(n){return!this.done&&(n()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(n){this._enabled=n}reset(n,o){this._begin=this.now(),this._budget=n,this._state=o,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}e.Budget=i})(nf||(nf={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(Hn||(Hn={}));const zO=(()=>{const e=new nf.Budget;return e.enabled=!1,e})();let uW=class{remove(){}processQueue(){}schedule(t,r,i){try{if(hi(r)){const s=je();return i?Promise.resolve(i(s)):Promise.reject(s)}return Uy(t(zO))}catch(s){return Promise.reject(s)}}reschedule(t,r,i){return this.schedule(t,r,i)}};const NS=new uW;let hW=class{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=nW(),this.stationary=!0,this.prepare=()=>{var r;this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),((r=this.view.animation)==null?void 0:r.target)==null||Zi(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=r=>{var a;if(this._updateRequested=!1,(a=this.view)==null?void 0:a.destroyed)return;const{allLayerViews:i,graphicsView:s,labelManager:n,state:{id:o}}=this.view;i.forEach(this._updateLayerView,this),n!=null&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),s!=null&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=At.ANIMATING:this.view.interacting?this._scheduler.state=At.INTERACTING:this._scheduler.state=At.IDLE,this._scheduler.updateBudget(r)&&this._scheduler.frame()}}destroy(){this.stop(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,targetState:new K_,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=se(()=>t.stationary,r=>{this.stationary=r,this.requestFrame()}),this._frameTaskHandle=hl(this),this.requestUpdate()}stop(){var t;this._frameTaskHandle&&(this._updateRequested=!1,(t=this._stationaryHandle)==null||t.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){var s;if(!t.attached)return void this.requestUpdate();const r=this.view.state,i=t.lastUpdateId;i!=null&&(this.stationary||t.moving)||(t.moving=!0),i!==r.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=r.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&((s=t.layerViews)==null||s.forEach(this._updateLayerView,this))}},sp=class extends Y{constructor(t){super(t),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(t,r){if(!t)return void V.getLogger(this).error("#goTo()","target cannot be null or undefined");const i=new T1;this.view.animation=i,await Fv(()=>this.view.ready,r);const s={...r,animate:(r==null?void 0:r.animate)??!BI(),animationMode:(r==null?void 0:r.animationMode)??"auto"},{extent:n,spatialReference:o,size:a,viewpoint:l,constraints:h,padding:p,allLayerViews:f}=this.view,m=vB(t,{extent:n,spatialReference:o,size:a,viewpoint:l,constraints:h,padding:p,allLayerViews:f,pickClosestTarget:(r==null?void 0:r.pickClosestTarget)??!0});return i==null||i.update(m),this._gotoTask={},s.animate?this._gotoAnimated(m,s):this._gotoImmediate(m,s)}_gotoImmediate(t,r){const i=this._gotoTask,s=this.view.animation,n=t.then(o=>{if(Qe(r),i!==this._gotoTask)throw new k("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=s.target=o,s.finish()});return this._cancellableGoTo(i,s,n,r)}_gotoAnimated(t,r){const i=this._gotoTask,s=this.view.animation;if(!s)return Promise.resolve();const n=t.then(o=>{if(Qe(r),i!==this._gotoTask)throw new k("view:goto-interrupted","Goto was interrupted");return s.update(o),this.view.animationManager.animate(s,this.view.viewpoint,r),s.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,s,n,r)}_cancellableGoTo(t,r,i,s){const n=()=>t===this._gotoTask;return Ak(i,s).finally(()=>{n()&&(r.done||r.stop())})}};u([d({constructOnly:!0})],sp.prototype,"view",void 0),sp=u([$("esri.views.2d.GoToManager")],sp);function Re(){return Promise.all([j(()=>import("./webglDeps-BPFbcozq.js"),__vite__mapDeps([210,95,94,156,211,158]),import.meta.url),j(()=>import("./mapViewDeps-DdTqYDFr.js"),__vite__mapDeps([212,125,26,27,96,97,37,98,93,99,100,92,94,95,66,101,55,102,60,213,158,108,214,211,116,215,145,144,107,39,40,216,136,170,24,105,106,143,210,156,217,111,218,91,48,49,43,44,34,103,51,90,219,154,151,138,155,220,80,221,109,104,222,223,224,225,226,227,150,228,229]),import.meta.url)])}const ec=()=>Re().then(()=>j(()=>import("./TileLayerView2D-Ci7iLVgz.js"),__vite__mapDeps([230,125,26,27,99,93,136,96,97,37,98,100,92,94,95,66,101,55,102,60,170,24,215,214,158,211,116,145,144,107,39,40,143,217,111,218,91,48,49,43,44,34,103,51,90,80,213,108,105,106,154,151,138,222,223,231,232,227,233,202,234,225,226,235,236,204,205,175,52,228,237,238,239,240]),import.meta.url)),Wn=()=>Re().then(()=>j(()=>import("./FeatureLayerView2D-Bx-K5G1p.js").then(e=>e.F),__vite__mapDeps([241,215,39,37,40,186,242,174,233,202,226,96,97,98,93,99,100,92,94,95,66,101,55,102,60,26,27,227,214,158,211,116,145,144,107,213,108,111,166,192,189,103,168,25,216,136,243,237,240,235]),import.meta.url)),LS={"base-dynamic":()=>Re().then(()=>j(()=>import("./BaseDynamicLayerView2D-RPpsv_ql.js"),__vite__mapDeps([244,245,214,92,93,94,95,66,158,211,116,215,145,144,107,39,37,40,233,202,246,232,235]),import.meta.url)),"base-tile":ec,"bing-maps":ec,catalog:()=>Re().then(()=>j(()=>import("./CatalogLayerView2D-hKwL3Az7.js"),__vite__mapDeps([247,233,215,202]),import.meta.url)),"catalog-dynamic-group":()=>Re().then(()=>j(()=>import("./CatalogDynamicGroupLayerView2D-D4aYcSHP.js"),__vite__mapDeps([248,233,215,202]),import.meta.url)),"catalog-footprint":()=>Re().then(()=>j(()=>import("./CatalogFootprintLayerView2D-DI2NGBl0.js"),__vite__mapDeps([249,241,215,39,37,40,186,242,174,233,202,226,96,97,98,93,99,100,92,94,95,66,101,55,102,60,26,27,227,214,158,211,116,145,144,107,213,108,111,166,192,189,103,168,25,216,136,243,237,240,235]),import.meta.url)),csv:Wn,"geo-rss":()=>Re().then(()=>j(()=>import("./GeoRSSLayerView2D-B50k_XTa.js"),__vite__mapDeps([250,164,165,118,90,128,166,167,168,101,55,169,10,51,49,170,125,26,27,99,93,24,25,174,233,215,202,224,225,226,96,97,37,98,100,92,94,95,66,102,60,227,214,158,211,116,145,144,107,39,40,213,108,222,91,48,43,44,34,103,223]),import.meta.url)),feature:Wn,geojson:Wn,parquet:Wn,graphics:()=>Re().then(()=>j(()=>import("./GraphicsLayerView2D-iUuB49dk.js"),__vite__mapDeps([251,233,215,202,224,225,226,96,97,37,98,93,99,100,92,94,95,66,101,55,102,60,26,27,227,214,158,211,116,145,144,107,39,40,213,108,222,51,49,170,125,24,91,48,43,44,34,103,90,223,243]),import.meta.url)),group:()=>Re().then(()=>j(()=>import("./GroupLayerView2D-BoBoCUKm.js"),__vite__mapDeps([252,233,215,202]),import.meta.url)),imagery:()=>Re().then(()=>j(()=>import("./ImageryLayerView2D-CM790Qdi.js"),__vite__mapDeps([253,254,95,158,66,123,214,92,93,94,211,116,215,145,144,107,39,37,40,233,202,222,51,49,96,97,98,99,100,101,55,102,60,26,27,170,125,24,91,48,43,44,34,103,90,213,108,223,234,225,226,227,245,232,246,127,242,240,235]),import.meta.url)),"imagery-tile":()=>Re().then(()=>j(()=>import("./ImageryTileLayerView2D-C1ypTTtK.js"),__vite__mapDeps([255,256,254,95,158,66,123,214,92,93,94,211,116,215,145,144,107,39,37,40,233,202,257,227,258,127,242,240,235]),import.meta.url)),kml:()=>Re().then(()=>j(()=>import("./KMLLayerView2D-C4PIbTOQ.js"),__vite__mapDeps([259,260,164,165,118,90,128,166,167,168,101,55,169,10,51,49,170,125,26,27,99,93,24,25,174,232,215,245,214,92,94,95,66,158,211,116,145,144,107,39,37,40,233,202,224,225,226,96,97,98,100,102,60,227,213,108,222,91,48,43,44,34,103,223,127,219,210,156,154,151,138,218,136,155,257]),import.meta.url)),"knowledge-graph":()=>Re().then(()=>j(()=>import("./KnowledgeGraphLayerView2D-DVe54mPw.js"),__vite__mapDeps([261,233,215,202]),import.meta.url)),"link-chart":()=>Re().then(()=>j(()=>import("./KnowledgeGraphLayerView2D-DVe54mPw.js"),__vite__mapDeps([261,233,215,202]),import.meta.url)),"knowledge-graph-sublayer":Wn,"map-image":()=>Re().then(()=>j(()=>import("./MapImageLayerView2D-y1J1y9uD.js"),__vite__mapDeps([262,245,214,92,93,94,95,66,158,211,116,215,145,144,107,39,37,40,233,202,222,51,49,96,97,98,99,100,101,55,102,60,26,27,170,125,24,91,48,43,44,34,103,90,213,108,223,234,225,226,227,246,232,263,228,237,239,242,235,236,204,205,175,52,238,240]),import.meta.url)),"map-notes":()=>Re().then(()=>j(()=>import("./MapNotesLayerView2D-CloolDTR.js"),__vite__mapDeps([264,233,215,202,224,225,226,96,97,37,98,93,99,100,92,94,95,66,101,55,102,60,26,27,227,214,158,211,116,145,144,107,39,40,213,108,222,51,49,170,125,24,91,48,43,44,34,103,90,223]),import.meta.url)),media:()=>Re().then(()=>j(()=>import("./MediaLayerView2D-BKdg1yJB.js"),__vite__mapDeps([265,165,118,90,128,166,167,168,101,55,169,164,10,51,49,170,125,26,27,99,93,24,25,266,223,70,136,96,97,37,98,100,92,94,95,66,102,60,215,214,158,211,116,145,144,107,39,40,143,217,111,218,91,48,43,44,34,103,80,213,108,105,106,154,151,138,222,221,109,267,233,202]),import.meta.url)),"ogc-feature":()=>Re().then(()=>j(()=>import("./OGCFeatureLayerView2D-DJkZm3_4.js"),__vite__mapDeps([268,241,215,39,37,40,186,242,174,233,202,226,96,97,98,93,99,100,92,94,95,66,101,55,102,60,26,27,227,214,158,211,116,145,144,107,213,108,111,166,192,189,103,168,25,216,136,243,237,240,235]),import.meta.url)),"open-street-map":ec,"oriented-imagery":Wn,route:()=>Re().then(()=>j(()=>import("./RouteLayerView2D-C3iTEHHj.js"),__vite__mapDeps([269,270,233,215,202,224,225,226,96,97,37,98,93,99,100,92,94,95,66,101,55,102,60,26,27,227,214,158,211,116,145,144,107,39,40,213,108,222,51,49,170,125,24,91,48,43,44,34,103,90,223]),import.meta.url)),stream:()=>Re().then(()=>j(()=>import("./StreamLayerView2D-DkF9U9jo.js"),__vite__mapDeps([271,174,241,215,39,37,40,186,242,233,202,226,96,97,98,93,99,100,92,94,95,66,101,55,102,60,26,27,227,214,158,211,116,145,144,107,213,108,111,166,192,189,103,168,25,216,136,243,237,240,235]),import.meta.url)),"subtype-group":()=>Re().then(()=>j(()=>import("./SubtypeGroupLayerView2D-ChcSbNaR.js"),__vite__mapDeps([272,241,215,39,37,40,186,242,174,233,202,226,96,97,98,93,99,100,92,94,95,66,101,55,102,60,26,27,227,214,158,211,116,145,144,107,213,108,111,166,192,189,103,168,25,216,136,243,237,240,235]),import.meta.url)),tile:ec,"vector-tile":()=>Re().then(()=>j(()=>import("./VectorTileLayerView2D-D_Bk8Qm2.js"),__vite__mapDeps([273,90,143,100,80,220,136,108,10,98,95,158,144,214,92,93,94,66,211,116,215,145,107,39,37,40,227,42,146,147,125,26,27,233,202,235]),import.meta.url)),video:()=>Re().then(()=>j(()=>import("./VideoLayerView2D-Da9xtjff.js"),__vite__mapDeps([274,275,267,116,214,92,93,94,95,66,158,211,215,145,144,107,39,37,40,213,96,97,98,99,100,101,55,102,60,26,27,108,233,202,224,225,226,227,222,51,49,170,125,24,91,48,43,44,34,103,90,223]),import.meta.url)),wcs:()=>Re().then(()=>j(()=>import("./ImageryTileLayerView2D-C1ypTTtK.js"),__vite__mapDeps([255,256,254,95,158,66,123,214,92,93,94,211,116,215,145,144,107,39,37,40,233,202,257,227,258,127,242,240,235]),import.meta.url)),"web-tile":ec,wfs:Wn,wms:()=>Re().then(()=>j(()=>import("./WMSLayerView2D-BRDqAa9B.js"),__vite__mapDeps([276,245,214,92,93,94,95,66,158,211,116,215,145,144,107,39,37,40,233,202,246,232,235,277,242]),import.meta.url)),wmts:()=>Re().then(()=>j(()=>import("./WMTSLayerView2D-BIcJIby3.js"),__vite__mapDeps([278,231,232,215,214,92,93,94,95,66,158,211,116,145,144,107,39,37,40,227,233,202,235]),import.meta.url)),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,focusArea:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,viewshed:null,voxel:null,scene:null,unknown:null,unsupported:null};function dW(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",r=t.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new k(`${r}:view-not-supported`,`${t} is not supported in 2D`)}const DS={hasLayerViewModule:e=>LS[e.type]!=null,importLayerView:e=>{const t=LS[e.type];if(t==null)throw dW(e);return t(e)}};function pW(e,t){const{spatialReference:r}=t,i=[t.x,t.y];let s=Number.POSITIVE_INFINITY,n=0,o=0;const a=[0,0],l=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const h of l)for(let p=0;p<h.length-1;p++){b6(a,i,h,p);const f=pm(i,a);f<s&&(s=f,n=a[0],o=a[1])}return{coordinate:new ae({x:n,y:o,spatialReference:r}),distance:s}}var P1;let Oo=P1=class extends Jv(Y){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return ra(this.geometry,this.spatialReference)}catch(e){return V.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(this.normalizedGeometry==null)return e;const r=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?rh(this.normalizedGeometry,r):Pv(this.normalizedGeometry,r))return e;const{coordinate:i}=pW(this.normalizedGeometry,r);return i&&(e.targetGeometry=i),e}clone(){var e,t;return new P1({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};u([d({constructOnly:!0})],Oo.prototype,"geometry",void 0),u([d({readOnly:!0})],Oo.prototype,"normalizedGeometry",null),u([d({constructOnly:!0})],Oo.prototype,"spatialReference",void 0),Oo=P1=u([$("esri.views.2d.constraints.GeometryConstraint")],Oo);var R1;let Hc=R1=class extends Jv(Y){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new R1({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};u([d()],Hc.prototype,"enabled",void 0),u([d()],Hc.prototype,"rotationEnabled",void 0),Hc=R1=u([$("esri.views.2d.constraints.RotationConstraint")],Hc);const BO=Hc;var C1;let Xt=C1=class extends Jv(Y){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:r,maxScale:i,minZoom:s,maxZoom:n}=this,o=-1,a=-1,l=!1,h=!1;if(r!==0&&i!==0&&r<i&&([r,i]=[i,r]),!(t!=null&&t.length))return this._set("effectiveMinScale",r),void this._set("effectiveMaxScale",i);t=t.map(p=>p.clone()),t.sort((p,f)=>f.scale-p.scale),t.forEach((p,f)=>p.level=f);for(const p of t)!l&&r>0&&r>=p.scale&&(o=p.level,l=!0),!h&&i>0&&i>=p.scale&&(a=e?e.level:-1,h=!0),e=p;s===-1&&(s=r===0?0:o),n===-1&&(n=i===0?t.length-1:a),s=Math.max(s,0),s=Math.min(s,t.length-1),n=Math.max(n,0),n=Math.min(n,t.length-1),s>n&&([s,n]=[n,s]),r=t[s].scale,i=t[n].scale,t.splice(0,s),t.splice(n-s+1,t.length),t.forEach((p,f)=>{this._lodByScale[p.scale]=p,this._scales[f]=p.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",s),this._set("effectiveMaxZoom",n),this._set("effectiveMinScale",r),this._set("effectiveMaxScale",i)}constrain(e,t){if(t&&e.scale===t.scale)return e;const r=this.effectiveMinScale,i=this.effectiveMaxScale,s=e.targetGeometry,n=t&&t.targetGeometry,o=i!==0&&e.scale<i,a=r!==0&&e.scale>r;if(o||a){const l=a?r:i;if(t&&n){const h=(l-t.scale)/(e.scale-t.scale);s.x=n.x+(s.x-n.x)*h,s.y=n.y+(s.y-n.y)*h}e.scale=l}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),r=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(r>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const r=Math.floor(e),i=Math.ceil(e);return t[r]+(e-r)*(t[i]-t[r])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let r,i;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let s=0;s<t.length-1;s++){if(r=t[s],i=t[s+1],i===e)return s+this.effectiveMinZoom+1;if(r>e&&i<e)return s+this.effectiveMinZoom+1-(e-i)/(r-i)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r-1)}clone(){return new C1({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,r)=>Math.abs(r-e)<=Math.abs(t-e)?r:t,this._scales[0])),this._lodByScale[e].scale}};u([d({readOnly:!0})],Xt.prototype,"effectiveLODs",void 0),u([d({readOnly:!0})],Xt.prototype,"effectiveMinZoom",void 0),u([d({readOnly:!0})],Xt.prototype,"effectiveMaxZoom",void 0),u([d({readOnly:!0})],Xt.prototype,"effectiveMinScale",void 0),u([d({readOnly:!0})],Xt.prototype,"effectiveMaxScale",void 0),u([d()],Xt.prototype,"lods",void 0),u([d()],Xt.prototype,"minZoom",void 0),u([d()],Xt.prototype,"maxZoom",void 0),u([d()],Xt.prototype,"minScale",void 0),u([d()],Xt.prototype,"maxScale",void 0),u([d()],Xt.prototype,"snapToZoom",void 0),Xt=C1=u([$("esri.views.2d.constraints.ZoomConstraint")],Xt);const HO=Xt,fW={base:null,key:"type",typeMap:{extent:Be,polygon:Bi}};let Je=class extends Y{constructor(t){super(t),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new K}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(t){t?this._set("geometry",t):this._set("geometry",null)}get version(){var t,r,i;return`${(t=this._zoom)==null?void 0:t.uid}/${(r=this._rotation)==null?void 0:r.uid}/${(i=this._geometry)==null?void 0:i.uid}`}get _geometry(){var r,i;const t=this._get("_geometry");return t&&this.geometry===t.geometry&&((r=this.view)==null?void 0:r.constraintsInfo.spatialReference)===t.spatialReference?t:new Oo({geometry:this.geometry,spatialReference:(i=this.view)==null?void 0:i.constraintsInfo.spatialReference})}get _rotation(){return new BO({rotationEnabled:this.rotationEnabled})}get _zoom(){var l;const t=this._get("_zoom"),r=this.lods||((l=this.view)==null?void 0:l.constraintsInfo.lods),i=this.minZoom,s=this.maxZoom,n=this.minScale,o=this.maxScale,a=this.snapToZoom;return t&&t.lods===r&&t.minZoom===i&&t.maxZoom===s&&t.minScale===n&&t.maxScale===o&&t.snapToZoom===a?t:new HO({lods:r,minZoom:i,maxZoom:s,minScale:n,maxScale:o,snapToZoom:a})}canZoomInTo(t){const r=this.effectiveMaxScale;return r===0||t>=r}canZoomOutTo(t){const r=this.effectiveMinScale;return r===0||t<=r}constrain(t,r){return this._zoom.constrain(t,r),this._rotation.constrain(t,r),this._geometry.constrain(t,r),this.customConstraints.forEach(i=>i.constrain(t,r)),t}constrainByGeometry(t){return this._geometry.constrain(t),this.customConstraints.forEach(r=>{var i;return(i=r.applyPanConstraint)==null?void 0:i.call(r,t)}),t}fit(t){return this._zoom.fit(t)}zoomToScale(t){return this._zoom.zoomToScale(t)}scaleToZoom(t){return this._zoom.scaleToZoom(t)}snapScale(t){return this._zoom.snapToClosestScale(t)}snapToNextScale(t){return this._zoom.snapToNextScale(t)}snapToPreviousScale(t){return this._zoom.snapToPreviousScale(t)}};u([d({readOnly:!0})],Je.prototype,"effectiveLODs",null),u([d({readOnly:!0})],Je.prototype,"effectiveMinScale",null),u([d({readOnly:!0})],Je.prototype,"effectiveMaxScale",null),u([d({readOnly:!0})],Je.prototype,"effectiveMinZoom",null),u([d({readOnly:!0})],Je.prototype,"effectiveMaxZoom",null),u([d({types:fW,value:null})],Je.prototype,"geometry",null),u([d({type:[un]})],Je.prototype,"lods",void 0),u([d()],Je.prototype,"minScale",void 0),u([d()],Je.prototype,"maxScale",void 0),u([d()],Je.prototype,"minZoom",void 0),u([d()],Je.prototype,"maxZoom",void 0),u([d()],Je.prototype,"rotationEnabled",void 0),u([d()],Je.prototype,"snapToZoom",void 0),u([d({type:K})],Je.prototype,"customConstraints",void 0),u([d()],Je.prototype,"view",void 0),u([d({readOnly:!0})],Je.prototype,"version",null),u([d({type:Oo,readOnly:!0})],Je.prototype,"_geometry",null),u([d({type:BO})],Je.prototype,"_rotation",null),u([d({readOnly:!0,type:HO})],Je.prototype,"_zoom",null),Je=u([$("esri.views.2d.MapViewConstraints")],Je);const WO=Je;let Nn=class bo{static getId(t,r,i,s){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${r}/${i}/${s}`}constructor(t,r,i,s){this.set(t,r,i,s)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(t){this.set(t)}get hash(){const t=4095&this.row,r=4095&this.col,i=63&this.level;return(3&this.world)<<30|r<<22|t<<8|i}acquire(t,r,i,s){this.set(t,r,i,s)}contains(t){const r=t.level-this.level;return r>=0&&this.row===t.row>>r&&this.col===t.col>>r&&this.world===t.world}containsChild(t){const r=t.level-this.level;return r>0&&this.row===t.row>>r&&this.col===t.col>>r&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new bo(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,r,i,s){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[n,o,a,l]=t.split("/");this.level=parseFloat(n),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(l)}else this.level=+t,this.row=+r,this.col=+i,this.world=+s||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new bo(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(t,r,i){const s=this.clone();return s.col+=t,s.row+=r,i.normalizeKey(s),s}getChildKeys(){const t=this.level+1,r=this.row<<1,i=this.col<<1,s=this.world;return[new bo(t,r,i,s),new bo(t,r,i+1,s),new bo(t,r+1,i,s),new bo(t,r+1,i+1,s)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}};Nn.pool=new Qo(Nn,null,null,25,50);function pa(e,t){return[e,t]}function qn(e,t,r){return e[0]=t,e[1]=r,e}function mW(e,t,r,i,s){return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e}const qr=new Nn("0/0/0/0");let yW=class qO{static create(t,r,i=null){const s=zt(t.spatialReference),n=r.origin||pa(t.origin.x,t.origin.y),o=pa(t.size[0]*r.resolution,t.size[1]*r.resolution),a=pa(-1/0,-1/0),l=pa(1/0,1/0),h=pa(1/0,1/0);i!=null&&(qn(a,Math.max(0,Math.floor((i.xmin-n[0])/o[0])),Math.max(0,Math.floor((n[1]-i.ymax)/o[1]))),qn(l,Math.max(0,Math.floor((i.xmax-n[0])/o[0])),Math.max(0,Math.floor((n[1]-i.ymin)/o[1]))),qn(h,l[0]-a[0]+1,l[1]-a[1]+1));const{cols:p,rows:f}=r;let m,y,v,_;return!i&&p&&f&&(qn(a,p[0],f[0]),qn(l,p[1],f[1]),qn(h,p[1]-p[0]+1,f[1]-f[0]+1)),t.isWrappable?(m=pa(Math.ceil(Math.round((s.valid[1]-s.valid[0])/r.resolution)/t.size[0]),h[1]),y=!0,v=s.origin,_=s.valid):(m=h,y=!1),new qO(r.level,r.resolution,r.scale,n,a,l,h,o,m,y,v,_)}constructor(t,r,i,s,n,o,a,l,h,p,f,m){this.level=t,this.resolution=r,this.scale=i,this.origin=s,this.first=n,this.last=o,this.size=a,this.norm=l,this.worldSize=h,this.wrap=p,this._spatialReferenceOrigin=f,this._spatialReferenceValid=m}normalizeCol(t){if(!this.wrap)return t;const r=this.worldSize[0];return t<0?r-1-Math.abs((t+1)%r):t%r}normalizeKey(t){if(!this.wrap)return;const r=this.worldSize[0],i=t.col;i<0?(t.col=i+r,t.world-=1):i>=r&&(t.col=i-r,t.world+=1)}denormalizeCol(t,r){return this.wrap?this.worldSize[0]*r+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){const r=this.origin[0]+t*this.norm[0],i=this._spatialReferenceOrigin,s=this._spatialReferenceValid;return this.wrap&&i&&s?r===i[0]?s[0]:this.origin[0]===i[0]&&t===this.worldSize[0]?s[1]:r:r}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,r,i=!1){qr.set(r);const s=i?qr.col:this.denormalizeCol(qr.col,qr.world),n=qr.row;return mW(t,this.getXForColumn(s),this.getYForRow(n+1),this.getXForColumn(s+1),this.getYForRow(n)),t}getTileCoords(t,r,i=!1){qr.set(r);const s=i?qr.col:this.denormalizeCol(qr.col,qr.world);return Array.isArray(t)?qn(t,this.getXForColumn(s),this.getYForRow(qr.row)):(t.x=this.getXForColumn(s),t.y=this.getYForRow(qr.row)),t}},Bu=class{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}*keys(){const t=this.lodInfo;for(const{row:r,colFrom:i,colTo:s}of this.spans)for(let n=i;n<=s;n++){const o=t.getWorldForColumn(n);yield new Nn(t.level,r,t.normalizeCol(n),o)}}forEach(t,r){const{spans:i,lodInfo:s}=this,{level:n}=s;if(i.length!==0)for(const{row:o,colFrom:a,colTo:l}of i)for(let h=a;h<=l;h++)t.call(r,n,o,s.normalizeCol(h),s.getWorldForColumn(h))}};Bu.pool=new Qo(Bu);let vy=class{constructor(t,r,i){this.row=t,this.colFrom=r,this.colTo=i}};const Ne=new Nn("0/0/0/0");let gW=class ZO{static create(t,r){t[1]>r[1]&&([t,r]=[r,t]);const[i,s]=t,[n,o]=r,a=n-i,l=o-s,h=l!==0?a/l:0,p=(Math.ceil(s)-s)*h,f=(Math.floor(s)-s)*h;return new ZO(i,Math.floor(s),Math.ceil(o),h,a<0?p:f,a<0?f:p,a<0?n:i,a<0?i:n)}constructor(t,r,i,s,n,o,a,l){this.x=t,this.ymin=r,this.ymax=i,this.invM=s,this.leftAdjust=n,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const sr=[[0,0],[0,0],[0,0],[0,0]],vW=1e-6;let _W=class{constructor(t,r=null,i=t.lods[0].level,s=t.lods[t.lods.length-1].level){this.tileInfo=t,this.fullExtent=r,this.scales=[],this._infoByScale={},this._infoByLevel={};const n=t.lods.filter(a=>a.level>=i&&a.level<=s);this.minScale=n[0].scale,this.maxScale=n[n.length-1].scale;const o=this._lodInfos=n.map(a=>yW.create(t,a,r));n.forEach((a,l)=>{this._infoByLevel[a.level]=o[l],this._infoByScale[a.scale]=o[l],this.scales[l]=a.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,r,i=!1){Ne.set(r);const s=this._infoByLevel[Ne.level];return s?s.getTileBounds(t,Ne,i):t}getTileCoords(t,r,i=!1){Ne.set(r);const s=this._infoByLevel[Ne.level];return s?s.getTileCoords(t,Ne,i):t}getTileCoverage(t,r=192,i=!0,s="closest"){if(!i&&(t.scale>this.minScale||t.scale<this.maxScale))return null;const n=s==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),o=Bu.pool.acquire(n),a=this._wrap;let l,h,p,f=1/0,m=-1/0;const y=o.spans;sr[0][0]=sr[0][1]=sr[1][1]=sr[3][0]=-r,sr[1][0]=sr[2][0]=t.size[0]+r,sr[2][1]=sr[3][1]=t.size[1]+r;for(const S of sr)t.toMap(S,S),S[0]=n.getColumnForX(S[0]),S[1]=n.getRowForY(S[1]);const v=[];let _=3;for(let S=0;S<4;S++){if(sr[S][1]===sr[_][1]){_=S;continue}const E=gW.create(sr[S],sr[_]);f=Math.min(E.ymin,f),m=Math.max(E.ymax,m),v[E.ymin]===void 0&&(v[E.ymin]=[]),v[E.ymin].push(E),_=S}if(f==null||m==null||m-f>100)return null;let w=[];for(l=f;l<m;){v[l]!=null&&(w=w.concat(v[l])),h=1/0,p=-1/0;for(let S=w.length-1;S>=0;S--){const E=w[S];h=Math.min(h,E.getLeftCol()),p=Math.max(p,E.getRightCol())}if(h=Math.floor(h),p=Math.floor(p),l>=n.first[1]&&l<=n.last[1])if(a)if(n.size[0]<n.worldSize[0]){const S=Math.floor(p/n.worldSize[0]);for(let E=Math.floor(h/n.worldSize[0]);E<=S;E++)y.push(new vy(l,Math.max(n.getFirstColumnForWorld(E),h),Math.min(n.getLastColumnForWorld(E),p)))}else y.push(new vy(l,h,p));else h>n.last[0]||p<n.first[0]||(h=Math.max(h,n.first[0]),p=Math.min(p,n.last[0]),y.push(new vy(l,h,p)));l+=1;for(let S=w.length-1;S>=0;S--){const E=w[S];E.ymax>=l?E.incrRow():w.splice(S,1)}}return o}getTileParentId(t){Ne.set(t);const r=this._infoByLevel[Ne.level],i=this._lodInfos.indexOf(r)-1;return i<0?null:(this._getTileIdAtLOD(Ne,this._lodInfos[i],Ne),Ne.id)}getTileResolution(t){const r=this._infoByLevel[typeof t=="object"?t.level:t];return r?r.resolution:-1}getTileScale(t){const r=this._infoByLevel[t.level];return r?r.scale:-1}intersects(t,r){Ne.set(r);const i=this._infoByLevel[Ne.level],s=t.lodInfo;if(s.resolution>i.resolution){this._getTileIdAtLOD(Ne,s,Ne);const o=s.denormalizeCol(Ne.col,Ne.world);for(const a of t.spans)if(a.row===Ne.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(s.resolution<i.resolution){const[o,a,l,h]=t.spans.reduce((_,w)=>(_[0]=Math.min(_[0],w.row),_[1]=Math.max(_[1],w.row),_[2]=Math.min(_[2],w.colFrom),_[3]=Math.max(_[3],w.colTo),_),[1/0,-1/0,1/0,-1/0]),p=i.denormalizeCol(Ne.col,Ne.world),f=s.getColumnForX(i.getXForColumn(p)),m=s.getRowForY(i.getYForRow(Ne.row)),y=s.getColumnForX(i.getXForColumn(p+1))-1,v=s.getRowForY(i.getYForRow(Ne.row+1))-1;return!(f>h||y<l||m>a||v<o)}const n=s.denormalizeCol(Ne.col,Ne.world);return t.spans.some(o=>o.row===Ne.row&&o.colFrom<=n&&o.colTo>=n)}normalizeBounds(t,r,i){if(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],this._wrap){const s=zt(this.tileInfo.spatialReference),n=-i*(s.valid[1]-s.valid[0]);t[0]+=n,t[2]+=n}return t}getSmallestInfoForScale(t){const r=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>r[0])return this._infoByScale[r[0]];for(let i=1;i<r.length-1;i++)if(t>r[i]+vW)return this._infoByScale[r[i-1]];return this._infoByScale[r[r.length-1]]}getClosestInfoForScale(t){const r=this.scales;return this._infoByScale[t]||(t=r.reduce((i,s)=>Math.abs(s-t)<Math.abs(i-t)?s:i,r[0])),this._infoByScale[t]}scaleToLevel(t){const r=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let i=r.length-1;i>=0;i--)if(t<r[i])return i===r.length-1?this._infoByScale[r[r.length-1]].level:this._infoByScale[r[i]].level+(r[i]-t)/(r[i]-r[i+1]);return this._infoByScale[r[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}zoomToScale(t){return this.tileInfo.zoomToScale(t)}_getTileIdAtLOD(t,r,i){const s=this._infoByLevel[i.level];return t.set(i),r.resolution<s.resolution?null:(r.resolution===s.resolution||(t.level=r.level,t.col=Math.floor(i.col*s.resolution/r.resolution+.01),t.row=Math.floor(i.row*s.resolution/r.resolution+.01)),t)}},wW=class{constructor(t,r){this.item=t,this.controller=r,this.promise=null}},bW=class{constructor(t){this._schedule=null,this._task=null,this._deferreds=new Qd,this._controllers=new Qd,this._processingItems=new Qd,this._pausedSignal=Cu(!1),this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new Hp(t.peeker),this.process=t.process;const r=t.scheduler;t.priority&&r&&(this._task=r.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule=Ue(this._schedule),this._task=Ue(this._task)}get updating(){var t;return!!((t=this._task)!=null&&t.updating)||this.running}get length(){return this._processingItems.size+this._queue.length}abort(t){const r=this._controllers.get(t);r&&r.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(r=>t.push(r)),this._controllers.clear(),t.forEach(r=>r.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((r,i)=>t(i))}get(t){const r=this._deferreds.get(t);return r?r.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(t,r){const i=this.get(t);if(i)return i;const s=new AbortController;let n=null;r&&(n=Fr(r,()=>s.abort()));const o=()=>{const p=this._processingItems.get(t);p&&p.controller.abort(),a(),h.reject(je())},a=()=>{l.remove(),n!=null&&n.remove(),this._removeItem(t),this._queue.remove(t),this._scheduleNext()},l=rv(s.signal,o),h=jr();return this._deferreds.set(t,h),this._controllers.set(t,s),h.promise.then(a,a),this._queue.push(t),this._scheduleNext(),h.promise}last(){return this._queue.last()}lastPromise(){const t=this.last();return t?this.get(t):null}peek(){return this._queue.peek()}popLast(){var r;const t=this._queue.popLast();return t&&((r=this._deferreds.get(t))==null||r.reject(je()),this._removeItem(t)),t}reset(){const t=Array.from(this._processingItems.values());this._processingItems.clear();for(const r of t)this._queue.push(r.item),r.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_removeItem(t){this._deferreds.delete(t),this._controllers.delete(t),this._processingItems.delete(t)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=Ku(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(r))}_processError(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(r))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(t==null)return;let r;const i=new AbortController,s=new wW(t,i);this._processingItems.set(t,s);try{r=this.process(t,i.signal)}catch(n){this._processError(s,n)}Zi(r)?(s.promise=r,r.then(n=>this._processResult(s,n),n=>this._processError(s,n))):this._processResult(s,r)}get test(){}};const FS=[0,0];let ps=class extends Y{constructor(t){super(t),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:t,process:r,scheduler:i,priority:s}=this;this._queue=new bW({concurrency:t,scheduler:i,priority:s,process:(n,o)=>{const a=this._keyToItem.get(n);return r(a,{signal:o})},peeker:n=>this._peek(n)})}destroy(){this.clear(),this._queue=Ve(this._queue)}get length(){return this._queue?this._queue.length:0}abort(t){const r=typeof t=="string"?t:t.id;this._queue.abort(r)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(t){return typeof t=="string"?this._keyToItem.has(t):this._keyToItem.has(t.id)}pause(){this._queue.pause()}push(t){const r=t.key.id;if(this._queue.has(r))return this._queue.get(r);const i=this._queue.push(r),s=this.tileInfoView.getTileScale(t.key),n=nv(this._tilesByScale,s,()=>new Set),o=()=>{n.delete(t.key),n.size===0&&this._tilesByScale.delete(s),this._keyToItem.delete(r)};return n.add(t.key),this._keyToItem.set(r,t),i.then(o,o),i}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(t){if(!this.state)return t.values().next().value;const r=new Set;for(const o of t)r.add(this._keyToItem.get(o).key);const i=this.state.scale;let s,n=Number.POSITIVE_INFINITY;for(const[o,a]of this._tilesByScale)if(aE(a,l=>r.has(l))){const l=Math.abs(o-i);l<n&&(s=a,n=l)}return this._getClosestTileKey(s,t).id}_getClosestTileKey(t,r){const i=this.tileInfoView,s=this.state.center;let n,o=Number.POSITIVE_INFINITY;for(const a of t)if(r.has(a.id)){i.getTileCoords(FS,a);const l=pm(FS,s);l<o&&(o=l,n=a)}return n}};u([d({constructOnly:!0})],ps.prototype,"concurrency",void 0),u([d({constructOnly:!0})],ps.prototype,"priority",void 0),u([d({constructOnly:!0})],ps.prototype,"process",void 0),u([d({constructOnly:!0})],ps.prototype,"scheduler",void 0),u([d()],ps.prototype,"state",void 0),u([d({constructOnly:!0})],ps.prototype,"tileInfoView",void 0),ps=u([$("esri.views.2d.tiling.TileQueue")],ps);const use=ps;let SW=class{constructor(t,r,i){this.maxSize=t,this._tileInfoView=r,this._removedFunc=i,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const r=this._tilePerId.get(t);if(!r)return;const i=r.key.level,s=this._tileKeysPerLevel[i];US(this._tilePerId,t);for(let n=0;n<s.length;n++)if(s[n].id===t){s.splice(n,1);break}return r.visible=!0,r}add(t){t.visible=!1;const r=t.key,i=r.id;if(this._tilePerId.has(i))return;this._tilePerId.set(i,t);const s=r.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(r)}prune(t,r,i){let s=this._tilePerId.size;if(s<=this.maxSize)return;let n=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&n>=0;)n!==t&&(s=this._pruneAroundCenterTile(s,r,i,n)),n--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,r,i,t))}_pruneAroundCenterTile(t,r,i,s){const n=this._tileKeysPerLevel[s];if(!n||n.length===0)return t;const{size:o,origin:a}=this._tileInfoView.tileInfo,l=i*o[0],h=i*o[1],p=[0,0],f=[0,0];for(n.sort((m,y)=>(p[0]=a.x+l*(m.col+.5),p[1]=a.y-h*(m.row+.5),f[0]=a.x+l*(y.col+.5),f[1]=a.y-h*(y.row+.5),rf(p,r)-rf(f,r)));n.length>0;){const m=n.pop();if(this._removeTile(m.id),--t===this.maxSize)break}return t}_removeTile(t){const r=this._tilePerId.get(t);this._removedFunc&&r&&this._removedFunc(r),US(this._tilePerId,t)}};function US(e,t){e.delete(t)}const Zn=new Nn(0,0,0,0),Ki=new Map,tc=[],_y=[];let dse=class{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,t.resampling!=null&&(this.resampling=t.resampling),t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new SW(t.cacheSize,this.tileInfoView,r=>{this.releaseTile(r)}))}destroy(){this.tileIndex.clear()}update(t){var S,E;const{resampling:r,tileIndex:i}=this,{scale:s,center:n,resolution:o}=t.state,{minScale:a,maxScale:l}=this.tileInfoView,h=!t.stationary&&s>this._previousScale;if(this._previousScale=s,!r&&(s>a||s<l))return this.tiles.length=0,void this.clear();const p=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.resampling,this.coveragePolicy);if(!p)return this.tiles.length=0,void this.clear();const{spans:f,lodInfo:m}=p,{level:y}=m;this.tiles.length=0,i.forEach(x=>x.visible=!0);let v=0,_=0;if(f.length>0)for(const{row:x,colFrom:A,colTo:P}of f)for(let C=A;C<=P;C++){v++;const U=Zn.set(y,x,m.normalizeCol(C),m.getWorldForColumn(C)).id;let F=i.get(U);if(F)F.isReady?(Ki.set(U,F),_++):h||this._addParentTile(U,Ki);else{if((S=this._tileCache)!=null&&S.has(U)){if(F=this._tileCache.pop(U),this.tileIndex.set(U,F),F.isReady){Ki.set(U,F),_++;continue}}else F=this.acquireTile(Zn),this.tileIndex.set(U,F);h||this._addParentTile(U,Ki)}}const w=_===v;for(const[x,A]of i){if(Ki.has(x))continue;Zn.set(x);const P=this.tileInfoView.intersects(p,Zn),C=this.cachePolicy==="purge"?Zn.level!==y:Zn.level>y;!P||!h&&w?!C&&P||tc.push(A):A.isReady?C&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Zn,y)?tc.push(A):_y.push(A):C&&tc.push(A)}for(const x of _y)x.isReady&&Ki.set(x.key.id,x);for(const x of tc)this._tileCache?this._tileCache.add(x):this.releaseTile(x),i.delete(x.key.id);for(const x of Ki.values())this.tiles.push(x);for(const x of i.values())Ki.has(x.key.id)||(x.visible=!1);(E=this._tileCache)==null||E.prune(y,n,o),Bu.pool.release(p),_y.length=0,tc.length=0,Ki.clear()}clear(){const{tileIndex:t}=this;for(const r of t.values())this.releaseTile(r);t.clear()}refresh(t){var r;for(const i of this.tileIndex.values())t(i);(r=this._tileCache)==null||r.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,r){var n;let i=t,s=null;for(;i=this.tileInfoView.getTileParentId(i),i;)if(this.tileIndex.has(i)){if(s=this.tileIndex.get(i),s==null?void 0:s.isReady){r.has(s.key.id)||r.set(s.key.id,s);break}}else if((n=this._tileCache)!=null&&n.has(i)&&(s=this._tileCache.pop(i),this.tileIndex.set(i,s),s==null?void 0:s.isReady)){r.has(s.key.id)||r.set(s.key.id,s);break}}_hasReadyAncestor(t,r){const i=er();this.tileInfoView.getTileBounds(i,t,!0);for(const s of this.tileIndex.values())if(s.isReady&&s.key.level>=r&&s.key.level<t.level){const n=er();if(this.tileInfoView.getTileBounds(n,s.key,!0),N6(n,i))return!0}return!1}},xt=class extends Y{constructor(t){super(t),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([se(()=>{var r;return(r=this.constraints)==null?void 0:r.version},r=>{this.constraints&&r&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},In)])}get center(){if(!this.ready)return this._get("center");const{center:t,spatialReference:r}=this.state.paddedViewState;return this.state.commitProperty("id"),new ae({x:t[0],y:t[1],spatialReference:r})}set center(t){if(t==null)return;if(!this.ready)return void this._set("center",t);let r;try{r=this._project(t,this.state.spatialReference)}catch(s){return void V.getLogger(this).error(new k("mapview:invalid-center","could not project the value in the view's spatial reference",{input:t,error:s}))}const i=this.viewpoint;M1(i,i,r),this.viewpoint=i}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(t){if(t==null)return;if(!t.width||!t.height)return void V.getLogger(this).error(new k("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",t),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let r;try{r=this._project(t,this.state.spatialReference)}catch(s){return void V.getLogger(this).error(new k("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:s}))}const i=this.viewpoint;bB(i,i,r,this.state.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);const r=this.viewpoint;PB(r,r,t),this.viewpoint=r}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",void 0);const i=this._get("extent");return void(i&&(this._set("extent",void 0),this._set("center",i.center)))}const r=this.viewpoint;ES(r,r,t),this.viewpoint=r}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(t){var n;if(t==null)return;if(!this.ready)return this._set("viewpoint",t),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let r,i;try{r=this._project(t,this.state.spatialReference),!t.scale||isNaN(t.scale)?i=new k("mapview:invalid-viewpoint",`invalid scale value of ${t.scale}`):t.targetGeometry==null&&(i=new k("mapview:invalid-viewpoint","geometry not defined"))}catch(o){i=new k("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:o})}if(i)return void V.getLogger(this).error(i);this._scaleBeforeChangingSpatialReference=null;const s=new li({targetGeometry:new ae,scale:0,rotation:0});kt(s,r),(n=this.constraints)==null||n.constrain(s,this.state.paddedViewState.viewpoint),this.state.viewpoint=s,this._set("viewpoint",s)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){var t;return this.ready?((t=this.constraints)==null?void 0:t.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(t){var s,n;if(!(t>=0))return;if(!this.ready){this._set("zoom",t),this._set("scale",void 0);const o=this._get("extent");return void(o&&(this._set("extent",void 0),this._set("center",o.center)))}const r=((s=this.constraints)==null?void 0:s.zoomToScale(t))??0;if(!r)return void this._set("zoom",-1);const i=this.viewpoint;ES(i,i,r),this.viewpoint=i,this._set("zoom",((n=this.constraints)==null?void 0:n.scaleToZoom(this.scale))??-1)}getUserStartupOptions(t){if(!t[0]&&!t[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:r,constraints:i}=this,s=this._get("center"),n=this._get("extent"),o=this._get("scale"),a=this._get("rotation"),l=this._get("viewpoint"),h=this._get("zoom"),p=h!=null&&i!=null&&i.zoomToScale(h)||void 0;let f,m,y;const v=l==null?void 0:l.rotation,_=l==null?void 0:l.targetGeometry;(_==null?void 0:_.type)==="extent"?f=_:(_==null?void 0:_.type)==="point"&&(m=_,y=l==null?void 0:l.scale);const w=n??f;return{center:s??m??(w==null?void 0:w.center),rotation:a??v,scale:(o??p??y??(w&&mm(w,[t[0]-r.left-r.right,t[1]-r.top-r.bottom])))||void 0}}startup(t,r,i,s){var o;const n=t.targetGeometry;try{this._project(t,i)}catch(a){V.getLogger(this).warn(new Os("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:n.toJSON(),spatialReference:i,error:a})),t.targetGeometry=s||new ae({x:0,y:0,spatialReference:i})}(o=this.constraints)==null||o.fit(t),this._set("state",new K_({padding:this.padding,size:r,viewpoint:t})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[t,r],spatialReference:i,rotation:s,scale:n}=this.state.paddedViewState,o=new ae({x:t,y:r,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",s),this._set("scale",n),this._set("state",null)}changeSpatialReference(t){var l;const r=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=r.scale;else{const h=r.viewpoint.clone();h.scale=this._scaleBeforeChangingSpatialReference,r.viewpoint=h}const i=r.clone(),[s,n]=r.center;let o=null;try{o=this._project(new ae({x:s,y:n,spatialReference:r.spatialReference}),t)}catch(h){xv()||V.getLogger(this).warn(new Os("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o==null?void 0:o.toJSON(),spatialReference:t,error:h}))}o||(o=new ae({x:0,y:0,spatialReference:t}));const a=M1(new li({targetGeometry:new ae,scale:0,rotation:0}),r.viewpoint,o);i.viewpoint=a;try{const p=[r.size[0]/2,r.size[1]/2],f=[p[0]+20,p[1]],m=r.toMap([0,0],f),{x:y,y:v}=this._project(new ae({x:m[0],y:m[1],spatialReference:r.spatialReference}),t);m[0]=y,m[1]=v,i.toScreen(m,m);const _=AB(p,m,f),w=Math.hypot(m[0]-p[0],m[1]-p[1])/20;!Number.isFinite(w)||Math.abs(w)>4?(a.rotation=0,a.targetGeometry=new ae({x:0,y:0,spatialReference:t})):(a.scale*=w,a.scale>I("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(_)?_:0)}catch{}(l=this._get("constraints"))==null||l.constrain(a,void 0),this._get("state").viewpoint=a}resize(t,r){var o;if(!this.ready)return;const i=this.state;let s=this.state.paddedViewState.viewpoint;const n=this.state.paddedViewState.size.slice();i.size=[t,r],OB(s,s,n,this.state.paddedViewState.size,this.resizeAlign),s=((o=this.constraints)==null?void 0:o.constrain(s,void 0))??s,this.state.viewpoint=s}toMap(t){if(!this.ready)return null;const r=[0,0],[i,s]=this.state.toMap(r,[t.x,t.y]),n=this.state.spatialReference;return new ae({x:i,y:s,spatialReference:n})}toScreen(t,r){if(!this.ready)return null;const i=this._project(t,this.state.spatialReference),s=[i.x,i.y];return(r==null?void 0:r.pickClosestTarget)===!1||this.state.paddedViewState.wrapMapCoordinate(s,s),this.state.toScreen(s,s),vt(s[0],s[1])}_project(t,r){var n;const i=(t==null?void 0:t.targetGeometry)||t;if(!r)return t;if(!i)return null;if(r.imageCoordinateSystem||(n=i.spatialReference)!=null&&n.imageCoordinateSystem||_t(r,i.spatialReference))return t;const s=ra(i,r);if(!s)throw new k("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:r});return $W(t)?(t.targetGeometry=s,t):s}};function $W(e){return(e==null?void 0:e.declaredClass)==="esri.Viewpoint"}u([d({type:ae})],xt.prototype,"center",null),u([d()],xt.prototype,"constraints",void 0),u([d({type:Be})],xt.prototype,"extent",null),u([d({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],xt.prototype,"padding",null),u([d()],xt.prototype,"ready",void 0),u([d()],xt.prototype,"resizeAlign",void 0),u([d({readOnly:!0})],xt.prototype,"resolution",null),u([d({type:Number})],xt.prototype,"rotation",null),u([d({type:Number})],xt.prototype,"scale",null),u([d({readOnly:!0})],xt.prototype,"state",void 0),u([d({type:li})],xt.prototype,"viewpoint",null),u([d({readOnly:!0})],xt.prototype,"visibleArea",null),u([d()],xt.prototype,"zoom",null),xt=u([$("esri.views.2d.ViewStateManager")],xt);function Q_(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}let jS=class extends ht{constructor(t,r){super(!0),this._view=t,this.registerIncoming("double-click",r,i=>this._handleDoubleClick(i,r))}_handleDoubleClick(t,r){Q_(t.data,"primary")&&(t.stopPropagation(),r?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}},TW=class extends ht{constructor(t,r,i){super(!0),this.view=t,this.pointerType=r,this.registerIncoming("double-tap-drag",i,s=>this._handleDoubleTapDrag(s))}_handleDoubleTapDrag(t){const{data:r}=t,{pointerType:i}=r;if(i!==this.pointerType)return;t.stopPropagation();const{action:s,delta:n}=r,{view:o}=this,{mapViewNavigation:a}=o;switch(s){case"begin":{const{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=n,a.begin();break}case"update":{if(this._previousDelta.y===n.y)return;this._previousDelta=n;const l=1.015**n.y,h=this._startScale*l,p=h/this._currentScale;a.setViewpointImmediate(p),this._currentScale=h;break}case"end":{const{constraints:l}=o,{effectiveLODs:h,snapToZoom:p}=l;if(!p||!h)return void a.end();const f=l.snapScale(this._currentScale),m=(n.y>0?Math.max(f,l.snapToPreviousScale(this._startScale)):Math.min(f,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(m).then(()=>{a.end()});break}}}},gm=class{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){const r=t.data,i=r.pointers.size;switch(r.action){case"start":this._currentCount=i,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){var r,i;this._startEvent=t,(i=(r=this._callbacks).condition)!=null&&i.call(r,this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){var r,i;(i=(r=this._callbacks).condition)!=null&&i.call(r,this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){var r,i;(i=(r=this._callbacks).condition)!=null&&i.call(r,this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}},EW=class extends ht{constructor(t,r,i){super(!0),this.view=t,this.pointerAction=r,this.registerIncoming("drag",i,s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new gm({start:(r,i)=>{this.view.mapViewNavigation.pan.begin(this.view,i.data),i.stopPropagation()},update:(r,i)=>{this.view.mapViewNavigation.pan.update(this.view,i.data),i.stopPropagation()},end:(r,i)=>{this.view.mapViewNavigation.pan.end(this.view,i.data),i.stopPropagation()},condition:(r,i)=>r===1&&Q_(i.data,this.pointerAction)})}_handleDrag(t){const r=this.view.mapViewNavigation;r.pinch.zoomMomentum||r.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},MW=class extends ht{constructor(t,r,i){super(!0),this._view=t,this.pointerAction=r;const s=this._view.mapViewNavigation;this._dragEventSeparator=new gm({start:(n,o)=>{s.rotate.begin(this._view,o.data),o.stopPropagation()},update:(n,o)=>{s.rotate.update(this._view,o.data),o.stopPropagation()},end:(n,o)=>{s.rotate.end(),o.stopPropagation()},condition:(n,o)=>n===1&&Q_(o.data,this.pointerAction)}),this.registerIncoming("drag",i,n=>this._dragEventSeparator.handle(n))}};function YO(e){const t=e[0],r=e[1],i=e[2];return Math.sqrt(t*t+r*r+i*i)}function xW(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function AW(e,t,r,i){return e[0]=t,e[1]=r,e[2]=i,e}function IW(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function JO(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function XO(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function KO(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function OW(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function PW(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function RW(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function CW(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function kW(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function NW(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function LW(e,t=0,r=1){return e[0]=Math.min(Math.max(e[0],t),r),e[1]=Math.min(Math.max(e[1],t),r),e[2]=Math.min(Math.max(e[2],t),r),e}function DW(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function QO(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function FW(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e}function eP(e,t){const r=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(r*r+i*i+s*s)}function tP(e,t){const r=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2];return r*r+i*i+s*s}function rP(e){const t=e[0],r=e[1],i=e[2];return t*t+r*r+i*i}function UW(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function jW(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function k1(e,t){const r=t[0],i=t[1],s=t[2];let n=r*r+i*i+s*s;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n),e}function iP(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function GW(e,t,r){const i=t[0],s=t[1],n=t[2],o=r[0],a=r[1],l=r[2];return e[0]=s*l-n*a,e[1]=n*o-i*l,e[2]=i*a-s*o,e}function VW(e,t,r){const i=t[0],s=t[1],n=t[2],o=r[0],a=r[1],l=r[2],h=s*l-n*a,p=n*o-i*l,f=i*a-s*o,m=Math.sqrt(h*h+p*p+f*f);return e[0]=h/m,e[1]=p/m,e[2]=f/m,e}function zW(e,t,r,i){const s=t[0],n=t[1],o=t[2];return e[0]=s+i*(r[0]-s),e[1]=n+i*(r[1]-n),e[2]=o+i*(r[2]-o),e}function BW(e,t,r,i,s,n){const o=n*n,a=o*(2*n-3)+1,l=o*(n-2)+n,h=o*(n-1),p=o*(3-2*n);return e[0]=t[0]*a+r[0]*l+i[0]*h+s[0]*p,e[1]=t[1]*a+r[1]*l+i[1]*h+s[1]*p,e[2]=t[2]*a+r[2]*l+i[2]*h+s[2]*p,e}function HW(e,t,r,i,s,n){const o=1-n,a=o*o,l=n*n,h=a*o,p=3*n*a,f=3*l*o,m=l*n;return e[0]=t[0]*h+r[0]*p+i[0]*f+s[0]*m,e[1]=t[1]*h+r[1]*p+i[1]*f+s[1]*m,e[2]=t[2]*h+r[2]*p+i[2]*f+s[2]*m,e}function WW(e,t=1){const r=Gv,i=2*r()*Math.PI,s=2*r()-1,n=Math.sqrt(1-s*s)*t;return e[0]=Math.cos(i)*n,e[1]=Math.sin(i)*n,e[2]=s*t,e}function qW(e,t,r){const i=t[0],s=t[1],n=t[2];return e[0]=r[0]*i+r[4]*s+r[8]*n+r[12],e[1]=r[1]*i+r[5]*s+r[9]*n+r[13],e[2]=r[2]*i+r[6]*s+r[10]*n+r[14],e}function ZW(e,t,r){const i=t[0],s=t[1],n=t[2];return e[0]=i*r[0]+s*r[3]+n*r[6],e[1]=i*r[1]+s*r[4]+n*r[7],e[2]=i*r[2]+s*r[5]+n*r[8],e}function YW(e,t,r){const i=r[0],s=r[1],n=r[2],o=r[3],a=t[0],l=t[1],h=t[2],p=s*h-n*l,f=n*a-i*h,m=i*l-s*a,y=s*m-n*f,v=n*p-i*m,_=i*f-s*p,w=2*o;return e[0]=a+p*w+2*y,e[1]=l+f*w+2*v,e[2]=h+m*w+2*_,e}function JW(e,t,r,i){const s=[],n=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],n[0]=s[0],n[1]=s[1]*Math.cos(i)-s[2]*Math.sin(i),n[2]=s[1]*Math.sin(i)+s[2]*Math.cos(i),e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e}function XW(e,t,r,i){const s=[],n=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],n[0]=s[2]*Math.sin(i)+s[0]*Math.cos(i),n[1]=s[1],n[2]=s[2]*Math.cos(i)-s[0]*Math.sin(i),e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e}function KW(e,t,r,i){const s=[],n=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],n[0]=s[0]*Math.cos(i)-s[1]*Math.sin(i),n[1]=s[0]*Math.sin(i)+s[1]*Math.cos(i),n[2]=s[2],e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e}function QW(e,t){k1(GS,e),k1(VS,t);const r=iP(GS,VS);return r>1?0:r<-1?Math.PI:Math.acos(r)}const GS=Fn(),VS=Fn();function eq(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function tq(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function rq(e,t){if(e===t)return!0;const r=e[0],i=e[1],s=e[2],n=t[0],o=t[1],a=t[2],l=ir();return Math.abs(r-n)<=l*Math.max(1,Math.abs(r),Math.abs(n))&&Math.abs(i-o)<=l*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(s-a)<=l*Math.max(1,Math.abs(s),Math.abs(a))}function iq(e,t,r){const i=r[0]-t[0],s=r[1]-t[1],n=r[2]-t[2];let o=i*i+s*s+n*n;return o>0?(o=1/Math.sqrt(o),e[0]=i*o,e[1]=s*o,e[2]=n*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}const sq=JO,nq=XO,oq=KO,aq=eP,lq=tP,cq=YO,uq=rP;Object.freeze(Object.defineProperty({__proto__:null,abs:RW,add:IW,angle:QW,bezier:HW,ceil:OW,clamp:LW,copy:xW,cross:GW,crossAndNormalize:VW,direction:iq,dist:aq,distance:eP,div:oq,divide:KO,dot:iP,equals:rq,exactEquals:tq,floor:PW,hermite:BW,inverse:jW,len:cq,length:YO,lerp:zW,max:NW,min:kW,mul:nq,multiply:XO,negate:UW,normalize:k1,random:WW,rotateX:JW,rotateY:XW,rotateZ:KW,round:DW,scale:QO,scaleAndAdd:FW,set:AW,sign:CW,sqrDist:lq,sqrLen:uq,squaredDistance:tP,squaredLength:rP,str:eq,sub:sq,subtract:JO,transformMat3:ZW,transformMat4:qW,transformQuat:YW},Symbol.toStringTag,{value:"Module"}));function Zr(e){let t=e*e;return e<0&&(t*=-1),t}function hq(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function dq(e,t,r){const i=r,s=e.state,n=e.device,o=t.tiltDirection==="forward-down"?1:-1,a=1;return n.deviceType==="standard"?(i.translation[0]=Zr(s.axes[0]),i.translation[1]=Zr(s.axes[1]),i.translation[2]=Zr(s.buttons[7])-Zr(s.buttons[6]),i.heading=Zr(s.axes[2]),i.tilt=Zr(s.axes[3])):n.deviceType==="spacemouse"&&(i.translation[0]=1.2*Zr(s.axes[0]),i.translation[1]=1.2*Zr(s.axes[1]),i.translation[2]=2*-Zr(s.axes[2]),i.heading=1.2*Zr(s.axes[5]),i.tilt=1.2*Zr(s.axes[3])),i.tilt*=o,QO(i.translation,i.translation,a),i}function pq(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}let fq=class extends ht{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new Ml,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",r=>this._handleGamePadEvent(r)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([se(()=>{var r;return(r=this._view.navigation.gamepad)==null?void 0:r.enabled},r=>{r?(this._handle.resume(),this._frameTask||(this._frameTask=hl({update:i=>this._frameUpdate(i.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},Nt)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const r=this._view.navigation.gamepad.device;r&&t.data.device!==r||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,hq(this._transformation)):(this._currentDevice=t.data.device,dq(t.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(t){const r=this._transformation;if(pq(r))return;const i=this._view.viewpoint.clone(),s=this._view.navigation.gamepad.velocityFactor,n=yq*s*t;ym(i,i,[r.translation[0]*n,-r.translation[1]*n]);const o=1+r.translation[2]*gq*t,a=this._view.constraints.rotationEnabled?-r.heading*mq*t:0,l=this._view.size,h=[l[0]/2,l[1]];EO(i,i,o,a,h,l);const p=this._view.constraints.constrain(i,this._view.viewpoint);this._view.viewpoint=p}};const mq=.06,yq=.7,gq=6e-4;function sP(e){const t=()=>e(document.visibilityState==="visible");return document.addEventListener("visibilitychange",t),_e(()=>document.removeEventListener("visibilitychange",t))}let vq=class extends ht{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=s=>{const n=this._keyMap[s.data.key];if(s.modifiers.has("Meta")||s.modifiers.has("Control"))return void this._stopMovement();if(n==null)return;s.stopPropagation(),s.preventDefault();const o=s.type==="key-down";if(this._pressedKeys[o?"add":"delete"](n),o){if(this._direction===n)return;this._direction=n,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const a=this._timeout===void 0,l=this._pressedKeys.size>0;a||l?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[r.left]:"left",[r.right]:"right",[r.up]:"up",[r.down]:"down"},this.registerIncoming("key-down",i,this._handleKey),this.registerIncoming("key-up",i,this._handleKey),this.registerIncoming("blur",i,this._stopMovement),this._visibilityHandle=sP(s=>s?null:this._stopMovement())}onUninstall(){var t;this._stopMovement(),(t=this._visibilityHandle)==null||t.remove()}get _direction(){return this._currentDirection}set _direction(t){const r=this._currentDirection!=null;if(t!=null){if(r||this.view.mapViewNavigation.begin(),this._currentDirection!==t)switch(t){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else r&&this.view.mapViewNavigation.stop();this._currentDirection=t}_setTimeout(t){clearTimeout(this._timeout),this._timeout=t===void 0?void 0:setTimeout(()=>{this._timeout=void 0,t()},this._stickyKeyDuration)}},_q=class extends ht{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._pressed=!1,this._keyToDirection={[r.clockwiseOption1]:"clockwise",[r.clockwiseOption2]:"clockwise",[r.counterClockwiseOption1]:"counterClockwise",[r.counterClockwiseOption2]:"counterClockwise",[r.resetOption1]:"reset",[r.resetOption2]:"reset"},this.registerIncoming("key-down",i,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",i,s=>this._handleKeyUp(s)),this.registerIncoming("blur",i,()=>this._handleStop()),this._visibilityHandle=sP(s=>s?null:this._handleStop())}onUninstall(){var t;(t=this._visibilityHandle)==null||t.remove(),this._handleStop()}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,r){const i=t.modifiers;if(i.size>0&&!i.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection[t.data.key];if(this._pressed=s!=null,this._pressed){if(t.preventDefault(),r)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}};var qa;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(qa||(qa={}));let wq=class extends ht{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._keysToZoomAction={},this.registerIncoming("key-down",i,s=>this._handleKeyDown(s)),r.zoomIn.forEach(s=>this._keysToZoomAction[s]=qa.IN),r.zoomOut.forEach(s=>this._keysToZoomAction[s]=qa.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const r=t.modifiers;if(r.size>0&&!r.has("Shift"))return;const{key:i}=t.data;if(!(i in this._keysToZoomAction))return;const s=this._keysToZoomAction[i],{mapViewNavigation:n}=this.view;let o=null;switch(s){case qa.IN:o=n.zoomIn();break;case qa.OUT:o=n.zoomOut();break;default:return}n.begin(),o.then(()=>n.end()),t.stopPropagation()}};const bq=.6;let Sq=class extends ht{constructor(t,r){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",r,i=>this._handleMouseWheel(i))}_handleMouseWheel(t){if(!this._view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const r=this._view.mapViewNavigation,{x:i,y:s,deltaY:n}=t.data,o=1/bq**(1/60*n),a=r.zoom(o,[i,s]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,r.end()}))}},$q=class extends ht{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",i=>this._handleDrag(i)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const r=this.view.mapViewNavigation;this._dragEventSeparator=new gm({start:(i,s)=>{r.pinch.begin(this.view,s.data),s.stopPropagation()},update:(i,s)=>{r.pinch.update(this.view,s.data),s.stopPropagation()},end:(i,s)=>{r.pinch.end(this.view),s.stopPropagation()},condition:i=>i>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function zS(e){const t=e.native;return t?{buttons:t.buttons.map(r=>r.pressed?r.value||1:0),axes:t.axes.map(r=>Mq(r,e.axisThreshold))}:{buttons:[],axes:[]}}function Tq(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let r=0;r<e.axes.length;r++)if(e.axes[r]!==t.axes[r])return!1;for(let r=0;r<e.buttons.length;r++)if(e.buttons[r]!==t.buttons[r])return!1;return!0}function Eq(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function Mq(e,t){const r=Math.abs(e);return r<t?0:Math.sign(e)*(r-t)/(1-t)}let xq=class{constructor(t,r){this._element=t,this._input=r,this._hasEventListeners=!1,this._onConnectGamepad=n=>{this._connectGamepad(n.gamepad)},this._onDisconnectGamepad=n=>{const o=n.gamepad,a=o.index,l=this._inputDevices[a];l&&(this._emitGamepadEvent(o,zS(l),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(l),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const i="getGamepads"in window.navigator,s=window.isSecureContext;this.supported=i&&s,this.supported&&(BS(n=>this._connectGamepad(n)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){const r=new j_(t);r.deviceType!=="unknown"&&(this._inputDevices[t.index]=r,this._input.gamepad.devices.add(r)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=hl({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),r=this._element.contains(document.activeElement),i=this._input.gamepad.enabledFocusMode==="document"&&!t||this._input.gamepad.enabledFocusMode==="view"&&!r;BS(s=>{const n=this._inputDevices[s.index];if(!n)return;const o=this._latestUpdate[s.index],a=zS(n),l=i||Eq(a);o&&(o.timestamp===s.timestamp||!o.active&&l||Tq(o.state,a))||this._emitGamepadEvent(s,a,!l)})}_emitGamepadEvent(t,r,i){const s=this._latestUpdate[t.index],n=s&&s.active;if(!n&&!i)return;const o=!n&&i?"start":n&&i?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:r,active:i},this._callback&&this._callback({device:this._inputDevices[t.index],state:r,action:o})}};function Aq(e){if(!e||!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}function BS(e){for(const t of navigator.getGamepads())Aq(t)&&e(t)}const HS=I("edge"),Iq=I("chrome"),Oq=I("ff"),Pq=I("safari"),WS="esri-view-surface",fa={touchNone:`${WS}--touch-none`,touchPan:`${WS}--touch-pan`};let nP=class oP{constructor(t,r){this._input=r,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new xq(t,this._input),this._gamepadSource.onEvent=i=>this._callback("gamepad",i)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(t=>{this._releasePointerCaptureSafe(t)}),this._gamepadSource=Ve(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const r in this._active)if(!t||!t.has(r)){const i=this._active[r];this._element.removeEventListener(wy[r],i),delete this._active[r]}t&&t.forEach(r=>{if(!this._active[r]&&wy[r]){const i=(this._eventHandlers[r]||this._handleDefault).bind(this,r);this._element.addEventListener(wy[r],i),this._active[r]=i}}),this._gamepadSource.hasEventListeners=(t==null?void 0:t.has("gamepad"))??!1}setPointerCapture(t,r){r?this._setPointerCatpureSafe(t.pointerId):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?fa.touchNone:fa.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?fa.touchPan:fa.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(fa.touchNone),this._element.classList.remove(fa.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(t){try{this._element.setPointerCapture(t),this._activePointerCaptures.add(t)}catch{}}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,r){const i=GI(this._element,t);return oP.test.disableSubpixelCoordinates&&(i.x=Math.round(i.x),i.y=Math.round(i.y)),r.x=i.x,r.y=i.y,r}_handleKey(t,r){const{key:i}=r;i&&t==="key-up"&&this._keyDownState.delete(i);const s={native:r,key:i,repeat:!!i&&this._keyDownState.has(i)};i&&t==="key-down"&&this._keyDownState.add(s.key),this._callback(t,s)}_handlePointer(t,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});this._callback(t,i)}_handlePointerPreventDefault(t,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});r.preventDefault(),this._callback(t,i)}_getDeltaFromTrackpadOrMouseWheel(t){return t.shiftKey&&I("mac")&&t.deltaY===0?t.deltaX:t.deltaY}_handleMouseWheel(t,r){let i=this._getDeltaFromTrackpadOrMouseWheel(r);switch(r.deltaMode){case 0:HS&&(i=i/document.documentElement.clientHeight*600);break;case 1:i*=30;break;case 2:i*=900}HS?i*=.7:Iq||Pq?i*=.6:Oq&&(i*=1.375);const s=100,n=Math.abs(i);n>s&&(i=i/n*200/(1+Math.exp(-.02*(n-s))));const o=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,deltaY:i});this._callback(t,o)}_handlePointerCaptureLost(t,r){this._activePointerCaptures.delete(r.pointerId),this._handleDefault(t,r)}_handleDefault(t,r){const i={native:r};r.preventDefault(),this._callback(t,i)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}};nP.test={disableSubpixelCoordinates:!1};const wy={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let Rq=class extends ht{constructor(){super(!0),this.registerIncoming("context-menu",t=>t.data.native.preventDefault())}};const Tt={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};function of(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function Cq(e,t){const r=t.x-e.x,i=t.y-e.y;return Math.sqrt(r*r+i*i)}function kq(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:vt()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[x,A]=e,[P,C]=[A.x-x.x,A.y-x.y];return t.radius=Math.sqrt(P*P+C*C)/2,t.center.x=(x.x+A.x)/2,t.center.y=(x.y+A.y)/2,t}let r=0,i=0;for(let x=0;x<e.length;x++)r+=e[x].x,i+=e[x].y;r/=e.length,i/=e.length;const s=e.map(x=>x.x-r),n=e.map(x=>x.y-i);let o=0,a=0,l=0,h=0,p=0,f=0,m=0;for(let x=0;x<s.length;x++){const A=s[x],P=n[x],C=A*A,U=P*P;o+=C,a+=U,l+=A*P,h+=C*A,p+=U*P,f+=A*U,m+=P*C}const y=.5*(h+f),v=.5*(p+m),_=o*a-l*l,w=(y*a-v*l)/_,S=(o*v-l*y)/_,E=vt(w+r,S+i);return{radius:Math.sqrt(w*w+S*S+(o+a)/e.length),center:E}}function Go(e){const{native:t}=e,{pointerId:r,button:i,pointerType:s}=t;return s==="mouse"?`${r}:${i}`:`${s}`}let Nq=class extends ht{constructor(t=Tt.maximumDoubleClickDelay,r=Tt.maximumDoubleClickDistance,i=Tt.maximumDoubleTouchDelay,s=Tt.maximumDoubleTouchDistance,n=xl){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=s,this._clock=n,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=vt(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new gm({start:(o,a)=>this._dragStart(o,a),update:(o,a)=>this._dragUpdate(a),end:(o,a)=>this._dragEnd(a)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=Ue(t.doubleTapTimeout)})}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(t){const r=this._pointerState.get(t);r&&(r.doubleTapTimeout=Ue(r.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_dragStart(t,r){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:i,modifiers:s}=r,{center:n}=i;this._dragStartCenter=n;const o=by("begin",vt(0,0),i);this._doubleTapDrag.emit(o,void 0,s),r.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=t,{center:s}=r,n=by("update",vt(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),r);this._doubleTapDrag.emit(n,void 0,i),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=t,{center:s}=r,n=by("end",vt(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),r);this._doubleTapDrag.emit(n,void 0,i),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:r}=t,i=Go(r),s=this._pointerState.get(i),{pointerType:n}=r.native;if(s){const o=n==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(i),of(s.event.data,r)>o?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:r}=t,{pointerType:i}=r.native,s=Go(r),n=i==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(s),n);this._pointerState.set(s,{event:t,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function by(e,t,r){const{button:i,buttons:s,pointer:n,pointers:o,pointerType:a,timestamp:l}=r;return{action:e,delta:t,button:i,buttons:s,pointer:n,pointers:o,pointerType:a,timestamp:l}}let Lq=class extends ht{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,r,i,s){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:r.buttons,timestamp:s,pointers:Dq(this._activePointerMap),pointer:r,angle:i.angle,radius:i.radius,center:i.center}}_addPointer(t){const r=t.native.pointerId,i=Kh(this._activePointerMap).angle,s={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(r,s);const n=np(s,aP(this._activePointerMap));s.initialAngle=n,s.lastAngle=n,this._updatePointerAngles(i)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const r=t.native.pointerId,i=this._activePointerMap.get(r);i?i.event=t:this._addPointer(t)}_removePointer(t){const r=Kh(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(r)}_updatePointerAngles(t){const r=Kh(this._activePointerMap);this._activePointerMap.forEach(i=>{i.initialAngle=np(i,r)-t,i.lastAngle=np(i,r)-t})}_emitEvent(t,r,i){const s=Kh(this._activePointerMap);this._drag.emit(this._createPayload(t,r,s,i),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){const r=t.data.native.pointerId,i=t.timestamp;this._activePointerMap.get(r)&&(this._activePointerMap.size===1?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,i),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(r)):(this._removePointer(r),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const r=t.data,i=r.currentEvent,s=t.timestamp;switch(r.action){case"start":case"update":this._isDragging?this._activePointerMap.has(i.native.pointerId)?(this._updatePointer(i),!this._isCurrentDragSuppressed&&this._emitEvent("update",i,s)):(this._addPointer(i),this._emitEvent("added",i,s),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(i),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",i,s))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function aP(e){const t=[];return e.forEach(r=>{t.push(vt(r.event.x,r.event.y))}),kq(t)}function Kh(e){const t=aP(e);let r=0;return e.forEach(i=>{let s=np(i,t),n=s-i.lastAngle;for(;n>Math.PI;)n-=2*Math.PI;for(;n<-Math.PI;)n+=2*Math.PI;s=i.lastAngle+n,i.lastAngle=s;const o=s-i.initialAngle;r+=o}),r/=e.size||1,{angle:r,radius:t.radius,center:t.center}}function Dq(e){const t=new Map;return e.forEach((r,i)=>t.set(i,r.event)),t}function np(e,t){const r=e.event,i=r.x-t.center.x,s=r.y-t.center.y;return Math.atan2(s,i)}var qS;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(qS||(qS={}));let Fq=class extends ht{constructor(t=Tt.maximumDoubleClickDelay,r=Tt.maximumDoubleClickDistance,i=Tt.maximumDoubleTouchDelay,s=Tt.maximumDoubleTouchDistance,n=xl){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=s,this._clock=n,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const r=t.data,i=Go(r);if(!this._pointerState.has(i)){const s={downButton:r.native.button,x:r.x,y:r.y,immediateDoubleClick:null};this._pointerState.set(i,s),this.startCapturingPointer(r.native)}}_handlePointerUp(t){const r=t.data,i=Go(r),s=this._pointerState.get(i);if(s&&s.downButton===r.native.button){const n=s.immediateDoubleClick,o=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;n?(n.timeoutHandle.remove(),of(n,t.data)>o?this._startImmediateDoubleClick(t,s):(this._immediateDoubleClick.emit(t.data,void 0,n.modifiers),this._removeState(r))):of(s,t.data)>o?this._removeState(r):this._startImmediateDoubleClick(t,s)}}_startImmediateDoubleClick(t,r){const i=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;r.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),i)}}_removeState(t){const r=Go(t);this._pointerState.delete(r),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}},Uq=class extends ht{constructor(t=Tt.maximumClickDelay,r=Tt.movementUntilMouseDrag,i=Tt.movementUntilPenDrag,s=Tt.movementUntilTouchDrag,n=Tt.holdDelay,o=xl){super(!1),this._maximumClickDelay=t,this._movementUntilMouseDrag=r,this._movementUntilPenDrag=i,this._movementUntilTouchDrag=s,this._holdDelay=n,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",a=>this._handlePointerDown(a)),this.registerIncoming("pointer-up",a=>this._handlePointerLoss(a,"pointer-up")),this.registerIncoming("pointer-capture-lost",a=>this._handlePointerLoss(a,"pointer-capture-lost")),this.registerIncoming("pointer-cancel",a=>this._handlePointerLoss(a,"pointer-cancel")),this._moveHandle=this.registerIncoming("pointer-move",a=>this._handlePointerMove(a)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout=Ue(t.holdTimeout)}),super.onUninstall()}_handlePointerDown(t){const r=t.data,i=r.native.pointerId;let s=null;this._pointerState.size===0&&(s=this._clock.setTimeout(()=>{const o=this._pointerState.get(i);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,t.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._holdDelay));const n={startEvent:r,previousEvent:r,startTimestamp:t.timestamp,isDragging:!1,downButton:r.native.button,holdTimeout:s,modifiers:new Set};this._pointerState.set(i,n),this.startCapturingPointer(r.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_handlePointerMove(t){const r=t.data,i=r.native.pointerId,s=this._pointerState.get(i);s&&(s.isDragging?this._pointerDrag.emit(Qh("update",s,r),void 0,s.modifiers):Cq(r,s.startEvent)>this._getDragThreshold(r.native.pointerType)&&this._startDragging(t),s.previousEvent=r)}_getDragThreshold(t){switch(t){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){const r=t.data,i=r.native.pointerId;this._pointerState.forEach(s=>{s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging||(s.modifiers=t.modifiers,s.isDragging=!0,i===s.startEvent.native.pointerId?this._pointerDrag.emit(Qh("start",s,r)):this._pointerDrag.emit(Qh("start",s,s.previousEvent),t.timestamp))})}_handlePointerLoss(t,r){const i=t.data,s=i.native.pointerId,n=this._pointerState.get(s);n&&(n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging?this._pointerDrag.emit(Qh("end",n,r==="pointer-up"?i:n.previousEvent),void 0,n.modifiers):r==="pointer-up"&&n.downButton===i.native.button&&t.timestamp-n.startTimestamp<=this._maximumClickDelay&&!n.holdEmitted&&this._immediateClick.emit(i),this._pointerState.delete(s),this.stopCapturingPointer(i.native),this._pointerState.size===0&&this._moveHandle.pause())}};function Qh(e,t,r){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:r}}let jq=class extends ht{constructor(t=Tt.maximumDoubleClickDelay,r=Tt.maximumDoubleClickDistance,i=Tt.maximumDoubleTouchDelay,s=Tt.maximumDoubleTouchDistance,n=xl){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=s,this._clock=n,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",o=>this._handleImmediateClick(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimer=Ue(t.doubleClickTimer))}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(t,r){const i=this._pointerState.get(t);i&&(i.doubleClickTimer=Ue(i.doubleClickTimer),r&&this._click.emit(i.event.data,void 0,i.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const r=this._pointerState.get(t);r.pointerDownCount===1&&this._click.emit(r.event.data,void 0,r.event.modifiers),r.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_handleImmediateClick(t){const r=t.data,{pointerType:i}=r.native,s=Gq(r);if(!this._pointerState.has(s))return void this._startClick(t);const n=this._pointerState.get(s),{data:o,modifiers:a}=n.event,l=i==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;of(o,r)>l?(this._clearDoubleClickTimer(s,!0),this._startClick(t)):(this._clearDoubleClickTimer(s,!1),n.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(t){const r=Go(t.data),i=this._pointerState.get(r);i&&(i.pointerDownCount+=1)}_startClick(t){const{data:r}=t,{native:{pointerType:i}}=r,s=Go(r),n=i==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(s),n);this._pointerState.set(s,{event:t,doubleClickTimer:o,pointerDownCount:1}),this.refreshHasPendingInputs()}};function Gq(e){const{pointerId:t,pointerType:r,button:i}=e.native;return r==="mouse"?`${t}:${i}`:`${r}`}const ed={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let So=class extends Y{initialize(){const t=()=>{var r;return(r=this.view)==null?void 0:r.ready};this.addHandles([zi(()=>!t(),()=>this._disconnect()),zi(t,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerType}get latestPointerLocation(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerLocation}get multiTouchActive(){var t;return((t=this._inputManager)==null?void 0:t.multiTouchActive)??!1}isModifierKeyDown(t){var r;return((r=this._inputManager)==null?void 0:r.isModifierKeyDown(t))??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=Ve(this._inputManager)}_connect(){const t=this.view.surface,r=new nP(t,this.view.input),i=[new Fq,new Uq,new jq,new Lq(this.view.navigation),new Nq],s=new Mr({eventSource:r,recognizers:i});s.installHandlers("prevent-context-menu",[new Rq],bn.INTERNAL),s.installHandlers("navigation",[new $q(this.view),new fq(this.view),new Sq(this.view),new jS(this.view),new jS(this.view,[ed.counter]),new EW(this.view,"primary"),new vq(this.view,ed.pan),new wq(this.view,ed.zoom),new _q(this.view,ed.rotate),new MW(this.view,"secondary"),new TW(this.view,"touch")],bn.INTERNAL),this.view.viewEvents.connect(s),this._source=r,this._inputManager=s,se(()=>{var n,o;return(o=(n=this.view)==null?void 0:n.navigation)==null?void 0:o.browserTouchPanEnabled},n=>{this._source&&(this._source.browserTouchPanningEnabled=!n)},Nt)}get test(){}};u([d()],So.prototype,"view",void 0),u([d()],So.prototype,"latestPointerType",null),u([d()],So.prototype,"latestPointerLocation",null),u([d()],So.prototype,"multiTouchActive",null),So=u([$("esri.views.2d.input.MapViewInputManager")],So);const Vq=So;function zq(e,t,r,i,s){lP(e,t,r||0,i||e.length-1,s||Bq)}function lP(e,t,r,i,s){for(;i>r;){if(i-r>600){var n=i-r+1,o=t-r+1,a=Math.log(n),l=.5*Math.exp(2*a/3),h=.5*Math.sqrt(a*l*(n-l)/n)*(o-n/2<0?-1:1);lP(e,t,Math.max(r,Math.floor(t-o*l/n+h)),Math.min(i,Math.floor(t+(n-o)*l/n+h)),s)}var p=e[t],f=r,m=i;for(rc(e,r,t),s(e[i],p)>0&&rc(e,r,i);f<m;){for(rc(e,f,m),f++,m--;s(e[f],p)<0;)f++;for(;s(e[m],p)>0;)m--}s(e[r],p)===0?rc(e,r,m):rc(e,++m,i),m<=t&&(r=m+1),t<=m&&(i=m-1)}}function rc(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function Bq(e,t){return e<t?-1:e>t?1:0}function af(e,t){if(!(this instanceof af))return new af(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function Hq(e,t,r){if(!r)return t.indexOf(e);for(var i=0;i<t.length;i++)if(r(e,t[i]))return i;return-1}function ma(e,t){Wc(e,0,e.children.length,t,e)}function Wc(e,t,r,i,s){s||(s=La(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var n,o=t;o<r;o++)n=e.children[o],qc(s,e.leaf?i(n):n);return s}function qc(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function ZS(e,t){return e.minX-t.minX}function YS(e,t){return e.minY-t.minY}function Sy(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function td(e){return e.maxX-e.minX+(e.maxY-e.minY)}function Wq(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function qq(e,t){var r=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),s=Math.min(e.maxX,t.maxX),n=Math.min(e.maxY,t.maxY);return Math.max(0,s-r)*Math.max(0,n-i)}function $y(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function rd(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function La(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function JS(e,t,r,i,s){for(var n,o=[t,r];o.length;)(r=o.pop())-(t=o.pop())<=i||(n=t+Math.ceil((r-t)/i/2)*i,zq(e,n,t,r,s),o.push(t,n,n,r))}af.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,r=[],i=this.toBBox;if(!rd(e,t))return r;for(var s,n,o,a,l=[];t;){for(s=0,n=t.children.length;s<n;s++)o=t.children[s],rd(e,a=t.leaf?i(o):o)&&(t.leaf?r.push(o):$y(e,a)?this._all(o,r):l.push(o));t=l.pop()}return r},collides:function(e){var t=this.data,r=this.toBBox;if(!rd(e,t))return!1;for(var i,s,n,o,a=[];t;){for(i=0,s=t.children.length;i<s;i++)if(n=t.children[i],rd(e,o=t.leaf?r(n):n)){if(t.leaf||$y(e,o))return!0;a.push(n)}t=a.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}var i=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var s=this.data;this.data=i,i=s}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(e){return e!=null&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=La([]),this},remove:function(e,t){if(e==null)return this;for(var r,i,s,n,o=this.data,a=this.toBBox(e),l=[],h=[];o||l.length;){if(o||(o=l.pop(),i=l[l.length-1],r=h.pop(),n=!0),o.leaf&&(s=Hq(e,o.children,t))!==-1)return o.children.splice(s,1),l.push(o),this._condense(l),this;n||o.leaf||!$y(o,a)?i?(r++,o=i.children[r],n=!1):o=null:(l.push(o),h.push(r),r=0,i=o,o=o.children[0])}return this},toBBox:function(e){return e},compareMinX:ZS,compareMinY:YS,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},_build:function(e,t,r,i){var s,n=r-t+1,o=this._maxEntries;if(n<=o)return ma(s=La(e.slice(t,r+1)),this.toBBox),s;i||(i=Math.ceil(Math.log(n)/Math.log(o)),o=Math.ceil(n/Math.pow(o,i-1))),(s=La([])).leaf=!1,s.height=i;var a,l,h,p,f=Math.ceil(n/o),m=f*Math.ceil(Math.sqrt(o));for(JS(e,t,r,m,this.compareMinX),a=t;a<=r;a+=m)for(JS(e,a,h=Math.min(a+m-1,r),f,this.compareMinY),l=a;l<=h;l+=f)p=Math.min(l+f-1,h),s.children.push(this._build(e,l,p,i-1));return ma(s,this.toBBox),s},_chooseSubtree:function(e,t,r,i){for(var s,n,o,a,l,h,p,f;i.push(t),!t.leaf&&i.length-1!==r;){for(p=f=1/0,s=0,n=t.children.length;s<n;s++)l=Sy(o=t.children[s]),(h=Wq(e,o)-l)<f?(f=h,p=l<p?l:p,a=o):h===f&&l<p&&(p=l,a=o);t=a||t.children[0]}return t},_insert:function(e,t,r){var i=this.toBBox,s=r?e:i(e),n=[],o=this._chooseSubtree(s,this.data,t,n);for(o.children.push(e),qc(o,s);t>=0&&n[t].children.length>this._maxEntries;)this._split(n,t),t--;this._adjustParentBBoxes(s,n,t)},_split:function(e,t){var r=e[t],i=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,i);var n=this._chooseSplitIndex(r,s,i),o=La(r.children.splice(n,r.children.length-n));o.height=r.height,o.leaf=r.leaf,ma(r,this.toBBox),ma(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)},_splitRoot:function(e,t){this.data=La([e,t]),this.data.height=e.height+1,this.data.leaf=!1,ma(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,r){var i,s,n,o,a,l,h,p;for(l=h=1/0,i=t;i<=r-t;i++)o=qq(s=Wc(e,0,i,this.toBBox),n=Wc(e,i,r,this.toBBox)),a=Sy(s)+Sy(n),o<l?(l=o,p=i,h=a<h?a:h):o===l&&a<h&&(h=a,p=i);return p},_chooseSplitAxis:function(e,t,r){var i=e.leaf?this.compareMinX:ZS,s=e.leaf?this.compareMinY:YS;this._allDistMargin(e,t,r,i)<this._allDistMargin(e,t,r,s)&&e.children.sort(i)},_allDistMargin:function(e,t,r,i){e.children.sort(i);var s,n,o=this.toBBox,a=Wc(e,0,t,o),l=Wc(e,r-t,r,o),h=td(a)+td(l);for(s=t;s<r-t;s++)n=e.children[s],qc(a,e.leaf?o(n):n),h+=td(a);for(s=r-t-1;s>=t;s--)n=e.children[s],qc(l,e.leaf?o(n):n),h+=td(l);return h},_adjustParentBBoxes:function(e,t,r){for(var i=r;i>=0;i--)qc(t[i],e)},_condense:function(e){for(var t,r=e.length-1;r>=0;r--)e[r].children.length===0?r>0?(t=e[r-1].children).splice(t.indexOf(e[r]),1):this.clear():ma(e[r],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};let XS=class cP{constructor(t,r){this.key=new Nn(0,0,0,0),this.bounds=er(),this.objectIds=new Set,this.key.set(r);const i=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=i.resolution,this.level=i.level,this.scale=i.scale,this.minScale=t.zoomToScale(i.level-1),this.maxScale=t.zoomToScale(i.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return Be.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(t){return{$view:{scale:this.scale,timeZone:t}}}createChildTiles(){const t=this.key.getChildKeys(),r=Vt.acquire();for(let i=0;i<t.length;i++)r[i]=new cP(this.tileInfoView,t[i]);return r}getQuantizationParameters(){return DI.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const Yn={added:[],removed:[]},Ty=new Set,Zq=new Nn(0,0,0,0);function Yq(e,t){const r=zt(t);if(!r)return null;const[i,s]=r.valid;return e[2]>s?[er([e[0],e[1],s,e[3]]),er([i,e[1],i+e[2]-s,e[3]])]:e[0]<i?[er([i,e[1],e[2],e[3]]),er([s-(i-e[0]),e[1],s,e[3]])]:null}let Jq=class extends Ln{constructor(t){super(),this._tiles=new Map,this._index=af(9,I("esri-csp-restrictions")?r=>({minX:r.bounds[0],minY:r.bounds[1],maxX:r.bounds[2],maxY:r.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}getIntersectingTiles(t){if(!t||gM(t)===0||vM(t)===0)return[];const r=Yq(t,this.tileScheme.spatialReference);return r!=null?[...new Set([...this.boundsIntersections(r[0]),...this.boundsIntersections(r[1])])]:this.boundsIntersections(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const r={added:[],removed:[]};for(const i of t.added)if(!this.has(i)){const s=new XS(this.tileScheme,i);this._tiles.set(i,s),this._index.insert(s),r.added.push(s)}for(const i of t.removed)if(this.has(i)){const s=this.get(i);this._tiles.delete(i),this._index.remove(s),r.removed.push(s)}this.tiles.length=0,this._tiles.forEach(i=>this.tiles.push(i)),(r.added.length||r.removed.length)&&this.emit("update",r)}setViewState(t){const r=this.tileScheme.getTileCoverage(t,0);if(!r)return;const{spans:i,lodInfo:s}=r,{level:n}=s;if(i.length>0)for(const{row:o,colFrom:a,colTo:l}of i)for(let h=a;h<=l;h++){const p=Zq.set(n,o,s.normalizeCol(h),s.getWorldForColumn(h)).id;if(Ty.add(p),!this.has(p)){const f=new XS(this.tileScheme,p);this._tiles.set(p,f),this._index.insert(f),this.tiles.push(f),Yn.added.push(f)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];Ty.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),Yn.removed.push(a))}(Yn.added.length||Yn.removed.length)&&this.emit("update",Yn),Bu.pool.release(r),Ty.clear(),Yn.added.length=0,Yn.removed.length=0}};const Nse=1e-30,KS=512,id=16777216,Lse=8,Dse=29,Fse=24,Use=4,jse=0,Gse=0,Vse=0,zse=1,Bse=2,Hse=3,Wse=4,qse=5,Zse=6,Yse=12,Jse=13,Xse=5,Xq=6,Kse=5,Qse=6;var QS;(function(e){e[e.FilterFlags=0]="FilterFlags",e[e.Animation=1]="Animation",e[e.GPGPU=2]="GPGPU",e[e.VV=3]="VV",e[e.DD0=4]="DD0",e[e.DD1=5]="DD1",e[e.DD2=6]="DD2",e[e.LocalTimeOrigin=7]="LocalTimeOrigin"})(QS||(QS={}));const uP=6,Kq=1<<uP,ene=Kq<<1,tne=1.05,rne=3,ine=1,sne=3,nne=3,one=5,ane=6,lne=1.15,Qq=2,cne=128,eZ=256,une=eZ-2*Qq,hne=2,dne=128,pne=10,fne=1024,mne=128,yne=4,gne=1,vne=1<<20,_ne=.75,wne=10,bne=.75,Sne=256,$ne=32,Tne=512,Ene=0,Mne=1,tZ=1,xne=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],Ane=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ic=256,rZ=new fe("cyan"),iZ=1,sZ=.25;new fe("black");const nZ="default",oZ="temporary",aZ=new fe("yellow");let $o=class extends Y{constructor(t){super(t),this.color=rZ.clone(),this.haloOpacity=iZ,this.fillOpacity=sZ}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity}};u([d({type:fe})],$o.prototype,"color",void 0),u([d({type:fe})],$o.prototype,"haloColor",void 0),u([d()],$o.prototype,"haloOpacity",void 0),u([d()],$o.prototype,"fillOpacity",void 0),$o=u([$("esri.views.support.HighlightOptions")],$o);const lZ=$o;var N1;let Zc=N1=class extends lZ{constructor(e){super(e),this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(e){return super.equals(e)&&this.haloWidth===e.haloWidth&&this.haloBlur===e.haloBlur}get optionsKey(){return`${this.color};${this.haloColor};${this.haloOpacity};${this.fillOpacity};${this.haloWidth};${this.haloBlur}`}clone(){var e;return new N1({color:this.color.clone(),haloColor:(e=this.haloColor)==null?void 0:e.clone(),haloOpacity:this.haloOpacity,fillOpacity:this.fillOpacity,haloWidth:this.haloWidth,haloBlur:this.haloBlur})}};u([d()],Zc.prototype,"haloWidth",void 0),u([d()],Zc.prototype,"haloBlur",void 0),Zc=N1=u([$("esri.views.2d.support.HighlightOptions")],Zc);const Jo=Zc;var e$,t$,r$,i$,L1,s$,n$,ki,D1,yu,lt,lf,kr,Ce,B,Hu,bs,o$,a$,l$;(function(e){e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e[e.COLOR=16384]="COLOR"})(e$||(e$={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(t$||(t$={})),function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"}(r$||(r$={})),function(e){e[e.ADD=32774]="ADD",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX",e[e.SUBTRACT=32778]="SUBTRACT",e[e.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"}(i$||(i$={})),function(e){e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",e[e.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER"}(L1||(L1={})),function(e){e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK"}(s$||(s$={})),function(e){e[e.CW=2304]="CW",e[e.CCW=2305]="CCW"}(n$||(n$={})),function(e){e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.HALF_FLOAT=5131]="HALF_FLOAT"}(ki||(ki={})),function(e){e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS"}(D1||(D1={})),function(e){e[e.ZERO=0]="ZERO",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP"}(yu||(yu={})),function(e){e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(lt||(lt={})),function(e){e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(lf||(lf={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"}(kr||(kr={})),function(e){e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.RED=6403]="RED",e[e.RG=33319]="RG",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER"}(Ce||(Ce={})),function(e){e[e.RGBA4=32854]="RGBA4",e[e.R16F=33325]="R16F",e[e.RG16F=33327]="RG16F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.R32F=33326]="R32F",e[e.RG32F=33328]="RG32F",e[e.RGBA32F=34836]="RGBA32F",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB5_A1=32855]="RGB5_A1",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.RGB16F=34843]="RGB16F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.RGB565=36194]="RGB565",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2=32857]="RGB10_A2",e[e.RGB10_A2UI=36975]="RGB10_A2UI"}(B||(B={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.INT=5124]="INT",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"}(Hu||(Hu={})),function(e){e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"}(bs||(bs={})),function(e){e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_READ=35045]="STATIC_READ",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.STREAM_COPY=35042]="STREAM_COPY"}(o$||(o$={})),function(e){e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER"}(a$||(a$={})),function(e){e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"}(l$||(l$={}));const One=33984;var cf,c$,u$;(function(e){e[e.Texture=0]="Texture",e[e.BufferObject=1]="BufferObject",e[e.VertexArrayObject=2]="VertexArrayObject",e[e.Shader=3]="Shader",e[e.Program=4]="Program",e[e.FramebufferObject=5]="FramebufferObject",e[e.Renderbuffer=6]="Renderbuffer",e[e.TransformFeedback=7]="TransformFeedback",e[e.Sync=8]="Sync",e[e.UNCOUNTED=9]="UNCOUNTED",e[e.LinesOfCode=9]="LinesOfCode",e[e.Uniform=10]="Uniform",e[e.COUNT=11]="COUNT"})(cf||(cf={})),function(e){e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"}(c$||(c$={})),function(e){e[e.NONE=0]="NONE",e[e.BACK=1029]="BACK"}(u$||(u$={}));const Pne=33306;var $t,h$,d$,p$,f$,m$,y$;(function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})($t||($t={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT=5124]="INT",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"}(h$||(h$={})),function(e){e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS"}(d$||(d$={})),function(e){e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED"}(p$||(p$={})),function(e){e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED"}(f$||(f$={})),function(e){e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"}(m$||(m$={})),function(e){e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"}(y$||(y$={}));const cZ=()=>V.getLogger("esri.views.webgl.checkWebGLError");function uZ(e,t){switch(t){case e.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case e.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case e.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case e.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case e.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case e.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const hP=!!I("enable-feature:webgl-debug");function dP(){return hP}function Rne(){return hP}function ya(e){if(dP()){const t=e.getError();if(t){const r=uZ(e,t),i=new Error().stack;cZ().error(new k("webgl-error","WebGL error occurred",{message:r,stack:i}))}}}var F1;(function(e){e[e.Texture=0]="Texture",e[e.RenderBuffer=1]="RenderBuffer"})(F1||(F1={}));function hZ(e){switch(e){case ki.BYTE:case ki.UNSIGNED_BYTE:return 1;case ki.SHORT:case ki.UNSIGNED_SHORT:case ki.HALF_FLOAT:return 2;case ki.FLOAT:case ki.INT:case ki.UNSIGNED_INT:return 4}}function dZ(e){const t=e.gl;switch(t.getError()){case t.NO_ERROR:return null;case t.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case t.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case t.INVALID_OPERATION:return"The specified command is not allowed for the current state";case t.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case t.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case t.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function Cne(e,t,r,i,s=0){var o;const n=e.gl;e.bindBuffer(r);for(const a of i){const l=t.get(a.name);if(l==null){console.warn(`There is no location for vertex attribute '${a.name}' defined.`);continue}const h=s*a.stride;if(a.count<=4)n.vertexAttribPointer(l,a.count,a.type,a.normalized,a.stride,a.offset+h),n.enableVertexAttribArray(l),a.divisor>0&&e.gl.vertexAttribDivisor(l,a.divisor);else if(a.count===9)for(let p=0;p<3;p++)n.vertexAttribPointer(l+p,3,a.type,a.normalized,a.stride,a.offset+12*p+h),n.enableVertexAttribArray(l+p),a.divisor>0&&e.gl.vertexAttribDivisor(l+p,a.divisor);else if(a.count===16)for(let p=0;p<4;p++)n.vertexAttribPointer(l+p,4,a.type,a.normalized,a.stride,a.offset+16*p+h),n.enableVertexAttribArray(l+p),a.divisor>0&&((o=e.gl)==null||o.vertexAttribDivisor(l+p,a.divisor));else console.error("Unsupported vertex attribute element count: "+a.count);if(dP()){const p=dZ(e),f=hZ(a.type),m=a.offset,y=Math.round(f/m)!==f/m?`. Offset not a multiple of stride. DataType requires ${f} bytes, but descriptor has an offset of ${m}`:"";p&&console.error(`Unable to bind vertex attribute "${a.name}" with baseInstanceOffset ${h}${y}:`,p,a)}}}function kne(e,t,r,i){var n,o,a;const s=e.gl;e.bindBuffer(r);for(const l of i){const h=t.get(l.name);if(l.count<=4)s.disableVertexAttribArray(h),l.divisor&&l.divisor>0&&((n=e.gl)==null||n.vertexAttribDivisor(h,0));else if(l.count===9)for(let p=0;p<3;p++)s.disableVertexAttribArray(h+p),l.divisor&&l.divisor>0&&((o=e.gl)==null||o.vertexAttribDivisor(h+p,0));else if(l.count===16)for(let p=0;p<4;p++)s.disableVertexAttribArray(h+p),l.divisor&&l.divisor>0&&((a=e.gl)==null||a.vertexAttribDivisor(h+p,0));else console.error("Unsupported vertex attribute element count: "+l.count)}e.unbindBuffer(L1.ARRAY_BUFFER)}function pZ(e){switch(e){case Ce.ALPHA:case Ce.LUMINANCE:case Ce.RED:case Ce.RED_INTEGER:case B.R8:case B.R8I:case B.R8UI:case B.R8_SNORM:case bs.STENCIL_INDEX8:return 1;case Ce.LUMINANCE_ALPHA:case Ce.RG:case Ce.RG_INTEGER:case B.RGBA4:case B.R16F:case B.R16I:case B.R16UI:case B.RG8:case B.RG8I:case B.RG8UI:case B.RG8_SNORM:case B.RGB565:case B.RGB5_A1:case bs.DEPTH_COMPONENT16:return 2;case Ce.DEPTH_COMPONENT:case Ce.RGB:case Ce.RGB_INTEGER:case B.RGB8:case B.RGB8I:case B.RGB8UI:case B.RGB8_SNORM:case B.SRGB8:case bs.DEPTH_COMPONENT24:return 3;case Ce.DEPTH_STENCIL:case Ce.DEPTH24_STENCIL8:case Ce.RGBA:case Ce.RGBA_INTEGER:case B.RGBA8:case B.R32F:case B.R11F_G11F_B10F:case B.RG16F:case B.R32I:case B.R32UI:case B.RG16I:case B.RG16UI:case B.RGBA8I:case B.RGBA8UI:case B.RGBA8_SNORM:case B.SRGB8_ALPHA8:case B.RGB9_E5:case B.RGB10_A2UI:case B.RGB10_A2:case bs.DEPTH_STENCIL:case bs.DEPTH_COMPONENT32F:case bs.DEPTH24_STENCIL8:return 4;case bs.DEPTH32F_STENCIL8:return 5;case B.RGB16F:case B.RGB16I:case B.RGB16UI:return 6;case B.RG32F:case B.RG32I:case B.RG32UI:case B.RGBA16F:case B.RGBA16I:case B.RGBA16UI:return 8;case B.RGB32F:case B.RGB32I:case B.RGB32UI:return 12;case B.RGBA32F:case B.RGBA32I:case B.RGBA32UI:return 16;case $t.COMPRESSED_RGB_S3TC_DXT1_EXT:case $t.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case $t.COMPRESSED_RGBA_S3TC_DXT3_EXT:case $t.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case $t.COMPRESSED_R11_EAC:case $t.COMPRESSED_SIGNED_R11_EAC:case $t.COMPRESSED_RGB8_ETC2:case $t.COMPRESSED_SRGB8_ETC2:case $t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case $t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case $t.COMPRESSED_RG11_EAC:case $t.COMPRESSED_SIGNED_RG11_EAC:case $t.COMPRESSED_RGBA8_ETC2_EAC:case $t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let pP=class{constructor(t=0,r=t){this.width=t,this.height=r,this.target=kr.TEXTURE_2D,this.pixelFormat=Ce.RGBA,this.dataType=Hu.UNSIGNED_BYTE,this.samplingMode=lt.LINEAR,this.wrapMode=lf.REPEAT,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.depth=1,this.isImmutable=!1}};function fZ(e){return e.width<=0||e.height<=0?0:Math.round(e.width*e.height*(e.hasMipmap?4/3:1)*(e.internalFormat==null?4:pZ(e.internalFormat))*(e.target===kr.TEXTURE_CUBE_MAP?6:1))}let mZ=class fP extends pP{constructor(t,r){switch(super(),this.context=t,Object.assign(this,r),this.internalFormat){case B.R16F:case B.R16I:case B.R16UI:case B.R32F:case B.R32I:case B.R32UI:case B.R8_SNORM:case B.R8:case B.R8I:case B.R8UI:this.pixelFormat=Ce.RED}}static validate(t,r){return new fP(t,r)}},mP=class Or{constructor(t,r=null,i=null){if(this.type=F1.Texture,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._wasImmutablyAllocated=!1,"context"in t)this._descriptor=t,i=r;else{const s=mZ.validate(t,r);if(!s)throw new k("Texture descriptor invalid");this._descriptor=s}this._descriptor.target===kr.TEXTURE_CUBE_MAP?this._setDataCubeMap(i):this.setData(i)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return fZ(this._descriptor)}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty}dispose(){this._glName&&this._descriptor.context.instanceCounter.decrement(cf.Texture,this),this._descriptor.context.gl&&this._glName&&(this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(t,r){const i=this._descriptor;if(i.width!==t||i.height!==r){if(this._wasImmutablyAllocated)throw new k("Immutable textures can't be resized!");i.width=t,i.height=r,this._descriptor.target===kr.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}_setDataCubeMap(t=null){for(let r=kr.TEXTURE_CUBE_MAP_POSITIVE_X;r<=kr.TEXTURE_CUBE_MAP_NEGATIVE_Z;r++)this._setData(t,r)}setData(t){this._setData(t)}_setData(t,r){var h;const i=(h=this._descriptor.context)==null?void 0:h.gl;if(!i)return;ya(i),this._glName||(this._glName=i.createTexture(),this._glName&&this._descriptor.context.instanceCounter.increment(cf.Texture,this));const s=this._descriptor,n=r??s.target,o=sc(n),a=this._descriptor.context.bindTexture(this,Or.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(Or.TEXTURE_UNIT_FOR_UPDATES),sd(s),this._configurePixelStorage(),ya(i);const l=this._deriveInternalFormat();if(_$(t)){let p="width"in t?t.width:t.codedWidth,f="height"in t?t.height:t.codedHeight;const m=1;t instanceof HTMLVideoElement&&(p=t.videoWidth,f=t.videoHeight),s.width&&s.height,o&&s.depth,s.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(n,l,s.hasMipmap,p,f,m),this._texImage(n,0,l,p,f,m,t),ya(i),s.hasMipmap&&(this.generateMipmap(),ya(i)),s.width||(s.width=p),s.height||(s.height=f),o&&!s.depth&&(s.depth=m)}else{const{width:p,height:f,depth:m}=s;if(p==null||f==null)throw new k("Width and height must be specified!");if(o&&m==null)throw new k("Depth must be specified!");if(s.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(n,l,s.hasMipmap,p,f,m),op(t)){const y=t.levels,v=w$(n,p,f,m),_=Math.min(v-1,y.length-1);i.texParameteri(s.target,this._descriptor.context.gl.TEXTURE_MAX_LEVEL,_);const w=l;if(!vZ(w))throw new k("Attempting to use compressed data with an uncompressed format!");this._forEachMipmapLevel((S,E,x,A)=>{const P=y[Math.min(S,y.length-1)];this._compressedTexImage(n,S,w,E,x,A,P)},_)}else this._texImage(n,0,l,p,f,m,t),ya(i),s.hasMipmap&&this.generateMipmap()}g$(i,this._descriptor),v$(i,this._descriptor),yZ(this._descriptor.context,this._descriptor),ya(i),this._descriptor.context.bindTexture(a,Or.TEXTURE_UNIT_FOR_UPDATES)}updateData(t,r,i,s,n,o,a=0){o||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");const l=this._descriptor,h=this._deriveInternalFormat(),{context:p,pixelFormat:f,dataType:m,target:y,isImmutable:v}=l;if(v&&!this._wasImmutablyAllocated)throw new k("Cannot update immutable texture before allocation!");const _=p.bindTexture(this,Or.TEXTURE_UNIT_FOR_UPDATES,!0);(r<0||i<0||r+s>l.width||i+n>l.height)&&console.error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:w}=p;a&&w.pixelStorei(w.UNPACK_SKIP_ROWS,a),_$(o)?w.texSubImage2D(y,t,r,i,s,n,f,m,o):op(o)?w.compressedTexSubImage2D(y,t,r,i,s,n,h,o.levels[t]):w.texSubImage2D(y,t,r,i,s,n,f,m,o),a&&w.pixelStorei(w.UNPACK_SKIP_ROWS,0),p.bindTexture(_,Or.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(t,r,i,s,n,o,a,l){l||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");const h=this._descriptor,p=this._deriveInternalFormat(),{context:f,pixelFormat:m,dataType:y,isImmutable:v,target:_}=h;if(v&&!this._wasImmutablyAllocated)throw new k("Cannot update immutable texture before allocation!");sc(_)||console.warn("Attempting to set 3D texture data on a non-3D texture");const w=f.bindTexture(this,Or.TEXTURE_UNIT_FOR_UPDATES);f.setActiveTexture(Or.TEXTURE_UNIT_FOR_UPDATES),(r<0||i<0||s<0||r+n>h.width||i+o>h.height||s+a>h.depth)&&console.error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:S}=f;if(op(l))l=l.levels[t],S.compressedTexSubImage3D(_,t,r,i,s,n,o,a,p,l);else{const E=l;S.texSubImage3D(_,t,r,i,s,n,o,a,m,y,E)}f.bindTexture(w,Or.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const t=this._descriptor;if(!t.hasMipmap){if(this._wasImmutablyAllocated)throw new k("Cannot add mipmaps to immutable texture after allocation");t.hasMipmap=!0,this._samplingModeDirty=!0,sd(t)}t.samplingMode===lt.LINEAR?(this._samplingModeDirty=!0,t.samplingMode=lt.LINEAR_MIPMAP_NEAREST):t.samplingMode===lt.NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=lt.NEAREST_MIPMAP_NEAREST);const r=this._descriptor.context.bindTexture(this,Or.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(Or.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(t.target),this._descriptor.context.bindTexture(r,Or.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const t=this._descriptor;if(t.hasMipmap){if(this._wasImmutablyAllocated)throw new k("Cannot delete mipmaps to immutable texture after allocation");t.hasMipmap=!1,this._samplingModeDirty=!0,sd(t)}t.samplingMode===lt.LINEAR_MIPMAP_NEAREST?(this._samplingModeDirty=!0,t.samplingMode=lt.LINEAR):t.samplingMode===lt.NEAREST_MIPMAP_NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=lt.NEAREST)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,sd(this._descriptor),this._wrapModeDirty=!0)}applyChanges(){const t=this._descriptor,r=t.context.gl;this._samplingModeDirty&&(g$(r,t),this._samplingModeDirty=!1),this._wrapModeDirty&&(v$(r,t),this._wrapModeDirty=!1)}_deriveInternalFormat(){if(this._descriptor.internalFormat!=null)return this._descriptor.internalFormat===Ce.DEPTH_STENCIL&&(this._descriptor.internalFormat=Ce.DEPTH24_STENCIL8),this._descriptor.internalFormat;switch(this._descriptor.dataType){case Hu.FLOAT:switch(this._descriptor.pixelFormat){case Ce.RGBA:return this._descriptor.internalFormat=B.RGBA32F;case Ce.RGB:return this._descriptor.internalFormat=B.RGB32F;default:throw new k("Unable to derive format")}case Hu.UNSIGNED_BYTE:switch(this._descriptor.pixelFormat){case Ce.RGBA:return this._descriptor.internalFormat=B.RGBA8;case Ce.RGB:return this._descriptor.internalFormat=B.RGB8}}return this._descriptor.internalFormat=this._descriptor.pixelFormat===Ce.DEPTH_STENCIL?Ce.DEPTH24_STENCIL8:this._descriptor.pixelFormat}_configurePixelStorage(){const t=this._descriptor.context.gl,{unpackAlignment:r,flipped:i,preMultiplyAlpha:s}=this._descriptor;t.pixelStorei(t.UNPACK_ALIGNMENT,r),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i?1:0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s?1:0)}_texStorage(t,r,i,s,n,o){const{gl:a}=this._descriptor.context;if(!gZ(r))throw new k("Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const l=i?w$(t,s,n,o):1;if(sc(t)){if(o==null)throw new k("Missing depth dimension for 3D texture upload");a.texStorage3D(t,l,r,s,n,o)}else a.texStorage2D(t,l,r,s,n);this._wasImmutablyAllocated=!0}_texImage(t,r,i,s,n,o,a){const l=this._descriptor.context.gl,h=sc(t),{isImmutable:p,pixelFormat:f,dataType:m}=this._descriptor;if(p){if(a!=null){const y=a;if(h){if(o==null)throw new k("Missing depth dimension for 3D texture upload");l.texSubImage3D(t,r,0,0,0,s,n,o,f,m,y)}else l.texSubImage2D(t,r,0,0,s,n,f,m,y)}}else{const y=a;if(h){if(o==null)throw new k("Missing depth dimension for 3D texture upload");l.texImage3D(t,r,i,s,n,o,0,f,m,y)}else l.texImage2D(t,r,i,s,n,0,f,m,y)}}_compressedTexImage(t,r,i,s,n,o,a){const l=this._descriptor.context.gl,h=sc(t);if(this._descriptor.isImmutable){if(a!=null)if(h){if(o==null)throw new k("Missing depth dimension for 3D texture upload");l.compressedTexSubImage3D(t,r,0,0,0,s,n,o,i,a)}else l.compressedTexSubImage2D(t,r,0,0,s,n,i,a)}else if(h){if(o==null)throw new k("Missing depth dimension for 3D texture upload");l.compressedTexImage3D(t,r,i,s,n,o,0,a)}else l.compressedTexImage2D(t,r,i,s,n,0,a)}_forEachMipmapLevel(t,r=1/0){let{width:i,height:s,depth:n,hasMipmap:o,target:a}=this._descriptor;const l=a===kr.TEXTURE_3D;if(i==null||s==null||l&&n==null)throw new k("Missing texture dimensions for mipmap calculation");for(let h=0;t(h,i,s,n),o&&(i!==1||s!==1||l&&n!==1)&&!(h>=r);++h)i=Math.max(1,i>>1),s=Math.max(1,s>>1),l&&(n=Math.max(1,n>>1))}};function sd(e){(e.width!=null&&e.width<0||e.height!=null&&e.height<0||e.depth!=null&&e.depth<0)&&console.error("Negative dimension parameters are not allowed!")}function g$(e,t){let r=t.samplingMode,i=t.samplingMode;r===lt.LINEAR_MIPMAP_NEAREST||r===lt.LINEAR_MIPMAP_LINEAR?(r=lt.LINEAR,t.hasMipmap||(i=lt.LINEAR)):r!==lt.NEAREST_MIPMAP_NEAREST&&r!==lt.NEAREST_MIPMAP_LINEAR||(r=lt.NEAREST,t.hasMipmap||(i=lt.NEAREST)),e.texParameteri(t.target,e.TEXTURE_MAG_FILTER,r),e.texParameteri(t.target,e.TEXTURE_MIN_FILTER,i)}function v$(e,t){typeof t.wrapMode=="number"?(e.texParameteri(t.target,e.TEXTURE_WRAP_S,t.wrapMode),e.texParameteri(t.target,e.TEXTURE_WRAP_T,t.wrapMode)):(e.texParameteri(t.target,e.TEXTURE_WRAP_S,t.wrapMode.s),e.texParameteri(t.target,e.TEXTURE_WRAP_T,t.wrapMode.t))}function yZ(e,t){const r=e.capabilities.textureFilterAnisotropic;r&&e.gl.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY,t.maxAnisotropy??1)}function gZ(e){return e in B}function vZ(e){return e in $t}function op(e){return e!=null&&"type"in e&&e.type==="compressed"}function _Z(e){return e!=null&&"byteLength"in e}function _$(e){return e!=null&&!op(e)&&!_Z(e)}function sc(e){return e===kr.TEXTURE_3D||e===kr.TEXTURE_2D_ARRAY}function w$(e,t,r,i=1){let s=Math.max(t,r);return e===kr.TEXTURE_3D&&(s=Math.max(s,i)),Math.round(Math.log(s)/Math.LN2)+1}mP.TEXTURE_UNIT_FOR_UPDATES=0;const Ey=()=>V.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function wZ(e,t){t.fillColor[0]=e.color.r/255,t.fillColor[1]=e.color.g/255,t.fillColor[2]=e.color.b/255,t.fillColor[3]=e.color.a,e.haloColor?(t.outlineColor[0]=e.haloColor.r/255,t.outlineColor[1]=e.haloColor.g/255,t.outlineColor[2]=e.haloColor.b/255,t.outlineColor[3]=e.haloColor.a):(t.outlineColor[0]=t.fillColor[0],t.outlineColor[1]=t.fillColor[1],t.outlineColor[2]=t.fillColor[2],t.outlineColor[3]=t.fillColor[3]),t.fillColor[3]*=e.fillOpacity,t.outlineColor[3]*=e.haloOpacity,t.fillColor[0]*=t.fillColor[3],t.fillColor[1]*=t.fillColor[3],t.fillColor[2]*=t.fillColor[3],t.outlineColor[0]*=t.outlineColor[3],t.outlineColor[1]*=t.outlineColor[3],t.outlineColor[2]*=t.outlineColor[3],t.outlineWidth=(1-e.haloBlur)*e.haloWidth,t.outerHaloWidth=e.haloBlur*e.haloWidth/2,t.innerHaloWidth=e.haloBlur*e.haloWidth/2,t.outlinePosition=0}const bZ=[0,0,0,0];let yP=class{constructor(){this.type="single",this._highlightOptions=new Jo,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*ic),this._minMaxDistance=[0,0]}setHighlightOptions(t){this._highlightOptions=t}applyHighlightOptions(t,r){this._updateGradientTexture(t),t.bindTexture(this._shadeTex,Xq),r.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){var t;(t=this._shadeTex)==null||t.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<uP)-1,activeGradient:this}]}_updateGradientTexture(t){const{optionsKey:r}=this._highlightOptions;if(r===this._optionsShadeTexKey)return;this._optionsShadeTexKey=r,wZ(this._highlightOptions,this._convertedHighlightOptions);const i=this._convertedHighlightOptions,s=i.outlinePosition-i.outlineWidth/2-i.outerHaloWidth,n=i.outlinePosition-i.outlineWidth/2,o=i.outlinePosition+i.outlineWidth/2,a=i.outlinePosition+i.outlineWidth/2+i.innerHaloWidth,l=Math.sqrt(Math.PI/2)*tZ,h=Math.abs(s)>l?Math.round(10*(Math.abs(s)-l))/10:0,p=Math.abs(a)>l?Math.round(10*(Math.abs(a)-l))/10:0;let f;h&&!p?Ey().error("The outer rim of the highlight is "+h+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!h&&p?Ey().error("The inner rim of the highlight is "+p+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):h&&p&&Ey().error("The highlight is "+Math.max(h,p)+"px away from the edge of the feature; consider reducing some width values.");const m=[void 0,void 0,void 0,void 0];function y(_,w,S){m[0]=(1-S)*_[0]+S*w[0],m[1]=(1-S)*_[1]+S*w[1],m[2]=(1-S)*_[2]+S*w[2],m[3]=(1-S)*_[3]+S*w[3]}const{_texelData:v}=this;for(let _=0;_<ic;++_)f=s+_/(ic-1)*(a-s),f<s?(m[0]=0,m[1]=0,m[2]=0,m[3]=0):f<n?y(bZ,i.outlineColor,(f-s)/(n-s)):f<o?[m[0],m[1],m[2],m[3]]=i.outlineColor:f<a?y(i.outlineColor,i.fillColor,(f-o)/(a-o)):[m[0],m[1],m[2],m[3]]=i.fillColor,v[4*_]=255*m[0],v[4*_+1]=255*m[1],v[4*_+2]=255*m[2],v[4*_+3]=255*m[3];if(this._minMaxDistance[0]=s,this._minMaxDistance[1]=a,!this._shadeTex){const _=new pP;_.wrapMode=lf.CLAMP_TO_EDGE,_.width=ic,_.height=1,this._shadeTex=new mP(t,_)}this._shadeTex.updateData(0,0,0,ic,1,this._texelData)}},SZ=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(t){for(let r=0;r<t.length;r++)this.gradients[r]||(this.gradients[r]=new yP),this.gradients[r].setHighlightOptions(t[r].options);for(let r=t.length+1;r<this.gradients.length;r++)this.gradients[r].destroy();this.gradients.length=t.length}destroy(){for(const t of this.gradients)t.destroy()}getReasonsWithGradients(){let t=1;const r=[];for(let i=0;i<this.gradients.length;i++){const s=this.gradients[i];r.push({activeReasons:t,activeGradient:s}),t<<=1}return r}};var b$,S$,$$,T$,E$,M$,uf,x$,A$;(function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT",e[e.LABEL=4]="LABEL"})(b$||(b$={})),function(e){e[e.NONE=0]="NONE",e[e.MAP=1]="MAP",e[e.LABEL=2]="LABEL",e[e.LABEL_ALPHA=4]="LABEL_ALPHA",e[e.HITTEST=8]="HITTEST",e[e.HIGHLIGHT=16]="HIGHLIGHT",e[e.CLIP=32]="CLIP",e[e.DEBUG=64]="DEBUG",e[e.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(S$||(S$={})),function(e){e[e.SIZE=0]="SIZE",e[e.COLOR=1]="COLOR",e[e.OPACITY=2]="OPACITY",e[e.ROTATION=3]="ROTATION"}($$||($$={})),function(e){e[e.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",e[e.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",e[e.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",e[e.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(T$||(T$={})),function(e){e[e.SPRITE=0]="SPRITE",e[e.GLYPH=1]="GLYPH"}(E$||(E$={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SIMPLE=1]="SIMPLE",e[e.DOT_DENSITY=2]="DOT_DENSITY",e[e.OUTLINE_FILL=3]="OUTLINE_FILL",e[e.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",e[e.HEATMAP=5]="HEATMAP",e[e.PIE_CHART=6]="PIE_CHART"}(M$||(M$={})),function(e){e[e.All=0]="All",e[e.Highlight=1]="Highlight",e[e.InsideEffect=2]="InsideEffect",e[e.OutsideEffect=3]="OutsideEffect"}(uf||(uf={})),function(e){e[e.BATCHING=0]="BATCHING",e[e.STRICT_ORDER=1]="STRICT_ORDER",e[e.STRICT_MARKERS_AND_TEXT=2]="STRICT_MARKERS_AND_TEXT"}(x$||(x$={})),function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT"}(A$||(A$={}));const gP={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{ref:e=>e.stencilRef,compare:D1.EQUAL,mask:255,op:{fail:yu.KEEP,zFail:yu.KEEP,zPass:yu.REPLACE}}}},$Z={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},TZ={...gP,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function EZ({pixelRatio:e,state:t,displayLevel:r,requiredLevel:i},s){const n=1/2**(r-s.key.level),o=1/2**(i-s.key.level);return{displayMat3:t.displayMat3,displayViewMat3:t.displayViewMat3,displayViewScreenMat3:s.transforms.displayViewScreenMat3,viewMat3:t.viewMat3,tileMat3:s.transforms.tileMat3,displayZoomFactor:n,requiredZoomFactor:o,tileOffset:[s.x,s.y],currentScale:t.scale,currentZoom:r,metersPerSRUnit:Dn(t.spatialReference),rotation:t.rotation,pixelRatio:e}}function vP(e){var t;return((t=e.passOptions)==null?void 0:t.type)==="highlight"}function _P(e){var t;return((t=e.passOptions)==null?void 0:t.type)==="hittest"}function MZ(e){if(!_P(e))return null;const{position:t,distance:r,smallSymbolDistance:i,smallSymbolSizeThreshold:s}=e.passOptions;return{position:t,distance:r,smallSymbolDistance:i,smallSymbolSizeThreshold:s}}function xZ(e){if(!vP(e))return null;const{activeReasons:t,highlightAll:r}=e.passOptions;return{activeReasons:t,highlightAll:r?1:0}}function Fne(e,t,r){const i={};for(const s in r)r[s]instanceof Function?i[s]=r[s](e,t):i[s]=r[s];return i}function Une(e,t){const{attributeView:r,context:i}=e;return{storage:r.getUniforms(i),view:EZ(e,t),hittestRequest:MZ(e),highlight:xZ(e)}}function jne(e){return{inside:e.selection===uf.InsideEffect,outside:e.selection===uf.OutsideEffect}}function AZ(e){return _P(e)?$Z:vP(e)&&e.passOptions.stepType==="clear"?TZ:gP}function Gne(e){const{row:t,col:r}=e.key,i=r*KS,s=t*KS;return{tileOffsetFromLocalOrigin:[i%id,s%id],maxIntsToLocalOrigin:[Math.floor(i/id),Math.floor(s/id)]}}const IZ=new ut({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function Vne(e){return IZ.toJSON(e)}function zne(e){const{bandCount:t,attributeTable:r,colormap:i,pixelType:s}=e.raster.rasterInfo;return t===1&&(r!=null||i!=null||s==="u8"||s==="s8")}function OZ(e,t){return t==null?(e==null||e.destroy(),null):((e==null?void 0:e.type)==="single"&&Array.isArray(t)&&(e.destroy(),e=null),(e==null?void 0:e.type)!=="multi"||Array.isArray(t)||(e.destroy(),e=null),e||(e=Array.isArray(t)?new SZ:new yP),Array.isArray(t)?e.type==="multi"&&e.setHighlightOptions(t):e.type==="single"&&e.setHighlightOptions(t),e)}function Bne(e,t,r,i){const{painter:s,highlightGradient:n}=e,{highlight:o}=s.effects;if(!n)return;const a=e.passOptions,l=n.getReasonsWithGradients();for(let h=0;h<l.length;h++){const p={...e,passOptions:{type:"highlight",activeGradient:i!=null?l[i].activeGradient:l[h].activeGradient,activeReasons:l[h].activeReasons,stepType:"burn",highlightAll:t}};if(o.bind(p),r(p),h<l.length-1){let m=0;for(let y=h+1;y<l.length;y++)m|=l[y].activeReasons;r({...e,passOptions:{type:"highlight",activeGradient:i!=null?l[i].activeGradient:l[h].activeGradient,activeReasons:m,stepType:"clear",highlightAll:t}})}const f={...e,passOptions:{type:"highlight",activeGradient:i!=null?l[i].activeGradient:l[h].activeGradient,activeReasons:l[h].activeReasons,stepType:"draw",highlightAll:t}};s.setPipelineState(AZ(e)),s.updatePipelineState(e.context),o.draw(f),o.unbind()}e.passOptions=a}const nd=e=>parseFloat(e)/100;function PZ(e,t,r){const i=typeof e.left=="string"?nd(e.left)*t:e.left,s=typeof e.right=="string"?nd(e.right)*t:e.right,n=typeof e.top=="string"?nd(e.top)*r:e.top,o=typeof e.bottom=="string"?nd(e.bottom)*r:e.bottom,a=n;return{xmin:i,xmax:Math.max(t-s,i),ymin:a,ymax:Math.max(r-o,n)}}function wP(e,t,r,i){switch(t.type){case"rect":{const{width:s,height:n}=e,{xmin:o,xmax:a,ymin:l,ymax:h}=PZ(t,s,n),{x:p,y:f}=r;return p>o&&p<a&&f>l&&f<h}case"path":return t.path.length===0||!Array.isArray(t.path[0][0])||Rv(t.path,[r.x,r.y]);case"geometry":return t.geometry==null||(t.geometry.type==="polygon"?Pv(t.geometry,i):rh(t.geometry,i))}}var U1;let Za=U1=class extends Y{constructor(...e){super(...e),this.name="default",this.options=new Jo}clone(){return new U1({name:this.name,options:this.options.clone()})}};u([d({type:String})],Za.prototype,"name",void 0),u([d({type:Jo})],Za.prototype,"options",void 0),Za=U1=u([$("esri.views.2d.support.HighlightGroup")],Za);const bP=K.ofType(Za);function SP(){return new bP([{name:nZ,options:new Jo},{name:oZ,options:new Jo({color:aZ})}])}SP().items.map(e=>e.name);function RZ(e){if(!e.highlights)return null;const t=e.highlights.findIndex(r=>r.name==="default");return t===-1?null:e.highlights.items[t].options}function CZ(e,t){if(!e.highlights){if(!t)return;e.highlights=new bP([{name:"default",options:new Jo}])}const r=e.highlights.findIndex(i=>i.name==="default");t?e.highlights.items[r].options=t:e.highlights.removeAt(r)}async function kZ(e,t,r){const i=zI(t)?VI(e,t):t;if(!e.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let s=new Set;const n=new Set;let o=!1,a=null,l=null;r!=null&&r.include?O$(r.include,I$(e,m=>{s.add(m),My(m,y=>n.add(y))},(m,y)=>{n.add(m),s.add(y)},m=>{a||(a=new Set),a.add(m)},m=>s.add(m),()=>o=!0)):(o=!0,s=new Set(e.allLayerViews),s.forEach(m=>{My(m,y=>n.add(y))})),r!=null&&r.exclude&&O$(r.exclude,I$(e,m=>{s.delete(m),My(m,y=>n.delete(y))},m=>n.delete(m),m=>{l||(l=new Set),l.add(m)}));const h=e.toMap(i),p=e.allLayerViews.filter(m=>!m.suspended&&s.has(m)&&m.clips.every(y=>wP(e,y,i,h))).reverse();let f=[...o?e.graphicsView.hitTest(h).map(m=>({type:"graphic",graphic:m,layer:null,mapPoint:h})):[],...await Promise.all(p.map(m=>m.hitTest(h,i)).toArray())].filter(gu).flat().filter(gu);return f=f.filter(m=>{var y;return m.type!=="graphic"||((y=m.layer)==null?void 0:y.type)!=="subtype-group"||n.has(m.graphic.layer)}),a&&(f=f.filter(m=>!("graphic"in m)||!m.graphic||(a==null?void 0:a.has(j1(m.graphic))))),l&&(f=f.filter(m=>!("graphic"in m)||!m.graphic||!(l!=null&&l.has(j1(m.graphic))))),{screenPoint:i,results:f}}function I$(e,t,r,i,s,n){return o=>{if(o instanceof ef){if(o.layer===e)n==null||n();else{const a=e.allLayerViews.find(l=>l.layer===o.layer);a&&(s==null||s(a))}i(j1(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const a=e.allLayerViews.find(l=>l.layer===o.parent);a&&r(o,a)}else{const a=e.allLayerViews.find(l=>l.layer===o);a&&t(a)}}}function O$(e,t){if(e)if(pp(e))for(const r of e)if(pp(r))for(const i of r)t(i);else t(r);else t(e)}function j1(e){var r,i;const t=e.getObjectId();return t?`${((r=e.layer)==null?void 0:r.uid)??((i=e.sourceLayer)==null?void 0:i.uid)??"MapView"}/${t}`:`"MapView/${e.uid}`}function My({layer:e},t){(e==null?void 0:e.type)==="subtype-group"&&e.sublayers.forEach(r=>{t(r)})}let nc=null,hf=!0;function NZ(e,t,r){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(hf)try{return new ImageData(e,t)}catch{hf=!1}return $P(e,t,r)}function Hne(e,t,r,i){if(!t||!r)throw new Error("Cannot construct image data without dimensions");if(hf)try{return new ImageData(e,t,r)}catch{hf=!1}const s=$P(t,r,i);return s.data.set(e,0),s}function LZ(){return nc||(nc=document.createElement("canvas"),nc.width=1,nc.height=1),nc}function $P(e,t,r){return r||(r=LZ()),r.getContext("2d").createImageData(e,t)}async function DZ(e,t){const r=window.URL.createObjectURL(e);try{const{data:i}=await st(r,{...t,responseType:"image"});return i}catch(i){throw vr(i)?i:new k("invalid-image",`Could not fetch requested image at ${r}`)}finally{window.URL.revokeObjectURL(r)}}async function Wne(e,t){const{arrayBuffer:r,mediaType:i}=await FZ(e,t),s=i==="image/png";if(i==="image/gif"){const{isAnimatedGIF:n,parseGif:o}=await j(()=>import("./gif-DCqYl-vf.js"),[],import.meta.url);if(n(r))return o(r,t)}if(s){const{isAnimatedPNG:n,parseApng:o}=await j(()=>import("./apng-DAS7ufoP.js"),__vite__mapDeps([279,3]),import.meta.url);if(n(r))return o(r,t)}return DZ(new Blob([r],{type:i}),t)}async function FZ(e,t){var s;const r=pl(e);if(r!=null&&r.isBase64)return{arrayBuffer:CE(r.data),mediaType:r.mediaType};const i=await st(e,{responseType:"array-buffer",...t});return{arrayBuffer:i.data,mediaType:((s=i.getHeader)==null?void 0:s.call(i,"Content-Type"))??""}}function TP(e,t,r){const{ctx:i,canvas:s}=MP(e,r),n=i.getImageData(0,0,e.width,e.height),o=AP(s,t);return xP(s),{dataUrl:o,data:n}}function EP(e,t){const{ctx:r,canvas:i}=MP(e,t),s=r.getImageData(0,0,e.width,e.height);return xP(i),s}function MP(e,t){const r=UZ();t.premultipliedAlpha&&zZ(e),r.width=e.width,r.height=e.height;const i=r.getContext("2d",{willReadFrequently:!0});return i.putImageData(e,0,0),t.flipY&&VZ(i),{ctx:i,canvas:r}}function xP(e){e.width=0,e.height=0}function UZ(){return xy==null&&(xy=document.createElement("canvas")),xy}let xy=null;function AP(e,t){const r=BZ[t.format],i=t.quality/100;return e.toDataURL(r,i)}function IP(e,t){const r=GZ(e),i=WZ[r];return{format:r,quality:di(t??i,0,100)}}function OP(e,t){return t/Math.max(e[0],e[1])}function jZ(e,t,r,i=0,s=0,n=e.width-i,o=e.height-s,a=!1){const{data:l}=e,{width:h,height:p,data:f}=t,m=n/h,y=o/p,v=Math.ceil(m/2),_=Math.ceil(y/2),w=e.width;for(let S=0;S<p;S++)for(let E=0;E<h;E++){const x=4*(E+(a?p-S-1:S)*h);let A=0,P=0,C=0,U=0,F=0,z=0;const q=(S+.5)*y;for(let ee=Math.floor(S*y);ee<(S+1)*y;ee++){const ce=Math.abs(q-(ee+.5))/_,ye=(E+.5)*m,ne=ce*ce;for(let bt=Math.floor(E*m);bt<(E+1)*m;bt++){const mi=Math.abs(ye-(bt+.5))/v,Dt=Math.sqrt(ne+mi*mi);if(Dt>=1)continue;let Ee=2*Dt*Dt*Dt-3*Dt*Dt+1;const _r=4*(i+bt+(s+ee)*w);z+=Ee*l[_r+3],P+=Ee,!r&&l[_r+3]<255&&(Ee=Ee*l[_r+3]/255),C+=Ee*l[_r],U+=Ee*l[_r+1],F+=Ee*l[_r+2],A+=Ee}}f[x]=C/A,f[x+1]=U/A,f[x+2]=F/A,f[x+3]=z/P}return t}function GZ(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return HZ}}function VZ(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function zZ(e){const t=e.data,r=t.length;for(let i=0;i<r;i+=4){const s=t[i+3];if(s!==255&&s>0){const n=255/s;t[i]=t[i]*n,t[i+1]=t[i+1]*n,t[i+2]=t[i+2]*n}}}const BZ={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},P$=98,HZ="png",WZ={png:100,jpg:P$,jpeg:P$},qne=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:NZ,encode:TP,encodeData:EP,getFormatAndQuality:IP,getMaximumResolutionScale:OP,resampleHermite:jZ,toDataUrl:AP},Symbol.toStringTag,{value:"Module"})),PP={flipY:!0,premultipliedAlpha:!0};async function qZ(e,t){const r=await RP(e,t),{format:i,quality:s}=IP(t==null?void 0:t.format,t==null?void 0:t.quality);return TP(r,{format:i,quality:s},PP)}async function ZZ(e,t){const r=await RP(e,t);return EP(r,PP)}function RP(e,t){const r=XZ(t||{},JZ(e.stage,e.size),e.size,e.padding),i=YZ(t,e.allLayerViews);return e.stage.takeScreenshot(r,i,e.backgroundColor,t==null?void 0:t.rotation)}function YZ(e={},t){if(!e.layers)return;const r=[];return e.layers.forEach(i=>{const s=t.find(n=>n.layer.id===i.id);s!=null&&s.container&&r.push(s.container)}),r}function JZ(e,t){return Math.min(4,OP(t,Math.min(4096,e.context.parameters.maxTextureSize)))}function XZ(e,t,r,i){e.ignorePadding&&(i={left:0,right:0,top:0,bottom:0});let s=null;e.width!=null&&e.height!=null?s=[e.width,e.height]:e.width==null&&e.height!=null?s=[e.height,e.height]:e.width!=null&&e.height==null?s=[e.width,e.width]:e.width==null&&e.height==null&&(s=null);const n=r[0]-(i.left+i.right),o=r[1]-(i.top+i.bottom);let a,l,h=e.area||{x:0,y:0,width:n,height:o};if(s){const p=n/o,f=s[0]/s[1];if(f>p){const m=h.width/f;h={x:h.x,y:Math.round(h.y+(h.height-m)/2),width:h.width,height:Math.round(m)}}else{const m=h.height*f;h={x:Math.round(h.x+(h.width-m)/2),y:h.y,width:Math.round(m),height:h.height}}}else s=[h.width,h.height];return s[0]>h.width?(a=Math.min(s[0]/h.width,t),l=s[0]/h.width/a):(a=1,l=s[0]/h.width),{cropArea:{x:Math.round((h.x+i.left)*a),y:Math.round((h.y+i.top)*a),width:Math.round(h.width*a),height:Math.round(h.height*a)},outputScale:l,resolutionScale:a}}const R$=160;let Yc=class extends Y{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=R$&&this.clear()},R$))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};u([d()],Yc.prototype,"_timer",void 0),u([d()],Yc.prototype,"stationary",null),Yc=u([$("esri.views.2d.support.StationaryManager")],Yc);const KZ=e=>e.includes("Brush");let CP=class{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),KZ(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}},Ay;function QZ(){return Ay||(Ay=rY()),Ay}let eY=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}};function tY(e){if(typeof WebGL2RenderingContext>"u")return null;const t=document.createElement("canvas");if(!t)return null;let r=t.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(r==null&&(r=t.getContext("webgl2"),r!=null&&(e.majorPerformanceCaveat=!0)),r==null)return r;e.available=!0,e.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const i=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return i&&(e.supportsHighPrecisionFragment=i.precision>0),r}function rY(){const e=new eY,t=tY(e);return t==null||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null),e}function iY(e){const t=QZ();return t.available?e==="3d"&&t.majorPerformanceCaveat?new k("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):t.supportsHighPrecisionFragment?t.supportsVertexShaderSamplers?null:new k("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new k("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new k("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function sY(e){return e&&"nodeType"in e}function nY(e){return e&&typeof e.render=="function"}const C$={component:"esri-component"};let To=class extends Y{constructor(){super(...arguments),this.widget=null}destroy(){var t;this.node=null,(t=this.widget)==null||t.destroy()}get id(){var t,r;return this._get("id")??((t=this.widget)==null?void 0:t.id)??((r=this.node)==null?void 0:r.id)}set id(t){this._set("id",t)}set node(t){const r=this._get("node");t!==r&&(t&&t.classList.add(C$.component),r&&r.classList.remove(C$.component),this._set("node",t))}castNode(t){var r;return(r=this.widget)==null||r.destroy(),t?typeof t=="string"||sY(t)?(this._set("widget",null),p_(t)):(nY(t)&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};u([d()],To.prototype,"id",null),u([d()],To.prototype,"node",null),u([ct("node")],To.prototype,"castNode",null),u([d({readOnly:!0})],To.prototype,"widget",void 0),To=u([$("esri.views.ui.Component")],To);const ap=To,kP="calcite-mode-";function oY(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function aY(){return oY().startsWith("dark")}function lY(){return`${kP}${aY()?"dark":"light"}`}function cY(e){uY(e),e.classList.add(lY())}function uY(e){Array.from(e.classList).forEach(t=>{t.startsWith(kP)&&e.classList.remove(t)})}const hY={left:0,top:0,bottom:0,right:0},NP={bottom:30,top:15,right:15,left:15},Qi="esri-ui",Zt={ui:Qi,corner:`${Qi}-corner`,innerContainer:`${Qi}-inner-container`,manualContainer:`${Qi}-manual-container`,cornerContainer:`${Qi}-corner-container`,topLeft:`${Qi}-top-left`,topRight:`${Qi}-top-right`,bottomLeft:`${Qi}-bottom-left`,bottomRight:`${Qi}-bottom-right`};function dY(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function od(e){return e===0?"0":`${e}px`}function Iy(e){const t=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&("component"in e||"index"in e||"position"in e)?e:null}function Oy(e,{top:t,bottom:r,left:i,right:s}){e.style.top=t,e.style.bottom=r,e.style.left=i,e.style.right=s}let Pi=class extends Ln.EventedAccessor{constructor(t){super(t),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=rr(),this.view=null,this._applyViewPadding=()=>{const r=this.container;r&&Oy(r,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const r=this._innerContainer;r&&Oy(r,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([se(()=>{var t;return[(t=this.view)==null?void 0:t.padding,this.container]},this._applyViewPadding,Nt),se(()=>this.padding,this._applyUIPadding,Nt),se(()=>[this.container,this._locale],([t,r])=>{t&&t.setAttribute("lang",r)},Nt),M3(t=>{this._locale=t})])}destroy(){this.container=null;for(const t of this._components)t.destroy();this._components.length=0,this._componentMap.clear()}set container(t){const r=this._get("container");t!==r&&(t&&(t.classList.add(Zt.ui),cY(t),this._attachContainers(t)),r&&(r.classList.remove(Zt.ui),Oy(r,{top:"",bottom:"",left:"",right:""}),r.textContent=""),this._set("container",t))}get height(){var n;const t=((n=this.view)==null?void 0:n.height)??0;if(t===0)return t;const r=this._getViewPadding(),{top:i,bottom:s}=r;return Math.max(t-i-s,0)}get padding(){return this._get("padding")}set padding(t){this._overrideIfSome("padding",t)}castPadding(t){return typeof t=="number"?{bottom:t,top:t,right:t,left:t}:{...NP,...t}}get width(){var n;const t=((n=this.view)==null?void 0:n.width)??0;if(t===0)return t;const r=this._getViewPadding(),{left:i,right:s}=r;return Math.max(t-i-s,0)}add(t,r){let i,s,n;if(Array.isArray(t))return void t.forEach(a=>this.add(a,r));const o=Iy(t);o&&({index:i,position:r,component:t,key:s}=o),r&&typeof r=="object"&&({index:i,key:s,position:r,internal:n}=r),!t||r&&!this._isValidPosition(r)||this._add(t,r,i,s,n)}remove(t,r){var s,n;if(!t)return;if(Array.isArray(t))return t.map(o=>this.remove(o,r));const i=this._find(t);if(i){if(this._componentMap.has(i)&&((s=this._componentMap.get(i))==null?void 0:s.key)!==r)return;const o=this._components.indexOf(i),a=i.node.parentNode;return a==null||a.removeChild(i.node),this._componentMap.delete(i),(n=i.widget)==null||n.removeHandlesReference(this._removeWidgetHandleKey),this._components.splice(o,1)[0]}}empty(t,r={removeInternal:!1}){if(Array.isArray(t)){for(const n of t)this.empty(n,r);return}const i=this._positionNameToContainerLookup[t??"manual"],s=Array.prototype.slice.call(i.children).map(n=>this._findByNode(n)).filter(n=>{var o;return n==null?!1:!(((o=this._componentMap.get(n))==null?void 0:o.internal)??!1)||r.removeInternal});for(const n of s)this.remove(n)}move(t,r){if(Array.isArray(t)&&t.forEach(o=>this.move(o,r)),!t)return;let i;const s=Iy(t)||Iy(r);if(s&&(i=s.index,r=s.position,t=s.component||t),r&&!this._isValidPosition(r))return;const n=this.remove(t);n&&this.add(n,{position:r,index:i})}find(t){if(!t)return null;const r=this._findById(t);return r&&(r.widget||r.node)}getComponents(t,r={includeInternal:!1}){return t?Array.isArray(t)?t.flatMap(i=>this._getComponentsAtPosition(i,r)):this._getComponentsAtPosition(t,r):this._components.filter(i=>{var s;return r.includeInternal||!((s=this._componentMap.get(i))!=null&&s.internal)}).map(({widget:i,node:s})=>i??s)}getPosition(t){for(const r in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[r].contains(t))return r;return null}_add(t,r,i,s,n){t instanceof ap||(t=new ap({node:t}));const{widget:o}=t;o!=null&&o instanceof Y&&o.addHandles(_e(()=>{queueMicrotask(()=>this.remove(t))}),this._removeWidgetHandleKey),this._place({component:t,position:r,index:i}),this._components.push(t),this._componentMap.set(t,{key:s,internal:n})}_find(t){return t?t instanceof ap?this._findByComponent(t):typeof t=="string"?this._findById(t):this._findByNode(t.domNode||t):null}_getViewPadding(){var t;return((t=this.view)==null?void 0:t.padding)??hY}_attachContainers(t){t.appendChild(this._innerContainer),t.appendChild(this._manualContainer)}_initContainers(){const t=document.createElement("div");t.classList.add(Zt.innerContainer,Zt.cornerContainer);const r=document.createElement("div");r.classList.add(Zt.innerContainer,Zt.manualContainer);const i=document.createElement("div");i.classList.add(Zt.topLeft,Zt.corner),t.appendChild(i);const s=document.createElement("div");s.classList.add(Zt.topRight,Zt.corner),t.appendChild(s);const n=document.createElement("div");n.classList.add(Zt.bottomLeft,Zt.corner),t.appendChild(n);const o=document.createElement("div");o.classList.add(Zt.bottomRight,Zt.corner),t.appendChild(o),this._innerContainer=t,this._manualContainer=r;const a=OU();this._cornerNameToContainerLookup={"top-left":i,"top-right":s,"bottom-left":n,"bottom-right":o,"top-leading":a?s:i,"top-trailing":a?i:s,"bottom-leading":a?o:n,"bottom-trailing":a?n:o},this._positionNameToContainerLookup={manual:r,...this._cornerNameToContainerLookup}}_isValidPosition(t){return!!this._positionNameToContainerLookup[t]}_place(t){var h,p;const r=t.position??"manual",{component:i,index:s}=t,n=this._positionNameToContainerLookup[r],o=s!=null&&s>-1;if(dY(i.widget)&&i.widget.startup(),!o)return void n.appendChild(i.node);const a=Array.from(n.children);if(s===0){const{firstChild:f}=n;return void(f?(h=f.parentNode)==null?void 0:h.insertBefore(i.node,f):n.appendChild(i.node))}if(s>=a.length)return void n.appendChild(i.node);const l=a[s];(p=l.parentNode)==null||p.insertBefore(i.node,l)}_toPixelPosition(t){return{top:od(t.top),left:od(t.left),right:od(t.right),bottom:od(t.bottom)}}_findByComponent(t){return this._components.find(r=>r===t)??null}_findById(t){return this._components.find(({id:r})=>r===t)??null}_findByNode(t){return this._components.find(({node:r})=>r===t)??null}_getComponentsAtPosition(t,r){const i=this._positionNameToContainerLookup[t];return Array.prototype.slice.call(i.children).map(s=>this._findByNode(s)).filter(gu).filter(s=>{var n;return r.includeInternal||!((n=this._componentMap.get(s))!=null&&n.internal)}).map(({widget:s,node:n})=>s??n)}};u([d()],Pi.prototype,"_locale",void 0),u([d()],Pi.prototype,"container",null),u([d()],Pi.prototype,"height",null),u([d({value:NP})],Pi.prototype,"padding",null),u([ct("padding")],Pi.prototype,"castPadding",null),u([d()],Pi.prototype,"view",void 0),u([d()],Pi.prototype,"width",null),Pi=u([$("esri.views.ui.UI")],Pi);const pY=Pi,fY="randomUUID"in crypto;function ew(){if(fY)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=r=>e[r].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function Qne(){return`{${ew().toUpperCase()}}`}function eoe(){return`{${ew()}}`}function toe(e){const t=e.toUpperCase();return e[0]!=="{"?`{${t}}`:t}const mY={handleInterceptedEvent:(e,t,r,i)=>(e.scheduleRender(),t.properties[`on${i.type}`].apply(t.properties.bind||r,[i]))},yY={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}},gY=e=>({...yY,...e}),vY=(e,t)=>{const r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r},_Y=(e,t)=>e.find(t),k$=(e,t,r=!1)=>{let i=e;return t.forEach((s,n)=>{const o=i!=null&&i.children?_Y(i.children,a=>a.domNode===s):void 0;r&&!o&&n!==t.length-1||(i=o)}),i},wY=e=>{let t;const r={...mY,...e},i=gY(r),s=i.performanceLogger;let n,o=!0,a=!1;const l=[],h=[],p=(m,y,v)=>{var S;let _;i.eventHandlerInterceptor=(E,x,A,P)=>function(C){let U;s("domEvent",C);const F=vY(C.currentTarget,_.domNode),z=F.some(ee=>{var ce;return customElements.get((ce=ee==null?void 0:ee.tagName)==null?void 0:ce.toLowerCase())});if(C.eventPhase===Event.CAPTURING_PHASE||!z)F.reverse(),U=k$(_.getLastRender(),F);else{const ee=C.composedPath(),ce=ee.slice(ee.indexOf(C.currentTarget),ee.indexOf(_.domNode)).reverse();U=k$(_.getLastRender(),ce,!0)}let q;return U&&(q=r.handleInterceptedEvent(t,U,this,C)),s("domEventProcessed",C),q},(S=r.postProcessProjectionOptions)==null||S.call(r,i);const w=v();_=m(y,w,i),i.eventHandlerInterceptor=void 0,l.push(_),h.push(v),r.afterFirstVNodeRendered&&r.afterFirstVNodeRendered(_,w)};let f=()=>{if(n=void 0,o){o=!1,s("renderStart",void 0);for(let m=0;m<l.length;m++){const y=h[m]();s("rendered",void 0);try{l[m].update(y)}catch(v){console.error(v)}s("patched",void 0)}s("renderDone",void 0),o=!0}};return r.modifyDoRenderImplementation&&(f=r.modifyDoRenderImplementation(f,l,h)),t={renderNow:f,scheduleRender:()=>{n||a||(n=requestAnimationFrame(f))},stop:()=>{n&&(cancelAnimationFrame(n),n=void 0),a=!0},resume:()=>{a=!1,o=!0,t.scheduleRender()},append:(m,y)=>{p(vn.append,m,y)},insertBefore:(m,y)=>{p(vn.insertBefore,m,y)},merge:(m,y)=>{p(vn.merge,m,y)},replace:(m,y)=>{p(vn.replace,m,y)},detach:m=>{for(let y=0;y<h.length;y++)if(h[y]===m)return h.splice(y,1),l.splice(y,1)[0];throw new Error("renderFunction was not found")}},t};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const LP="calcite-mode-auto",DP="calcite-mode-dark",bY="calcite-mode-light",roe={autoMode:LP,darkMode:DP,lightMode:bY,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateIn:"calcite-animate__in",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left",calciteAnimateInScale:"calcite-animate__in-scale"},ioe={filter:250,nextTick:0,resize:150,reposition:100};var Nr={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1},SY=Object.defineProperty,$Y=(e,t)=>{for(var r in t)SY(e,r,{get:t[r],enumerable:!0})},FP=new WeakMap,oa=e=>FP.get(e),TY=(e,t)=>{const r={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return FP.set(e,r)},N$=(e,t)=>t in e,gh=(e,t)=>(0,console.error)(e,t),df=new Map,EY=[],MY="slot-fb{display:contents}slot-fb[hidden]{display:none}",L$="http://www.w3.org/1999/xlink",vh=typeof window<"u"?window:{},ui=vh.document||{head:{}},soe=vh.HTMLElement||class{},wt={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,r,i)=>e.addEventListener(t,r,i),rel:(e,t,r,i)=>e.removeEventListener(t,r,i),ce:(e,t)=>new CustomEvent(e,t)},xY=(()=>{let e=!1;try{ui.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),AY=e=>Promise.resolve(e),IY=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),G1=!1,V1=[],UP=[],jP=(e,t)=>r=>{e.push(r),G1||(G1=!0,t&&wt.$flags$&4?OY(z1):wt.raf(z1))},D$=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(r){gh(r)}e.length=0},z1=()=>{D$(V1),D$(UP),(G1=V1.length>0)&&wt.raf(z1)},OY=e=>AY().then(e),noe=jP(V1,!1),PY=jP(UP,!0),RY=e=>{const t=new URL(e,wt.$resourcesUrl$);return t.origin!==vh.location.origin?t.href:t.pathname},CY=e=>wt.$resourcesUrl$=e,F$={},kY="http://www.w3.org/2000/svg",NY="http://www.w3.org/1999/xhtml",LY=e=>e!=null,tw=e=>(e=typeof e,e==="object"||e==="function");function DY(e){var t,r,i;return(i=(r=(t=e.head)==null?void 0:t.querySelector('meta[name="csp-nonce"]'))==null?void 0:r.getAttribute("content"))!=null?i:void 0}var FY={};$Y(FY,{err:()=>GP,map:()=>UY,ok:()=>B1,unwrap:()=>jY,unwrapErr:()=>GY});var B1=e=>({isOk:!0,isErr:!1,value:e}),GP=e=>({isOk:!1,isErr:!0,value:e});function UY(e,t){if(e.isOk){const r=t(e.value);return r instanceof Promise?r.then(i=>B1(i)):B1(r)}if(e.isErr){const r=e.value;return GP(r)}throw"should never get here"}var jY=e=>{if(e.isOk)return e.value;throw e.value},GY=e=>{if(e.isErr)return e.value;throw e.value},Xo=(e,t="")=>()=>{},VP=(e,t,...r)=>{let i=null,s=null,n=null,o=!1,a=!1;const l=[],h=f=>{for(let m=0;m<f.length;m++)i=f[m],Array.isArray(i)?h(i):i!=null&&typeof i!="boolean"&&((o=typeof e!="function"&&!tw(i))&&(i=String(i)),o&&a?l[l.length-1].$text$+=i:l.push(o?pf(null,i):i),a=o)};if(h(r),t){t.key&&(s=t.key),t.name&&(n=t.name);{const f=t.className||t.class;f&&(t.class=typeof f!="object"?f:Object.keys(f).filter(m=>f[m]).join(" "))}}if(typeof e=="function")return e(t===null?{}:t,l,BY);const p=pf(e,null);return p.$attrs$=t,l.length>0&&(p.$children$=l),p.$key$=s,p.$name$=n,p},pf=(e,t)=>{const r={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return r.$attrs$=null,r.$key$=null,r.$name$=null,r},VY={},zY=e=>e&&e.$tag$===VY,BY={forEach:(e,t)=>e.map(U$).forEach(t),map:(e,t)=>e.map(U$).map(t).map(HY)},U$=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),HY=e=>{if(typeof e.vtag=="function"){const r={...e.vattrs};return e.vkey&&(r.key=e.vkey),e.vname&&(r.name=e.vname),VP(e.vtag,r,...e.vchildren||[])}const t=pf(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},WY=e=>EY.map(t=>t(e)).find(t=>!!t),qY=(e,t)=>e!=null&&!tw(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,ZY=e=>e,ooe=(e,t,r)=>{const i=ZY(e);return{emit:s=>YY(i,t,{bubbles:!!(r&4),composed:!!(r&2),cancelable:!!(r&1),detail:s})}},YY=(e,t,r)=>{const i=wt.ce(t,r);return e.dispatchEvent(i),i},j$=new WeakMap,JY=(e,t,r)=>{let i=df.get(e);IY&&r?(i=i||new CSSStyleSheet,typeof i=="string"?i=t:i.replaceSync(t)):i=t,df.set(e,i)},XY=(e,t,r)=>{var i;const s=zP(t,r),n=df.get(s);if(e=e.nodeType===11?e:ui,n)if(typeof n=="string"){e=e.head||e;let o=j$.get(e),a;if(o||j$.set(e,o=new Set),!o.has(s)){{a=ui.createElement("style"),a.innerHTML=n;const l=(i=wt.$nonce$)!=null?i:DY(ui);l!=null&&a.setAttribute("nonce",l),(!(t.$flags$&1)||t.$flags$&1&&e.nodeName!=="HEAD")&&e.insertBefore(a,e.querySelector("link"))}t.$flags$&4&&(a.innerHTML+=MY),o&&o.add(s)}}else e.adoptedStyleSheets.includes(n)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,n]);return s},KY=e=>{const t=e.$cmpMeta$,r=e.$hostElement$,i=t.$flags$,s=Xo("attachStyles",t.$tagName$),n=XY(r.shadowRoot?r.shadowRoot:r.getRootNode(),t,e.$modeName$);i&10&&i&2&&(r["s-sc"]=n,r.classList.add(n+"-h"),i&2&&r.classList.add(n+"-s")),s()},zP=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),G$=(e,t,r,i,s,n)=>{if(r!==i){let o=N$(e,t),a=t.toLowerCase();if(t==="class"){const l=e.classList,h=V$(r),p=V$(i);l.remove(...h.filter(f=>f&&!p.includes(f))),l.add(...p.filter(f=>f&&!h.includes(f)))}else if(t==="style"){for(const l in r)(!i||i[l]==null)&&(l.includes("-")?e.style.removeProperty(l):e.style[l]="");for(const l in i)(!r||i[l]!==r[l])&&(l.includes("-")?e.style.setProperty(l,i[l]):e.style[l]=i[l])}else if(t!=="key")if(t==="ref")i&&i(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n"){if(t[2]==="-"?t=t.slice(3):N$(vh,a)?t=a.slice(2):t=a[2]+t.slice(3),r||i){const l=t.endsWith(BP);t=t.replace(eJ,""),r&&wt.rel(e,t,r,l),i&&wt.ael(e,t,i,l)}}else{const l=tw(i);if((o||l&&i!==null)&&!s)try{if(e.tagName.includes("-"))e[t]=i;else{const p=i??"";t==="list"?o=!1:(r==null||e[t]!=p)&&(e[t]=p)}}catch{}let h=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(t=a,h=!0),i==null||i===!1?(i!==!1||e.getAttribute(t)==="")&&(h?e.removeAttributeNS(L$,t):e.removeAttribute(t)):(!o||n&4||s)&&!l&&(i=i===!0?"":i,h?e.setAttributeNS(L$,t,i):e.setAttribute(t,i))}}},QY=/\s/,V$=e=>e?e.split(QY):[],BP="Capture",eJ=new RegExp(BP+"$"),HP=(e,t,r)=>{const i=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,s=e&&e.$attrs$||F$,n=t.$attrs$||F$;for(const o of z$(Object.keys(s)))o in n||G$(i,o,s[o],void 0,r,t.$flags$);for(const o of z$(Object.keys(n)))G$(i,o,s[o],n[o],r,t.$flags$)};function z$(e){return e.includes("ref")?[...e.filter(t=>t!=="ref"),"ref"]:e}var Da,H1,El,ff=!1,mf=!1,rw=!1,hr=!1,yf=(e,t,r,i)=>{var s;const n=t.$children$[r];let o=0,a,l,h;if(ff||(rw=!0,n.$tag$==="slot"&&(Da&&i.classList.add(Da+"-s"),n.$flags$|=n.$children$?2:1)),n.$text$!==null)a=n.$elm$=ui.createTextNode(n.$text$);else if(n.$flags$&1)a=n.$elm$=ui.createTextNode("");else{if(hr||(hr=n.$tag$==="svg"),a=n.$elm$=ui.createElementNS(hr?kY:NY,!ff&&Nr.slotRelocation&&n.$flags$&2?"slot-fb":n.$tag$),hr&&n.$tag$==="foreignObject"&&(hr=!1),HP(null,n,hr),!!a.getRootNode().querySelector("body")&&Nr.scoped&&LY(Da)&&a["s-si"]!==Da&&a.classList.add(a["s-si"]=Da),sw(a,i),n.$children$)for(o=0;o<n.$children$.length;++o)l=yf(e,n,o,a),l&&a.appendChild(l);n.$tag$==="svg"?hr=!1:a.tagName==="foreignObject"&&(hr=!0)}return a["s-hn"]=El,n.$flags$&3&&(a["s-sr"]=!0,a["s-cr"]=H1,a["s-sn"]=n.$name$||"",a["s-rf"]=(s=n.$attrs$)==null?void 0:s.ref,h=e&&e.$children$&&e.$children$[r],h&&h.$tag$===n.$tag$&&e.$elm$&&Wu(e.$elm$,!1)),a},Wu=(e,t)=>{wt.$flags$|=1;const r=Array.from(e.childNodes);if(e["s-sr"]&&Nr.experimentalSlotFixes){let i=e;for(;i=i.nextSibling;)i&&i["s-sn"]===e["s-sn"]&&i["s-sh"]===El&&r.push(i)}for(let i=r.length-1;i>=0;i--){const s=r[i];s["s-hn"]!==El&&s["s-ol"]&&(Sn(ZP(s),s,iw(s)),s["s-ol"].remove(),s["s-ol"]=void 0,s["s-sh"]=void 0,rw=!0),t&&Wu(s,t)}wt.$flags$&=-2},WP=(e,t,r,i,s,n)=>{let o=e["s-cr"]&&e["s-cr"].parentNode||e,a;for(o.shadowRoot&&o.tagName===El&&(o=o.shadowRoot);s<=n;++s)i[s]&&(a=yf(null,r,s,e),a&&(i[s].$elm$=a,Sn(o,a,iw(t))))},qP=(e,t,r)=>{for(let i=t;i<=r;++i){const s=e[i];if(s){const n=s.$elm$;XP(s),n&&(mf=!0,n["s-ol"]?n["s-ol"].remove():Wu(n,!0),n.remove())}}},tJ=(e,t,r,i,s=!1)=>{let n=0,o=0,a=0,l=0,h=t.length-1,p=t[0],f=t[h],m=i.length-1,y=i[0],v=i[m],_,w;for(;n<=h&&o<=m;)if(p==null)p=t[++n];else if(f==null)f=t[--h];else if(y==null)y=i[++o];else if(v==null)v=i[--m];else if(ad(p,y,s))Fa(p,y,s),p=t[++n],y=i[++o];else if(ad(f,v,s))Fa(f,v,s),f=t[--h],v=i[--m];else if(ad(p,v,s))(p.$tag$==="slot"||v.$tag$==="slot")&&Wu(p.$elm$.parentNode,!1),Fa(p,v,s),Sn(e,p.$elm$,f.$elm$.nextSibling),p=t[++n],v=i[--m];else if(ad(f,y,s))(p.$tag$==="slot"||v.$tag$==="slot")&&Wu(f.$elm$.parentNode,!1),Fa(f,y,s),Sn(e,f.$elm$,p.$elm$),f=t[--h],y=i[++o];else{for(a=-1,l=n;l<=h;++l)if(t[l]&&t[l].$key$!==null&&t[l].$key$===y.$key$){a=l;break}a>=0?(w=t[a],w.$tag$!==y.$tag$?_=yf(t&&t[o],r,a,e):(Fa(w,y,s),t[a]=void 0,_=w.$elm$),y=i[++o]):(_=yf(t&&t[o],r,o,e),y=i[++o]),_&&Sn(ZP(p.$elm$),_,iw(p.$elm$))}n>h?WP(e,i[m+1]==null?null:i[m+1].$elm$,r,i,o,m):o>m&&qP(t,n,h)},ad=(e,t,r=!1)=>e.$tag$===t.$tag$?e.$tag$==="slot"?"$nodeId$"in e&&r&&e.$elm$.nodeType!==8?!1:e.$name$===t.$name$:r?!0:e.$key$===t.$key$:!1,iw=e=>e&&e["s-ol"]||e,ZP=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,Fa=(e,t,r=!1)=>{const i=t.$elm$=e.$elm$,s=e.$children$,n=t.$children$,o=t.$tag$,a=t.$text$;let l;a===null?(hr=o==="svg"?!0:o==="foreignObject"?!1:hr,o==="slot"&&!ff||HP(e,t,hr),s!==null&&n!==null?tJ(i,s,t,n,r):n!==null?(e.$text$!==null&&(i.textContent=""),WP(i,null,t,n,0,n.length-1)):!r&&Nr.updatable&&s!==null&&qP(s,0,s.length-1),hr&&o==="svg"&&(hr=!1)):(l=i["s-cr"])?l.parentNode.textContent=a:e.$text$!==a&&(i.data=a)},YP=e=>{const t=e.childNodes;for(const r of t)if(r.nodeType===1){if(r["s-sr"]){const i=r["s-sn"];r.hidden=!1;for(const s of t)if(s!==r){if(s["s-hn"]!==r["s-hn"]||i!==""){if(s.nodeType===1&&(i===s.getAttribute("slot")||i===s["s-sn"])||s.nodeType===3&&i===s["s-sn"]){r.hidden=!0;break}}else if(s.nodeType===1||s.nodeType===3&&s.textContent.trim()!==""){r.hidden=!0;break}}}YP(r)}},Ts=[],JP=e=>{let t,r,i;for(const s of e.childNodes){if(s["s-sr"]&&(t=s["s-cr"])&&t.parentNode){r=t.parentNode.childNodes;const n=s["s-sn"];for(i=r.length-1;i>=0;i--)if(t=r[i],!t["s-cn"]&&!t["s-nr"]&&t["s-hn"]!==s["s-hn"]&&!Nr.experimentalSlotFixes)if(B$(t,n)){let o=Ts.find(a=>a.$nodeToRelocate$===t);mf=!0,t["s-sn"]=t["s-sn"]||n,o?(o.$nodeToRelocate$["s-sh"]=s["s-hn"],o.$slotRefNode$=s):(t["s-sh"]=s["s-hn"],Ts.push({$slotRefNode$:s,$nodeToRelocate$:t})),t["s-sr"]&&Ts.map(a=>{B$(a.$nodeToRelocate$,t["s-sn"])&&(o=Ts.find(l=>l.$nodeToRelocate$===t),o&&!a.$slotRefNode$&&(a.$slotRefNode$=o.$slotRefNode$))})}else Ts.some(o=>o.$nodeToRelocate$===t)||Ts.push({$nodeToRelocate$:t})}s.nodeType===1&&JP(s)}},B$=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",XP=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(XP)},Sn=(e,t,r)=>{const i=e==null?void 0:e.insertBefore(t,r);return sw(t,e),i},KP=e=>{const t=[];return e&&t.push(...e["s-scs"]||[],e["s-si"],e["s-sc"],...KP(e.parentElement)),t},sw=(e,t,r=!1)=>{var i;if(e&&t&&e.nodeType===1){const s=new Set(KP(t).filter(Boolean));if(s.size&&((i=e.classList)==null||i.add(...e["s-scs"]=[...s]),e["s-ol"]||r))for(const n of Array.from(e.childNodes))sw(n,e,!0)}},rJ=(e,t,r=!1)=>{var i,s,n,o,a;const l=e.$hostElement$,h=e.$cmpMeta$,p=e.$vnode$||pf(null,null),f=zY(t)?t:VP(null,null,t);if(El=l.tagName,h.$attrsToReflect$&&(f.$attrs$=f.$attrs$||{},h.$attrsToReflect$.map(([m,y])=>f.$attrs$[y]=l[m])),r&&f.$attrs$)for(const m of Object.keys(f.$attrs$))l.hasAttribute(m)&&!["key","ref","style","class"].includes(m)&&(f.$attrs$[m]=l[m]);f.$tag$=null,f.$flags$|=4,e.$vnode$=f,f.$elm$=p.$elm$=l.shadowRoot||l,Da=l["s-sc"],ff=(h.$flags$&1)!==0,H1=l["s-cr"],mf=!1,Fa(p,f,r);{if(wt.$flags$|=1,rw){JP(f.$elm$);for(const m of Ts){const y=m.$nodeToRelocate$;if(!y["s-ol"]){const v=ui.createTextNode("");v["s-nr"]=y,Sn(y.parentNode,y["s-ol"]=v,y)}}for(const m of Ts){const y=m.$nodeToRelocate$,v=m.$slotRefNode$;if(v){const _=v.parentNode;let w=v.nextSibling;{let S=(i=y["s-ol"])==null?void 0:i.previousSibling;for(;S;){let E=(s=S["s-nr"])!=null?s:null;if(E&&E["s-sn"]===y["s-sn"]&&_===E.parentNode){for(E=E.nextSibling;E===y||E!=null&&E["s-sr"];)E=E==null?void 0:E.nextSibling;if(!E||!E["s-nr"]){w=E;break}}S=S.previousSibling}}(!w&&_!==y.parentNode||y.nextSibling!==w)&&y!==w&&(!y["s-hn"]&&y["s-ol"]&&(y["s-hn"]=y["s-ol"].parentNode.nodeName),Sn(_,y,w),y.nodeType===1&&(y.hidden=(n=y["s-ih"])!=null?n:!1)),y&&typeof v["s-rf"]=="function"&&v["s-rf"](y)}else y.nodeType===1&&(r&&(y["s-ih"]=(o=y.hidden)!=null?o:!1),y.hidden=!0)}}mf&&YP(f.$elm$),wt.$flags$&=-2,Ts.length=0}if(Nr.experimentalScopedSlotChanges&&h.$flags$&2)for(const m of f.$elm$.childNodes)m["s-hn"]!==El&&!m["s-sh"]&&(r&&m["s-ih"]==null&&(m["s-ih"]=(a=m.hidden)!=null?a:!1),m.hidden=!0);H1=void 0},iJ=(e,t)=>{},nw=(e,t)=>(e.$flags$|=16,iJ(e,e.$ancestorComponent$),PY(()=>sJ(e,t))),sJ=(e,t)=>{const r=e.$hostElement$,i=Xo("scheduleUpdate",e.$cmpMeta$.$tagName$),s=r;if(!s)throw new Error(`Can't render component <${r.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let n;return t?n=cl(s,"componentWillLoad"):n=cl(s,"componentWillUpdate"),n=H$(n,()=>cl(s,"componentWillRender")),i(),H$(n,()=>oJ(e,s,t))},H$=(e,t)=>nJ(e)?e.then(t).catch(r=>{console.error(r),t()}):t(),nJ=e=>e instanceof Promise||e&&e.then&&typeof e.then=="function",oJ=async(e,t,r)=>{const i=e.$hostElement$,s=Xo("update",e.$cmpMeta$.$tagName$);i["s-rc"],r&&KY(e);const n=Xo("render",e.$cmpMeta$.$tagName$);aJ(e,t,i,r),n(),s(),lJ(e)},W$=null,aJ=(e,t,r,i)=>{try{W$=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(Nr.hasRenderFn||Nr.reflect)&&(Nr.vdomRender||Nr.reflect)&&(Nr.hydrateServerSide||rJ(e,t,i))}catch(l){gh(l,e.$hostElement$)}return W$=null,null},lJ=e=>{const t=e.$cmpMeta$.$tagName$,r=e.$hostElement$,i=Xo("postUpdate",t),s=r;e.$ancestorComponent$,cl(s,"componentDidRender"),e.$flags$&64?(cl(s,"componentDidUpdate"),i()):(e.$flags$|=64,cl(s,"componentDidLoad"),i())},aoe=e=>{{const t=oa(e),r=t.$hostElement$.isConnected;return r&&(t.$flags$&18)===2&&nw(t,!1),r}},cl=(e,t,r)=>{if(e&&e[t])try{return e[t](r)}catch(i){gh(i)}},cJ=(e,t)=>oa(e).$instanceValues$.get(t),uJ=(e,t,r,i)=>{const s=oa(e),n=e,o=s.$instanceValues$.get(t),a=s.$flags$,l=n;r=qY(r,i.$members$[t][0]);const h=Number.isNaN(o)&&Number.isNaN(r);if(r!==o&&!h){s.$instanceValues$.set(t,r);{if(i.$watchers$&&a&128){const f=i.$watchers$[t];f&&f.map(m=>{try{l[m](r,o,t)}catch(y){gh(y,n)}})}if((a&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(r,o,t)===!1)return;nw(s,!1)}}}},hJ=(e,t,r)=>{var i,s;const n=e.prototype;if(t.$members$||t.$watchers$||e.watchers){e.watchers&&!t.$watchers$&&(t.$watchers$=e.watchers);const o=Object.entries((i=t.$members$)!=null?i:{});o.map(([a,[l]])=>{(l&31||l&32)&&Object.defineProperty(n,a,{get(){return cJ(this,a)},set(h){uJ(this,a,h,t)},configurable:!0,enumerable:!0})});{const a=new Map;n.attributeChangedCallback=function(l,h,p){wt.jmp(()=>{var f;const m=a.get(l);if(this.hasOwnProperty(m))p=this[m],delete this[m];else{if(n.hasOwnProperty(m)&&typeof this[m]=="number"&&this[m]==p)return;if(m==null){const y=oa(this),v=y==null?void 0:y.$flags$;if(v&&!(v&8)&&v&128&&p!==h){const w=this,S=(f=t.$watchers$)==null?void 0:f[l];S==null||S.forEach(E=>{w[E]!=null&&w[E].call(w,p,h,l)})}return}}this[m]=p===null&&typeof this[m]=="boolean"?!1:p})},e.observedAttributes=Array.from(new Set([...Object.keys((s=t.$watchers$)!=null?s:{}),...o.filter(([l,h])=>h[0]&15).map(([l,h])=>{var p;const f=h[1]||l;return a.set(f,l),h[0]&512&&((p=t.$attrsToReflect$)==null||p.push([l,f])),f})]))}}return e},dJ=async(e,t,r,i)=>{let s;if(!(t.$flags$&32)){t.$flags$|=32,r.$lazyBundleId$;{s=e.constructor;const o=e.localName;customElements.whenDefined(o).then(()=>t.$flags$|=128)}if(s&&s.style){let o;typeof s.style=="string"?o=s.style:typeof s.style!="string"&&(t.$modeName$=WY(e),t.$modeName$&&(o=s.style[t.$modeName$]));const a=zP(r,t.$modeName$);if(!df.has(a)){const l=Xo("registerStyles",r.$tagName$);JY(a,o,!!(r.$flags$&1)),l()}}}t.$ancestorComponent$,nw(t,!0)},q$=e=>{},pJ=e=>{if(!(wt.$flags$&1)){const t=oa(e),r=t.$cmpMeta$,i=Xo("connectedCallback",r.$tagName$);t.$flags$&1?(QP(e,t,r.$listeners$),t!=null&&t.$lazyInstance$?q$(t.$lazyInstance$):t!=null&&t.$onReadyPromise$&&t.$onReadyPromise$.then(()=>q$(t.$lazyInstance$))):(t.$flags$|=1,r.$flags$&12&&fJ(e),r.$members$&&Object.entries(r.$members$).map(([s,[n]])=>{if(n&31&&e.hasOwnProperty(s)){const o=e[s];delete e[s],e[s]=o}}),dJ(e,t,r)),i()}},fJ=e=>{const t=e["s-cr"]=ui.createComment("");t["s-cn"]=!0,Sn(e,t,e.firstChild)},mJ=async e=>{if(!(wt.$flags$&1)){const t=oa(e);t.$rmListeners$&&(t.$rmListeners$.map(r=>r()),t.$rmListeners$=void 0)}},loe=(e,t)=>{const r={$flags$:t[0],$tagName$:t[1]};r.$members$=t[2],r.$listeners$=t[3],r.$watchers$=e.$watchers$,r.$attrsToReflect$=[];const i=e.prototype.connectedCallback,s=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){TY(this,r)},connectedCallback(){const n=oa(this);QP(this,n,r.$listeners$),pJ(this),i&&i.call(this)},disconnectedCallback(){mJ(this),s&&s.call(this)},__attachShadow(){if(!this.shadowRoot)this.attachShadow({mode:"open",delegatesFocus:!!(r.$flags$&16)});else if(this.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${r.$tagName$}! Mode is set to ${this.shadowRoot.mode} but Stencil only supports open shadow roots.`)}}),e.is=r.$tagName$,hJ(e,r)},coe=(e,t)=>t,QP=(e,t,r,i)=>{r&&r.map(([s,n,o])=>{const a=gJ(e,s),l=yJ(t,o),h=vJ(s);wt.ael(a,n,l,h),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>wt.rel(a,n,l,h))})},yJ=(e,t)=>r=>{var i;try{Nr.lazyLoad||e.$hostElement$[t](r)}catch(s){gh(s)}},gJ=(e,t)=>t&4?ui:t&8?vh:t&16?ui.body:e,vJ=e=>xY?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const xs=globalThis.calciteConfig,uoe=(xs==null?void 0:xs.focusTrapStack)||[];xs!=null&&xs.logLevel;const Z$="2.13.2",_J="2024-10-24",wJ="e38e2977d";function bJ(){if(xs&&xs.version)return;console.info(`Using Calcite Components ${Z$} [Date: ${_J}, Revision: ${wJ}]`);const e=xs||globalThis.calciteConfig||{};Object.defineProperty(e,"version",{value:Z$,writable:!1}),globalThis.calciteConfig=e}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const SJ=()=>typeof navigator<"u"&&typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function Y$(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,r=()=>e.contains(DP)||e.contains(LP)&&t?"dark":"light",i=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),s=o=>{n!==o&&i(o),n=o};let n=r();i(n),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>s(o.matches?"dark":"light")),new MutationObserver(()=>s(r())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function $J(){SJ()&&(document.readyState==="interactive"?Y$():document.addEventListener("DOMContentLoaded",()=>Y$(),{once:!0})),bJ()}const TJ=$J;TJ();let eR;function EJ(){try{RY(".")}catch{CY(Cr(be(eR)))}}function ow(e){var r;const t=[];for(const i of Object.keys(e))customElements.get(`calcite-${i}`)||t.push((r=e[i])==null?void 0:r.call(e));return t.length>0?Promise.all(t):null}eR="components/assets";const tR=Symbol("widget"),rR=Symbol("widget-test-data"),MJ=[],xJ={},gf=new WeakMap;function iR(e,t){let r=t.children;if(r!=null&&r.length)for(let s=0;s<r.length;++s)r[s]=iR(e,r[s]);else r=MJ;const i=t.vnodeSelector;if(vf(i)){const s=t.properties||xJ,n=s.key||i,o={key:n,afterCreate:AJ,afterUpdate:IJ,afterRemoved:sR,parentWidget:e,widgetConstructor:i,widgetProperties:{...s,key:n,children:r}};return{vnodeSelector:i.vnodeSelector,properties:o,children:void 0,text:void 0,domNode:null}}return t}function AJ(e,t,r,{parentWidget:i,widgetConstructor:s,widgetProperties:n}){var a;const o=new s(n);o.container=e,gf.set(e,o),(a=o.afterCreate)==null||a.call(o,o,e),i.addHandles(_e(()=>sR(e))),queueMicrotask(()=>{o[rR].projector.renderNow()})}function IJ(e,t,r,{widgetProperties:i}){var n;const s=gf.get(e);s&&(s.set(i),(n=s.afterUpdate)==null||n.call(s,s,e))}function sR(e){var r;const t=gf.get(e);t&&((r=t.afterRemoved)==null||r.call(t,t,e),t.destroy(),gf.delete(e))}function vf(e){return typeof e=="function"&&e[tR]}const J$=new Set;function OJ(e){J$.add(e),e.finally(()=>J$.delete(e))}var nR;const PJ="esri.widgets.Widget";let RJ=0;function oR(e,t){const r=Object.prototype.hasOwnProperty;for(const i in t)r.call(t,i)&&r.call(e,i)&&(e[i]!=null&&t[i]!=null&&typeof e[i]=="object"&&typeof t[i]=="object"?oR(e[i],t[i]):e[i]=t[i]);return e}const CJ=wY({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,r=/capture$/i;e.eventHandlerInterceptor=(i,s,n,o)=>{const a=t==null?void 0:t(i,s,n,o),l=r.test(i);if(!((i=i.replace(r,"")).toLowerCase()in n)||l){const h=i[2].toLowerCase()+i.slice(3),p=y=>a==null?void 0:a.call(n,y);n.addEventListener(h,p,l);const f=()=>n.removeEventListener(h,p,l),m=o.afterRemoved;o.afterRemoved=y=>{m==null||m(y),f()}}return a}},handleInterceptedEvent(e,t,r,i){const{eventPhase:s,type:n}=i,o=s===Event.CAPTURING_PHASE;let a=`on${n}${o?"capture":""}`;const l=t.properties;(l&&a in l||(a=`on${n[0].toUpperCase()}${n.slice(1)}${o?"Capture":""}`,l&&a in l))&&(xA(),e.scheduleRender(),l[a].call(l.bind||r,i))}});let Py=!1,rt=class extends Sv(Ln.EventedAccessor){constructor(t,r){super(t,r),this._attached=!1,this._projector=CJ,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=Pk(async()=>{var l;if((l=this._messageBundleProps)!=null&&l.length){const h=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:p,propertyName:f})=>{if(this.destroyed)return;let m=await R3(p);this.uiStrings&&Object.keys(this.uiStrings)&&(m=oR(N(m),this.uiStrings)),this[f]=m}));if(this.destroyed)return;for(const p of h)p.status==="rejected"&&V.getLogger(this).error("widget-intl:locale-error",this.declaredClass,p.reason)}await this.loadLocale()}),EJ();const i="esri-widget-uid-"+ew(),s=this.render.bind(this);this._trackingTarget=new Mf(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const n=()=>({vnodeSelector:"div",properties:{key:`${i}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),o=()=>{var f,m;if(!this._readyForTrueRender||this.destroyed)return null;const l=s()??n(),h=l.properties??(l.properties={});if(h.key??(h.key=i),vf(l.vnodeSelector)){if(!this.visible)return n()}else this.visible?h.styles||(h.styles={}):(h.class="",h.styles={display:"none"}),(f=h.styles).display??(f.display="");let p=0;return(m=l.children)==null||m.forEach(y=>{var v;vf(y.vnodeSelector)||(y.properties??(y.properties={}),(v=y.properties).key??(v.key=`${this.id}--${p++}`))}),iR(this,l)};this.render=()=>{if(Py)return o();let l=xU(this)??null;if(l)return l;this._trackingTarget.clear(),Py=!0;try{l=As(this._trackingTarget,o)}catch(h){throw V.getLogger(this).error(h),h}finally{Py=!1}return l&&AU(this,l),l};const a=this.beforeFirstRender();a?this._resourcesFetch=a.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),OJ(this._resourcesFetch)}normalizeCtorArgs(t,r){const i={...t};return r&&(i.container=r),i}postInitialize(){}beforeFirstRender(){var r;const t=this.loadDependencies();return(r=this._messageBundleProps)!=null&&r.length||t?Promise.all([t,this._loadLocale()]).then(()=>{}).catch(Lw):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(Ve(this._trackingTarget),Ve(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,ty(this))}set container(t){this._get("container")||this._set("container",t)}castContainer(t){return p_(t)}get domNode(){return this.container}set domNode(t){this.container=t}get icon(){return null}set icon(t){this._overrideIfSome("icon",t)}get id(){var t;return this._get("id")||((t=this.container)==null?void 0:t.id)||Date.now().toString(16)+"-widget-"+RJ++}set id(t){t&&this._set("id",t)}get label(){return this.declaredClass.split(".").pop()}set label(t){this._overrideIfSome("label",t)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(t){this._set("visible",t)}get[(nR=tR,rR)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(ty(this),this._projector.scheduleRender())}own(t){jT(V.getLogger(this),"`Widget.own()` is deprecated in favor of 'Widget.addHandles()'",{replacement:"Widget.addHandles()",version:"4.28"}),this.addHandles(t)}classes(...t){return IU.apply(this,t)}renderNow(){ty(this),this._projector.renderNow()}_postInitialize(){var r;if(this.destroyed)return;this.scheduleRender(),(r=this._delegatedEventNames)!=null&&r.length&&this.addHandles(se(()=>this.viewModel,(i,s)=>{s&&this.removeHandles("delegated-events"),i&&Ef(i)&&this.addHandles(this._delegatedEventNames.map(n=>Ju(i,n,o=>{this.emit(n,o)})),"delegated-events")},dr)),this.postInitialize();const t=async()=>{await this._loadLocale().catch(Lw),this.scheduleRender()};this.addHandles([M3(t),se(()=>this.uiStrings,t),zi(()=>this.container,i=>{this.destroyed||this._attach(i)},{initial:!0,once:!0})])}_attach(t){t&&(this._projector.merge(t,this.render),this._attached=!0)}_detach(t){var r;this._attached&&(this._projector.detach(this.render),this._attached=!1),(r=t==null?void 0:t.parentNode)==null||r.removeChild(t)}};rt[nR]=!0,rt.vnodeSelector="div",u([d()],rt.prototype,"_readyForTrueRender",void 0),u([d({value:null})],rt.prototype,"container",null),u([ct("container")],rt.prototype,"castContainer",null),u([d()],rt.prototype,"icon",null),u([d()],rt.prototype,"id",null),u([d()],rt.prototype,"label",null),u([d()],rt.prototype,"renderable",null),u([d()],rt.prototype,"uiStrings",void 0),u([d()],rt.prototype,"viewModel",void 0),u([d({value:!0})],rt.prototype,"visible",null),u([d()],rt.prototype,"key",void 0),u([d()],rt.prototype,"children",void 0),u([d()],rt.prototype,"afterCreate",void 0),u([d()],rt.prototype,"afterUpdate",void 0),u([d()],rt.prototype,"afterRemoved",void 0),rt=u([$(PJ)],rt);const vm=rt,kJ=new Map;function NJ(e){return kJ.get(e)}function X$(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function LJ(e,t){return e.length!==t.length||e.some((r,i)=>r.text!==t[i].text)}function oc(e,t,r){!r||!t||e.find(i=>i.layerView===t&&i.text===r)||e.push({text:r,layerView:t})}function DJ(e){return e.type==="bing-maps"}const es=[];let Ua=class extends Y{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new K,this.view=null,this._allLayerViewsChange=t=>{var i;this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const r=(i=this.view)==null?void 0:i.allLayerViews;r&&(this.addHandles(r.map(s=>se(()=>{var n;return[s.suspended,(n=s.layer)==null?void 0:n.attributionVisible]},()=>this._updateAttributionItems())).toArray(),"suspension"),r.forEach(s=>{s.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(s.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),t!=null&&t.removed&&t.removed.forEach(s=>{this._pendingAttributions.delete(s),this._fetchedAttributionData.delete(s)}),this._updateAttributionItems()},this.addHandles([Yo(()=>{var t;return(t=this.view)==null?void 0:t.allLayerViews},"change",t=>this._allLayerViewsChange(t),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),zi(()=>{var t;return((t=this.view)==null?void 0:t.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){var e;return(e=this.view)!=null&&e.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,t=e==null?void 0:e.allLayerViews;if(es.length=0,!e||!t)return void this._clear();t.forEach(i=>{var o,a;if(i.suspended||!((o=i.layer)!=null&&o.attributionVisible))return;const s=i.layer;if(X$(s,"user"))return void oc(es,i,s.copyright);if(s.hasAttributionData){if(this._fetchedAttributionData.has(i)){const l=this._fetchedAttributionData.get(i);return void(l?oc(es,i,this._getDynamicAttribution(l,e,s)):X$(s)&&oc(es,i,s.copyright))}return void this._fetchAttributionData(i)}const n="portalItem"in s?(a=s.portalItem)==null?void 0:a.accessInformation:void 0;oc(es,i,n||s.copyright)});const r=t.find(i=>{var s;return((s=i.layer)==null?void 0:s.type)==="integrated-mesh-3dtiles"});if(this.view&&r){const i=NJ(this.view);if(i){const s=i.getAttributionText();for(let n=0;n<s.length;++n)oc(es,r,s[n])}}LJ(this.items,es)&&(this.items.removeAll(),this.items.addMany(es)),es.length=0,this.notifyChange("state")}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const t=await QE(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const r=t.ok?this._createContributionIndex(t.value,DJ(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,r)}this._updateAttributionItems()}_createContributionIndex(e,t){const r=e.contributors,i={};if(!r)return i;for(let s=0;s<r.length;s++){const n=r[s],o=n.coverageAreas;if(!o)return;for(const a of o){const l=a.bbox,h=a.zoomMin-(t&&a.zoomMin?1:0),p=a.zoomMax-(t&&a.zoomMax?1:0),f=new Be({xmin:l[1],ymin:l[0],xmax:l[3],ymax:l[2],spatialReference:de.WGS84}),m={extent:Do(f),attribution:n.attribution||"",score:a.score!=null?a.score:100,id:s};for(let y=h;y<=p;y++)i[y]??(i[y]=[]),i[y].push(m)}}return i.maxKey=Math.max.apply(null,Object.keys(i)),i}_getDynamicAttribution(e,t,r){var h;const{extent:i,scale:s}=t;let n=((h=r.tileInfo)==null?void 0:h.scaleToZoom(s))??0;if(n=Math.min(e.maxKey??0,Math.round(n)),!i||n==null||n<=-1)return"";const o=e[n],a=kf(i.center.clone().normalize(),de.WebMercator),l=new Set;return o?o.filter(p=>{const f=p.id,m=!l.has(f)&&a&&p.extent&&rh(p.extent,a);return m&&l.add(f),m}).sort((p,f)=>f.score-p.score||p.objectId-f.objectId).map(p=>p.attribution).join(", "):""}};u([d({readOnly:!0,type:K})],Ua.prototype,"items",void 0),u([d({readOnly:!0})],Ua.prototype,"state",null),u([d()],Ua.prototype,"view",void 0),Ua=u([$("esri.widgets.Attribution.AttributionViewModel")],Ua);const aR=Ua,ji={anchor:"esri-widget__anchor",anchorDisabled:"esri-widget__anchor--disabled",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",empty:"esri-widget__content--empty",emptyIllustration:"esri-widget__content-illustration--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",panel:"esri-widget--panel",panelHeightOnly:"esri-widget--panel-height-only",primaryTick:"primary-tick",primaryTickAmPm:"primary-tick__ampm",primaryTickLabel:"primary-tick__label",rotating:"esri-rotating",secondaryTick:"secondary-tick",select:"esri-select",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button",widgetButtonActive:"esri-widget--button-active",widgetDisabled:"esri-widget--disabled"};function FJ(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${String(t)}'`);return{value:jJ(e[t])}}}function UJ(e){const t=e==null?void 0:e.type;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function jJ(e){return function(t,...r){UJ(t)?kU(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...r)}}function _m(e){return(t,r)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:r})}}var GJ=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},lR=function(e,t){for(var r=0,i=e.length;r<i;r++){var s=e[r];Array.isArray(s)?lR(s,t):s!=null&&s!==!1&&(s.hasOwnProperty("vnodeSelector")||(s=GJ(s)),t.push(s))}},VJ=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(r.length===1&&typeof r[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:r[0],domNode:null};var s=[];return lR(r,s),{vnodeSelector:e,properties:t||void 0,children:s,text:void 0,domNode:null}};function tr(e,t,...r){return typeof e!="function"||vf(e)?VJ(e,t,...r):e(t,...r)}function doe(...e){return e}const ga="esri-attribution",va={base:ga,poweredBy:`${ga}__powered-by`,sources:`${ga}__sources`,open:`${ga}--open`,sourcesOpen:`${ga}__sources--open`,link:`${ga}__link`};let jt=class extends vm{constructor(t,r){super(t,r),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(i=>i.forEach(({target:s})=>this._checkSourceTextOverflow(s))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new aR}initialize(){this.addHandles(Yo(()=>{var t;return(t=this.viewModel)==null?void 0:t.items},"change",()=>this.scheduleRender()))}destroy(){var t;(t=this._resizeObserver)==null||t.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((t,r)=>(t.includes(r.text)||t.push(r.text),t),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t={[va.open]:this._isOpen};return tr("div",{bind:this,class:this.classes(va.base,ji.widget,t),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return tr("div",{class:va.poweredBy},"Powered by"," ",tr("a",{class:va.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const t=this._isOpen,r=this._isInteractive,i=r?0:void 0,{attributionText:s}=this,n={[va.sourcesOpen]:t,[ji.interactive]:r};return tr("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(va.sources,n),innerHTML:s,tabIndex:i})}_afterSourcesNodeCreate(t){this._prevSourceNodeHeight=t.clientWidth,this._resizeObserver.observe(t)}_checkSourceTextOverflow(t){let r=!1;const{clientHeight:i,clientWidth:s,scrollWidth:n}=t,o=n>s,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(r=!0),this._isOpen){const l=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,l&&(this._isOpen=!1,r=!0)}r&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};u([d()],jt.prototype,"_isOpen",void 0),u([d()],jt.prototype,"_isInteractive",null),u([d()],jt.prototype,"_attributionTextOverflowed",void 0),u([d()],jt.prototype,"_prevSourceNodeHeight",void 0),u([d({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],jt.prototype,"attributionText",null),u([d()],jt.prototype,"icon",null),u([d()],jt.prototype,"itemDelimiter",void 0),u([d()],jt.prototype,"label",null),u([d(),_m("esri/widgets/Attribution/t9n/Attribution")],jt.prototype,"messages",void 0),u([d()],jt.prototype,"view",null),u([d({type:aR})],jt.prototype,"viewModel",void 0),u([FJ()],jt.prototype,"_toggleState",null),jt=u([$("esri.widgets.Attribution")],jt);const zJ=jt;function BJ(){const e=I("mapview-essential-goto-duration");return e==null?e:e}function HJ(e){var t,r;return((t=e==null?void 0:e.spatialReference)==null?void 0:t.isWebMercator)||((r=e==null?void 0:e.spatialReference)==null?void 0:r.isGeographic)||!1}const WJ=e=>{let t=class extends e{constructor(...r){super(...r),this.goToOverride=null,this.view=null}callGoTo(r){const{view:i}=this;return GT(i),this.goToOverride?this.goToOverride(i,r):i.goTo(r.target,r.options)}};return u([d()],t.prototype,"goToOverride",void 0),u([d()],t.prototype,"view",void 0),t=u([$("esri.widgets.support.GoTo")],t),t};let Eo=class extends WJ(Y){constructor(t){super(t),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this.addHandles(se(()=>this.view,this._updateRotationWatcher,Nt))}destroy(){this.view=null}get canShowNorth(){return HJ(this.view)}get state(){var t;return!((t=this.view)!=null&&t.ready)||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){var t,r;(t=this.view)!=null&&t.ready&&(((r=this.view)==null?void 0:r.type)==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:BJ()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(t){t!=null&&this._set("orientation",{z:t})}_updateForCamera(t){if(!t)return;const r=-t.heading;this._set("orientation",{x:0,y:0,z:r})}_updateRotationWatcher(t){this.removeAllHandles(),t&&this.addHandles(t.type==="2d"?se(()=>t==null?void 0:t.rotation,this._updateForRotation,Nt):se(()=>t==null?void 0:t.camera,this._updateForCamera,Nt))}};u([d({readOnly:!0})],Eo.prototype,"canShowNorth",null),u([d({readOnly:!0})],Eo.prototype,"orientation",void 0),u([d({readOnly:!0})],Eo.prototype,"state",null),u([d()],Eo.prototype,"view",void 0),Eo=u([$("esri.widgets.Compass.CompassViewModel")],Eo);const cR=Eo,K$="esri-compass",Q$={base:K$,iconContainer:`${K$}__icon-container`};let fs=class extends vm{constructor(t,r){super(t,r),this.messages=null,this.viewModel=new cR,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=i=>({transform:`rotateZ(${i.z}deg)`})}loadDependencies(){return ow({button:()=>j(()=>import("./calcite-button-C9LnpIc6.js"),__vite__mapDeps([280,281,282,283,284,285,286,287,288,289,290,291,292,293]),import.meta.url),icon:()=>j(()=>import("./calcite-icon-Dal3otMh.js"),__vite__mapDeps([294,291,282,289]),import.meta.url)})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}reset(){return this.viewModel.reset()}render(){const{orientation:t,state:r}=this.viewModel,{messages:i}=this;return tr("div",{class:this.classes(Q$.base,ji.widget)},tr("calcite-button",{class:ji.widgetButton,disabled:r==="disabled",kind:"neutral",label:i.reset,onclick:this._reset,round:!0,scale:"s",title:i.reset},tr("div",{"aria-hidden":"true",class:Q$.iconContainer,title:i.reset},tr("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(t)}))))}};u([d()],fs.prototype,"goToOverride",null),u([d()],fs.prototype,"icon",null),u([d()],fs.prototype,"label",null),u([d(),_m("esri/widgets/Compass/t9n/Compass")],fs.prototype,"messages",void 0),u([d()],fs.prototype,"view",null),u([d({type:cR})],fs.prototype,"viewModel",void 0),fs=u([$("esri.widgets.Compass")],fs);const qJ=fs,eT="esri-navigation-toggle",tT={base:eT,isLayoutHorizontal:`${eT}--horizontal`};let ja=class extends Y{constructor(t){super(t),this._navigationMode="pan",this.view=null}initialize(){this.addHandles(zi(()=>{var t;return(t=this.view)==null?void 0:t.inputManager},()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){var t,r;return(t=this.view)!=null&&t.ready&&((r=this.view)==null?void 0:r.type)==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(t){this._navigationMode=t,this._setNavigationMode()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_setNavigationMode(){var r;const t=(r=this.view)==null?void 0:r.inputManager;t&&(t.primaryDragAction=this._navigationMode==="pan"?"pan":"rotate")}};u([d({readOnly:!0})],ja.prototype,"state",null),u([d()],ja.prototype,"_navigationMode",void 0),u([d()],ja.prototype,"view",void 0),ja=u([$("esri.widgets.NavigationToggle.NavigationToggleViewModel")],ja);const uR=ja;let ms=class extends vm{constructor(t,r){super(t,r),this.messages=null,this.viewModel=new uR,this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{var s;const i=((s=this.viewModel)==null?void 0:s.navigationMode)==="pan"?this._rotateButton:this._panButton;NU(i),this.toggle()}}loadDependencies(){return ow({button:()=>j(()=>import("./calcite-button-C9LnpIc6.js"),__vite__mapDeps([280,281,282,283,284,285,286,287,288,289,290,291,292,293]),import.meta.url)})}get icon(){return"move"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){var s,n;const t=((s=this.viewModel)==null?void 0:s.state)==="disabled",r=((n=this.viewModel)==null?void 0:n.navigationMode)==="pan",i=this.messages.toggle;return tr("div",{class:this.classes(tT.base,ji.widget,{[tT.isLayoutHorizontal]:this.layout==="horizontal"})},tr("calcite-button",{afterCreate:o=>{this._panButton=o},appearance:r?"outline-fill":"solid",class:ji.widgetButton,disabled:t,iconStart:"move",kind:"neutral",label:i,onclick:this._toggle,tabIndex:r?void 0:-1,title:i}),tr("calcite-button",{afterCreate:o=>{this._rotateButton=o},appearance:r?"solid":"outline-fill",class:ji.widgetButton,disabled:t,iconStart:"rotate",kind:"neutral",label:i,onclick:this._toggle,tabIndex:r?-1:void 0,title:i}))}};u([d()],ms.prototype,"icon",null),u([d()],ms.prototype,"label",null),u([d({value:"vertical"})],ms.prototype,"layout",null),u([d(),_m("esri/widgets/NavigationToggle/t9n/NavigationToggle")],ms.prototype,"messages",void 0),u([d()],ms.prototype,"view",null),u([d({type:uR})],ms.prototype,"viewModel",void 0),ms=u([$("esri.widgets.NavigationToggle")],ms);const ZJ=ms;let Mo=class extends Y{get canZoomIn(){var i,s,n;if(!((i=this.view)==null?void 0:i.ready))return!1;const r=(n=(s=this.view)==null?void 0:s.constraints)==null?void 0:n.effectiveMaxScale;return r===0||this._scale>r}get canZoomOut(){var s;const{view:t}=this;if(!(t==null?void 0:t.ready))return!1;const i=(s=t.constraints)==null?void 0:s.effectiveMinScale;return i===0||this._scale<i}get _scale(){var r,i,s;const t=(i=(r=this.view)==null?void 0:r.animation)==null?void 0:i.target;return(t&&"then"in t||t==null?void 0:t.scale)??((s=this.view)==null?void 0:s.scale)??0}};u([d({readOnly:!0})],Mo.prototype,"canZoomIn",null),u([d({readOnly:!0})],Mo.prototype,"canZoomOut",null),u([d()],Mo.prototype,"view",void 0),u([d()],Mo.prototype,"_scale",null),Mo=u([$("esri.widgets.Zoom.ZoomConditions2D")],Mo);const YJ=Mo;let Ga=class extends Y{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};u([d({readOnly:!0})],Ga.prototype,"canZoomIn",null),u([d({readOnly:!0})],Ga.prototype,"canZoomOut",null),u([d()],Ga.prototype,"view",void 0),Ga=u([$("esri.widgets.Zoom.ZoomConditions3D")],Ga);const JJ=Ga;let nn=class extends Y{constructor(t){super(t)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var t;return this._zoomConditions!=null&&((t=this._zoomConditions)==null?void 0:t.canZoomOut)}get state(){var t;return(t=this.view)!=null&&t.ready?"ready":"disabled"}set view(t){t?t.type==="2d"?this._zoomConditions=new YJ({view:t}):t.type==="3d"&&(this._zoomConditions=new JJ({view:t})):this._zoomConditions=null,this._set("view",t)}zoomIn(){if(!this.canZoomIn)return;const t=this.view;t.type==="2d"?t.mapViewNavigation.zoomIn():Dw(t.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const t=this.view;t.type==="2d"?t.mapViewNavigation.zoomOut():Dw(t.goTo({zoomFactor:.5}))}};u([d()],nn.prototype,"_zoomConditions",void 0),u([d()],nn.prototype,"canZoomIn",null),u([d()],nn.prototype,"canZoomOut",null),u([d({readOnly:!0})],nn.prototype,"state",null),u([d()],nn.prototype,"view",null),nn=u([$("esri.widgets.Zoom.ZoomViewModel")],nn);const hR=nn,rT={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let ys=class extends vm{constructor(t,r){super(t,r),this.messages=null,this.viewModel=new hR,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return ow({button:()=>j(()=>import("./calcite-button-C9LnpIc6.js"),__vite__mapDeps([280,281,282,283,284,285,286,287,288,289,290,291,292,293]),import.meta.url)})}get icon(){return"magnifying-glass-plus"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}set view(t){this.viewModel.view=t}get view(){return this.viewModel.view}render(){const t={[rT.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:r,canZoomOut:i}=this.viewModel,{zoomIn:s,zoomOut:n}=this.messages;return tr("div",{class:this.classes(rT.base,ji.widget,t)},tr("calcite-button",{class:ji.widgetButton,disabled:!r,iconStart:"plus",kind:"neutral",label:s,onclick:this.zoomIn,title:s}),tr("calcite-button",{class:ji.widgetButton,disabled:!i,iconStart:"minus",kind:"neutral",label:n,onclick:this.zoomOut,title:n}))}};u([d()],ys.prototype,"icon",null),u([d()],ys.prototype,"label",null),u([d({value:"vertical"})],ys.prototype,"layout",null),u([d(),_m("esri/widgets/Zoom/t9n/Zoom")],ys.prototype,"messages",void 0),u([d()],ys.prototype,"view",null),u([d({type:hR})],ys.prototype,"viewModel",void 0),ys=u([$("esri.widgets.Zoom")],ys);const XJ=ys;function KJ(e){return(e==null?void 0:e.view)!==void 0}let lp=class extends pY{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=r=>{this.components.forEach(i=>{const s=this._find(i),n=s==null?void 0:s.widget;KJ(n)&&(n.view=r)})},this._componentsWatcher=(r,i)=>{this._removeComponents(i),this._addComponents(r),this._adjustPadding(r)}}initialize(){this.addHandles([se(()=>this.components,this._componentsWatcher,Nt),se(()=>this.view,this._updateViewAwareWidgets,Nt)])}_add(t,r,i,s,n){let o=t;if(typeof t=="string"&&this._defaultPositionLookup[t]){if(this._find(t))return;o=this._createComponent(t)}super._add(o,r,i,s,n)}_removeComponents(t){t.forEach(r=>{const i=this._find(r);i&&(this.remove(i),i.destroy())})}_adjustPadding(t){if(!t.includes("attribution")&&!this._isOverridden("padding")){const{top:r}=this.padding;this.padding=r}}_addComponents(t){this.constructed&&t.forEach(r=>this.add(this._createComponent(r),this._defaultPositionLookup[r]))}_createComponent(t){const r=this._createWidget(t);return new ap({id:t,node:r})}_createWidget(t){const r=this.view;switch(t){case"attribution":return new zJ({view:r});case"compass":return new qJ({view:r});case"navigation-toggle":return new ZJ({view:r});case"zoom":return new XJ({view:r})}}};u([d()],lp.prototype,"components",void 0),lp=u([$("esri.views.ui.DefaultUI")],lp);const dR=lp;let cp=class extends dR{constructor(e){super(e),this.components=["attribution","zoom"]}};u([d()],cp.prototype,"components",void 0),cp=u([$("esri.views.ui.2d.DefaultUI2D")],cp);const pR=cp;let QJ=class W1{constructor(t,r,i=""){this.major=t,this.minor=r,this._context=i}lessThan(t,r){return this.major<t||t===this.major&&this.minor<r}greaterEqual(t,r){return!this.lessThan(t,r)}validate(t){if(this.major!==t.major){const r=this._context&&this._context+":",i=this._context&&this._context+" ";throw new k(r+"unsupported-version",`Required major ${i}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new W1(this.major,this.minor,this._context)}static parse(t,r=""){const[i,s]=t.split("."),n=/^\s*\d+\s*$/;if(!(i!=null&&i.match)||!n.test(i))throw new k((r&&r+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!(s!=null&&s.match)||!n.test(s))throw new k((r&&r+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const o=parseInt(i,10),a=parseInt(s,10);return new W1(o,a,r)}},eX=class extends QJ{constructor(t,r){super(t,r,"webmap")}};function Ry(e){return e!=null&&typeof e=="object"&&"declaredClass"in e&&e.declaredClass==="esri.WebMap"}new eX(2,32);var q1;let up=q1=class extends W{constructor(e){super(e),this.color=new fe([0,0,0,1])}clone(){return new q1(N({color:this.color}))}};u([d({type:fe,json:{write:!0}})],up.prototype,"color",void 0),up=q1=u([$("esri.webmap.background.ColorBackground")],up);const tX=up;let fR,mR,yR,gR,vR,_R,wR;async function rX(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:r,MapViewNavigation:i,MagnifierView2D:s,GridView2D:n,Stage:o}]=await Promise.all([j(()=>import("./webglDeps-BPFbcozq.js"),__vite__mapDeps([210,95,94,156,211,158]),import.meta.url),j(()=>import("./mapViewDeps-DdTqYDFr.js"),__vite__mapDeps([212,125,26,27,96,97,37,98,93,99,100,92,94,95,66,101,55,102,60,213,158,108,214,211,116,215,145,144,107,39,40,216,136,170,24,105,106,143,210,156,217,111,218,91,48,49,43,44,34,103,51,90,219,154,151,138,155,220,80,221,109,104,222,223,224,225,226,227,150,228,229]),import.meta.url)]);mR=e,yR=t,gR=r,vR=i,_R=s,wR=n,fR=o}let Q=class extends k7(uj(JU(az))){constructor(e){super(e),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new xu({getCollections:()=>{var t,r;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.goToManager=new sp({view:this}),this.graphicsView=null,this.stateManager=new xt({constraints:new WO({view:this})}),this.stationaryManager=new Yc,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.frameTask=new hW(this),this.floors=new K,this.grid=null,this.highlights=SP(),this.inputManager=new Vq({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new CP,this.type="2d",this.view2dType=null,this.ui=new pR,this.test={takeScreenshot:async t=>ZZ(this._getScreenshotView(t),t)},this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([se(()=>this.viewpoint,()=>this.stationaryManager.flip(),In),this.on("resize",t=>this.stateManager.resize(t.width,t.height))]),Y9()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=Ve(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new Jq(this.featuresTilingScheme)}get constraintsInfo(){var r,i;const e=(r=this.defaultsFromMap)==null?void 0:r.tileInfo,t=this.spatialReference;return{lods:(i=e==null?void 0:e.spatialReference)!=null&&i.equals(t)?e.lods:null,spatialReference:t}}get state(){return this.stateManager.state}get initialExtentRequired(){var o;if(!this.stateManager)return!1;const{scale:e,constraints:t,center:r,viewpoint:i,extent:s}=this;let n=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((o=this.map.initialViewProperties)!=null&&o.viewpoint))&&!s&&(t!=null&&t.effectiveLODs||(n=-1),(!r||e===0&&n===-1)&&((i==null?void 0:i.targetGeometry)==null||i.targetGeometry.type!=="extent"&&!i.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const t=e.targetGeometry,r=this.spatialReference;return iA(t.spatialReference,r)}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),e!==this.animationManager.animation&&this.animationManager.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e);const r=()=>{var i;this.destroyed||e===this._get("animation")&&(this._set("animation",null),(i=this.frameTask)==null||i.requestFrame())};e.when(r,r)}get background(){return Ry(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){var e;return((e=this.stateManager)==null?void 0:e.center)??null}set center(e){this.stateManager.center=e}get constraints(){var e;return(e=this.stateManager)==null?void 0:e.constraints}set constraints(e){e.view=this;const t=this.stateManager.constraints;this.stateManager.constraints=e,t==null||t.destroy()}get extent(){var e;return((e=this.stateManager)==null?void 0:e.extent)??null}set extent(e){this.stateManager.extent=e}get highlightOptions(){return RZ(this)}set highlightOptions(e){CZ(this,e)}get padding(){var e;return(e=this.stateManager)==null?void 0:e.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){var e;return((e=this.stage)==null?void 0:e.renderRequested)??!1}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(e){this.stateManager.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(e){const{rotationEnabled:t}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=e,this.constraints.rotationEnabled=t}get scale(){var e;return((e=this.stateManager)==null?void 0:e.scale)??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}get tileInfo(){var e;return(e=this.featuresTilingScheme)==null?void 0:e.tileInfo}get updating(){var r,i,s,n;const e=!(!this.magnifier.visible||this.magnifier.position===null||!((r=this._magnifierView)!=null&&r.updatingHandles.updating)),t=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(o=>!o.destroyed&&!("layerViews"in o)&&o.updating===!0)||e);if(I("esri-2d-log-updating")){const o=this.allLayerViews.reduce((a,l)=>({...a,[`${l.layer.id}(${l.layer.type})`]:!l.destroyed&&!("layerViews"in l)&&l.updating}),{});console.log(`Updating MapView: ${t}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(i=this.layerViewManager)==null?void 0:i.updating}
-> labelManager.updating: ${(s=this.labelManager)==null?void 0:s.updating}
-> graphicsView.updating: ${(n=this.graphicsView)==null?void 0:n.updating}
-> allLayerViews: ${JSON.stringify(o)}
-> updatingMagnifier: ${e}
`)}return t}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(e){this.stateManager.viewpoint=e,this.frameTask.requestFrame()}get visibleArea(){const e=this.stateManager.visibleArea;return e&&new Bi({rings:[e.map(t=>[t[0],t[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){var e;return((e=this.mapViewNavigation)==null?void 0:e.interacting)??!1}goTo(e,t){return this.goToManager.goTo(e,t)}async hitTest(e,t){return kZ(this,e,t)}async takeScreenshot(e){return qZ(this._getScreenshotView(e),e)}toMap(e){if(!this.ready)return null;const t=zI(e)?VI(this,e):e;return this.stateManager.toMap(t)}toScreen(e,t){return this.stateManager.toScreen(e,t)}on(e,t,r,i){return this.inputManager&&this.viewEvents.on(e,t,r,i)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e;return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||((e=this.defaultsFromMap)==null?void 0:e.spatialReference)||null}getDefaultTimeZone(){return Ry(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return Ry(this.map)?this.map.initialViewProperties.timeExtent:null}hasLayerViewModule(e){return DS.hasLayerViewModule(e)}importLayerView(e){return DS.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(V.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){var l;const t=this.toMap(e),r=await this.hitTest(e),i=this.allLayerViews.toArray().filter(h=>h.clips.every(p=>wP(this,p,e,t))).reverse(),s=new globalThis.Map(i.map(h=>[h.layer.uid,h])),n=[];let o=0,a=0;for(;o<r.results.length||a<i.length;){const h=r.results.at(o);if(h&&h.type!=="graphic"){++o;continue}const p=s.get((l=(h==null?void 0:h.layer)??(h==null?void 0:h.graphic.layer))==null?void 0:l.uid);if((!h||p)&&a<i.length&&i.at(a)!==p){const f=i.at(a);"fetchPopupFeaturesAtLocation"in f&&n.push({mapPoint:t,layerView:f}),++a}else h&&(n.push({graphic:h.graphic,layerView:p}),++o)}return{hits:n,location:t}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=iY(this.type);if(I("safari")&&I("safari")<9&&(e=new k("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:I("safari")})),e!=null)throw V.getLogger(this).warn("#validate()",e.message),e}loadAsyncDependencies(){return rX()}_getDefaultViewpoint(){var _;const{constraints:e,initialExtent:t,map:r,padding:i,size:s}=this;if(!e)return null;const n=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,o=this.stateManager.getUserStartupOptions(this.size),a=n==null?void 0:n.viewpoint,l=((_=a==null?void 0:a.targetGeometry)==null?void 0:_.extent)??t,h=l==null?void 0:l.center,p=(a==null?void 0:a.rotation)??0,f=(a==null?void 0:a.scale)||l&&mm(l,[s[0]-i.left-i.right,s[1]-i.top-i.bottom]),m=o.center??h,y=o.rotation??p,v=o.scale??f;return m&&v?new li({targetGeometry:m,scale:v,rotation:y}):null}_startup(){var o;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,(o=this.defaultsFromMap.extent)==null?void 0:o.center),this.graphics.owner=this;const t=new fR(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=t,this._magnifierView=new _R,this._magnifierView.magnifier=this.magnifier,this._gridView=new wR;const r=new gR({view:this});this._set("labelManager",r);const i=new rW({view:this});this._set("animationManager",i);const s=new vR({view:this,animationManager:i});this._set("mapViewNavigation",s),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),t.on("webgl-error",a=>this.fatalError=a.error),se(()=>this.stationary,a=>t.stationary=a,dr),se(()=>this.background,a=>{t.backgroundColor=a==null?void 0:a.color,this._magnifierView.backgroundColor=a==null?void 0:a.color},dr),se(()=>this.magnifier,a=>this._magnifierView.magnifier=a,dr),se(()=>this.grid,a=>this._gridView.grid=a,dr),se(()=>this.renderingOptions,a=>t.renderingOptions=a,dr),se(()=>this.highlights.items.map(a=>({name:a.name,options:{fillColor:a.options.color,haloColor:a.options.haloColor,fillOpacity:a.options.fillOpacity,haloOpacity:a.options.haloOpacity,haloWidth:a.options.haloWidth,haloBlur:a.options.haloBlur}})),()=>{t.highlightGradient=OZ(t.highlightGradient,this.highlights.items)},dr),se(()=>this.state.id,()=>t.state=this.state,dr)],"map-view"),this._updateStageChildren();const n=this._resolveWhenReady;this._resolveWhenReady=[],n.forEach(a=>a(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this.stage.addChild(t.container)});const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const e=new _W(R7.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const t=new mR({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new yR(e)});this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){var n;const{allLayerViews:t,padding:r,size:i,stage:s}=this;return{allLayerViews:t,backgroundColor:e!=null&&e.ignoreBackground?null:(n=this.background)==null?void 0:n.color,padding:r,size:i,stage:s}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const t of this.allLayerViews)t.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const t of this.allLayerViews)t.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};Q.type="2d",u([d({readOnly:!0})],Q.prototype,"animationManager",void 0),u([d({constructOnly:!0})],Q.prototype,"deactivatedWebGLExtensions",void 0),u([d({constructOnly:!0})],Q.prototype,"debugWebGLExtensions",void 0),u([d({readOnly:!0})],Q.prototype,"featuresTilingScheme",void 0),u([d({readOnly:!0})],Q.prototype,"fullOpacity",void 0),u([d()],Q.prototype,"goToManager",void 0),u([d({readOnly:!0})],Q.prototype,"graphicsTileStore",null),u([d()],Q.prototype,"graphicsView",void 0),u([d()],Q.prototype,"stateManager",void 0),u([d()],Q.prototype,"constraintsInfo",null),u([d({readOnly:!0})],Q.prototype,"state",null),u([d()],Q.prototype,"initialExtentRequired",null),u([d()],Q.prototype,"labelManager",void 0),u([d({readOnly:!0})],Q.prototype,"mapViewNavigation",void 0),u([d({constructOnly:!0})],Q.prototype,"renderCanvas",void 0),u([d()],Q.prototype,"renderingOptions",void 0),u([d({constructOnly:!0})],Q.prototype,"supersampleScreenshotsEnabled",void 0),u([d({readOnly:!0})],Q.prototype,"supportsGround",void 0),u([d()],Q.prototype,"defaultsFromMapSettings",null),u([d({readOnly:!0})],Q.prototype,"typeSpecificPreconditionsReady",null),u([d()],Q.prototype,"animation",null),u([d({type:tX})],Q.prototype,"background",null),u([d()],Q.prototype,"center",null),u([d({type:WO})],Q.prototype,"constraints",null),u([d()],Q.prototype,"extent",null),u([d()],Q.prototype,"floors",void 0),u([d()],Q.prototype,"grid",void 0),u([d({type:Jo})],Q.prototype,"highlightOptions",null),u([d({type:K.ofType(Za)})],Q.prototype,"highlights",void 0),u([d({readOnly:!0})],Q.prototype,"inputManager",void 0),u([d()],Q.prototype,"map",void 0),u([d()],Q.prototype,"padding",null),u([d({readOnly:!0})],Q.prototype,"rendering",null),u([d()],Q.prototype,"resizeAlign",null),u([d({readOnly:!0})],Q.prototype,"resolution",null),u([d()],Q.prototype,"rotation",null),u([d()],Q.prototype,"scale",null),u([d({constructOnly:!0})],Q.prototype,"spatialReferenceLocked",void 0),u([d()],Q.prototype,"stationary",null),u([d({readOnly:!0})],Q.prototype,"tileInfo",null),u([d({type:CP,readOnly:!0})],Q.prototype,"timeline",void 0),u([d({readOnly:!0})],Q.prototype,"type",void 0),u([d({readOnly:!0})],Q.prototype,"updating",null),u([d({readOnly:!0})],Q.prototype,"view2dType",void 0),u([d()],Q.prototype,"viewpoint",null),u([d({readOnly:!0})],Q.prototype,"visibleArea",null),u([d()],Q.prototype,"zoom",null),u([d({readOnly:!0})],Q.prototype,"navigating",null),u([d(),ct(e=>e instanceof dR?e:xf(pR,e))],Q.prototype,"ui",void 0),Q=u([$("esri.views.View2D")],Q);const iX=Q;let hp=class extends iX{constructor(t){super(t),this.view2dType="map"}};u([d({readOnly:!0})],hp.prototype,"view2dType",void 0),hp=u([$("esri.views.MapView")],hp);const sX=hp;function nX(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}function ul(e,t,r,i){var s=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(s,ul.prototype),s.expected=t,s.found=r,s.location=i,s.name="SyntaxError",s}function Cy(e,t,r){return r=r||" ",e.length>t?e:(t-=e.length,e+(r+=r.repeat(t)).slice(0,t))}function oX(e,t){var r,i={},s=(t=t!==void 0?t:{}).grammarSource,n={start:mw},o=mw,a="none",l=")",h=",",p="(",f="%",m="px",y="cm",v="mm",_="in",w="pt",S="pc",E="deg",x="rad",A="grad",P="turn",C="#",U=".",F="e",z=/^[ \t\n\r]/,q=/^[a-z\-]/,ee=/^[0-9a-fA-F]/,ce=/^[+\-]/,ye=/^[0-9]/,ne=Ji("none"),bt=dt("none",!1),mi=dt(")",!1),Dt=dt(",",!1),Ee=Ji("whitespace"),_r=Dl([" ","	",`
`,"\r"],!1,!1),MR=Ji("function"),xR=dt("(",!1),AR=Ji("identifier"),uw=Dl([["a","z"],"-"],!1,!1),IR=Ji("percentage"),OR=dt("%",!1),PR=Ji("length"),RR=dt("px",!1),CR=dt("cm",!1),kR=dt("mm",!1),NR=dt("in",!1),LR=dt("pt",!1),DR=dt("pc",!1),FR=Ji("angle"),UR=dt("deg",!1),jR=dt("rad",!1),GR=dt("grad",!1),VR=dt("turn",!1),zR=Ji("number"),BR=Ji("color"),HR=dt("#",!1),hw=Dl([["0","9"],["a","f"],["A","F"]],!1,!1),dw=Dl(["+","-"],!1,!1),Cs=Dl([["0","9"]],!1,!1),WR=dt(".",!1),qR=dt("e",!1),ZR=function(){return[]},YR=function(b,R){return{type:"function",name:b,parameters:R||[]}},JR=function(b,R){return R.length>0?IC(b,R,3):[b]},XR=function(b){return{type:"quantity",value:b.value,unit:b.unit}},KR=function(b){return{type:"color",colorType:b.type,value:b.value}},QR=function(b){return b},eC=function(){return bh()},tC=function(b){return{value:b,unit:"%"}},rC=function(b){return{value:b,unit:"px"}},iC=function(b){return{value:b,unit:"cm"}},sC=function(b){return{value:b,unit:"mm"}},nC=function(b){return{value:b,unit:"in"}},oC=function(b){return{value:b,unit:"pt"}},aC=function(b){return{value:b,unit:"pc"}},lC=function(b){return{value:b,unit:"deg"}},cC=function(b){return{value:b,unit:"rad"}},uC=function(b){return{value:b,unit:"grad"}},hC=function(b){return{value:b,unit:"turn"}},dC=function(b){return{value:b,unit:null}},pC=function(){return{type:"hex",value:bh()}},fC=function(b){return{type:"function",value:b}},mC=function(){return{type:"named",value:bh()}},yC=function(){return parseFloat(bh())},O=0|t.peg$currPos,Ge=O,aa=[{line:1,column:1}],Vr=O,wh=t.peg$maxFailExpected||[],Z=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in n))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');o=n[t.startRule]}function bh(){return e.substring(Ge,O)}function dt(b,R){return{type:"literal",text:b,ignoreCase:R}}function Dl(b,R,D){return{type:"class",parts:b,inverted:R,ignoreCase:D}}function gC(){return{type:"end"}}function Ji(b){return{type:"other",description:b}}function pw(b){var R,D=aa[b];if(D)return D;if(b>=aa.length)R=aa.length-1;else for(R=b;!aa[--R];);for(D={line:(D=aa[R]).line,column:D.column};R<b;)e.charCodeAt(R)===10?(D.line++,D.column=1):D.column++,R++;return aa[b]=D,D}function fw(b,R,D){var ie=pw(b),Oe=pw(R);return{source:s,start:{offset:b,line:ie.line,column:ie.column},end:{offset:R,line:Oe.line,column:Oe.column}}}function ue(b){O<Vr||(O>Vr&&(Vr=O,wh=[]),wh.push(b))}function vC(b,R,D){return new ul(ul.buildMessage(b,R),b,R,D)}function mw(){var b;return(b=_C())===i&&(b=wC()),b}function _C(){var b,R;return Z++,b=O,pt(),e.substr(O,4)===a?(R=a,O+=4):(R=i,Z===0&&ue(bt)),R!==i?(pt(),Ge=b,b=ZR()):(O=b,b=i),Z--,b===i&&Z===0&&ue(ne),b}function wC(){var b,R;if(b=[],(R=bm())!==i)for(;R!==i;)b.push(R),R=bm();else b=i;return b}function bm(){var b,R,D,ie;return b=O,pt(),(R=SC())!==i?(pt(),(D=bC())===i&&(D=null),pt(),e.charCodeAt(O)===41?(ie=l,O++):(ie=i,Z===0&&ue(mi)),ie!==i?(pt(),Ge=b,b=YR(R,D)):(O=b,b=i)):(O=b,b=i),b}function bC(){var b,R,D,ie,Oe,Ze,nt,qt;if(b=O,(R=Sm())!==i){for(D=[],ie=O,Oe=pt(),e.charCodeAt(O)===44?(Ze=h,O++):(Ze=i,Z===0&&ue(Dt)),Ze===i&&(Ze=null),nt=pt(),(qt=Sm())!==i?ie=Oe=[Oe,Ze,nt,qt]:(O=ie,ie=i);ie!==i;)D.push(ie),ie=O,Oe=pt(),e.charCodeAt(O)===44?(Ze=h,O++):(Ze=i,Z===0&&ue(Dt)),Ze===i&&(Ze=null),nt=pt(),(qt=Sm())!==i?ie=Oe=[Oe,Ze,nt,qt]:(O=ie,ie=i);Ge=b,b=JR(R,D)}else O=b,b=i;return b}function Sm(){var b,R;return b=O,(R=$C())===i&&(R=TC())===i&&(R=EC())===i&&(R=MC()),R!==i&&(Ge=b,R=XR(R)),(b=R)===i&&(b=O,(R=xC())!==i&&(Ge=b,R=KR(R)),b=R),b}function pt(){var b,R;for(Z++,b=[],R=e.charAt(O),z.test(R)?O++:(R=i,Z===0&&ue(_r));R!==i;)b.push(R),R=e.charAt(O),z.test(R)?O++:(R=i,Z===0&&ue(_r));return Z--,R=i,Z===0&&ue(Ee),b}function SC(){var b,R,D;return Z++,b=O,(R=yw())!==i?(e.charCodeAt(O)===40?(D=p,O++):(D=i,Z===0&&ue(xR)),D!==i?(Ge=b,b=QR(R)):(O=b,b=i)):(O=b,b=i),Z--,b===i&&(R=i,Z===0&&ue(MR)),b}function yw(){var b,R,D;if(Z++,b=O,R=[],D=e.charAt(O),q.test(D)?O++:(D=i,Z===0&&ue(uw)),D!==i)for(;D!==i;)R.push(D),D=e.charAt(O),q.test(D)?O++:(D=i,Z===0&&ue(uw));else R=i;return R!==i&&(Ge=b,R=eC()),Z--,(b=R)===i&&(R=i,Z===0&&ue(AR)),b}function $C(){var b,R,D;return Z++,b=O,pt(),(R=wr())!==i?(e.charCodeAt(O)===37?(D=f,O++):(D=i,Z===0&&ue(OR)),D!==i?(Ge=b,b=tC(R)):(O=b,b=i)):(O=b,b=i),Z--,b===i&&Z===0&&ue(IR),b}function TC(){var b,R,D;return Z++,b=O,pt(),(R=wr())!==i?(e.substr(O,2)===m?(D=m,O+=2):(D=i,Z===0&&ue(RR)),D!==i?(Ge=b,b=rC(R)):(O=b,b=i)):(O=b,b=i),b===i&&(b=O,pt(),(R=wr())!==i?(e.substr(O,2)===y?(D=y,O+=2):(D=i,Z===0&&ue(CR)),D!==i?(Ge=b,b=iC(R)):(O=b,b=i)):(O=b,b=i),b===i&&(b=O,pt(),(R=wr())!==i?(e.substr(O,2)===v?(D=v,O+=2):(D=i,Z===0&&ue(kR)),D!==i?(Ge=b,b=sC(R)):(O=b,b=i)):(O=b,b=i),b===i&&(b=O,pt(),(R=wr())!==i?(e.substr(O,2)===_?(D=_,O+=2):(D=i,Z===0&&ue(NR)),D!==i?(Ge=b,b=nC(R)):(O=b,b=i)):(O=b,b=i),b===i&&(b=O,pt(),(R=wr())!==i?(e.substr(O,2)===w?(D=w,O+=2):(D=i,Z===0&&ue(LR)),D!==i?(Ge=b,b=oC(R)):(O=b,b=i)):(O=b,b=i),b===i&&(b=O,pt(),(R=wr())!==i?(e.substr(O,2)===S?(D=S,O+=2):(D=i,Z===0&&ue(DR)),D!==i?(Ge=b,b=aC(R)):(O=b,b=i)):(O=b,b=i)))))),Z--,b===i&&Z===0&&ue(PR),b}function EC(){var b,R,D;return Z++,b=O,(R=wr())!==i?(e.substr(O,3)===E?(D=E,O+=3):(D=i,Z===0&&ue(UR)),D!==i?(Ge=b,b=lC(R)):(O=b,b=i)):(O=b,b=i),b===i&&(b=O,(R=wr())!==i?(e.substr(O,3)===x?(D=x,O+=3):(D=i,Z===0&&ue(jR)),D!==i?(Ge=b,b=cC(R)):(O=b,b=i)):(O=b,b=i),b===i&&(b=O,(R=wr())!==i?(e.substr(O,4)===A?(D=A,O+=4):(D=i,Z===0&&ue(GR)),D!==i?(Ge=b,b=uC(R)):(O=b,b=i)):(O=b,b=i),b===i&&(b=O,(R=wr())!==i?(e.substr(O,4)===P?(D=P,O+=4):(D=i,Z===0&&ue(VR)),D!==i?(Ge=b,b=hC(R)):(O=b,b=i)):(O=b,b=i)))),Z--,b===i&&(R=i,Z===0&&ue(FR)),b}function MC(){var b,R;return Z++,b=O,pt(),(R=wr())!==i?(Ge=b,b=dC(R)):(O=b,b=i),Z--,b===i&&Z===0&&ue(zR),b}function xC(){var b,R,D,ie;if(Z++,b=O,e.charCodeAt(O)===35?(R=C,O++):(R=i,Z===0&&ue(HR)),R!==i){if(D=[],ie=e.charAt(O),ee.test(ie)?O++:(ie=i,Z===0&&ue(hw)),ie!==i)for(;ie!==i;)D.push(ie),ie=e.charAt(O),ee.test(ie)?O++:(ie=i,Z===0&&ue(hw));else D=i;D!==i?(Ge=b,b=pC()):(O=b,b=i)}else O=b,b=i;return b===i&&(b=O,(R=bm())!==i&&(Ge=b,R=fC(R)),(b=R)===i&&(b=O,(R=yw())!==i&&(Ge=b,R=mC()),b=R)),Z--,b===i&&(R=i,Z===0&&ue(BR)),b}function wr(){var b,R,D,ie,Oe,Ze,nt,qt;for(b=O,R=e.charAt(O),ce.test(R)?O++:(R=i,Z===0&&ue(dw)),R===i&&(R=null),D=O,ie=[],Oe=e.charAt(O),ye.test(Oe)?O++:(Oe=i,Z===0&&ue(Cs));Oe!==i;)ie.push(Oe),Oe=e.charAt(O),ye.test(Oe)?O++:(Oe=i,Z===0&&ue(Cs));if(e.charCodeAt(O)===46?(Oe=U,O++):(Oe=i,Z===0&&ue(WR)),Oe!==i){if(Ze=[],nt=e.charAt(O),ye.test(nt)?O++:(nt=i,Z===0&&ue(Cs)),nt!==i)for(;nt!==i;)Ze.push(nt),nt=e.charAt(O),ye.test(nt)?O++:(nt=i,Z===0&&ue(Cs));else Ze=i;Ze!==i?D=ie=[ie,Oe,Ze]:(O=D,D=i)}else O=D,D=i;if(D===i)if(D=[],ie=e.charAt(O),ye.test(ie)?O++:(ie=i,Z===0&&ue(Cs)),ie!==i)for(;ie!==i;)D.push(ie),ie=e.charAt(O),ye.test(ie)?O++:(ie=i,Z===0&&ue(Cs));else D=i;if(D!==i){if(ie=O,e.charCodeAt(O)===101?(Oe=F,O++):(Oe=i,Z===0&&ue(qR)),Oe!==i){if(Ze=e.charAt(O),ce.test(Ze)?O++:(Ze=i,Z===0&&ue(dw)),Ze===i&&(Ze=null),nt=[],qt=e.charAt(O),ye.test(qt)?O++:(qt=i,Z===0&&ue(Cs)),qt!==i)for(;qt!==i;)nt.push(qt),qt=e.charAt(O),ye.test(qt)?O++:(qt=i,Z===0&&ue(Cs));else nt=i;nt!==i?ie=Oe=[Oe,Ze,nt]:(O=ie,ie=i)}else O=ie,ie=i;ie===i&&(ie=null),Ge=b,b=yC()}else O=b,b=i;return b}function AC(b,R){return b.map(function(D){return D[R]})}function IC(b,R,D){return[b].concat(AC(R,D))}if(r=o(),t.peg$library)return{peg$result:r,peg$currPos:O,peg$FAILED:i,peg$maxFailExpected:wh,peg$maxFailPos:Vr};if(r!==i&&O===e.length)return r;throw r!==i&&O<e.length&&ue(gC()),vC(wh,Vr<e.length?e.charAt(Vr):null,Vr<e.length?fw(Vr,Vr+1):fw(Vr,Vr))}function bR(e){if(!e||e.length===0)return null;if(typeof e=="string"){const r=iT(e);return r&&r.length!==0?r:null}const t=e.map(r=>{if(!Number.isFinite(r.scale)||r.scale<=0)throw new k("effect:invalid-scale","scale must be finite and greater than 0",{stop:r});return{scale:r.scale,effects:iT(r.value)}});t.sort((r,i)=>i.effects.length-r.effects.length);for(let r=0;r<t.length-1;r++){if(!u6(t[r].effects,t[r+1].effects))throw new k("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[r].effects,b:t[r+1].effects});h6(t[r].effects,t[r+1].effects)}return t.sort((r,i)=>i.scale-r.scale),t}function iT(e){let t;if(!e)return[];try{t=oX(e)}catch(r){throw new k("effect:invalid-syntax","Invalid effect syntax",{value:e,error:r})}return t.map(r=>aX(r))}function aX(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return lX(e);case"opacity":return cX(e);case"hue-rotate":return uX(e);case"blur":return hX(e);case"drop-shadow":return dX(e);case"bloom":return pX(e)}}catch(t){throw t.details.filter=e,t}throw new k("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function lX(e){let t=1;return Ll(e.parameters,1),e.parameters.length===1&&(t=ni(e.parameters[0])),new M0(e.name,t)}function cX(e){let t=1;return Ll(e.parameters,1),e.parameters.length===1&&(t=ni(e.parameters[0])),new uM(t)}function uX(e){let t=0;return Ll(e.parameters,1),e.parameters.length===1&&(t=_X(e.parameters[0])),new lM(t)}function hX(e){let t=0;return Ll(e.parameters,1),e.parameters.length===1&&(t=cw(e.parameters[0]),_h(t,e.parameters[0])),new iM(t)}function dX(e){const t=[];let r=null;for(const i of e.parameters)if(i.type==="color"){if(t.length&&Object.freeze(t),r)throw new k("effect:type-error","Accepts only one color",{});r=wX(i)}else{const s=cw(i);if(Object.isFrozen(t))throw new k("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(s),t.length===3&&_h(s,i)}if(t.length<2||t.length>3)throw new k("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new oM(t[0],t[1],t[2]||0,r||SR("black"))}function pX(e){let t=1,r=0,i=0;return Ll(e.parameters,3),e.parameters[0]&&(t=ni(e.parameters[0])),e.parameters[1]&&(r=cw(e.parameters[1]),_h(r,e.parameters[1])),e.parameters[2]&&(i=ni(e.parameters[2])),new tM(t,r,i)}function Ll(e,t){if(e.length>t)throw new k("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function wm(e){if(e.type==="color")return"<color>";if(e.unit){if(e.unit in lw)return"<length>";if(e.unit in aw)return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function _h(e,t){if(e<0)throw new k("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function fX(e){if(e.type!=="quantity"||e.unit!==null)throw new k("effect:type-error",`Expected <double>, Actual: ${wm(e)}`,{term:e})}function mX(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new k("effect:type-error",`Expected <double> or <percentage>, Actual: ${wm(e)}`,{term:e})}nX(ul,Error),ul.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var r,i=null;for(r=0;r<e.length;r++)if(e[r].source===this.location.source){i=e[r].text.split(/\r\n|\n|\r/g);break}var s=this.location.start,n=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(s):s,o=this.location.source+":"+n.line+":"+n.column;if(i){var a=this.location.end,l=Cy("",n.line.toString().length," "),h=i[s.line-1],p=(s.line===a.line?a.column:h.length+1)-s.column||1;t+=`
 --> `+o+`
`+l+` |
`+n.line+" | "+h+`
`+l+" | "+Cy("",s.column-1," ")+Cy("",p,"^")}else t+=`
 at `+o}return t},ul.buildMessage=function(e,t){var r={literal:function(h){return'"'+s(h.text)+'"'},class:function(h){var p=h.parts.map(function(f){return Array.isArray(f)?n(f[0])+"-"+n(f[1]):n(f)});return"["+(h.inverted?"^":"")+p.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(h){return h.description}};function i(h){return h.charCodeAt(0).toString(16).toUpperCase()}function s(h){return h.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(p){return"\\x0"+i(p)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(p){return"\\x"+i(p)})}function n(h){return h.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(p){return"\\x0"+i(p)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(p){return"\\x"+i(p)})}function o(h){return r[h.type](h)}function a(h){var p,f,m=h.map(o);if(m.sort(),m.length>0){for(p=1,f=1;p<m.length;p++)m[p-1]!==m[p]&&(m[f]=m[p],f++);m.length=f}switch(m.length){case 1:return m[0];case 2:return m[0]+" or "+m[1];default:return m.slice(0,-1).join(", ")+", or "+m[m.length-1]}}function l(h){return h?'"'+s(h)+'"':"end of input"}return"Expected "+a(e)+" but "+l(t)+" found."};const aw={deg:1,grad:.9,rad:180/Math.PI,turn:360};function yX(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&aw[e.unit]!=null))throw new k("effect:type-error",`Expected <angle>, Actual: ${wm(e)}`,{term:e})}const lw={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function gX(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&lw[e.unit]!=null))throw new k("effect:type-error",`Expected <length>, Actual: ${wm(e)}`,{term:e})}function ni(e){mX(e);const t=e.value;return _h(t,e),e.unit==="%"?.01*t:t}function vX(e){return fX(e),_h(e.value,e),e.value}function _X(e){return yX(e),e.value*aw[e.unit]||0}function cw(e){return gX(e),e.value*lw[e.unit]||0}function wX(e){switch(e.colorType){case"hex":return V4(e.value);case"named":return SR(e.value);case"function":return $X(e.value)}}function SR(e){if(!k3(e))throw new k("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return G4(e)}const bX=/^rgba?/i,SX=/^hsla?/i;function $X(e){if(Ll(e.parameters,4),bX.test(e.name))return[ni(e.parameters[0]),ni(e.parameters[1]),ni(e.parameters[2]),e.parameters[3]?ni(e.parameters[3]):1];if(SX.test(e.name))return N3(vX(e.parameters[0]),ni(e.parameters[1]),ni(e.parameters[2]),e.parameters[3]?ni(e.parameters[3]):1);throw new k("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function TX(e,t,r){var i;try{return xX(e)}catch(s){(i=r==null?void 0:r.messages)==null||i.push(s)}return null}function EX(e,t,r,i){try{const s=MX(e);Ko(r,s,t)}catch(s){i.messages&&i.messages.push(s)}}function MX(e){const t=bR(e);return t?d6(t)?t.map(r=>r.toJSON()):t.map(({scale:r,effects:i})=>({scale:r,value:i.map(s=>s.toJSON())})):null}function xX(e){if(!e||e.length===0)return null;if(AX(e)){const t=[];for(const r of e)t.push({scale:r.scale,value:sT(r.value)});return t}return sT(e)}function AX(e){const t=e[0];return!!t&&"scale"in t}function sT(e){if(!(e!=null&&e.length))return"";const t=[];for(const r of e){let i=[];switch(r.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":i=[ts(r,"amount")];break;case"blur":i=[ts(r,"radius","pt")];break;case"hue-rotate":i=[ts(r,"angle","deg")];break;case"drop-shadow":i=[ts(r,"xoffset","pt"),ts(r,"yoffset","pt"),ts(r,"blurRadius","pt"),IX(r,"color")];break;case"bloom":i=[ts(r,"strength"),ts(r,"radius","pt"),ts(r,"threshold")]}const s=`${r.type}(${i.filter(Boolean).join(" ")})`;bR(s),t.push(s)}return t.join(" ")}function ts(e,t,r){if(e[t]==null)throw new k("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return r?e[t]+r:""+e[t]}function IX(e,t){if(e[t]==null)throw new k("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const r=e[t];return`rgba(${r[0]||0}, ${r[1]||0}, ${r[2]||0}, ${r[3]/255||0})`}const OX={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}},nT={read:{reader:TX},write:{allowNull:!0,writer:EX}},PX={json:{read:!1,write:!1,origins:{"web-map":nT,"portal-item":nT}}},RX=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return u([d(OX)],t.prototype,"blendMode",void 0),u([d(PX)],t.prototype,"effect",void 0),t=u([$("esri.layers.mixins.BlendLayer")],t),t},CX=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const r={minScale:this.minScale,maxScale:this.maxScale},i=this.parent;i&&"effectiveScaleRange"in i&&kX(r,i.effectiveScaleRange);const s=this._get("effectiveScaleRange");return s&&s.minScale===r.minScale&&s.maxScale===r.maxScale?s:r}};return u([d({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),u([d({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),u([d({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=u([$("esri.layers.mixins.ScaleRangeLayer")],t),t};function kX(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}var Z1;let Jc=Z1=class extends W{constructor(e){super(e)}async collectRequiredFields(e,t){return kn(e,t,this.expression)}clone(){return new Z1({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};u([d({type:String,json:{write:!0}})],Jc.prototype,"expression",void 0),u([d({type:String,json:{write:!0}})],Jc.prototype,"title",void 0),Jc=Z1=u([$("esri.symbols.support.FeatureExpressionInfo")],Jc);const oT=Jc,$R={unknown:1,inches:mt(1,"meters","inches"),feet:mt(1,"meters","feet"),"us-feet":mt(1,"meters","us-feet"),yards:mt(1,"meters","yards"),miles:mt(1,"meters","miles"),"nautical-miles":mt(1,"meters","nautical-miles"),millimeters:mt(1,"meters","millimeters"),centimeters:mt(1,"meters","centimeters"),decimeters:mt(1,"meters","decimeters"),meters:mt(1,"meters","meters"),kilometers:mt(1,"meters","kilometers"),"decimal-degrees":1/O5(1,"meters",We.radius)};function Eoe(e){return 1/($R[e]||1)}function NX(){const e=Object.keys($R);return _T(e,"decimal-degrees"),e.sort(),e}const LX=NX();var Y1;const ld=Wt()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),aT=new ut({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let gs=Y1=class extends W{constructor(e){super(e),this.offset=null}readFeatureExpressionInfo(e,t){return e??(t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(e,t,r,i){t[r]=e.write({},i),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new Y1({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&KC(this.featureExpressionInfo,e.featureExpressionInfo)}};u([d({type:oT,json:{write:!0}})],gs.prototype,"featureExpressionInfo",void 0),u([ve("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],gs.prototype,"readFeatureExpressionInfo",null),u([pe("featureExpressionInfo",{featureExpressionInfo:{type:oT},"featureExpression.value":{type:[0]}})],gs.prototype,"writeFeatureExpressionInfo",null),u([d({type:ld.apiValues,nonNullable:!0,json:{type:ld.jsonValues,read:ld.read,write:{writer:ld.write,isRequired:!0}}})],gs.prototype,"mode",null),u([d({type:Number,json:{write:!0}})],gs.prototype,"offset",void 0),u([d({type:LX,json:{type:String,read:aT.read,write:aT.write}})],gs.prototype,"unit",null),gs=Y1=u([$("esri.symbols.support.ElevationInfo")],gs);const DX=gs;let vs=class extends RX(CX(Vx)){constructor(e){super(e),this.elevationInfo=null,this.graphics=new jo,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,t){return super.on(e,t)}graphicChanged(e){this.emit("graphic-update",e)}};u([d({type:DX})],vs.prototype,"elevationInfo",void 0),u([d(Q0(jo,"graphics"))],vs.prototype,"graphics",void 0),u([d({type:["show","hide"]})],vs.prototype,"listMode",void 0),u([d()],vs.prototype,"screenSizePerspectiveEnabled",void 0),u([d({readOnly:!0})],vs.prototype,"type",void 0),u([d({constructOnly:!0})],vs.prototype,"internal",void 0),vs=u([$("esri.layers.GraphicsLayer")],vs);const FX=vs,UX=(e,t)=>{const r={type:"esriSMS",style:"esriSMSPath",path:`M 0 0 L 2 ${e} L 4 0 Z`,color:[85,255,0,64],size:t,angle:180,xoffset:0,yoffset:t/2,outline:{color:[0,92,230,255],width:1}};return ph.fromJSON(r)},TR=new zx({basemap:"terrain"});new sX({map:TR,container:"map",center:[-87,47.5],zoom:10});const ER=new FX({id:"spike"});TR.add(ER);const jX=new ae({longitude:-87,latitude:47.5}),GX=UX(18,24),VX=new ef({geometry:jX,symbol:GX});ER.add(VX);export{st as $,pP as A,B,mP as C,lf as D,h$ as E,gu as F,Ce as G,dz as H,Ht as I,Tn as J,XE as K,lt as L,S$ as M,Bne as N,Yo as O,Nt as P,xK as Q,uf as R,QE as S,Qe as T,Hu as U,K as V,Os as W,O3 as X,An as Y,iE as Z,j as _,_W as a,ute as a$,Ae as a0,cc as a1,de as a2,oA as a3,ra as a4,L1 as a5,o$ as a6,cf as a7,ya as a8,ki as a9,bQ as aA,Um as aB,fe as aC,XX as aD,N as aE,NC as aF,RM as aG,cne as aH,Qq as aI,r$ as aJ,s$ as aK,n$ as aL,i$ as aM,sh as aN,$n as aO,Y as aP,kM as aQ,qv as aR,NM as aS,CM as aT,iS as aU,Gre as aV,bee as aW,GT as aX,Pf as aY,mt as aZ,lte as a_,TT as aa,MT as ab,xT as ac,ZX as ad,UC as ae,hK as af,Cne as ag,tre as ah,qj as ai,nre as aj,ore as ak,Kte as al,Iu as am,n_ as an,Ct as ao,nv as ap,fi as aq,sre as ar,Ky as as,Fte as at,n9 as au,ph as av,na as aw,F_ as ax,um as ay,Dn as az,he as b,zf as b$,cte as b0,Vi as b1,xf as b2,oi as b3,Bi as b4,ir as b5,Gv as b6,di as b7,DT as b8,er as b9,Yte as bA,hre as bB,oG as bC,Lu as bD,Nu as bE,zte as bF,Jte as bG,rre as bH,ire as bI,Uee as bJ,jee as bK,zee as bL,Vee as bM,Gee as bN,vV as bO,te as bP,iB as bQ,cS as bR,Ko as bS,l_ as bT,jte as bU,ut as bV,Gr as bW,W as bX,mV as bY,w_ as bZ,Oie as b_,zt as ba,Xh as bb,Ree as bc,yO as bd,$6 as be,ko as bf,I as bg,KQ as bh,Qo as bi,ve as bj,R7 as bk,Pie as bl,pe as bm,Te as bn,JQ as bo,JK as bp,_n as bq,x3 as br,mL as bs,Fw as bt,Of as bu,iQ as bv,ae as bw,Vf as bx,Be as by,JA as bz,jo as c,vu as c$,_l as c0,On as c1,aee as c2,cb as c3,p7 as c4,nee as c5,$R as c6,Zte as c7,rr as c8,sK as c9,Yg as cA,VP as cB,SJ as cC,aoe as cD,RY as cE,loe as cF,soe as cG,VY as cH,m5 as cI,c2 as cJ,UA as cK,re as cL,Ln as cM,jre as cN,Oee as cO,XQ as cP,AT as cQ,IT as cR,g5 as cS,Iv as cT,Ov as cU,v5 as cV,Rf as cW,Cf as cX,lh as cY,Ru as cZ,Fn as c_,me as ca,Gn as cb,Cn as cc,Wi as cd,n0 as ce,Fe as cf,s0 as cg,a0 as ch,kp as ci,nA as cj,xm as ck,ch as cl,kg as cm,kee as cn,Rre as co,Vre as cp,Nte as cq,xu as cr,Qc as cs,ky as ct,zq as cu,gT as cv,ih as cw,eQ as cx,Kre as cy,fu as cz,G_ as d,Vx as d$,tq as d0,u3 as d1,yV as d2,Qte as d3,Ev as d4,Zv as d5,Bo as d6,Yj as d7,cre as d8,Zj as d9,YO as dA,iq as dB,eee as dC,X3 as dD,jn as dE,qW as dF,xD as dG,jp as dH,RQ as dI,Eoe as dJ,ew as dK,MK as dL,iv as dM,_f as dN,jr as dO,O4 as dP,A4 as dQ,pl as dR,Qne as dS,fB as dT,are as dU,Qu as dV,Yv as dW,RX as dX,CX as dY,Lt as dZ,am as d_,lre as da,fr as db,ree as dc,Cr as dd,kf as de,iP as df,GW as dg,cq as dh,k1 as di,Il as dj,Uv as dk,JO as dl,QO as dm,rP as dn,IW as dp,xW as dq,cK as dr,_L as ds,dl as dt,wv as du,XC as dv,J6 as dw,Aie as dx,AW as dy,eP as dz,dse as e,Va as e$,L3 as e0,kW as e1,NW as e2,sq as e3,vE as e4,$f as e5,kv as e6,Lf as e7,Mu as e8,ZT as e9,BX as eA,Lre as eB,Bre as eC,vw as eD,YQ as eE,Fie as eF,sB as eG,Uo as eH,Pk as eI,fK as eJ,bn as eK,pK as eL,Ps as eM,Zi as eN,Do as eO,YK as eP,oQ as eQ,qu as eR,Dw as eS,c$ as eT,_u as eU,OL as eV,fv as eW,Lte as eX,pee as eY,be as eZ,tne as e_,yr as ea,f4 as eb,vv as ec,m4 as ed,KK as ee,HQ as ef,In as eg,Dy as eh,a3 as ei,e3 as ej,Fee as ek,ke as el,Eee as em,w7 as en,Pee as eo,$ee as ep,FX as eq,Ib as er,un as es,$u as et,ct as eu,Ku as ev,ooe as ew,noe as ex,ioe as ey,ate as ez,_e as f,QX as f$,Nf as f0,gd as f1,H0 as f2,Nee as f3,th as f4,av as f5,HK as f6,BK as f7,Xre as f8,fQ as f9,He as fA,zi as fB,Ju as fC,vt as fD,XB as fE,iee as fF,DB as fG,UQ as fH,ab as fI,l3 as fJ,c3 as fK,JD as fL,J3 as fM,UW as fN,K3 as fO,wD as fP,tee as fQ,OQ as fR,p5 as fS,x2 as fT,hte as fU,dte as fV,M as fW,ED as fX,X9 as fY,Gf as fZ,Uf as f_,mr as fa,aD as fb,Wt as fc,eoe as fd,Jk as fe,Li as ff,TX as fg,EX as fh,rv as fi,PO as fj,x1 as fk,Tl as fl,RO as fm,BB as fn,X_ as fo,Lw as fp,ip as fq,Jm as fr,GK as fs,See as ft,ZW as fu,UB as fv,yt as fw,GB as fx,OO as fy,Ml as fz,qQ as g,hm as g$,YW as g0,FW as g1,Bt as g2,aB as g3,P7 as g4,En as g5,yl as g6,E7 as g7,Cd as g8,sQ as g9,gK as gA,BN as gB,YN as gC,KN as gD,Di as gE,eK as gF,Uk as gG,hi as gH,Fr as gI,je as gJ,f0 as gK,w9 as gL,TQ as gM,EQ as gN,MQ as gO,xQ as gP,AQ as gQ,IQ as gR,eh as gS,J as gT,lm as gU,om as gV,cm as gW,L_ as gX,uh as gY,EG as gZ,hh as g_,_T as ga,sE as gb,ND as gc,lD as gd,cD as ge,uD as gf,sD as gg,LD as gh,Ute as gi,v9 as gj,g9 as gk,y6 as gl,$b as gm,dr as gn,Fv as go,nK as gp,Lee as gq,Xa as gr,TL as gs,Gi as gt,DX as gu,e$ as gv,t$ as gw,Uie as gx,zB as gy,x$ as gz,QV as h,Hse as h$,N_ as h0,ZQ as h1,iie as h2,dh as h3,ze as h4,nie as h5,aie as h6,f9 as h7,zX as h8,D1 as h9,Cu as hA,RE as hB,I7 as hC,QJ as hD,ov as hE,Pa as hF,ws as hG,lv as hH,Ak as hI,KC as hJ,pr as hK,U0 as hL,sA as hM,kie as hN,Aee as hO,N6 as hP,dK as hQ,Rv as hR,Q5 as hS,bR as hT,u6 as hU,h6 as hV,QS as hW,zse as hX,Bse as hY,Yse as hZ,Jse as h_,yu as ha,TO as hb,Vv as hc,pd as hd,oD as he,RW as hf,lq as hg,uq as hh,YB as hi,f5 as hj,Kx as hk,b5 as hl,iD as hm,tf as hn,CW as ho,XO as hp,Wp as hq,zW as hr,tP as hs,v_ as ht,Iie as hu,JI as hv,Rie as hw,Cie as hx,Qd as hy,lN as hz,_t as i,rh as i$,Wse as i0,qse as i1,Zse as i2,sie as i3,fj as i4,Dc as i5,kI as i6,ere as i7,mQ as i8,toe as i9,jC as iA,XK as iB,rL as iC,If as iD,nQ as iE,ku as iF,pZ as iG,F1 as iH,Pne as iI,l$ as iJ,kr as iK,dP as iL,bs as iM,a$ as iN,Rne as iO,KS as iP,A6 as iQ,x6 as iR,mee as iS,Iee as iT,af as iU,rne as iV,ine as iW,sne as iX,Kq as iY,J5 as iZ,i4 as i_,Sv as ia,YE as ib,U_ as ic,U3 as id,gp as ie,z4 as ig,M_ as ih,Cre as ii,Pre as ij,Rk as ik,AK as il,K1 as im,Q1 as io,g as ip,wQ as iq,uoe as ir,coe as is,roe as it,_m as iu,vm as iv,ow as iw,tr as ix,lY as iy,NU as iz,o_ as j,QZ as j$,jQ as j0,pM as j1,cd as j2,rK as j3,iK as j4,tK as j5,ea as j6,gL as j7,rie as j8,Za as j9,Gte as jA,j3 as jB,AD as jC,_D as jD,bD as jE,Ik as jF,pne as jG,pO as jH,AO as jI,Vu as jJ,V_ as jK,E1 as jL,nO as jM,yh as jN,FK as jO,hZ as jP,kO as jQ,Is as jR,Pn as jS,OX as jT,PX as jU,ET as jV,UE as jW,ZK as jX,h3 as jY,Jw as jZ,A3 as j_,Jo as ja,OZ as jb,RZ as jc,CZ as jd,aq as je,fH as jf,mH as jg,LC as jh,Ure as ji,pz as jj,KO as jk,OM as jl,vee as jm,Ue as jn,Xu as jo,dI as jp,zO as jq,lE as jr,kK as js,CK as jt,Hk as ju,Bk as jv,KX as jw,FC as jx,Mee as jy,pG as jz,vr as k,jie as k$,aQ as k0,We as k1,c9 as k2,$V as k3,DI as k4,SV as k5,see as k6,jB as k7,Az as k8,$z as k9,Are as kA,xre as kB,NG as kC,Ore as kD,Ire as kE,gv as kF,DD as kG,kD as kH,jW as kI,CD as kJ,FG as kK,jT as kL,Bu as kM,cH as kN,Qre as kO,eie as kP,tie as kQ,ene as kR,$$ as kS,Use as kT,BJ as kU,li as kV,ym as kW,cee as kX,SO as kY,EO as kZ,_B as k_,mh as ka,QQ as kb,Jv as kc,Wne as kd,QK as ke,rE as kf,u$ as kg,One as kh,dZ as ki,m$ as kj,f$ as kk,Dte as kl,sa as km,kn,hN as ko,tm as kp,HB as kq,Io as kr,Vt as ks,o5 as kt,sI as ku,bW as kv,lK as kw,o4 as kx,_Q as ky,Hne as kz,rte as l,jse as l$,AB as l0,ll as l1,Gie as l2,fD as l3,pc as l4,Bee as l5,Hi as l6,wj as l7,Sne as l8,uP as l9,Xte as lA,Bte as lB,Wte as lC,Hte as lD,qte as lE,ure as lF,Vne as lG,bw as lH,Vte as lI,zne as lJ,fV as lK,rI as lL,RK as lM,Uw as lN,iG as lO,NQ as lP,LQ as lQ,DQ as lR,pN as lS,fne as lT,B_ as lU,Ms as lV,dne as lW,hne as lX,mZ as lY,une as lZ,E$ as l_,dee as la,Tne as lb,$ne as lc,Dse as ld,Fse as le,Ni as lf,Gz as lg,fm as lh,oie as li,BC as lj,lie as lk,y0 as ll,Vse as lm,Vz as ln,dO as lo,A$ as lp,_P as lq,vne as lr,_ne as ls,wne as lt,bne as lu,one as lv,lne as lw,ane as lx,PZ as ly,Lse as lz,Nn as m,nm as m$,Gse as m0,yne as m1,mne as m2,Ene as m3,Mne as m4,Xse as m5,xne as m6,Ane as m7,Xq as m8,tZ as m9,vte as mA,OU as mB,IU as mC,qX as mD,aG as mE,BI as mF,aY as mG,nG as mH,Du as mI,Uu as mJ,oK as mK,doe as mL,$_ as mM,mG as mN,yG as mO,H2 as mP,WJ as mQ,Gk as mR,_6 as mS,fee as mT,Cee as mU,D6 as mV,_ee as mW,S6 as mX,wee as mY,Hre as mZ,LB as m_,nne as ma,CP as mb,hl as mc,gne as md,rQ as me,dB as mf,iA as mg,WB as mh,W_ as mi,Fne as mj,Une as mk,jne as ml,AZ as mm,vP as mn,Kse as mo,Qse as mp,EZ as mq,Gne as mr,Nse as ms,Kee as mt,R9 as mu,XS as mv,Eb as mw,tte as mx,ji as my,_te as mz,V as n,HX as n$,Tee as n0,$t as n1,CL as n2,Dre as n3,Fre as n4,QD as n5,KD as n6,Gu as n7,hO as n8,t3 as n9,jk as nA,cY as nB,lee as nC,b3 as nD,Np as nE,CQ as nF,ju as nG,pm as nH,uz as nI,Rz as nJ,Cz as nK,gee as nL,NS as nM,hee as nN,vz as nO,_z as nP,KW as nQ,Ii as nR,fz as nS,CC as nT,JX as nU,UD as nV,XD as nW,zD as nX,uee as nY,WX as nZ,RC as n_,xv as na,u0 as nb,ite as nc,_3 as nd,P5 as ne,O5 as nf,Qz as ng,z_ as nh,yee as ni,E6 as nj,bz as nk,lO as nl,uO as nm,sf as nn,rq as no,rf as np,Pz as nq,_9 as nr,Iz as ns,mz as nt,PQ as nu,XU as nv,kQ as nw,I5 as nx,SQ as ny,$Q as nz,u as o,Nre as o0,kre as o1,kne as o2,xee as o3,zre as o4,Un as o5,pte as o6,mte as o7,qne as o8,use as p,tQ as q,LT as r,k as s,Sf as t,d as u,$ as v,se as w,wG as x,Ve as y,ef as z};
//# sourceMappingURL=spike-symbols.js.map
